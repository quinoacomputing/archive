<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: inciter::AuxSolverLumpMassDiff Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceinciter.html">inciter</a></li><li class="navelem"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html">AuxSolverLumpMassDiff</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classinciter_1_1_aux_solver_lump_mass_diff-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">inciter::AuxSolverLumpMassDiff Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a16de7349d8ac2685584c5ca3fa5bcd92"><td class="memTemplParams" colspan="2">template&lt;class HostProxy , class Host &gt; </td></tr>
<tr class="memitem:a16de7349d8ac2685584c5ca3fa5bcd92"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html#a16de7349d8ac2685584c5ca3fa5bcd92">chareauxlhs</a> (const HostProxy &amp;hostproxy, Host *const host, std::size_t lower, std::size_t upper, int fromch, const std::vector&lt; std::size_t &gt; &amp;gid, const tk::Fields &amp;mass, std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;auxlhsimport, std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;auxlhs)</td></tr>
<tr class="separator:a16de7349d8ac2685584c5ca3fa5bcd92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9419e540fea080ef7abf1608fa0d6c22"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html#a9419e540fea080ef7abf1608fa0d6c22">addauxlhs</a> (int fromch, const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;mass, std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;auxlhsimport, std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;auxlhs)</td></tr>
<tr class="memdesc:a9419e540fea080ef7abf1608fa0d6c22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive and add lhs vector to the auxiliary system from fellow group branches.  <a href="#a9419e540fea080ef7abf1608fa0d6c22">More...</a><br /></td></tr>
<tr class="separator:a9419e540fea080ef7abf1608fa0d6c22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02da952f67423dcfcd4a8838a56192c4"><td class="memTemplParams" colspan="2">template&lt;class HostProxy , class Host &gt; </td></tr>
<tr class="memitem:a02da952f67423dcfcd4a8838a56192c4"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html#a02da952f67423dcfcd4a8838a56192c4">chareauxrhs</a> (const HostProxy &amp;hostproxy, Host *const host, std::size_t lower, std::size_t upper, int fromch, const std::vector&lt; std::size_t &gt; &amp;gid, const tk::Fields &amp;diff, std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;auxrhsimport, std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;auxrhs)</td></tr>
<tr class="separator:a02da952f67423dcfcd4a8838a56192c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05719c700869da6ead2eabd63461f1cb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html#a05719c700869da6ead2eabd63461f1cb">addauxrhs</a> (int fromch, const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;diff, std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;auxrhsimport, std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;auxrhs)</td></tr>
<tr class="memdesc:a05719c700869da6ead2eabd63461f1cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive and add rhs vector to the auxiliary system from fellow group branches.  <a href="#a05719c700869da6ead2eabd63461f1cb">More...</a><br /></td></tr>
<tr class="separator:a05719c700869da6ead2eabd63461f1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b62918778552feb21b99e16fc13e80a"><td class="memTemplParams" colspan="2">template&lt;class Host &gt; </td></tr>
<tr class="memitem:a1b62918778552feb21b99e16fc13e80a"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html#a1b62918778552feb21b99e16fc13e80a">solve</a> (Host *const host, std::size_t ncomp, const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;rhs, const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;lump, std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;diff)</td></tr>
<tr class="separator:a1b62918778552feb21b99e16fc13e80a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8d8d0422f29d59e3eb7485465484138"><td class="memTemplParams" colspan="2">template&lt;class WorkerProxy &gt; </td></tr>
<tr class="memitem:ab8d8d0422f29d59e3eb7485465484138"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html#ab8d8d0422f29d59e3eb7485465484138">update</a> (const WorkerProxy &amp;worker, const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;solimport, const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;sol)</td></tr>
<tr class="memdesc:ab8d8d0422f29d59e3eb7485465484138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Group low order solution vector by workers and send each the parts back to workers that own them.  <a href="#ab8d8d0422f29d59e3eb7485465484138">More...</a><br /></td></tr>
<tr class="separator:ab8d8d0422f29d59e3eb7485465484138"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classinciter_1_1_aux_solver_lump_mass_diff.html">AuxSolverLumpMassDiff</a>: Auxiliary linear solver: lumped mass + diffusion</p>
<p>This class defines member functions that implement assembling/merging the left and right hand sides of a linear system resulting from a high order discretization obtained by lumping the left hand side consistent mass matrix and adding mass diffusion to the right hand side vector. Used in flux-corrected transport for transport equations as the low order system. This is only the functionality that is needed for the parallel merging of the linear system. Used by and abstracted away from <a class="el" href="classtk_1_1_lin_sys_merger.html">tk::LinSysMerger</a> as its auxiliary solver, injected in via the template argument AuxSolver. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="_lin_sys_merger_8h.html" title="Charm++ chare linear system merger group to solve a linear system. ">src/LinSys/LinSysMerger.h</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>All member functions are static as they are called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00035">35</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9419e540fea080ef7abf1608fa0d6c22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9419e540fea080ef7abf1608fa0d6c22">&#9670;&nbsp;</a></span>addauxlhs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inciter::AuxSolverLumpMassDiff::addauxlhs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>mass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxlhsimport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxlhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive and add lhs vector to the auxiliary system from fellow group branches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fromch</td><td>Charm chare array index contribution coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mass</td><td>Portion of the lhs vector contributed to the auxiliary (low order) linear system, containing global row indices and values </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxlhsimport</td><td>Import map associating a list of global row ids to a worker chare id during the communication of the low order lhs vector </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxlhs</td><td>Part of the low order (auxiliary) system lhs vector owned by my PE. These are the vector of values (for each scalar equation solved) associated to global mesh point row ids. This vector collects the nonzero values of the low order (auxiliary) linear system lhs "matrix" solution, in the form of a vector, since the matrix of this particular low order system is lumped, i.e., stored as a single vector of diagonal elements of the lhs matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Static member function as it is called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00104">104</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keyword">using</span> tk::operator+=;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : mass) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        auxlhsimport[ fromch ].push_back( r.first );</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        auxlhs[ r.first ] += r.second;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a05719c700869da6ead2eabd63461f1cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05719c700869da6ead2eabd63461f1cb">&#9670;&nbsp;</a></span>addauxrhs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inciter::AuxSolverLumpMassDiff::addauxrhs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxrhsimport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxrhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive and add rhs vector to the auxiliary system from fellow group branches. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fromch</td><td>Charm chare array index contribution coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">diff</td><td>Portion of the right-hand side vector contributed, containing global row indices and values </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxrhsimport</td><td>Import map associating a list of global row ids to a worker chare id during the communication of the mass diffusion rhs vector vector. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxrhs</td><td>Part of the mass diffusion right-hand side vector owned by my PE. Vector of values (for each scalar equation solved) associated to global mesh point row ids. This vector collects the mass diffusion terms to be added to the right-hand side for the low order solution (for flux-corrected transport). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Static member function as it is called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00178">178</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keyword">using</span> tk::operator+=;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : diff) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        auxrhsimport[ fromch ].push_back( r.first );</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        auxrhs[ r.first ] += r.second;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a16de7349d8ac2685584c5ca3fa5bcd92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16de7349d8ac2685584c5ca3fa5bcd92">&#9670;&nbsp;</a></span>chareauxlhs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class HostProxy , class Host &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inciter::AuxSolverLumpMassDiff::chareauxlhs </td>
          <td>(</td>
          <td class="paramtype">const HostProxy &amp;&#160;</td>
          <td class="paramname"><em>hostproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Host *const&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>lower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>upper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const tk::Fields &amp;&#160;</td>
          <td class="paramname"><em>mass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxlhsimport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxlhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Chares contribute to the lhs of the low order linear system </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hostproxy</td><td>The Charm++ proxy of the class we are used as a template argument of </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Pointer to the object instance we interoperate with </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lower</td><td>Lower index of the global linear system rows on my PE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">upper</td><td>Upper index of the global linear system rows on my PE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fromch</td><td>Charm chare array index contribution coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gid</td><td>Global row indices of the vector contributed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mass</td><td>Portion of the lhs vector contributed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxlhsimport</td><td>Import map associating a list of global row ids to a worker chare id during the communication of the low order lhs vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">auxlhs</td><td>Part of the low order (auxiliary) system lhs vector owned by my PE. These are the vector of values (for each scalar equation solved) associated to global mesh point row ids. This vector collects the nonzero values of the low order (auxiliary) linear system lhs "matrix" solution, in the form of a vector, since the matrix of this particular low order system is lumped, i.e., stored as a single vector of diagonal elements of the lhs matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Static member function as it is called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00059">59</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keyword">using</span> tk::operator+=;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( gid.size() == mass.nunk(),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;              <span class="stringliteral">&quot;Size of mass diffusion lhs and row ID vectors must equal&quot;</span> );</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <span class="comment">// Store+add vector of nonzero values owned and pack those to be exported</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      std::map&lt; int, std::map&lt; std::size_t, std::vector&lt; tk::real &gt; &gt; &gt; exp;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordflow">for</span> (std::size_t i=0; i&lt;gid.size(); ++i)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">if</span> (gid[i] &gt;= lower &amp;&amp; gid[i] &lt; upper) {  <span class="comment">// if own</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;          auxlhsimport[ fromch ].push_back( gid[i] );</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;          auxlhs[ gid[i] ] += mass[i];</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;          exp[ host-&gt;pe(gid[i]) ][ gid[i] ] = mass[i];</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="comment">// Export non-owned vector values to fellow branches that own them</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : exp) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keyword">auto</span> tope = <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( p.first );</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        hostproxy[ tope ].addauxlhs( fromch, p.second );</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div><div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02da952f67423dcfcd4a8838a56192c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02da952f67423dcfcd4a8838a56192c4">&#9670;&nbsp;</a></span>chareauxrhs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class HostProxy , class Host &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inciter::AuxSolverLumpMassDiff::chareauxrhs </td>
          <td>(</td>
          <td class="paramtype">const HostProxy &amp;&#160;</td>
          <td class="paramname"><em>hostproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Host *const&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>lower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>upper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const tk::Fields &amp;&#160;</td>
          <td class="paramname"><em>diff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxrhsimport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>auxrhs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Chares contribute their mass diffusion rhs to the low order system </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hostproxy</td><td>The Charm++ proxy of the class we are used as a template argument of </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Pointer to the object instance we interoperate with </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lower</td><td>Lower index of the global linear system rows on my PE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">upper</td><td>Upper index of the global linear system rows on my PE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fromch</td><td>Charm chare array index contribution coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gid</td><td>Global row indices of the vector contributed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">diff</td><td>Portion of the rhs vector contributed </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxrhsimport</td><td>Import map associating a list of global row ids to a worker chare id during the communication of the mass diffusion rhs vector vector. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">auxrhs</td><td>Part of the mass diffusion right-hand side vector owned by my PE. Vector of values (for each scalar equation solved) associated to global mesh point row ids. This vector collects the mass diffusion terms to be added to the right-hand side for the low order solution (for flux-corrected transport). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Static member function as it is called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00135">135</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keyword">using</span> tk::operator+=;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( gid.size() == diff.nunk(),</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;              <span class="stringliteral">&quot;Size of mass diffusion rhs and row ID vectors must equal&quot;</span> );</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="comment">// Store+add vector of nonzero values owned and pack those to be exported</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      std::map&lt; int, std::map&lt; std::size_t, std::vector&lt; tk::real &gt; &gt; &gt; exp;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">for</span> (std::size_t i=0; i&lt;gid.size(); ++i)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> (gid[i] &gt;= lower &amp;&amp; gid[i] &lt; upper) {  <span class="comment">// if own</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          auxrhsimport[ fromch ].push_back( gid[i] );</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;          auxrhs[ gid[i] ] += diff[i];</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;          exp[ host-&gt;pe(gid[i]) ][ gid[i] ] = diff[i];</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment">// Export non-owned vector values to fellow branches that own them</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : exp) {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keyword">auto</span> tope = <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( p.first );</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        hostproxy[ tope ].addauxrhs( fromch, p.second );</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b62918778552feb21b99e16fc13e80a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b62918778552feb21b99e16fc13e80a">&#9670;&nbsp;</a></span>solve()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Host &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inciter::AuxSolverLumpMassDiff::solve </td>
          <td>(</td>
          <td class="paramtype">Host *const&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>ncomp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>rhs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>lump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>diff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Solve low order system </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Pointer to the object instance we interoperate with </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ncomp</td><td>Number of scalar components per unknown </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rhs</td><td>Part of right-hand side vector owned by my PE. Vector of values (for each scalar equation solved) associated to global mesh point row ids. In the flux-corrected transport algorithm, this is the rhs vector of the high order scheme, used to add mass diffusion to create the low order rhs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lump</td><td>Part of auxiliary system left-hand side "matrix" (vector) owned by my PE. Vector of values (for each scalar equation solved) associated to global mesh point row ids. This vector collects the nonzero values of the auxiliary system lhs "matrix" solution. In flux-corrected transport this is the lhs forthe low order system only storing the nonzero diagonal entries of the lhs matrix. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">diff</td><td>Part of the mass diffusion right-hand side vector owned by my PE. Vector of values (for each scalar equation solved) associated to global mesh point row ids. This vector collects the mass diffusion terms to be added to the right-hand side for the low order solution (for flux-corrected transport). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Static member function as it is called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00211">211</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_macro_8h_source.html#l00019">IGNORE</a>, and <a class="el" href="_container_util_8h_source.html#l00135">tk::keyEqual()</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a>(host);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( host-&gt;rhscomplete(),</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              <span class="stringliteral">&quot;Values of distributed right-hand-side vector on PE &quot;</span> +</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;              std::to_string( CkMyPe() ) + <span class="stringliteral">&quot; is incomplete: cannot solve low &quot;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;              <span class="stringliteral">&quot;order system&quot;</span> );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( host-&gt;auxrhscomplete(),</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;              <span class="stringliteral">&quot;Values of distributed mass diffusion rhs vector on PE &quot;</span> +</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;              std::to_string( CkMyPe() ) + <span class="stringliteral">&quot; is incomplete: cannot solve low &quot;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;              <span class="stringliteral">&quot;order system&quot;</span> );</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( host-&gt;auxlhscomplete(),</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;              <span class="stringliteral">&quot;Values of distributed lumped mass lhs vector on PE &quot;</span> +</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;              std::to_string( CkMyPe() ) + <span class="stringliteral">&quot; is incomplete: cannot solve low &quot;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;              <span class="stringliteral">&quot;order system&quot;</span> );</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a6b203c3a87657090a5c477896ce94bf9">tk::keyEqual</a>( rhs, diff ), <span class="stringliteral">&quot;Row IDs of rhs and mass &quot;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;              <span class="stringliteral">&quot;diffusion rhs vector unequal on PE &quot;</span> + std::to_string( CkMyPe() )</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;              + <span class="stringliteral">&quot;: cannot solve low order system&quot;</span> );</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a6b203c3a87657090a5c477896ce94bf9">tk::keyEqual</a>( rhs, lump ), <span class="stringliteral">&quot;Row IDs of rhs and lumped mass &quot;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;              <span class="stringliteral">&quot;lhs vector unequal on PE &quot;</span> + std::to_string( CkMyPe() ) + <span class="stringliteral">&quot;: &quot;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;              <span class="stringliteral">&quot;cannot solve low order system&quot;</span> );</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keyword">auto</span> ir = rhs.cbegin();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keyword">auto</span> <span class="keywordtype">id</span> = diff.begin();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keyword">auto</span> im = lump.cbegin();</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">while</span> (ir != rhs.cend()) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; r = ir-&gt;second;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; m = im-&gt;second;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">auto</span>&amp; d = <span class="keywordtype">id</span>-&gt;second;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( r.size()==ncomp &amp;&amp; m.size()==ncomp &amp;&amp; d.size()==ncomp,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="stringliteral">&quot;Wrong number of components in solving the low order system&quot;</span> );</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">for</span> (std::size_t i=0; i&lt;ncomp; ++i) d[i] = (r[i]+d[i])/m[i];</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        ++ir; ++id; ++im;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div><div class="ttc" id="namespacetk_html_a6b203c3a87657090a5c477896ce94bf9"><div class="ttname"><a href="namespacetk.html#a6b203c3a87657090a5c477896ce94bf9">tk::keyEqual</a></div><div class="ttdeci">bool keyEqual(const Container &amp;a, const Container &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00135">ContainerUtil.h:135</a></div></div>
<div class="ttc" id="_macro_8h_html_a494f327b84ea26d04e3ad24251b4bbe0"><div class="ttname"><a href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a></div><div class="ttdeci">#define IGNORE(expr)</div><div class="ttdoc">This macro can be used to suppress compiler warning on unused variable. </div><div class="ttdef"><b>Definition:</b> <a href="_macro_8h_source.html#l00019">Macro.h:19</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_aux_solver_lump_mass_diff_a1b62918778552feb21b99e16fc13e80a_cgraph.svg" width="352" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab8d8d0422f29d59e3eb7485465484138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8d8d0422f29d59e3eb7485465484138">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class WorkerProxy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void inciter::AuxSolverLumpMassDiff::update </td>
          <td>(</td>
          <td class="paramtype">const WorkerProxy &amp;&#160;</td>
          <td class="paramname"><em>worker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>solimport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::size_t, std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>sol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Group low order solution vector by workers and send each the parts back to workers that own them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">worker</td><td>Worker proxy to use send update to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">solimport</td><td>Import map associating a list of global row ids to a worker chare id during the communication of the solution/unknown vector. This is used here to find out which solution values associated to which global nodes IDs to send the solution updates back to the workers. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sol</td><td>Part of solution vector owned by my PE. Vector of values (for each scalar equation solved) associated to global mesh point row IDs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Static member function as it is called without an object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_aux_solver_8h_source.html#l00262">262</a> of file <a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00031">Throw</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; w : solimport) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        std::vector&lt; std::size_t &gt; gid;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        std::vector&lt; tk::real &gt; solution;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> r : w.second) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> it = sol.find( r );</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="keywordflow">if</span> (it != end(sol)) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            gid.push_back( it-&gt;first );</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            solution.insert(end(solution), begin(it-&gt;second), end(it-&gt;second));</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          } <span class="keywordflow">else</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a>( <span class="stringliteral">&quot;Can&#39;t find global row id &quot;</span> + std::to_string(r) +</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                   <span class="stringliteral">&quot; to export in low order solution vector&quot;</span> );</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        worker[ w.first ].updateLowSol( gid, solution );</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="ttc" id="_exception_8h_html_a0412f798470c18f503a2c2f63c970ba8"><div class="ttname"><a href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a></div><div class="ttdeci">#define Throw(...)</div><div class="ttdoc">Throw macro that always throws an exception. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00031">Exception.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/tmp/TeamCity-14/work/821a9fd6f64749d9/src/Inciter/<a class="el" href="_aux_solver_8h_source.html">AuxSolver.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 21 2017 21:42:37 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
