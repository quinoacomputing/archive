<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: inciter::Partitioner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceinciter.html">inciter</a></li><li class="navelem"><a class="el" href="classinciter_1_1_partitioner.html">Partitioner</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classinciter_1_1_partitioner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">inciter::Partitioner Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for inciter::Partitioner:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner__inherit__graph.svg" width="144" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8b9025d58c63041880566d29679f3ffd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a8b9025d58c63041880566d29679f3ffd">Partitioner</a> (const std::vector&lt; CkCallback &gt; &amp;cb, const CProxy_Transporter &amp;host, const tk::CProxy_Solver &amp;solver, const CProxy_BoundaryConditions &amp;bc, const <a class="el" href="classinciter_1_1_scheme.html">Scheme</a> &amp;scheme, std::size_t nbfac, const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;bface, const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;belem)</td></tr>
<tr class="memdesc:a8b9025d58c63041880566d29679f3ffd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a8b9025d58c63041880566d29679f3ffd">More...</a><br /></td></tr>
<tr class="separator:a8b9025d58c63041880566d29679f3ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0ed691bfaf90f34d17ae88b4042c868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#af0ed691bfaf90f34d17ae88b4042c868">partition</a> (int nchare)</td></tr>
<tr class="memdesc:af0ed691bfaf90f34d17ae88b4042c868"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition the computational mesh.  <a href="#af0ed691bfaf90f34d17ae88b4042c868">More...</a><br /></td></tr>
<tr class="separator:af0ed691bfaf90f34d17ae88b4042c868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a766863eaeba226362f627495ca2bc578"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a766863eaeba226362f627495ca2bc578">offset</a> (int p, std::size_t u)</td></tr>
<tr class="memdesc:a766863eaeba226362f627495ca2bc578"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive number of uniquely assigned global mesh node IDs from lower PEs.  <a href="#a766863eaeba226362f627495ca2bc578">More...</a><br /></td></tr>
<tr class="separator:a766863eaeba226362f627495ca2bc578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2332887a13429f03d23f6b967c37a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9a2332887a13429f03d23f6b967c37a7">request</a> (int p, const std::unordered_set&lt; std::size_t &gt; &amp;nd)</td></tr>
<tr class="memdesc:a9a2332887a13429f03d23f6b967c37a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request new global node IDs for old node IDs.  <a href="#a9a2332887a13429f03d23f6b967c37a7">More...</a><br /></td></tr>
<tr class="separator:a9a2332887a13429f03d23f6b967c37a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d04f6eb8279a7e4182374bbf886d2ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a6d04f6eb8279a7e4182374bbf886d2ab">request</a> (int p, const <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &amp;ed)</td></tr>
<tr class="separator:a6d04f6eb8279a7e4182374bbf886d2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e0de37f14356cd4d37cb843bdb6bbb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a5e0de37f14356cd4d37cb843bdb6bbb4">neworder</a> (const std::unordered_map&lt; std::size_t, std::size_t &gt; &amp;nd)</td></tr>
<tr class="memdesc:a5e0de37f14356cd4d37cb843bdb6bbb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive new (reordered) global node IDs.  <a href="#a5e0de37f14356cd4d37cb843bdb6bbb4">More...</a><br /></td></tr>
<tr class="separator:a5e0de37f14356cd4d37cb843bdb6bbb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac107d85120763d1c4a8e9597ff6eaea5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac107d85120763d1c4a8e9597ff6eaea5">neworder</a> (const <a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> &amp;ed)</td></tr>
<tr class="memdesc:ac107d85120763d1c4a8e9597ff6eaea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive new global node IDs associated to edge-nodes.  <a href="#ac107d85120763d1c4a8e9597ff6eaea5">More...</a><br /></td></tr>
<tr class="separator:ac107d85120763d1c4a8e9597ff6eaea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f7bddeceaf53b61833ddc22b8403c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a97f7bddeceaf53b61833ddc22b8403c1">add</a> (int frompe, const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;n)</td></tr>
<tr class="separator:a97f7bddeceaf53b61833ddc22b8403c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70524487d88cd6bbab60905751076475"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a70524487d88cd6bbab60905751076475">recv</a> ()</td></tr>
<tr class="memdesc:a70524487d88cd6bbab60905751076475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledge received node IDs.  <a href="#a70524487d88cd6bbab60905751076475">More...</a><br /></td></tr>
<tr class="separator:a70524487d88cd6bbab60905751076475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b9184c4c34f337693bb1e80b858b12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a02b9184c4c34f337693bb1e80b858b12">flatten</a> ()</td></tr>
<tr class="memdesc:a02b9184c4c34f337693bb1e80b858b12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare owned mesh node IDs for reordering.  <a href="#a02b9184c4c34f337693bb1e80b858b12">More...</a><br /></td></tr>
<tr class="separator:a02b9184c4c34f337693bb1e80b858b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef486986479c66f4480d60834f17a21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a6ef486986479c66f4480d60834f17a21">lower</a> (std::size_t low)</td></tr>
<tr class="memdesc:a6ef486986479c66f4480d60834f17a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive lower bound of node IDs our PE operates on after reordering.  <a href="#a6ef486986479c66f4480d60834f17a21">More...</a><br /></td></tr>
<tr class="separator:a6ef486986479c66f4480d60834f17a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20dba0e97e8708187d1bb3afe4b7d8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ab20dba0e97e8708187d1bb3afe4b7d8a">stdCost</a> (<a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> av)</td></tr>
<tr class="memdesc:ab20dba0e97e8708187d1bb3afe4b7d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the variance of the communication cost of merging the linear system.  <a href="#ab20dba0e97e8708187d1bb3afe4b7d8a">More...</a><br /></td></tr>
<tr class="separator:ab20dba0e97e8708187d1bb3afe4b7d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad334fe5a4acd071eaeedd859533e4857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad334fe5a4acd071eaeedd859533e4857">gather</a> ()</td></tr>
<tr class="memdesc:ad334fe5a4acd071eaeedd859533e4857"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start gathering global node IDs this PE will need to receive (instead of assign) during reordering.  <a href="#ad334fe5a4acd071eaeedd859533e4857">More...</a><br /></td></tr>
<tr class="separator:ad334fe5a4acd071eaeedd859533e4857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a715bc4d4675333f1ba062ee83d3cb34e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a715bc4d4675333f1ba062ee83d3cb34e">query</a> (int p, const std::set&lt; std::size_t &gt; &amp;nodes, const <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &amp;edges) const</td></tr>
<tr class="memdesc:a715bc4d4675333f1ba062ee83d3cb34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those from during reordering.  <a href="#a715bc4d4675333f1ba062ee83d3cb34e">More...</a><br /></td></tr>
<tr class="separator:a715bc4d4675333f1ba062ee83d3cb34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f6b4bf1dacf464f715ff0c45104d13e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9f6b4bf1dacf464f715ff0c45104d13e">mask</a> (int p, const std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; &amp;cn, const <a class="el" href="classtk_1_1_uns_mesh.html#a11a7aae0f8c2d3292b9b7e3f5ea50c9c">tk::UnsMesh::EdgeChares</a> &amp;ce)</td></tr>
<tr class="memdesc:a9f6b4bf1dacf464f715ff0c45104d13e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive mask of to-be-received global mesh node IDs.  <a href="#a9f6b4bf1dacf464f715ff0c45104d13e">More...</a><br /></td></tr>
<tr class="separator:a9f6b4bf1dacf464f715ff0c45104d13e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0f0f348d320343d28c320f975d2da7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a4a0f0f348d320343d28c320f975d2da7">createWorkers</a> ()</td></tr>
<tr class="memdesc:a4a0f0f348d320343d28c320f975d2da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create worker chare array elements on this PE.  <a href="#a4a0f0f348d320343d28c320f975d2da7">More...</a><br /></td></tr>
<tr class="separator:a4a0f0f348d320343d28c320f975d2da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae0a55fe338da582d0e45f1d79d4252b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ae0a55fe338da582d0e45f1d79d4252b9">readGraph</a> (<a class="el" href="classtk_1_1_exodus_i_i_mesh_reader.html">tk::ExodusIIMeshReader</a> &amp;er)</td></tr>
<tr class="memdesc:ae0a55fe338da582d0e45f1d79d4252b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read our contiguously-numbered chunk of the mesh graph from file.  <a href="#ae0a55fe338da582d0e45f1d79d4252b9">More...</a><br /></td></tr>
<tr class="separator:ae0a55fe338da582d0e45f1d79d4252b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c0f3a3caf4995070ec69d648740eec2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a2c0f3a3caf4995070ec69d648740eec2">computeCentroids</a> (<a class="el" href="classtk_1_1_exodus_i_i_mesh_reader.html">tk::ExodusIIMeshReader</a> &amp;er)</td></tr>
<tr class="memdesc:a2c0f3a3caf4995070ec69d648740eec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute element centroid coordinates.  <a href="#a2c0f3a3caf4995070ec69d648740eec2">More...</a><br /></td></tr>
<tr class="separator:a2c0f3a3caf4995070ec69d648740eec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75f146e6739ef42223bad72f84fcff04"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a75f146e6739ef42223bad72f84fcff04">chareNodes</a> (const std::vector&lt; std::size_t &gt; &amp;che) const</td></tr>
<tr class="memdesc:a75f146e6739ef42223bad72f84fcff04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct global mesh node ids for each chare.  <a href="#a75f146e6739ef42223bad72f84fcff04">More...</a><br /></td></tr>
<tr class="separator:a75f146e6739ef42223bad72f84fcff04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd0b4d238018cb77c071d752a8c1a2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a1dd0b4d238018cb77c071d752a8c1a2e">distribute</a> (std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;n)</td></tr>
<tr class="memdesc:a1dd0b4d238018cb77c071d752a8c1a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Distribute global mesh node IDs to their owner PEs.  <a href="#a1dd0b4d238018cb77c071d752a8c1a2e">More...</a><br /></td></tr>
<tr class="separator:a1dd0b4d238018cb77c071d752a8c1a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5be253e363c6379256728fa26b15af"><td class="memItemLeft" align="right" valign="top">std::array&lt; int, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">chareDistribution</a> () const</td></tr>
<tr class="memdesc:abe5be253e363c6379256728fa26b15af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute chare distribution.  <a href="#abe5be253e363c6379256728fa26b15af">More...</a><br /></td></tr>
<tr class="separator:abe5be253e363c6379256728fa26b15af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d91369a111de7aa4442f27926751cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a96d91369a111de7aa4442f27926751cc">reorder</a> ()</td></tr>
<tr class="memdesc:a96d91369a111de7aa4442f27926751cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reorder global mesh node IDs.  <a href="#a96d91369a111de7aa4442f27926751cc">More...</a><br /></td></tr>
<tr class="separator:a96d91369a111de7aa4442f27926751cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b552950fcbc37a2481c3a8c3708d945"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">pe</a> (int id) const</td></tr>
<tr class="memdesc:a2b552950fcbc37a2481c3a8c3708d945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return processing element for chare id.  <a href="#a2b552950fcbc37a2481c3a8c3708d945">More...</a><br /></td></tr>
<tr class="separator:a2b552950fcbc37a2481c3a8c3708d945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2597580e502900fcc96109e86da060b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a2597580e502900fcc96109e86da060b9">prepare</a> ()</td></tr>
<tr class="memdesc:a2597580e502900fcc96109e86da060b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate new node IDs to old ones and return them to the requestor(s)  <a href="#a2597580e502900fcc96109e86da060b9">More...</a><br /></td></tr>
<tr class="separator:a2597580e502900fcc96109e86da060b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3d8b93a4d1e0be973cb29e4b2f99da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a8b3d8b93a4d1e0be973cb29e4b2f99da">generate_compact_inpoel</a> ()</td></tr>
<tr class="memdesc:a8b3d8b93a4d1e0be973cb29e4b2f99da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate compact mesh connectivity.  <a href="#a8b3d8b93a4d1e0be973cb29e4b2f99da">More...</a><br /></td></tr>
<tr class="separator:a8b3d8b93a4d1e0be973cb29e4b2f99da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66ce5723b0c2062be7a16ff93fd99001"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a66ce5723b0c2062be7a16ff93fd99001">refine</a> ()</td></tr>
<tr class="memdesc:a66ce5723b0c2062be7a16ff93fd99001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uniformly refine our mesh replacing each tetrahedron with 8 new ones.  <a href="#a66ce5723b0c2062be7a16ff93fd99001">More...</a><br /></td></tr>
<tr class="separator:a66ce5723b0c2062be7a16ff93fd99001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa789d014a17b190534b6a05738bd7033"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa789d014a17b190534b6a05738bd7033">reordered</a> ()</td></tr>
<tr class="memdesc:aa789d014a17b190534b6a05738bd7033"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute final result of reordering.  <a href="#aa789d014a17b190534b6a05738bd7033">More...</a><br /></td></tr>
<tr class="separator:aa789d014a17b190534b6a05738bd7033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee1971863741cc4afb7cae051197599"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9ee1971863741cc4afb7cae051197599">bounds</a> ()</td></tr>
<tr class="memdesc:a9ee1971863741cc4afb7cae051197599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute lower and upper bounds of reordered node IDs our PE operates on.  <a href="#a9ee1971863741cc4afb7cae051197599">More...</a><br /></td></tr>
<tr class="separator:a9ee1971863741cc4afb7cae051197599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af92d0f3116e54c674a8521e3796107f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#af92d0f3116e54c674a8521e3796107f9">create</a> ()</td></tr>
<tr class="memdesc:af92d0f3116e54c674a8521e3796107f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create chare array elements on this PE and assign the global mesh element IDs they will operate on.  <a href="#af92d0f3116e54c674a8521e3796107f9">More...</a><br /></td></tr>
<tr class="separator:af92d0f3116e54c674a8521e3796107f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d8a613c1a4a1946483409fba78deec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a36d8a613c1a4a1946483409fba78deec">createDiscWorkers</a> ()</td></tr>
<tr class="memdesc:a36d8a613c1a4a1946483409fba78deec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create <a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> chare array elements on this PE.  <a href="#a36d8a613c1a4a1946483409fba78deec">More...</a><br /></td></tr>
<tr class="separator:a36d8a613c1a4a1946483409fba78deec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928626a30505aac8c3e41b9bf5b001de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a928626a30505aac8c3e41b9bf5b001de">cost</a> (std::size_t l, std::size_t u)</td></tr>
<tr class="memdesc:a928626a30505aac8c3e41b9bf5b001de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute communication cost of linear system merging for our PE.  <a href="#a928626a30505aac8c3e41b9bf5b001de">More...</a><br /></td></tr>
<tr class="separator:a928626a30505aac8c3e41b9bf5b001de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a83ff73ef88708f4b27e0dccb8039b317"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtk_1_1tuple_1_1tagged__tuple.html">tk::tuple::tagged_tuple</a>&lt; <a class="el" href="structtag_1_1part.html">tag::part</a>, CkCallback, <a class="el" href="structtag_1_1distributed.html">tag::distributed</a>, CkCallback, <a class="el" href="structtag_1_1flattened.html">tag::flattened</a>, CkCallback, <a class="el" href="structtag_1_1load.html">tag::load</a>, CkCallback, <a class="el" href="structtag_1_1avecost.html">tag::avecost</a>, CkCallback, <a class="el" href="structtag_1_1stdcost.html">tag::stdcost</a>, CkCallback, <a class="el" href="structtag_1_1coord.html">tag::coord</a>, CkCallback &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a></td></tr>
<tr class="memdesc:a83ff73ef88708f4b27e0dccb8039b317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Charm++ callbacks associated to compile-time tags.  <a href="#a83ff73ef88708f4b27e0dccb8039b317">More...</a><br /></td></tr>
<tr class="separator:a83ff73ef88708f4b27e0dccb8039b317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59274d7dc87ef5bdc5587498133dbee9"><td class="memItemLeft" align="right" valign="top">CProxy_Transporter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a></td></tr>
<tr class="memdesc:a59274d7dc87ef5bdc5587498133dbee9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Host proxy.  <a href="#a59274d7dc87ef5bdc5587498133dbee9">More...</a><br /></td></tr>
<tr class="separator:a59274d7dc87ef5bdc5587498133dbee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873290f952719d8df09aa888a37ca623"><td class="memItemLeft" align="right" valign="top">tk::CProxy_Solver&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a></td></tr>
<tr class="memdesc:a873290f952719d8df09aa888a37ca623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Linear system solver proxy.  <a href="#a873290f952719d8df09aa888a37ca623">More...</a><br /></td></tr>
<tr class="separator:a873290f952719d8df09aa888a37ca623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54f7b1a33fb9c30b1d84552b5d5731d0"><td class="memItemLeft" align="right" valign="top">CProxy_BoundaryConditions&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a54f7b1a33fb9c30b1d84552b5d5731d0">m_bc</a></td></tr>
<tr class="memdesc:a54f7b1a33fb9c30b1d84552b5d5731d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boundary conditions proxy.  <a href="#a54f7b1a33fb9c30b1d84552b5d5731d0">More...</a><br /></td></tr>
<tr class="separator:a54f7b1a33fb9c30b1d84552b5d5731d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae768c5ce71927c4fb5332095a9901a3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinciter_1_1_scheme.html">Scheme</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a></td></tr>
<tr class="memdesc:ae768c5ce71927c4fb5332095a9901a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> scheme.  <a href="#ae768c5ce71927c4fb5332095a9901a3e">More...</a><br /></td></tr>
<tr class="separator:ae768c5ce71927c4fb5332095a9901a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6450dbbf36bf5cb36088bdcec7a4445"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a></td></tr>
<tr class="memdesc:aa6450dbbf36bf5cb36088bdcec7a4445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of fellow PEs to send elem IDs to.  <a href="#aa6450dbbf36bf5cb36088bdcec7a4445">More...</a><br /></td></tr>
<tr class="separator:aa6450dbbf36bf5cb36088bdcec7a4445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1713eab87b3e4e49357e4726f2e5ae9b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a></td></tr>
<tr class="memdesc:a1713eab87b3e4e49357e4726f2e5ae9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue of requested node IDs from PEs.  <a href="#a1713eab87b3e4e49357e4726f2e5ae9b">More...</a><br /></td></tr>
<tr class="separator:a1713eab87b3e4e49357e4726f2e5ae9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafdbad8ad3207d5c7e15a21fab7e86b5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">m_reqEdges</a></td></tr>
<tr class="memdesc:aafdbad8ad3207d5c7e15a21fab7e86b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue of requested edge-node IDs from PEs.  <a href="#aafdbad8ad3207d5c7e15a21fab7e86b5">More...</a><br /></td></tr>
<tr class="separator:aafdbad8ad3207d5c7e15a21fab7e86b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a803838f68fa952cd41d1d9b6e5941c6a"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a></td></tr>
<tr class="memdesc:a803838f68fa952cd41d1d9b6e5941c6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starting global mesh node ID for node reordering on this PE during mesh node reordering.  <a href="#a803838f68fa952cd41d1d9b6e5941c6a">More...</a><br /></td></tr>
<tr class="separator:a803838f68fa952cd41d1d9b6e5941c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0518feebf27d6038e52a84d3bf83349e"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">m_noffset</a></td></tr>
<tr class="memdesc:a0518feebf27d6038e52a84d3bf83349e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for number of offsets.  <a href="#a0518feebf27d6038e52a84d3bf83349e">More...</a><br /></td></tr>
<tr class="separator:a0518feebf27d6038e52a84d3bf83349e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f06d050b2bce8637646757de64ea87"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">m_nquery</a></td></tr>
<tr class="memdesc:a14f06d050b2bce8637646757de64ea87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for number of masks of to-be-received global mesh node IDs received.  <a href="#a14f06d050b2bce8637646757de64ea87">More...</a><br /></td></tr>
<tr class="separator:a14f06d050b2bce8637646757de64ea87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c22f2f34f5ec9dd1c082156156c7f7a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a></td></tr>
<tr class="memdesc:a6c22f2f34f5ec9dd1c082156156c7f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tetrtahedron element connectivity of our chunk of the mesh.  <a href="#a6c22f2f34f5ec9dd1c082156156c7f7a">More...</a><br /></td></tr>
<tr class="separator:a6c22f2f34f5ec9dd1c082156156c7f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c3d9b96c85defca02aec79aabfa9df"><td class="memItemLeft" align="right" valign="top">std::vector&lt; long &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a></td></tr>
<tr class="memdesc:a79c3d9b96c85defca02aec79aabfa9df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global element IDs we read (our chunk of the mesh)  <a href="#a79c3d9b96c85defca02aec79aabfa9df">More...</a><br /></td></tr>
<tr class="separator:a79c3d9b96c85defca02aec79aabfa9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f5a07250189d666de76a9024389a076"><td class="memItemLeft" align="right" valign="top">std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a></td></tr>
<tr class="memdesc:a5f5a07250189d666de76a9024389a076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Element centroid coordinates of our chunk of the mesh.  <a href="#a5f5a07250189d666de76a9024389a076">More...</a><br /></td></tr>
<tr class="separator:a5f5a07250189d666de76a9024389a076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd33481dcb2404d2b65835784a0ad6b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a></td></tr>
<tr class="memdesc:aebd33481dcb2404d2b65835784a0ad6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of chares across all PEs.  <a href="#aebd33481dcb2404d2b65835784a0ad6b">More...</a><br /></td></tr>
<tr class="separator:aebd33481dcb2404d2b65835784a0ad6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea6e9f6686a321f6b3f98c7d9a9cac0"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a></td></tr>
<tr class="memdesc:aaea6e9f6686a321f6b3f98c7d9a9cac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower bound of node IDs our PE operates on after reordering.  <a href="#aaea6e9f6686a321f6b3f98c7d9a9cac0">More...</a><br /></td></tr>
<tr class="separator:aaea6e9f6686a321f6b3f98c7d9a9cac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad643d4c35b6a56eef0a3a48a588e366d"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a></td></tr>
<tr class="memdesc:ad643d4c35b6a56eef0a3a48a588e366d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upper bound of node IDs our PE operates on after reordering.  <a href="#ad643d4c35b6a56eef0a3a48a588e366d">More...</a><br /></td></tr>
<tr class="separator:ad643d4c35b6a56eef0a3a48a588e366d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0996cf378d056d18ab8c89b77bc5e9a1"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a></td></tr>
<tr class="memdesc:a0996cf378d056d18ab8c89b77bc5e9a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary communication map used to receive global mesh node IDs.  <a href="#a0996cf378d056d18ab8c89b77bc5e9a1">More...</a><br /></td></tr>
<tr class="separator:a0996cf378d056d18ab8c89b77bc5e9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8699c4b7b54736ef093032c14366f0"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a></td></tr>
<tr class="memdesc:a1e8699c4b7b54736ef093032c14366f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary communication map used to receive global mesh edges.  <a href="#a1e8699c4b7b54736ef093032c14366f0">More...</a><br /></td></tr>
<tr class="separator:a1e8699c4b7b54736ef093032c14366f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a53be8a1baf2fcea27274a757150601"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a></td></tr>
<tr class="memdesc:a8a53be8a1baf2fcea27274a757150601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communication map used for distributed mesh node reordering.  <a href="#a8a53be8a1baf2fcea27274a757150601">More...</a><br /></td></tr>
<tr class="separator:a8a53be8a1baf2fcea27274a757150601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a872a89f66a6595a32ab64f153b2ebc76"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a></td></tr>
<tr class="memdesc:a872a89f66a6595a32ab64f153b2ebc76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communication map used for distributed mesh edge-node reordering.  <a href="#a872a89f66a6595a32ab64f153b2ebc76">More...</a><br /></td></tr>
<tr class="separator:a872a89f66a6595a32ab64f153b2ebc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054bc425f1c654d3aa4afb2fc9dd229c"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a></td></tr>
<tr class="memdesc:a054bc425f1c654d3aa4afb2fc9dd229c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique global node IDs chares on our PE will contribute to in a linear system.  <a href="#a054bc425f1c654d3aa4afb2fc9dd229c">More...</a><br /></td></tr>
<tr class="separator:a054bc425f1c654d3aa4afb2fc9dd229c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e0c810002c42534cb474f9cf71eaeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a></td></tr>
<tr class="memdesc:a93e0c810002c42534cb474f9cf71eaeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique global edges whose nodes chares on our PE will contribute to in a linear system.  <a href="#a93e0c810002c42534cb474f9cf71eaeb">More...</a><br /></td></tr>
<tr class="separator:a93e0c810002c42534cb474f9cf71eaeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8823c8f12b3785866f960abb76c005a4"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::size_t, std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a></td></tr>
<tr class="memdesc:a8823c8f12b3785866f960abb76c005a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-values to old node IDs (as in file) as map-keys.  <a href="#a8823c8f12b3785866f960abb76c005a4">More...</a><br /></td></tr>
<tr class="separator:a8823c8f12b3785866f960abb76c005a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab889d010f8425c8475f347d70aacdf85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a></td></tr>
<tr class="memdesc:ab889d010f8425c8475f347d70aacdf85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-values to edges given by two old node IDs (as in file) as map-keys.  <a href="#ab889d010f8425c8475f347d70aacdf85">More...</a><br /></td></tr>
<tr class="separator:ab889d010f8425c8475f347d70aacdf85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47619073f5c32f56f05e20434c296f5"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a></td></tr>
<tr class="memdesc:ad47619073f5c32f56f05e20434c296f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global mesh element connectivity associated to chares owned.  <a href="#ad47619073f5c32f56f05e20434c296f5">More...</a><br /></td></tr>
<tr class="separator:ad47619073f5c32f56f05e20434c296f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f7cda531ab7d88b9130b19a10987f9"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a></td></tr>
<tr class="memdesc:a91f7cda531ab7d88b9130b19a10987f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contributions) categorized by chares.  <a href="#a91f7cda531ab7d88b9130b19a10987f9">More...</a><br /></td></tr>
<tr class="separator:a91f7cda531ab7d88b9130b19a10987f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ab95a011736afcf56751531eef2280"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a></td></tr>
<tr class="memdesc:a46ab95a011736afcf56751531eef2280"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edges (a pair of old node IDs) in <a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42" title="Map associating IDs of mesh nodes to edges. ">tk::UnsMesh::EdgeNodes</a> maps, associated to and categorized by chares.  <a href="#a46ab95a011736afcf56751531eef2280">More...</a><br /></td></tr>
<tr class="separator:a46ab95a011736afcf56751531eef2280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5859014223f5ecabec8cd04e37ddb823"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a></td></tr>
<tr class="memdesc:a5859014223f5ecabec8cd04e37ddb823"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communication cost of linear system merging for our PE.  <a href="#a5859014223f5ecabec8cd04e37ddb823">More...</a><br /></td></tr>
<tr class="separator:a5859014223f5ecabec8cd04e37ddb823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac044bbfdfeabe7324f746641d3b9f5d4"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a></td></tr>
<tr class="memdesc:ac044bbfdfeabe7324f746641d3b9f5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating a set of chare IDs to old (as in file) global mesh node IDs.  <a href="#ac044bbfdfeabe7324f746641d3b9f5d4">More...</a><br /></td></tr>
<tr class="separator:ac044bbfdfeabe7324f746641d3b9f5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a667401f6ef87d9c25216b9bb50b68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a11a7aae0f8c2d3292b9b7e3f5ea50c9c">tk::UnsMesh::EdgeChares</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a></td></tr>
<tr class="memdesc:ad1a667401f6ef87d9c25216b9bb50b68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file)  <a href="#ad1a667401f6ef87d9c25216b9bb50b68">More...</a><br /></td></tr>
<tr class="separator:ad1a667401f6ef87d9c25216b9bb50b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a211fd24b020e1fa49bc36032035d0a"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a></td></tr>
<tr class="memdesc:a0a211fd24b020e1fa49bc36032035d0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) chare IDs this PE owns.  <a href="#a0a211fd24b020e1fa49bc36032035d0a">More...</a><br /></td></tr>
<tr class="separator:a0a211fd24b020e1fa49bc36032035d0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1ae8d64958a052765f925ddf8aafdcf"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">m_msumed</a></td></tr>
<tr class="memdesc:ae1ae8d64958a052765f925ddf8aafdcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mesh edges given by two global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) chare IDs this PE owns.  <a href="#ae1ae8d64958a052765f925ddf8aafdcf">More...</a><br /></td></tr>
<tr class="separator:ae1ae8d64958a052765f925ddf8aafdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c33c64f81408a8b9e1d52aa39a2dbb"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a53c33c64f81408a8b9e1d52aa39a2dbb">m_nbfac</a></td></tr>
<tr class="memdesc:a53c33c64f81408a8b9e1d52aa39a2dbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of Boundary faces. m_nbfac is the total number of boundary faces in all side-sets.  <a href="#a53c33c64f81408a8b9e1d52aa39a2dbb">More...</a><br /></td></tr>
<tr class="separator:a53c33c64f81408a8b9e1d52aa39a2dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3678a5d05b8c5356840f28568bf3609"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a></td></tr>
<tr class="memdesc:ac3678a5d05b8c5356840f28568bf3609"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boundary face list from side-sets. m_bface is the list of boundary faces in the side-sets.  <a href="#ac3678a5d05b8c5356840f28568bf3609">More...</a><br /></td></tr>
<tr class="separator:ac3678a5d05b8c5356840f28568bf3609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b629930d0141cd3edc26f75f1dc001"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac6b629930d0141cd3edc26f75f1dc001">m_belem</a></td></tr>
<tr class="memdesc:ac6b629930d0141cd3edc26f75f1dc001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boundary element list from side-sets. m_belem is the list of boundary elements corresponding to the boundary face number in m_bface.  <a href="#ac6b629930d0141cd3edc26f75f1dc001">More...</a><br /></td></tr>
<tr class="separator:ac6b629930d0141cd3edc26f75f1dc001"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classinciter_1_1_partitioner.html">Partitioner</a> Charm++ chare group class</p>
<p>Instantiations of <a class="el" href="classinciter_1_1_partitioner.html">Partitioner</a> comprise a processor aware Charm++ chare group. When instantiated, a new object is created on each PE and not more (as opposed to individual chares or chare array object elements). See also the Charm++ interface file <a class="el" href="partitioner_8ci.html">partitioner.ci</a>. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00090">90</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8b9025d58c63041880566d29679f3ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b9025d58c63041880566d29679f3ffd">&#9670;&nbsp;</a></span>Partitioner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Partitioner::Partitioner </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; CkCallback &gt; &amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CProxy_Transporter &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const tk::CProxy_Solver &amp;&#160;</td>
          <td class="paramname"><em>solver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CProxy_BoundaryConditions &amp;&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinciter_1_1_scheme.html">Scheme</a> &amp;&#160;</td>
          <td class="paramname"><em>scheme</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbfac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>bface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>belem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Charm++ callbacks </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Host Charm++ proxy we are being called from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">solver</td><td>Linear system solver proxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bc</td><td>Boundary conditions group proxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scheme</td><td><a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> scheme </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbfac</td><td>Total number of boundary faces </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bface</td><td>Face lists mapped to side set ids </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">belem</td><td>Element lists mapped to side set ids </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00029">29</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00548">computeCentroids()</a>, <a class="el" href="_d_g_8_c_source.html#l00023">inciter::g_inputdeck</a>, <a class="el" href="_partitioning_algorithm_8h_source.html#l00087">tk::ctr::PartitioningAlgorithm::geometric()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, and <a class="el" href="_partitioner_8_c_source.html#l00515">readGraph()</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                                       :</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>( cb[0], cb[1], cb[2], cb[3], cb[4], cb[5], cb[6] ),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>( host ),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a>( solver ),</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a54f7b1a33fb9c30b1d84552b5d5731d0">m_bc</a>( bc ),</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>( scheme ),</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a>( 0 ),</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a>(),</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">m_reqEdges</a>(),</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>( 0 ),</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">m_noffset</a>( 0 ),</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">m_nquery</a>( 0 ),</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>(),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>(),</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a>(),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a>( 0 ),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a>( 0 ),</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>( 0 ),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>(),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>(),</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>(),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a>(),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>(),</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>(),</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>(),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>(),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>(),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>(),</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>(),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>( 0.0 ),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a>(),</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a>(),</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>(),</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">m_msumed</a>(),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a53c33c64f81408a8b9e1d52aa39a2dbb">m_nbfac</a>( nbfac ),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a>( bface ),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac6b629930d0141cd3edc26f75f1dc001">m_belem</a>( belem )</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//  Constructor</span><span class="comment"></span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//! \param[in] cb Charm++ callbacks</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//! \param[in] host Host Charm++ proxy we are being called from</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//! \param[in] solver Linear system solver proxy</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//! \param[in] bc Boundary conditions group proxy</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//! \param[in] scheme Discretization scheme</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//! \param[in] nbfac Total number of boundary faces</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//! \param[out] bface Face lists mapped to side set ids</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//! \param[out] belem Element lists mapped to side set ids</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span><span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="classtk_1_1_exodus_i_i_mesh_reader.html">tk::ExodusIIMeshReader</a></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    er( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1io.html">tag::io</a>, <a class="code" href="structtag_1_1input.html">tag::input</a> &gt;() );</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// Read our contiguously-numbered chunk of the mesh graph from file</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae0a55fe338da582d0e45f1d79d4252b9">readGraph</a>( er );</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="comment">// If a geometric partitioner is selected, compute element centroid</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// coordinates</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> alg = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1selected.html">tag::selected</a>, <a class="code" href="structtag_1_1partitioner.html">tag::partitioner</a> &gt;();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="classtk_1_1ctr_1_1_partitioning_algorithm.html">tk::ctr::PartitioningAlgorithm</a>().<a class="code" href="classtk_1_1ctr_1_1_partitioning_algorithm.html#ac20375af3b6b9ade275013bfc3f63241">geometric</a>(alg) )</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a2c0f3a3caf4995070ec69d648740eec2">computeCentroids</a>( er );</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    contribute( <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1part.html">tag::part</a> &gt;() );</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div><div class="ttc" id="classtk_1_1ctr_1_1_partitioning_algorithm_html"><div class="ttname"><a href="classtk_1_1ctr_1_1_partitioning_algorithm.html">tk::ctr::PartitioningAlgorithm</a></div><div class="ttdoc">PartitioningAlgorithm options: outsource searches to base templated on enum type. ...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioning_algorithm_8h_source.html#l00037">PartitioningAlgorithm.h:37</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a46ab95a011736afcf56751531eef2280"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">inciter::Partitioner::m_chedgenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodes &gt; m_chedgenodes</div><div class="ttdoc">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edge...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae0a55fe338da582d0e45f1d79d4252b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae0a55fe338da582d0e45f1d79d4252b9">inciter::Partitioner::readGraph</a></div><div class="ttdeci">void readGraph(tk::ExodusIIMeshReader &amp;er)</div><div class="ttdoc">Read our contiguously-numbered chunk of the mesh graph from file. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00515">Partitioner.C:515</a></div></div>
<div class="ttc" id="structtag_1_1io_html"><div class="ttname"><a href="structtag_1_1io.html">tag::io</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00015">Tags.h:15</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae1ae8d64958a052765f925ddf8aafdcf"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">inciter::Partitioner::m_msumed</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; &gt; m_msumed</div><div class="ttdoc">Mesh edges given by two global mesh node IDs associated to chare IDs bordering the mesh chunk held by...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00324">Partitioner.h:324</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00267">Partitioner.h:267</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a54f7b1a33fb9c30b1d84552b5d5731d0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a54f7b1a33fb9c30b1d84552b5d5731d0">inciter::Partitioner::m_bc</a></div><div class="ttdeci">CProxy_BoundaryConditions m_bc</div><div class="ttdoc">Boundary conditions proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00197">Partitioner.h:197</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa6450dbbf36bf5cb36088bdcec7a4445"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">inciter::Partitioner::m_npe</a></div><div class="ttdeci">std::size_t m_npe</div><div class="ttdoc">Number of fellow PEs to send elem IDs to. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00201">Partitioner.h:201</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac3678a5d05b8c5356840f28568bf3609"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">inciter::Partitioner::m_bface</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_bface</div><div class="ttdoc">Boundary face list from side-sets. m_bface is the list of boundary faces in the side-sets. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00330">Partitioner.h:330</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a1713eab87b3e4e49357e4726f2e5ae9b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">inciter::Partitioner::m_reqNodes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_reqNodes</div><div class="ttdoc">Queue of requested node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00203">Partitioner.h:203</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a872a89f66a6595a32ab64f153b2ebc76"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">inciter::Partitioner::m_ecommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; m_ecommunication</div><div class="ttdoc">Communication map used for distributed mesh edge-node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00257">Partitioner.h:257</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0518feebf27d6038e52a84d3bf83349e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">inciter::Partitioner::m_noffset</a></div><div class="ttdeci">std::size_t m_noffset</div><div class="ttdoc">Counter for number of offsets. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaea6e9f6686a321f6b3f98c7d9a9cac0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">inciter::Partitioner::m_lower</a></div><div class="ttdeci">std::size_t m_lower</div><div class="ttdoc">Lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00229">Partitioner.h:229</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ab889d010f8425c8475f347d70aacdf85"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">inciter::Partitioner::m_linedges</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodes m_linedges</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00271">Partitioner.h:271</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00312">Partitioner.h:312</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5859014223f5ecabec8cd04e37ddb823"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">inciter::Partitioner::m_cost</a></div><div class="ttdeci">tk::real m_cost</div><div class="ttdoc">Communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00291">Partitioner.h:291</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00280">Partitioner.h:280</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a14f06d050b2bce8637646757de64ea87"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">inciter::Partitioner::m_nquery</a></div><div class="ttdeci">std::size_t m_nquery</div><div class="ttdoc">Counter for number of masks of to-be-received global mesh node IDs received. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00219">Partitioner.h:219</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac044bbfdfeabe7324f746641d3b9f5d4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">inciter::Partitioner::m_nodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodechares</div><div class="ttdoc">Map associating a set of chare IDs to old (as in file) global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00296">Partitioner.h:296</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a873290f952719d8df09aa888a37ca623"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">inciter::Partitioner::m_solver</a></div><div class="ttdeci">tk::CProxy_Solver m_solver</div><div class="ttdoc">Linear system solver proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00195">Partitioner.h:195</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a1e8699c4b7b54736ef093032c14366f0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">inciter::Partitioner::m_ecomm</a></div><div class="ttdeci">std::map&lt; int, tk::UnsMesh::Edges &gt; m_ecomm</div><div class="ttdoc">Temporary communication map used to receive global mesh edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00243">Partitioner.h:243</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aafdbad8ad3207d5c7e15a21fab7e86b5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">inciter::Partitioner::m_reqEdges</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, tk::UnsMesh::Edges &gt; &gt; m_reqEdges</div><div class="ttdoc">Queue of requested edge-node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00205">Partitioner.h:205</a></div></div>
<div class="ttc" id="classtk_1_1ctr_1_1_partitioning_algorithm_html_ac20375af3b6b9ade275013bfc3f63241"><div class="ttname"><a href="classtk_1_1ctr_1_1_partitioning_algorithm.html#ac20375af3b6b9ade275013bfc3f63241">tk::ctr::PartitioningAlgorithm::geometric</a></div><div class="ttdeci">bool geometric(PartitioningAlgorithmType m) const</div><div class="ttdef"><b>Definition:</b> <a href="_partitioning_algorithm_8h_source.html#l00087">PartitioningAlgorithm.h:87</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae768c5ce71927c4fb5332095a9901a3e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">inciter::Partitioner::m_scheme</a></div><div class="ttdeci">Scheme m_scheme</div><div class="ttdoc">Discretization scheme. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00199">Partitioner.h:199</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a79c3d9b96c85defca02aec79aabfa9df"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">inciter::Partitioner::m_gelemid</a></div><div class="ttdeci">std::vector&lt; long &gt; m_gelemid</div><div class="ttdoc">Global element IDs we read (our chunk of the mesh) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00223">Partitioner.h:223</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00193">Partitioner.h:193</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00131">Tags.h:131</a></div></div>
<div class="ttc" id="structtag_1_1input_html"><div class="ttname"><a href="structtag_1_1input.html">tag::input</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00016">Tags.h:16</a></div></div>
<div class="ttc" id="structtag_1_1selected_html"><div class="ttname"><a href="structtag_1_1selected.html">tag::selected</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00127">Tags.h:127</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a2c0f3a3caf4995070ec69d648740eec2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a2c0f3a3caf4995070ec69d648740eec2">inciter::Partitioner::computeCentroids</a></div><div class="ttdeci">void computeCentroids(tk::ExodusIIMeshReader &amp;er)</div><div class="ttdoc">Compute element centroid coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00548">Partitioner.C:548</a></div></div>
<div class="ttc" id="structtag_1_1partitioner_html"><div class="ttname"><a href="structtag_1_1partitioner.html">tag::partitioner</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00068">Tags.h:68</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a803838f68fa952cd41d1d9b6e5941c6a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">inciter::Partitioner::m_start</a></div><div class="ttdeci">std::size_t m_start</div><div class="ttdoc">Starting global mesh node ID for node reordering on this PE during mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00208">Partitioner.h:208</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac6b629930d0141cd3edc26f75f1dc001"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac6b629930d0141cd3edc26f75f1dc001">inciter::Partitioner::m_belem</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_belem</div><div class="ttdoc">Boundary element list from side-sets. m_belem is the list of boundary elements corresponding to the b...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00334">Partitioner.h:334</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad1a667401f6ef87d9c25216b9bb50b68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">inciter::Partitioner::m_edgechares</a></div><div class="ttdeci">tk::UnsMesh::EdgeChares m_edgechares</div><div class="ttdoc">Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file) ...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00301">Partitioner.h:301</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad643d4c35b6a56eef0a3a48a588e366d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">inciter::Partitioner::m_upper</a></div><div class="ttdeci">std::size_t m_upper</div><div class="ttdoc">Upper bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00231">Partitioner.h:231</a></div></div>
<div class="ttc" id="structtag_1_1part_html"><div class="ttname"><a href="structtag_1_1part.html">tag::part</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00082">Tags.h:82</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00250">Partitioner.h:250</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5f5a07250189d666de76a9024389a076"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">inciter::Partitioner::m_centroid</a></div><div class="ttdeci">std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; m_centroid</div><div class="ttdoc">Element centroid coordinates of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00225">Partitioner.h:225</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_reader_html"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_reader.html">tk::ExodusIIMeshReader</a></div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_reader_8h_source.html#l00038">ExodusIIMeshReader.h:38</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0996cf378d056d18ab8c89b77bc5e9a1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">inciter::Partitioner::m_ncomm</a></div><div class="ttdeci">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncomm</div><div class="ttdoc">Temporary communication map used to receive global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00237">Partitioner.h:237</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a53c33c64f81408a8b9e1d52aa39a2dbb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a53c33c64f81408a8b9e1d52aa39a2dbb">inciter::Partitioner::m_nbfac</a></div><div class="ttdeci">std::size_t m_nbfac</div><div class="ttdoc">Total number of Boundary faces. m_nbfac is the total number of boundary faces in all side-sets...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00327">Partitioner.h:327</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00023">DG.C:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a8b9025d58c63041880566d29679f3ffd_cgraph.svg" width="100%" height="543"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a97f7bddeceaf53b61833ddc22b8403c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97f7bddeceaf53b61833ddc22b8403c1">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::add </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frompe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Receive mesh node IDs associated to chares we own </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Mesh node indices associated to chare IDs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frompe</td><td>PE call coming from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00219">219</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, and <a class="el" href="_partitioner_8_c_source.html#l00774">pe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : n) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">pe</a>(c.first) == CkMyPe(), <span class="stringliteral">&quot;PE &quot;</span> + std::to_string(CkMyPe()) +</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="stringliteral">&quot; received a chareid-nodeidx-vector pair whose chare it does&quot;</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="stringliteral">&quot; not own&quot;</span> );</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">auto</span>&amp; inpoel = <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>[ c.first ];</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    inpoel.insert( end(inpoel), begin(c.second), end(c.second) );</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  thisProxy[ frompe ].recv();</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a2b552950fcbc37a2481c3a8c3708d945"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">inciter::Partitioner::pe</a></div><div class="ttdeci">int pe(int id) const</div><div class="ttdoc">Return processing element for chare id. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00774">Partitioner.C:774</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a97f7bddeceaf53b61833ddc22b8403c1_cgraph.svg" width="387" height="35"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9ee1971863741cc4afb7cae051197599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee1971863741cc4afb7cae051197599">&#9670;&nbsp;</a></span>bounds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::bounds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute lower and upper bounds of reordered node IDs our PE operates on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01126">1126</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00303">lower()</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_chedgenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00280">m_chfilenodes</a>, and <a class="el" href="_partitioner_8h_source.html#l00231">m_upper</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>
<div class="fragment"><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> = 0;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keyword">using</span> P1 = std::pair&lt; const std::size_t, std::size_t &gt;;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keyword">auto</span> x = std::max_element( begin(c.second), end(c.second),</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;             [](<span class="keyword">const</span> P1&amp; a, <span class="keyword">const</span> P1&amp; b){ return a.first &lt; b.first; } );</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (x-&gt;first &gt; <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>) <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> = x-&gt;first;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keyword">using</span> P2 = std::pair&lt; const tk::UnsMesh::Edge, std::size_t &gt;;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keyword">auto</span> x = std::max_element( begin(c.second), end(c.second),</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;             [](<span class="keyword">const</span> P2&amp; a, <span class="keyword">const</span> P2&amp; b){ return a.second &lt; b.second; } );</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (x-&gt;second &gt; <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>) <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> = x-&gt;second;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// The bounds are the dividers (global mesh point indices) at which the</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// linear system assembly is divided among PEs. However, Hypre and thus</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// Solver expect exclusive upper indices, so we increase the last one by</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// one here. Note that the cost calculation, Partitioner::cost() also</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// expects exclusive upper indices.</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() == CkNumPes()-1) ++<a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// Tell the runtime system that the upper bound has been computed</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  upper_complete();</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// Set lower index for PE 0 as 0</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() == 0) <a class="code" href="classinciter_1_1_partitioner.html#a6ef486986479c66f4480d60834f17a21">lower</a>(0);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// All PEs except the last one send their upper indices as the lower index for</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// PE+1</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() &lt; CkNumPes()-1)</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    thisProxy[ CkMyPe()+1 ].lower( <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> );</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a46ab95a011736afcf56751531eef2280"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">inciter::Partitioner::m_chedgenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodes &gt; m_chedgenodes</div><div class="ttdoc">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edge...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00280">Partitioner.h:280</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6ef486986479c66f4480d60834f17a21"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6ef486986479c66f4480d60834f17a21">inciter::Partitioner::lower</a></div><div class="ttdeci">void lower(std::size_t low)</div><div class="ttdoc">Receive lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00303">Partitioner.C:303</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad643d4c35b6a56eef0a3a48a588e366d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">inciter::Partitioner::m_upper</a></div><div class="ttdeci">std::size_t m_upper</div><div class="ttdoc">Upper bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00231">Partitioner.h:231</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a9ee1971863741cc4afb7cae051197599_cgraph.svg" width="331" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abe5be253e363c6379256728fa26b15af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5be253e363c6379256728fa26b15af">&#9670;&nbsp;</a></span>chareDistribution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; int, 2 &gt; Partitioner::chareDistribution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute chare distribution. </p>
<dl class="section return"><dt>Returns</dt><dd>Chunksize, i.e., number of chares per all PEs except the last one, and the number of chares for my PE</dd></dl>
<p>Chare ids are distributed to PEs in a linear continguous order with the last PE taking the remainder if the number of PEs is not divisible by the number chares. For example, if nchare=7 and npe=3, the chare distribution is PE0: 0 1, PE1: 2 3, and PE2: 4 5 6. As a result of this distribution, all PEs will have their chare-categorized element connectivity filled with the global mesh node IDs associated to the Charm++ chare IDs each PE owns. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00680">680</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00227">m_nchare</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l01256">createWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00639">distribute()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keyword">auto</span> chunksize = <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> / CkNumPes();</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keyword">auto</span> mynchare = chunksize;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() == CkNumPes()-1) mynchare += <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> % CkNumPes();</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">return</span> {{ chunksize, mynchare }};</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a75f146e6739ef42223bad72f84fcff04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75f146e6739ef42223bad72f84fcff04">&#9670;&nbsp;</a></span>chareNodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; Partitioner::chareNodes </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>che</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct global mesh node ids for each chare. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">che</td><td>Chares of elements: array of chare ownership IDs mapping graph elements to Charm++ chares. Size: number of elements in the chunk of the mesh graph on this PE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of global mesh node ids connecting elements owned by each chare on this PE </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The chare IDs, as keys in the map constructed here, are simply the chare IDs returned by the partitioner assigning mesh elements to these chares. It does not mean that these chare IDs are owned on this PE. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00589">589</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_exception_8h_source.html#l00054">ErrChk</a>, <a class="el" href="_partitioner_8h_source.html#l00223">m_gelemid</a>, and <a class="el" href="_partitioner_8h_source.html#l00221">m_tetinpoel</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00102">partition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( che.size() == <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>.size(), <span class="stringliteral">&quot;The size of the global element &quot;</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;          <span class="stringliteral">&quot;index and the chare element arrays must equal&quot;</span> );</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( che.size() == <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>.size()/4, <span class="stringliteral">&quot;The size of the mesh &quot;</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          <span class="stringliteral">&quot;connectivity / 4 and the chare element arrays must equal&quot;</span> );</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Categorize global mesh node ids of elements by chares</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; nodes;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;che.size(); ++e) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">auto</span>&amp; c = nodes[ <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(che[e]) ];</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">for</span> (std::size_t n=0; n&lt;4; ++n) c.push_back( <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>[e*4+n] );</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// Make sure all PEs have chares assigned</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( !nodes.empty(), <span class="stringliteral">&quot;No nodes have been assigned to chares on PE &quot;</span> +</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;          std::to_string(CkMyPe()) );</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// This check should always be done, hence ErrChk and not Assert, as it</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// can result from particular pathological combinations of (1) too large</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="comment">// degree of virtualization, (2) too many PEs, and/or (3) too small of a</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="comment">// mesh and not due to programmer error.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : nodes)</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a>( !c.second.empty(),</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="stringliteral">&quot;Overdecomposition of the mesh is too large compared to the &quot;</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="stringliteral">&quot;number of work units computed based on the degree of &quot;</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="stringliteral">&quot;virtualization desired. As a result, there would be at least &quot;</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="stringliteral">&quot;one work unit with no mesh elements to work on, i.e., nothing &quot;</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="stringliteral">&quot;to do. Solution 1: decrease the virtualization to a lower &quot;</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="stringliteral">&quot;value using the command-line argument &#39;-u&#39;. Solution 2: &quot;</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="stringliteral">&quot;decrease the number processing elements (PEs) using the &quot;</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="stringliteral">&quot;charmrun command-line argument &#39;+pN&#39; where N is the number of &quot;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="stringliteral">&quot;PEs, which implicitly increases the size (and thus decreases &quot;</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            <span class="stringliteral">&quot;the number) of work units.)&quot;</span> );</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">return</span> nodes;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div><div class="ttc" id="_exception_8h_html_ac75cd6578896829d2bfbccf5de71de4f"><div class="ttname"><a href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a></div><div class="ttdeci">#define ErrChk(expr,...)</div><div class="ttdoc">ErrChk macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00054">Exception.h:54</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a79c3d9b96c85defca02aec79aabfa9df"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">inciter::Partitioner::m_gelemid</a></div><div class="ttdeci">std::vector&lt; long &gt; m_gelemid</div><div class="ttdoc">Global element IDs we read (our chunk of the mesh) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00223">Partitioner.h:223</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c0f3a3caf4995070ec69d648740eec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c0f3a3caf4995070ec69d648740eec2">&#9670;&nbsp;</a></span>computeCentroids()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::computeCentroids </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtk_1_1_exodus_i_i_mesh_reader.html">tk::ExodusIIMeshReader</a> &amp;&#160;</td>
          <td class="paramname"><em>er</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute element centroid coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">er</td><td>ExodusII mesh reader </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00548">548</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00069">tk::extents()</a>, <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00225">m_centroid</a>, <a class="el" href="_partitioner_8h_source.html#l00221">m_tetinpoel</a>, <a class="el" href="_exodus_i_i_mesh_reader_8_c_source.html#l00143">tk::ExodusIIMeshReader::readNodes()</a>, and <a class="el" href="_container_util_8h_source.html#l00023">tk::unique()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00029">Partitioner()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// Construct unique global mesh point indices of our chunk</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keyword">auto</span> gid = <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a>( gid );</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// Read node coordinates of our chunk of the mesh elements from file</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keyword">auto</span> ext = <a class="code" href="namespacetk.html#af0de4157a7818da7a9deb1476099bd8d">tk::extents</a>( gid );</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keyword">auto</span> coord = er.<a class="code" href="classtk_1_1_exodus_i_i_mesh_reader.html#a508d91525dae1488235ad461bb553738">readNodes</a>( ext );</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; x = std::get&lt; 0 &gt;( coord );</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; y = std::get&lt; 1 &gt;( coord );</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; z = std::get&lt; 2 &gt;( coord );</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// Make room for element centroid coordinates</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keyword">auto</span>&amp; cx = <a class="code" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a>[0];</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keyword">auto</span>&amp; cy = <a class="code" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a>[1];</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keyword">auto</span>&amp; cz = <a class="code" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a>[2];</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keyword">auto</span> num = <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>.size()/4;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  cx.resize( num );</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  cy.resize( num );</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  cz.resize( num );</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// Compute element centroids for our chunk of the mesh elements</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;num; ++e) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keyword">auto</span> A = <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>[e*4+0] - ext[0];</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keyword">auto</span> B = <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>[e*4+1] - ext[0];</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keyword">auto</span> C = <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>[e*4+2] - ext[0];</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keyword">auto</span> D = <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>[e*4+3] - ext[0];</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    cx[e] = (x[A] + x[B] + x[C] + x[D]) / 4.0;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    cy[e] = (y[A] + y[B] + y[C] + y[D]) / 4.0;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    cz[e] = (z[A] + z[B] + z[C] + z[D]) / 4.0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  contribute( <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1part.html">tag::part</a> &gt;() );</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div><div class="ttc" id="namespacetk_html_af0de4157a7818da7a9deb1476099bd8d"><div class="ttname"><a href="namespacetk.html#af0de4157a7818da7a9deb1476099bd8d">tk::extents</a></div><div class="ttdeci">std::array&lt; T, 2 &gt; extents(const std::vector&lt; T &gt; &amp;vec)</div><div class="ttdoc">Return minimum and maximum values of a vector. </div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00069">ContainerUtil.h:69</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_reader_html_a508d91525dae1488235ad461bb553738"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_reader.html#a508d91525dae1488235ad461bb553738">tk::ExodusIIMeshReader::readNodes</a></div><div class="ttdeci">std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; readNodes(const std::array&lt; std::size_t, 2 &gt; &amp;ext) const</div><div class="ttdoc">Read coordinates of a number of mesh nodes from ExodusII file. </div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_reader_8_c_source.html#l00143">ExodusIIMeshReader.C:143</a></div></div>
<div class="ttc" id="namespacetk_html_a87af1b002bc711716bd170a714bda211"><div class="ttname"><a href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a></div><div class="ttdeci">void unique(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00023">ContainerUtil.h:23</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="structtag_1_1part_html"><div class="ttname"><a href="structtag_1_1part.html">tag::part</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00082">Tags.h:82</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5f5a07250189d666de76a9024389a076"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">inciter::Partitioner::m_centroid</a></div><div class="ttdeci">std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; m_centroid</div><div class="ttdoc">Element centroid coordinates of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00225">Partitioner.h:225</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a2c0f3a3caf4995070ec69d648740eec2_cgraph.svg" width="376" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a928626a30505aac8c3e41b9bf5b001de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a928626a30505aac8c3e41b9bf5b001de">&#9670;&nbsp;</a></span>cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> Partitioner::cost </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute communication cost of linear system merging for our PE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">l</td><td>Lower global node ID this PE works on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u</td><td>Upper global node ID this PE works on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Communication cost for our PE</dd></dl>
<p>The cost is a real number between 0 and 1, defined as the number of mesh points we do not own, i.e., need to send to some other PE, divided by the total number of points we contribute to. The lower the better. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00329">329</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, and <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  std::size_t ownpts = 0, compts = 0;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>) <span class="keywordflow">if</span> (p &gt;= l &amp;&amp; p &lt; u) ++ownpts; <span class="keywordflow">else</span> ++compts;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// Free storage of unique global node IDs chares on our PE will contribute to</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="comment">// as it is no longer needed after computing the communication cost.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_nodeset );</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a><span class="keyword">&gt;</span>(compts) / static_cast&lt;tk::real&gt;(ownpts + compts);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a928626a30505aac8c3e41b9bf5b001de_cgraph.svg" width="286" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af92d0f3116e54c674a8521e3796107f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af92d0f3116e54c674a8521e3796107f9">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create chare array elements on this PE and assign the global mesh element IDs they will operate on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01177">1177</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00329">cost()</a>, <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">inciter::ctr::DiagCG</a>, <a class="el" href="_d_g_8_c_source.html#l00023">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00291">m_cost</a>, <a class="el" href="_partitioner_8h_source.html#l00229">m_lower</a>, <a class="el" href="_partitioner_8h_source.html#l00195">m_solver</a>, <a class="el" href="_partitioner_8h_source.html#l00231">m_upper</a>, and <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">inciter::ctr::MatCG</a>.</p>
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;{</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="comment">//if ( g_inputdeck.get&lt; tag::cmd, tag::feedback &gt;() )</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="comment">//  m_host.pebounds();</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// Initiate asynchronous reduction across all Partitioner objects computing</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="comment">// the average communication cost of merging the linear system</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a> = <a class="code" href="classinciter_1_1_partitioner.html#a928626a30505aac8c3e41b9bf5b001de">cost</a>( <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a>, <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> );</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  contribute( <span class="keyword">sizeof</span>(<a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>), &amp;<a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>, CkReduction::sum_double,</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;              <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1avecost.html">tag::avecost</a> &gt;() );</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// Create worker chare array elements</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a36d8a613c1a4a1946483409fba78deec">createDiscWorkers</a>();</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// Broadcast our bounds of global node IDs to all matrix solvers</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> scheme = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1selected.html">tag::selected</a>, <a class="code" href="structtag_1_1scheme.html">tag::scheme</a> &gt;();</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">if</span> (scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">ctr::SchemeType::MatCG</a> || scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">ctr::SchemeType::DiagCG</a>)</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a>.bounds( CkMyPe(), <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a>, <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> );</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keywordflow">else</span> <span class="comment">// if no MatCG, no matrix solver, continue</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    contribute( <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1coord.html">tag::coord</a> &gt;() );</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;}</div><div class="ttc" id="structtag_1_1avecost_html"><div class="ttname"><a href="structtag_1_1avecost.html">tag::avecost</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00165">Tags.h:165</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">inciter::ctr::SchemeType::DiagCG</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a928626a30505aac8c3e41b9bf5b001de"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a928626a30505aac8c3e41b9bf5b001de">inciter::Partitioner::cost</a></div><div class="ttdeci">tk::real cost(std::size_t l, std::size_t u)</div><div class="ttdoc">Compute communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00329">Partitioner.C:329</a></div></div>
<div class="ttc" id="structtag_1_1coord_html"><div class="ttname"><a href="structtag_1_1coord.html">tag::coord</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00159">Tags.h:159</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaea6e9f6686a321f6b3f98c7d9a9cac0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">inciter::Partitioner::m_lower</a></div><div class="ttdeci">std::size_t m_lower</div><div class="ttdoc">Lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00229">Partitioner.h:229</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">inciter::ctr::SchemeType::MatCG</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5859014223f5ecabec8cd04e37ddb823"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">inciter::Partitioner::m_cost</a></div><div class="ttdeci">tk::real m_cost</div><div class="ttdoc">Communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00291">Partitioner.h:291</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a36d8a613c1a4a1946483409fba78deec"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a36d8a613c1a4a1946483409fba78deec">inciter::Partitioner::createDiscWorkers</a></div><div class="ttdeci">void createDiscWorkers()</div><div class="ttdoc">Create Discretization chare array elements on this PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01205">Partitioner.C:1205</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a873290f952719d8df09aa888a37ca623"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">inciter::Partitioner::m_solver</a></div><div class="ttdeci">tk::CProxy_Solver m_solver</div><div class="ttdoc">Linear system solver proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00195">Partitioner.h:195</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="structtag_1_1selected_html"><div class="ttname"><a href="structtag_1_1selected.html">tag::selected</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00127">Tags.h:127</a></div></div>
<div class="ttc" id="structtag_1_1scheme_html"><div class="ttname"><a href="structtag_1_1scheme.html">tag::scheme</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00069">Tags.h:69</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad643d4c35b6a56eef0a3a48a588e366d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">inciter::Partitioner::m_upper</a></div><div class="ttdeci">std::size_t m_upper</div><div class="ttdoc">Upper bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00231">Partitioner.h:231</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00023">DG.C:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_af92d0f3116e54c674a8521e3796107f9_cgraph.svg" width="579" height="259"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a36d8a613c1a4a1946483409fba78deec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d8a613c1a4a1946483409fba78deec">&#9670;&nbsp;</a></span>createDiscWorkers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::createDiscWorkers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create <a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> chare array elements on this PE. </p>
<p>We create chare array elements by calling the insert() member function, which allows specifying the PE on which the array element is created. and we send each chare array element the chunk of mesh it will operate on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01205">1205</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00680">chareDistribution()</a>, <a class="el" href="_container_util_8h_source.html#l00037">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="_inciter_2_scheme_8h_source.html#l00222">inciter::Scheme::discInsert()</a>, <a class="el" href="_inciter_2_scheme_8h_source.html#l00248">inciter::Scheme::doneDiscInserting()</a>, <a class="el" href="_partitioner_8h_source.html#l00197">m_bc</a>, <a class="el" href="_partitioner_8h_source.html#l00334">m_belem</a>, <a class="el" href="_partitioner_8h_source.html#l00330">m_bface</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_chedgenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00280">m_chfilenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, <a class="el" href="_partitioner_8h_source.html#l00193">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00312">m_msum</a>, <a class="el" href="_partitioner_8h_source.html#l00327">m_nbfac</a>, <a class="el" href="_partitioner_8h_source.html#l00227">m_nchare</a>, <a class="el" href="_partitioner_8h_source.html#l00296">m_nodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>, and <a class="el" href="_partitioner_8h_source.html#l00199">m_scheme</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;{</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keyword">auto</span> dist = <a class="code" href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">chareDistribution</a>();</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;dist[1]; ++c) {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="comment">// Compute chare ID</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keyword">auto</span> cid = CkMyPe() * dist[0] + c;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">// Guard those searches that operate on empty containers in serial</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keyword">typename</span> decltype(<a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>)::mapped_type msum;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>.empty()) msum = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>, cid );</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keyword">typename</span> decltype(<a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>)::mapped_type edno;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>.empty()) edno = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>, cid );</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// Create worker array element</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme.html#a2aefa58af03315351ae25aee4d8239a0">discInsert</a>&lt; <a class="code" href="structtag_1_1elem.html">tag::elem</a> &gt;( cid, <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>, <a class="code" href="classinciter_1_1_partitioner.html#a54f7b1a33fb9c30b1d84552b5d5731d0">m_bc</a>,</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>,cid), msum, <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>,cid),</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      edno, <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a>, <a class="code" href="classinciter_1_1_partitioner.html#a53c33c64f81408a8b9e1d52aa39a2dbb">m_nbfac</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac6b629930d0141cd3edc26f75f1dc001">m_belem</a>, CkMyPe() );</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme.html#a1a3b69519edd430238f27397151df69a">doneDiscInserting</a>&lt; <a class="code" href="structtag_1_1elem.html">tag::elem</a> &gt;( cid );</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// Free storage for unique global mesh nodes chares on our PE will</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// contribute to in a linear system as no longer needed.</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a> );</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// Free storage for unique global mesh edges whose nodes chares on our</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">// PE will contribute to in a linear system as no longer needed.</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a> );</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// Free storage of global mesh node ids associated to chares owned as it</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// is no longer needed after creating the workers.</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a> );</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// Free maps associating old node IDs to new node IDs categorized by</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// chares as it is no longer needed after creating the workers.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a> );</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// Free map storing new node IDs associated to edges categorized by chares</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// owned as no linger needed after creating workers.</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a> );</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// Free storage of map associating a set of chare IDs to old global mesh</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// node IDs as it is no longer needed after creating the workers.</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a> );</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// Free storage of global mesh node IDs associated to chare IDs bordering</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="comment">// the mesh chunk held by and associated to chare IDs we own as it is no</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// longer needed after creating the workers.</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a> );</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a46ab95a011736afcf56751531eef2280"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">inciter::Partitioner::m_chedgenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodes &gt; m_chedgenodes</div><div class="ttdoc">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edge...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a54f7b1a33fb9c30b1d84552b5d5731d0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a54f7b1a33fb9c30b1d84552b5d5731d0">inciter::Partitioner::m_bc</a></div><div class="ttdeci">CProxy_BoundaryConditions m_bc</div><div class="ttdoc">Boundary conditions proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00197">Partitioner.h:197</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac3678a5d05b8c5356840f28568bf3609"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">inciter::Partitioner::m_bface</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_bface</div><div class="ttdoc">Boundary face list from side-sets. m_bface is the list of boundary faces in the side-sets. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00330">Partitioner.h:330</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00312">Partitioner.h:312</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_abe5be253e363c6379256728fa26b15af"><div class="ttname"><a href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">inciter::Partitioner::chareDistribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; chareDistribution() const</div><div class="ttdoc">Compute chare distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00680">Partitioner.C:680</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00280">Partitioner.h:280</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00037">ContainerUtil.h:37</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac044bbfdfeabe7324f746641d3b9f5d4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">inciter::Partitioner::m_nodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodechares</div><div class="ttdoc">Map associating a set of chare IDs to old (as in file) global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00296">Partitioner.h:296</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_html_a1a3b69519edd430238f27397151df69a"><div class="ttname"><a href="classinciter_1_1_scheme.html#a1a3b69519edd430238f27397151df69a">inciter::Scheme::doneDiscInserting</a></div><div class="ttdeci">void doneDiscInserting(Args &amp;&amp;... args)</div><div class="ttdoc">Function to call the doneInserting entry method of an array discproxy (broadcast) ...</div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_scheme_8h_source.html#l00248">Scheme.h:248</a></div></div>
<div class="ttc" id="structtag_1_1elem_html"><div class="ttname"><a href="structtag_1_1elem.html">tag::elem</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00164">Tags.h:164</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae768c5ce71927c4fb5332095a9901a3e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">inciter::Partitioner::m_scheme</a></div><div class="ttdeci">Scheme m_scheme</div><div class="ttdoc">Discretization scheme. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00199">Partitioner.h:199</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00193">Partitioner.h:193</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac6b629930d0141cd3edc26f75f1dc001"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac6b629930d0141cd3edc26f75f1dc001">inciter::Partitioner::m_belem</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_belem</div><div class="ttdoc">Boundary element list from side-sets. m_belem is the list of boundary elements corresponding to the b...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00334">Partitioner.h:334</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_html_a2aefa58af03315351ae25aee4d8239a0"><div class="ttname"><a href="classinciter_1_1_scheme.html#a2aefa58af03315351ae25aee4d8239a0">inciter::Scheme::discInsert</a></div><div class="ttdeci">void discInsert(const CkArrayIndex1D &amp;x, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_scheme_8h_source.html#l00222">Scheme.h:222</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a53c33c64f81408a8b9e1d52aa39a2dbb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a53c33c64f81408a8b9e1d52aa39a2dbb">inciter::Partitioner::m_nbfac</a></div><div class="ttdeci">std::size_t m_nbfac</div><div class="ttdoc">Total number of Boundary faces. m_nbfac is the total number of boundary faces in all side-sets...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00327">Partitioner.h:327</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a36d8a613c1a4a1946483409fba78deec_cgraph.svg" width="395" height="259"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4a0f0f348d320343d28c320f975d2da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0f0f348d320343d28c320f975d2da7">&#9670;&nbsp;</a></span>createWorkers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::createWorkers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create worker chare array elements on this PE. </p>
<p>We create chare array elements by calling the insert() member function, which allows specifying the PE on which the array element is created. and we send each chare array element the chunk of mesh it will operate on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01256">1256</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00680">chareDistribution()</a>, <a class="el" href="_inciter_2_scheme_8h_source.html#l00417">inciter::Scheme::doneInserting()</a>, <a class="el" href="_scheme_base_8h_source.html#l00061">inciter::SchemeBase::get()</a>, <a class="el" href="_inciter_2_scheme_8h_source.html#l00388">inciter::Scheme::insert()</a>, <a class="el" href="_partitioner_8h_source.html#l00199">m_scheme</a>, and <a class="el" href="_partitioner_8h_source.html#l00195">m_solver</a>.</p>
<div class="fragment"><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;{</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keyword">auto</span> dist = <a class="code" href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">chareDistribution</a>();</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;dist[1]; ++c) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="comment">// Compute chare ID</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keyword">auto</span> cid = CkMyPe() * dist[0] + c;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// Make sure (bound) base is already created and accessible</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme_base.html#a346149e6f93b08edc96a7515d3411a02">get</a>()[cid].ckLocal() != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;About to pass nullptr&quot;</span> );</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// Create worker array element</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme.html#ab8698eca0e8891b9bd8d949f13b95f04">insert</a>&lt; <a class="code" href="structtag_1_1elem.html">tag::elem</a> &gt;( cid, <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme_base.html#a346149e6f93b08edc96a7515d3411a02">get</a>(), <a class="code" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a>, CkMyPe() );</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme.html#a8e63a2ffee6045db83449b5c2d3bcd69">doneInserting</a>&lt; <a class="code" href="structtag_1_1elem.html">tag::elem</a> &gt;( cid );</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_abe5be253e363c6379256728fa26b15af"><div class="ttname"><a href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">inciter::Partitioner::chareDistribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; chareDistribution() const</div><div class="ttdoc">Compute chare distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00680">Partitioner.C:680</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a873290f952719d8df09aa888a37ca623"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">inciter::Partitioner::m_solver</a></div><div class="ttdeci">tk::CProxy_Solver m_solver</div><div class="ttdoc">Linear system solver proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00195">Partitioner.h:195</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_base_html_a346149e6f93b08edc96a7515d3411a02"><div class="ttname"><a href="classinciter_1_1_scheme_base.html#a346149e6f93b08edc96a7515d3411a02">inciter::SchemeBase::get</a></div><div class="ttdeci">CProxy_Discretization &amp; get() noexcept</div><div class="ttdoc">Get reference to discretization proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_scheme_base_8h_source.html#l00061">SchemeBase.h:61</a></div></div>
<div class="ttc" id="structtag_1_1elem_html"><div class="ttname"><a href="structtag_1_1elem.html">tag::elem</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00164">Tags.h:164</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae768c5ce71927c4fb5332095a9901a3e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">inciter::Partitioner::m_scheme</a></div><div class="ttdeci">Scheme m_scheme</div><div class="ttdoc">Discretization scheme. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00199">Partitioner.h:199</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_html_a8e63a2ffee6045db83449b5c2d3bcd69"><div class="ttname"><a href="classinciter_1_1_scheme.html#a8e63a2ffee6045db83449b5c2d3bcd69">inciter::Scheme::doneInserting</a></div><div class="ttdeci">void doneInserting(Args &amp;&amp;... args)</div><div class="ttdoc">Function to call the doneInserting entry method of an array proxy (broadcast) </div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_scheme_8h_source.html#l00417">Scheme.h:417</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_html_ab8698eca0e8891b9bd8d949f13b95f04"><div class="ttname"><a href="classinciter_1_1_scheme.html#ab8698eca0e8891b9bd8d949f13b95f04">inciter::Scheme::insert</a></div><div class="ttdeci">void insert(const CkArrayIndex1D &amp;x, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_scheme_8h_source.html#l00388">Scheme.h:388</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a4a0f0f348d320343d28c320f975d2da7_cgraph.svg" width="411" height="196"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a1dd0b4d238018cb77c071d752a8c1a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dd0b4d238018cb77c071d752a8c1a2e">&#9670;&nbsp;</a></span>distribute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::distribute </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Distribute global mesh node IDs to their owner PEs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Global mesh node IDs connecting elements associated to chare IDs on this PE resulting from partitioning the mesh elements. Note that this data is moved in. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00639">639</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00680">chareDistribution()</a>, <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00201">m_npe</a>, and <a class="el" href="_partitioner_8_c_source.html#l00774">pe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00102">partition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;{</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keyword">auto</span> dist = <a class="code" href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">chareDistribution</a>();</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;dist[1]; ++c) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keyword">auto</span> chid = CkMyPe() * dist[0] + c;   <span class="comment">// compute owned chare ID</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = n.find( chid );       <span class="comment">// attempt to find its nodes</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (it != end(n)) {                   <span class="comment">// if found</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>.insert( *it );           <span class="comment">// move over owned key-value pairs</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      n.erase( it );                      <span class="comment">// remove chare ID and nodes</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( n.find(chid) == end(n), <span class="stringliteral">&quot;Not all owned node IDs stored&quot;</span> );</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="comment">// Construct export map associating those map entries (mesh node indices</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// associated to chare IDs) owned by chares we do not own. Outer key: PE</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// to export to, inner key: chare ID, value: vector of global node IDs</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  std::unordered_map&lt; int,</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &gt; exp;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; c : n) exp[ <a class="code" href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">pe</a>(c.first) ].insert( std::move(c) );</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// Export chare IDs and node IDs we do not own to fellow PEs</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a> = exp.size();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : exp)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    thisProxy[ p.first ].add( CkMyPe(), p.second );</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">//if ( g_inputdeck.get&lt; tag::cmd, tag::feedback &gt;() )</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="comment">//  m_host.pedistributed();</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a> == 0) contribute( <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1distributed.html">tag::distributed</a> &gt;() );</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a2b552950fcbc37a2481c3a8c3708d945"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">inciter::Partitioner::pe</a></div><div class="ttdeci">int pe(int id) const</div><div class="ttdoc">Return processing element for chare id. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00774">Partitioner.C:774</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa6450dbbf36bf5cb36088bdcec7a4445"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">inciter::Partitioner::m_npe</a></div><div class="ttdeci">std::size_t m_npe</div><div class="ttdoc">Number of fellow PEs to send elem IDs to. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00201">Partitioner.h:201</a></div></div>
<div class="ttc" id="structtag_1_1distributed_html"><div class="ttname"><a href="structtag_1_1distributed.html">tag::distributed</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00160">Tags.h:160</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_abe5be253e363c6379256728fa26b15af"><div class="ttname"><a href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">inciter::Partitioner::chareDistribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; chareDistribution() const</div><div class="ttdoc">Compute chare distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00680">Partitioner.C:680</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a1dd0b4d238018cb77c071d752a8c1a2e_cgraph.svg" width="355" height="98"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a02b9184c4c34f337693bb1e80b858b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02b9184c4c34f337693bb1e80b858b12">&#9670;&nbsp;</a></span>flatten()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::flatten </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare owned mesh node IDs for reordering. </p>
<p>The 'flatten' is used here as a concatenation of a data structure that stores date categorized by chares owned on this PE. The result of the flattening is thus a simpler data structure that is no longer categorized by (or associated to) chares. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00248">248</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00680">chareDistribution()</a>, <a class="el" href="_d_g_8_c_source.html#l00023">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_chedgenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00301">m_edgechares</a>, <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, <a class="el" href="_partitioner_8h_source.html#l00193">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00296">m_nodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>, <a class="el" href="_partitioner_8_c_source.html#l00861">refine()</a>, <a class="el" href="namespaceinciter_1_1ctr.html#ae9ced82015a29c39b2f5280867559fe4a891f35a29c3d51d02ffd42dd6dcc69b2">inciter::ctr::UNIFORM</a>, and <a class="el" href="_container_util_8h_source.html#l00023">tk::unique()</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// Optionally refine mesh if requested</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> ir = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1selected.html">tag::selected</a>, <a class="code" href="structtag_1_1initialamr.html">tag::initialamr</a> &gt;();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">if</span> (ir == <a class="code" href="namespaceinciter_1_1ctr.html#ae9ced82015a29c39b2f5280867559fe4a891f35a29c3d51d02ffd42dd6dcc69b2">ctr::InitialAMRType::UNIFORM</a>) <a class="code" href="classinciter_1_1_partitioner.html#a66ce5723b0c2062be7a16ff93fd99001">refine</a>();</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Make sure we are not fed garbage</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>.size() ==</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keyword">static_cast&lt;</span> std::size_t <span class="keyword">&gt;</span>( <a class="code" href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">chareDistribution</a>()[1] ),</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          <span class="stringliteral">&quot;Global mesh nodes ids associated to chares on PE &quot;</span> +</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          std::to_string( CkMyPe() ) + <span class="stringliteral">&quot; is incomplete&quot;</span> );</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// Collect chare IDs we own associated to old global mesh node IDs</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : c.second)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a>[p].push_back( c.first );</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// Make chare IDs (associated to old global mesh node IDs) unique</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a>) <a class="code" href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a>( c.second );</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Collect chare IDs we own associated to edges</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : c.second)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a>[ e.first ].push_back( c.first );</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// Make chare IDs (associated to edges) unique</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a>) <a class="code" href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a>( c.second );</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// Flatten node IDs of elements our chares operate on</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : m_chinpoel)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : c.second)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.insert( i );</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// Flatten edges of elements our chares operate on</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : m_chedgenodes)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : c.second)</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>.insert( e.first );</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() )</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.peflattened();</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// Signal host that we are ready for computing the communication map,</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// required for parallel distributed global mesh node reordering</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  contribute( <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1flattened.html">tag::flattened</a> &gt;() );</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a46ab95a011736afcf56751531eef2280"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">inciter::Partitioner::m_chedgenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodes &gt; m_chedgenodes</div><div class="ttdoc">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edge...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="structtag_1_1initialamr_html"><div class="ttname"><a href="structtag_1_1initialamr.html">tag::initialamr</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00070">Tags.h:70</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ae9ced82015a29c39b2f5280867559fe4a891f35a29c3d51d02ffd42dd6dcc69b2"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ae9ced82015a29c39b2f5280867559fe4a891f35a29c3d51d02ffd42dd6dcc69b2">inciter::ctr::InitialAMRType::UNIFORM</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a66ce5723b0c2062be7a16ff93fd99001"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a66ce5723b0c2062be7a16ff93fd99001">inciter::Partitioner::refine</a></div><div class="ttdeci">void refine()</div><div class="ttdoc">Uniformly refine our mesh replacing each tetrahedron with 8 new ones. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00861">Partitioner.C:861</a></div></div>
<div class="ttc" id="namespacetk_html_a87af1b002bc711716bd170a714bda211"><div class="ttname"><a href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a></div><div class="ttdeci">void unique(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00023">ContainerUtil.h:23</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_abe5be253e363c6379256728fa26b15af"><div class="ttname"><a href="classinciter_1_1_partitioner.html#abe5be253e363c6379256728fa26b15af">inciter::Partitioner::chareDistribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; chareDistribution() const</div><div class="ttdoc">Compute chare distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00680">Partitioner.C:680</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac044bbfdfeabe7324f746641d3b9f5d4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">inciter::Partitioner::m_nodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodechares</div><div class="ttdoc">Map associating a set of chare IDs to old (as in file) global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00296">Partitioner.h:296</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="structtag_1_1flattened_html"><div class="ttname"><a href="structtag_1_1flattened.html">tag::flattened</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00161">Tags.h:161</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00193">Partitioner.h:193</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00131">Tags.h:131</a></div></div>
<div class="ttc" id="structtag_1_1selected_html"><div class="ttname"><a href="structtag_1_1selected.html">tag::selected</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00127">Tags.h:127</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad1a667401f6ef87d9c25216b9bb50b68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">inciter::Partitioner::m_edgechares</a></div><div class="ttdeci">tk::UnsMesh::EdgeChares m_edgechares</div><div class="ttdoc">Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file) ...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00301">Partitioner.h:301</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00030">Tags.h:30</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00023">DG.C:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a02b9184c4c34f337693bb1e80b858b12_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ad334fe5a4acd071eaeedd859533e4857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad334fe5a4acd071eaeedd859533e4857">&#9670;&nbsp;</a></span>gather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::gather </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start gathering global node IDs this PE will need to receive (instead of assign) during reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00352">352</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, and <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  thisProxy.query( CkMyPe(), <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>, <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a> );</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b3d8b93a4d1e0be973cb29e4b2f99da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3d8b93a4d1e0be973cb29e4b2f99da">&#9670;&nbsp;</a></span>generate_compact_inpoel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::generate_compact_inpoel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate compact mesh connectivity. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00827">827</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, and <a class="el" href="_partitioner_8h_source.html#l00221">m_tetinpoel</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00861">refine()</a>.</p>
<div class="fragment"><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// Concatenate mesh connectivities of our chares</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>(<a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  std::size_t nn = 0;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// M_chinpoel contains an array of size chars.</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// Each slot in the array contains &quot;connectivity&quot;</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// This is a vector of size_t. This is tets?</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// This loop counts up the total number of elements in all lsots of</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// m_chinpoel</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;c : <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>)</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      nn += c.second.size();</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">// Resize global array to avoid resize later</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>.resize(nn);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// Flatten out m_chinpoel into m_tetinpoel</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordtype">size_t</span> n = 0;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;c : m_chinpoel) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : c.second) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;          <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>[n++] = i;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a8b3d8b93a4d1e0be973cb29e4b2f99da_cgraph.svg" width="342" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6ef486986479c66f4480d60834f17a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef486986479c66f4480d60834f17a21">&#9670;&nbsp;</a></span>lower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::lower </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>low</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive lower bound of node IDs our PE operates on after reordering. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">low</td><td>Lower bound of node IDs assigned to us </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00303">303</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00229">m_lower</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01126">bounds()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a> = low;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  lower_complete();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aaea6e9f6686a321f6b3f98c7d9a9cac0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">inciter::Partitioner::m_lower</a></div><div class="ttdeci">std::size_t m_lower</div><div class="ttdoc">Lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00229">Partitioner.h:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f6b4bf1dacf464f715ff0c45104d13e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f6b4bf1dacf464f715ff0c45104d13e">&#9670;&nbsp;</a></span>mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::mask </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>cn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a11a7aae0f8c2d3292b9b7e3f5ea50c9c">tk::UnsMesh::EdgeChares</a> &amp;&#160;</td>
          <td class="paramname"><em>ce</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive mask of to-be-received global mesh node IDs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>The PE uniquely assigns the node IDs marked listed in ch </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cn</td><td>Vector containing the set of potentially multiple chare IDs that we own (i.e., contribute to) for all of our node IDs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ce</td><td>Map associating a vector of chare IDs to edges (at which we added nodes during initial mesh refinement)</td></tr>
  </table>
  </dd>
</dl>
<p>Note that every PE will call this function, since <a class="el" href="classinciter_1_1_partitioner.html#a715bc4d4675333f1ba062ee83d3cb34e" title="Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those fr...">query()</a> was called in a broadcast fashion and <a class="el" href="classinciter_1_1_partitioner.html#a715bc4d4675333f1ba062ee83d3cb34e" title="Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those fr...">query()</a> answers to every PE once. This is more efficient than calling only the PEs from which we would have to receive results from. Thus the incoming results are only interesting from PEs with lower IDs than ours. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00402">402</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="_partitioner_8h_source.html#l00243">m_ecomm</a>, <a class="el" href="_partitioner_8h_source.html#l00257">m_ecommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00301">m_edgechares</a>, <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, <a class="el" href="_partitioner_8h_source.html#l00312">m_msum</a>, <a class="el" href="_partitioner_8h_source.html#l00324">m_msumed</a>, <a class="el" href="_partitioner_8h_source.html#l00237">m_ncomm</a>, <a class="el" href="_partitioner_8h_source.html#l00250">m_ncommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00296">m_nodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>, <a class="el" href="_partitioner_8h_source.html#l00219">m_nquery</a>, and <a class="el" href="_container_util_8h_source.html#l00053">tk::ref_find()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;{</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// Store the old global mesh node IDs associated to chare IDs bordering</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// the mesh chunk held by and associated to chare IDs we own</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; h : cn) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; chares = <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a>, h.first );</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : chares) {           <span class="comment">// surrounded chares</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keyword">auto</span>&amp; sch = <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>[c];</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> s : h.second)         <span class="comment">// surrounding chares</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (s != c) sch[ s ].insert( h.first );</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// Store the edges associated to chare IDs bordering the mesh chunk held</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">// by and associated to chare IDs we own</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; h : ce) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; chares = <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a>, h.first );</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : chares) {           <span class="comment">// surrounded chares</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keyword">auto</span>&amp; sch = <a class="code" href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">m_msumed</a>[c];</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> s : h.second)         <span class="comment">// surrounding chares</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">if</span> (s != c) sch[ s ].insert( h.first );</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// Associate global mesh node IDs to lower PEs we will need to receive</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// from during node reordering. The choice of associated container is</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// std::map, which is ordered (vs. unordered, hash-map). This is required</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// by the following operation that makes the mesh node IDs unique in the</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// communication map. (We are called in an unordered fashion, so we need</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// to collect from all PEs and then we need to make the node IDs unique,</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// keeping only the lowest PEs a node ID is associated with.)</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">if</span> (p &lt; CkMyPe()) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keyword">auto</span>&amp; <span class="keywordtype">id</span> = <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>[ p ];</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; h : cn) <span class="keywordtype">id</span>.insert( h.first );</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keyword">auto</span>&amp; ed = <a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>[ p ];</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; h : ce) ed.insert( h.first );</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">m_nquery</a> == static_cast&lt;std::size_t&gt;(CkNumPes())) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// Make sure we have received all we need</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.size() == <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(CkMyPe()),</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="stringliteral">&quot;Communication map size on PE &quot;</span> +</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            std::to_string(CkMyPe()) + <span class="stringliteral">&quot; must equal &quot;</span> +</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            std::to_string(CkMyPe()) );</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>.size() == <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(CkMyPe()),</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="stringliteral">&quot;Communication map size on PE &quot;</span> +</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            std::to_string(CkMyPe()) + <span class="stringliteral">&quot; must equal &quot;</span> +</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            std::to_string(CkMyPe()) );</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// Fill new hash-map, keeping only unique node IDs obtained from the</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// lowest possible PEs</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c=<a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.cbegin(); c!=<a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.cend(); ++c) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keyword">auto</span>&amp; n = <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>[ c-&gt;first ];</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> j : c-&gt;second)</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> (std::none_of( <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.cbegin(), c,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;             [ j ]( <span class="keyword">const</span> <span class="keyword">typename</span> decltype(<a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>)::value_type&amp; s )</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;             { <span class="keywordflow">return</span> s.second.find(j) != end(s.second); } )) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          n.insert(j);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">if</span> (n.empty()) <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>.erase( c-&gt;first );</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c=<a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>.cbegin(); c!=<a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>.cend(); ++c) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keyword">auto</span>&amp; e = <a class="code" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a>[ c-&gt;first ];</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; j : c-&gt;second)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> (std::none_of( <a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>.cbegin(), c,</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;             [ &amp;j ]( <span class="keyword">const</span> <span class="keyword">typename</span> decltype(<a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a>)::value_type&amp; s )</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;             { <span class="keywordflow">return</span> s.second.find(j) != end(s.second); } )) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          e.insert(j);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (e.empty()) <a class="code" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a>.erase( c-&gt;first );</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// Free storage of temporary communication map used to receive global</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// mesh node IDs as it is no longer needed once the final communication</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// map is generated.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a> );</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="comment">// Free storage of temporary communication map used to receive global</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// mesh edge-node IDs as it is no longer needed once the final</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// communication map is generated.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">m_ecomm</a> );</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// Count up total number of nodes and (nodes associated to edges) we</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// will need receive during reordering</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    std::size_t nrecv = 0, erecv = 0;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; u : <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>) nrecv += u.second.size();</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a>) erecv += e.second.size();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">//if ( g_inputdeck.get&lt; tag::cmd, tag::feedback &gt;() )</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">//  m_host.pemask();</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// Compute number of mesh node IDs we will assign IDs to</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keyword">auto</span> nuniq = <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.size() - nrecv + <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>.size() - erecv;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// Start computing PE offsets for node reordering</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    thisProxy.offset( CkMyPe(), nuniq );</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_ae1ae8d64958a052765f925ddf8aafdcf"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">inciter::Partitioner::m_msumed</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; &gt; m_msumed</div><div class="ttdoc">Mesh edges given by two global mesh node IDs associated to chare IDs bordering the mesh chunk held by...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00324">Partitioner.h:324</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a872a89f66a6595a32ab64f153b2ebc76"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">inciter::Partitioner::m_ecommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; m_ecommunication</div><div class="ttdoc">Communication map used for distributed mesh edge-node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00257">Partitioner.h:257</a></div></div>
<div class="ttc" id="namespacetk_html_ab2aac5f0fd93d5119cfe50a39f3515c9"><div class="ttname"><a href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a></div><div class="ttdeci">auto ref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00053">ContainerUtil.h:53</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00312">Partitioner.h:312</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a14f06d050b2bce8637646757de64ea87"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">inciter::Partitioner::m_nquery</a></div><div class="ttdeci">std::size_t m_nquery</div><div class="ttdoc">Counter for number of masks of to-be-received global mesh node IDs received. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00219">Partitioner.h:219</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac044bbfdfeabe7324f746641d3b9f5d4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">inciter::Partitioner::m_nodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodechares</div><div class="ttdoc">Map associating a set of chare IDs to old (as in file) global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00296">Partitioner.h:296</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a1e8699c4b7b54736ef093032c14366f0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1e8699c4b7b54736ef093032c14366f0">inciter::Partitioner::m_ecomm</a></div><div class="ttdeci">std::map&lt; int, tk::UnsMesh::Edges &gt; m_ecomm</div><div class="ttdoc">Temporary communication map used to receive global mesh edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00243">Partitioner.h:243</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad1a667401f6ef87d9c25216b9bb50b68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">inciter::Partitioner::m_edgechares</a></div><div class="ttdeci">tk::UnsMesh::EdgeChares m_edgechares</div><div class="ttdoc">Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file) ...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00301">Partitioner.h:301</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00250">Partitioner.h:250</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0996cf378d056d18ab8c89b77bc5e9a1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">inciter::Partitioner::m_ncomm</a></div><div class="ttdeci">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncomm</div><div class="ttdoc">Temporary communication map used to receive global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00237">Partitioner.h:237</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a9f6b4bf1dacf464f715ff0c45104d13e_cgraph.svg" width="430" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5e0de37f14356cd4d37cb843bdb6bbb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e0de37f14356cd4d37cb843bdb6bbb4">&#9670;&nbsp;</a></span>neworder() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::neworder </td>
          <td>(</td>
          <td class="paramtype">const std::unordered_map&lt; std::size_t, std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>nd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive new (reordered) global node IDs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nd</td><td>Map associating new to old node IDs </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00189">189</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00267">m_linnodes</a>, and <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Signal to the runtime system that we have participated in reordering</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  participated_complete();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// Store new node IDs associated to old ones</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : nd) <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>[ p.first ] = p.second;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// If all our nodes have new IDs assigned, signal that to the runtime</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>.size() == <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.size()) nodesreorder_complete();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00267">Partitioner.h:267</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac107d85120763d1c4a8e9597ff6eaea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac107d85120763d1c4a8e9597ff6eaea5">&#9670;&nbsp;</a></span>neworder() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::neworder </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> &amp;&#160;</td>
          <td class="paramname"><em>ed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive new global node IDs associated to edge-nodes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ed</td><td>Map associating node IDs to edges </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00204">204</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, and <a class="el" href="_partitioner_8h_source.html#l00271">m_linedges</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// Signal to the runtime system that we have participated in reordering</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  participated_complete();</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// Store node IDs associated to edge</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : ed) <a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>[ e.first ] = e.second;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// If all our edges have new IDs assigned, signal that to the runtime</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>.size() == <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>.size()) edgesreorder_complete();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_ab889d010f8425c8475f347d70aacdf85"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">inciter::Partitioner::m_linedges</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodes m_linedges</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00271">Partitioner.h:271</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a766863eaeba226362f627495ca2bc578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a766863eaeba226362f627495ca2bc578">&#9670;&nbsp;</a></span>offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::offset </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive number of uniquely assigned global mesh node IDs from lower PEs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>PE ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u</td><td>Number of mesh node IDs PE p will assign IDs to</td></tr>
  </table>
  </dd>
</dl>
<p>This function computes the offset each PE will need to start assigning its new node IDs from (for those nodes that are not assigned new IDs by any PEs with lower indices). The offset for a PE is the offset for the previous PE plus the number of node IDs the previous PE (uniquely) assigns new IDs for minus the number of node IDs the previous PE receives from others (lower PEs). This is computed here in a parallel/distributed fashion by each PE sending its number of node IDs (that it uniquely assigns) to all PEs. Note that each PE would only need to send this information to higher PEs, but instead this function is called in a broadcast fashion, because that is more efficient than individual calls to only the higher PEs. Therefore when computing the offsets, we only count the lower PEs. When this is done, we have the precise communication map as well as the start offset on all PEs and so we can start the distributed global mesh node ID reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00133">133</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00213">m_noffset</a>, <a class="el" href="_partitioner_8h_source.html#l00208">m_start</a>, and <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (p &lt; CkMyPe()) <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a> += u;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">m_noffset</a> == static_cast&lt;std::size_t&gt;(CkNumPes())) <a class="code" href="classinciter_1_1_partitioner.html#a96d91369a111de7aa4442f27926751cc">reorder</a>();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a96d91369a111de7aa4442f27926751cc"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a96d91369a111de7aa4442f27926751cc">inciter::Partitioner::reorder</a></div><div class="ttdeci">void reorder()</div><div class="ttdoc">Reorder global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00701">Partitioner.C:701</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0518feebf27d6038e52a84d3bf83349e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">inciter::Partitioner::m_noffset</a></div><div class="ttdeci">std::size_t m_noffset</div><div class="ttdoc">Counter for number of offsets. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a803838f68fa952cd41d1d9b6e5941c6a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">inciter::Partitioner::m_start</a></div><div class="ttdeci">std::size_t m_start</div><div class="ttdoc">Starting global mesh node ID for node reordering on this PE during mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00208">Partitioner.h:208</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a766863eaeba226362f627495ca2bc578_cgraph.svg" width="331" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af0ed691bfaf90f34d17ae88b4042c868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0ed691bfaf90f34d17ae88b4042c868">&#9670;&nbsp;</a></span>partition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::partition </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nchare</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partition the computational mesh. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nchare</td><td>Number of parts the mesh will be partitioned into </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00102">102</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00589">chareNodes()</a>, <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="_partitioner_8_c_source.html#l00639">distribute()</a>, <a class="el" href="_d_g_8_c_source.html#l00023">inciter::g_inputdeck</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00101">tk::zoltan::geomPartMesh()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00225">m_centroid</a>, <a class="el" href="_partitioner_8h_source.html#l00223">m_gelemid</a>, <a class="el" href="_partitioner_8h_source.html#l00227">m_nchare</a>, and <a class="el" href="_partitioner_8h_source.html#l00221">m_tetinpoel</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> = nchare;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> alg = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1selected.html">tag::selected</a>, <a class="code" href="structtag_1_1partitioner.html">tag::partitioner</a> &gt;();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> che = <a class="code" href="namespacetk_1_1zoltan.html#af211161a3f36764997bb32651484e597">tk::zoltan::geomPartMesh</a>( alg,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                             <a class="code" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a>,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                             <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                             <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>.size()/4,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                             nchare );</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">//if ( g_inputdeck.get&lt; tag::cmd, tag::feedback &gt;() )</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">//  m_host.pepartitioned();</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( che.size() == <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>.size(), <span class="stringliteral">&quot;Size of ownership array does &quot;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;          <span class="stringliteral">&quot;not equal the number of mesh graph elements&quot;</span> );</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// Construct global mesh node ids for each chare and distribute</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a1dd0b4d238018cb77c071d752a8c1a2e">distribute</a>( <a class="code" href="classinciter_1_1_partitioner.html#a75f146e6739ef42223bad72f84fcff04">chareNodes</a>(che) );</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// Free storage of element connectivity, element centroids, and element</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// IDs as they are no longer needed after the mesh partitioning.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a> );</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">m_centroid</a> );</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a1dd0b4d238018cb77c071d752a8c1a2e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1dd0b4d238018cb77c071d752a8c1a2e">inciter::Partitioner::distribute</a></div><div class="ttdeci">void distribute(std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;n)</div><div class="ttdoc">Distribute global mesh node IDs to their owner PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00639">Partitioner.C:639</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_af211161a3f36764997bb32651484e597"><div class="ttname"><a href="namespacetk_1_1zoltan.html#af211161a3f36764997bb32651484e597">tk::zoltan::geomPartMesh</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; geomPartMesh(tk::ctr::PartitioningAlgorithmType algorithm, const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;centroid, const std::vector&lt; long &gt; &amp;elemid, std::size_t nelem, int npart)</div><div class="ttdoc">Partition mesh using Zoltan2 with a geometric partitioner, such as RCB, RIB. </div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00101">ZoltanInterOp.C:101</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a75f146e6739ef42223bad72f84fcff04"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a75f146e6739ef42223bad72f84fcff04">inciter::Partitioner::chareNodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; chareNodes(const std::vector&lt; std::size_t &gt; &amp;che) const</div><div class="ttdoc">Construct global mesh node ids for each chare. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00589">Partitioner.C:589</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a79c3d9b96c85defca02aec79aabfa9df"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">inciter::Partitioner::m_gelemid</a></div><div class="ttdeci">std::vector&lt; long &gt; m_gelemid</div><div class="ttdoc">Global element IDs we read (our chunk of the mesh) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00223">Partitioner.h:223</a></div></div>
<div class="ttc" id="structtag_1_1selected_html"><div class="ttname"><a href="structtag_1_1selected.html">tag::selected</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00127">Tags.h:127</a></div></div>
<div class="ttc" id="structtag_1_1partitioner_html"><div class="ttname"><a href="structtag_1_1partitioner.html">tag::partitioner</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00068">Tags.h:68</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5f5a07250189d666de76a9024389a076"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5f5a07250189d666de76a9024389a076">inciter::Partitioner::m_centroid</a></div><div class="ttdeci">std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; m_centroid</div><div class="ttdoc">Element centroid coordinates of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00225">Partitioner.h:225</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00023">DG.C:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_af0ed691bfaf90f34d17ae88b4042c868_cgraph.svg" width="584" height="259"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2b552950fcbc37a2481c3a8c3708d945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b552950fcbc37a2481c3a8c3708d945">&#9670;&nbsp;</a></span>pe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Partitioner::pe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return processing element for chare id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Chare id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PE that creates the chare</dd></dl>
<p>This is computed based on a simple contiguous linear distribution of chare ids to PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00774">774</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, and <a class="el" href="_partitioner_8h_source.html#l00227">m_nchare</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00219">add()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00639">distribute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;{</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> &gt; 0, <span class="stringliteral">&quot;Number of chares must be a positive number&quot;</span> );</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keyword">auto</span> p = <span class="keywordtype">id</span> / (<a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> / CkNumPes());</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <span class="keywordflow">if</span> (p &gt;= CkNumPes()) p = CkNumPes()-1;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( p &lt; CkNumPes(), <span class="stringliteral">&quot;Assigning to nonexistent PE&quot;</span> );</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2597580e502900fcc96109e86da060b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2597580e502900fcc96109e86da060b9">&#9670;&nbsp;</a></span>prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::prepare </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Associate new node IDs to old ones and return them to the requestor(s) </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00791">791</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00037">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="_partitioner_8h_source.html#l00271">m_linedges</a>, <a class="el" href="_partitioner_8h_source.html#l00267">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00205">m_reqEdges</a>, and <a class="el" href="_partitioner_8h_source.html#l00203">m_reqNodes</a>.</p>
<div class="fragment"><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;{</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// Signal to the runtime system that we have participated in reordering</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  participated_complete();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// Find and return new node IDs to sender</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : <a class="code" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a>) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    std::unordered_map&lt; std::size_t, std::size_t &gt; n;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : r.second) n[ p ] = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, p );</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    thisProxy[ r.first ].neworder( n );</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( n );</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_reqNodes ); <span class="comment">// Clear queue of requests just fulfilled</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// Find and return new node IDs associated to edges to sender</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : <a class="code" href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">m_reqEdges</a>) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> n;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : r.second) n[ e ] = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>, e );</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    thisProxy[ r.first ].neworder( n );</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( n );</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_reqEdges ); <span class="comment">// Clear queue of requests just fulfilled</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  wait4prep();      <span class="comment">// Re-enable SDAG wait for preparing new node requests</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// Re-enable trigger signaling that reordering of owned node IDs are</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// complete right away</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  reorderowned_complete();</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00267">Partitioner.h:267</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a1713eab87b3e4e49357e4726f2e5ae9b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">inciter::Partitioner::m_reqNodes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_reqNodes</div><div class="ttdoc">Queue of requested node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00203">Partitioner.h:203</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ab889d010f8425c8475f347d70aacdf85"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">inciter::Partitioner::m_linedges</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodes m_linedges</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00271">Partitioner.h:271</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00037">ContainerUtil.h:37</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aafdbad8ad3207d5c7e15a21fab7e86b5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">inciter::Partitioner::m_reqEdges</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, tk::UnsMesh::Edges &gt; &gt; m_reqEdges</div><div class="ttdoc">Queue of requested edge-node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00205">Partitioner.h:205</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a839b6c15c42461bb067924eb8fb95b42"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a></div><div class="ttdeci">std::unordered_map&lt; Edge, std::size_t, EdgeHash, EdgeEq &gt; EdgeNodes</div><div class="ttdoc">Map associating IDs of mesh nodes to edges. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00047">UnsMesh.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a2597580e502900fcc96109e86da060b9_cgraph.svg" width="291" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a715bc4d4675333f1ba062ee83d3cb34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a715bc4d4675333f1ba062ee83d3cb34e">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::query </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>nodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &amp;&#160;</td>
          <td class="paramname"><em>edges</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those from during reordering. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>Querying PE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nodes</td><td>List of global mesh node IDs to query </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">edges</td><td>List of edges to query</td></tr>
  </table>
  </dd>
</dl>
<p>Note that every PE calls this function in a broadcast fashion, including our own. However, to compute the correct result, this would only be necessary for PEs whose ID is higher than ours. However, the broadcast (calling everyone) is more efficient. This also results in a simpler logic, because every PE goes through this single call path. The returned mask is simply a boolean array signaling if the node ID is found (owned). </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00362">362</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00037">tk::cref_find()</a>, <a class="el" href="_partitioner_8h_source.html#l00301">m_edgechares</a>, <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, <a class="el" href="_partitioner_8h_source.html#l00296">m_nodechares</a>, and <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; cn;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> j : nodes) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.find( j );</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (it != end(<a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; c = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a>, j );</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keyword">auto</span>&amp; chares = cn[j];</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      chares.insert( end(chares), begin(c), end(c) );</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <a class="code" href="classtk_1_1_uns_mesh.html#a11a7aae0f8c2d3292b9b7e3f5ea50c9c">tk::UnsMesh::EdgeChares</a> ce;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> j : edges) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>.find( j );</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (it != end(<a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>)) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; c = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a>, j );</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keyword">auto</span>&amp; chares = ce[j];</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      chares.insert( end(chares), begin(c), end(c) );</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  thisProxy[ p ].mask( CkMyPe(), cn, ce );</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00037">ContainerUtil.h:37</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac044bbfdfeabe7324f746641d3b9f5d4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">inciter::Partitioner::m_nodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodechares</div><div class="ttdoc">Map associating a set of chare IDs to old (as in file) global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00296">Partitioner.h:296</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad1a667401f6ef87d9c25216b9bb50b68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">inciter::Partitioner::m_edgechares</a></div><div class="ttdeci">tk::UnsMesh::EdgeChares m_edgechares</div><div class="ttdoc">Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file) ...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00301">Partitioner.h:301</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a11a7aae0f8c2d3292b9b7e3f5ea50c9c"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a11a7aae0f8c2d3292b9b7e3f5ea50c9c">tk::UnsMesh::EdgeChares</a></div><div class="ttdeci">std::unordered_map&lt; Edge, std::vector&lt; int &gt;, EdgeHash, EdgeEq &gt; EdgeChares</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00051">UnsMesh.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a715bc4d4675333f1ba062ee83d3cb34e_cgraph.svg" width="291" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae0a55fe338da582d0e45f1d79d4252b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a55fe338da582d0e45f1d79d4252b9">&#9670;&nbsp;</a></span>readGraph()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::readGraph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtk_1_1_exodus_i_i_mesh_reader.html">tk::ExodusIIMeshReader</a> &amp;&#160;</td>
          <td class="paramname"><em>er</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read our contiguously-numbered chunk of the mesh graph from file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">er</td><td>ExodusII mesh reader </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00515">515</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00223">m_gelemid</a>, <a class="el" href="_partitioner_8h_source.html#l00221">m_tetinpoel</a>, <a class="el" href="_exodus_i_i_mesh_reader_8_c_source.html#l00486">tk::ExodusIIMeshReader::nelem()</a>, <a class="el" href="_exodus_i_i_mesh_reader_8_c_source.html#l00166">tk::ExodusIIMeshReader::readElemBlockIDs()</a>, <a class="el" href="_exodus_i_i_mesh_reader_8_c_source.html#l00266">tk::ExodusIIMeshReader::readElements()</a>, and <a class="el" href="_gmsh_mesh_i_o_8h_source.html#l00017">tk::TET</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00029">Partitioner()</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;{</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Get number of mesh points and number of tetrahedron elements in file</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  er.<a class="code" href="classtk_1_1_exodus_i_i_mesh_reader.html#afe8144814a95bbb94d87e04091042918">readElemBlockIDs</a>();</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keyword">auto</span> nel = er.<a class="code" href="classtk_1_1_exodus_i_i_mesh_reader.html#aa5dac77b5c3139795822df7ab406fff5">nelem</a>( <a class="code" href="namespacetk.html#a85016961456a798f65e4e5a451e44242a07275767cefe376134a81905435410c1">tk::ExoElemType::TET</a> );</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// Read our contiguously-numbered chunk of tetrahedron element</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// connectivity from file and also generate and store the list of global</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// element indices for our chunk of the mesh</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keyword">auto</span> npes = <span class="keyword">static_cast&lt;</span> std::size_t <span class="keyword">&gt;</span>( CkNumPes() );</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keyword">auto</span> mype = <span class="keyword">static_cast&lt;</span> std::size_t <span class="keyword">&gt;</span>( CkMyPe() );</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keyword">auto</span> chunk = nel / npes;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keyword">auto</span> from = mype * chunk;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keyword">auto</span> till = from + chunk;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (mype == npes-1) till += nel % npes;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  er.<a class="code" href="classtk_1_1_exodus_i_i_mesh_reader.html#a959295e71f5409dc16222ed4caed939d">readElements</a>( {{from, till-1}}, <a class="code" href="namespacetk.html#a85016961456a798f65e4e5a451e44242a07275767cefe376134a81905435410c1">tk::ExoElemType::TET</a>, <a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a> );</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>.resize( till-from );</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  std::iota( begin(<a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>), end(<a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>), from );</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">//if ( g_inputdeck.get&lt; tag::cmd, tag::feedback &gt;() )</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">//  m_host.pegraph();</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  uint64_t nelem = <a class="code" href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">m_gelemid</a>.size();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  contribute( <span class="keyword">sizeof</span>(uint64_t), &amp;nelem, CkReduction::sum_int,</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;              <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1load.html">tag::load</a> &gt;() );</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}</div><div class="ttc" id="namespacetk_html_a85016961456a798f65e4e5a451e44242a07275767cefe376134a81905435410c1"><div class="ttname"><a href="namespacetk.html#a85016961456a798f65e4e5a451e44242a07275767cefe376134a81905435410c1">tk::TET</a></div><div class="ttdef"><b>Definition:</b> <a href="_gmsh_mesh_i_o_8h_source.html#l00017">GmshMeshIO.h:17</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_reader_html_a959295e71f5409dc16222ed4caed939d"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_reader.html#a959295e71f5409dc16222ed4caed939d">tk::ExodusIIMeshReader::readElements</a></div><div class="ttdeci">void readElements(const std::array&lt; std::size_t, 2 &gt; &amp;extent, tk::ExoElemType elemtype, std::vector&lt; std::size_t &gt; &amp;conn) const</div><div class="ttdoc">Read element connectivity of a number of mesh cells from file. </div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_reader_8_c_source.html#l00266">ExodusIIMeshReader.C:266</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_reader_html_aa5dac77b5c3139795822df7ab406fff5"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_reader.html#aa5dac77b5c3139795822df7ab406fff5">tk::ExodusIIMeshReader::nelem</a></div><div class="ttdeci">std::size_t nelem(tk::ExoElemType elemtype) const</div><div class="ttdoc">Return number of elements in a mesh block in the ExodusII file. </div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_reader_8_c_source.html#l00486">ExodusIIMeshReader.C:486</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_reader_html_afe8144814a95bbb94d87e04091042918"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_reader.html#afe8144814a95bbb94d87e04091042918">tk::ExodusIIMeshReader::readElemBlockIDs</a></div><div class="ttdeci">std::size_t readElemBlockIDs()</div><div class="ttdoc">Read element block IDs from file. </div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_reader_8_c_source.html#l00166">ExodusIIMeshReader.C:166</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="structtag_1_1load_html"><div class="ttname"><a href="structtag_1_1load.html">tag::load</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00162">Tags.h:162</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a79c3d9b96c85defca02aec79aabfa9df"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a79c3d9b96c85defca02aec79aabfa9df">inciter::Partitioner::m_gelemid</a></div><div class="ttdeci">std::vector&lt; long &gt; m_gelemid</div><div class="ttdoc">Global element IDs we read (our chunk of the mesh) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00223">Partitioner.h:223</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_ae0a55fe338da582d0e45f1d79d4252b9_cgraph.svg" width="584" height="166"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a70524487d88cd6bbab60905751076475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70524487d88cd6bbab60905751076475">&#9670;&nbsp;</a></span>recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::recv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledge received node IDs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00239">239</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, and <a class="el" href="_partitioner_8h_source.html#l00201">m_npe</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (--<a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a> == 0) contribute( <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1distributed.html">tag::distributed</a> &gt;() );</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aa6450dbbf36bf5cb36088bdcec7a4445"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">inciter::Partitioner::m_npe</a></div><div class="ttdeci">std::size_t m_npe</div><div class="ttdoc">Number of fellow PEs to send elem IDs to. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00201">Partitioner.h:201</a></div></div>
<div class="ttc" id="structtag_1_1distributed_html"><div class="ttname"><a href="structtag_1_1distributed.html">tag::distributed</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00160">Tags.h:160</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66ce5723b0c2062be7a16ff93fd99001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66ce5723b0c2062be7a16ff93fd99001">&#9670;&nbsp;</a></span>refine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::refine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Uniformly refine our mesh replacing each tetrahedron with 8 new ones. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00861">861</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="node__connectivity_8h_source.html#l00112">AMR::node_connectivity_t::find()</a>, <a class="el" href="_partitioner_8_c_source.html#l00827">generate_compact_inpoel()</a>, <a class="el" href="mesh__adapter_8_c_source.html#l00021">AMR::mesh_adapter_t::init()</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_chedgenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00221">m_tetinpoel</a>, <a class="el" href="mesh__adapter_8h_source.html#l00028">AMR::mesh_adapter_t::node_connectivity</a>, and <a class="el" href="mesh__adapter_8_c_source.html#l00073">AMR::mesh_adapter_t::uniform_refinement()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>.</p>
<div class="fragment"><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a8b3d8b93a4d1e0be973cb29e4b2f99da">generate_compact_inpoel</a>();</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// Create AMR object</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <a class="code" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a>* mesh_adapter = <span class="keyword">new</span> <a class="code" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a>();</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// Generate unique edges (nodes connected to nodes)?</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// shift to zero-based node IDs</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="comment">// Find min/max to shift</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keyword">auto</span> minmax = std::minmax_element(begin(<a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>), end(<a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>));</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  std::array&lt;std::size_t, 2&gt; ext{{*minmax.first, *minmax.second}};</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keyword">auto</span> nnode = ext[1] - ext[0] + 1;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#aec69204090a420662250563dc5de3ae6">init</a>(<a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>, nnode);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// Do uniform refinement</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a88f9567e3632ef1e1bcb64e750bb817d">uniform_refinement</a>();</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// TODO: Do we need to replicate the shift?</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">  // Perform shift</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">  for (auto &amp;i : m_tetinpoel) {</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">  i -= ext[0];</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">  // TODO: Is there a reason we want to not enforce 0 based no ids</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">  // always? (i.e not put them back?)</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">  // Generate elements surrounding points..? If we have tets, why do we</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">  // need to do this? Can&#39;t we just generate edges?</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">  auto esup = tk::genEsup(m_tetinpoel, 4);</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment">  for (auto &amp;i : m_tetinpoel) i += ext[0];  // shift back node IDs</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment">  std::unordered_map&lt;std::size_t, std::unordered_set&lt;std::size_t&gt; &gt; star;</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">  for (std::size_t j = 0; j &lt; nnode; ++j) {</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">  for (std::size_t i = esup.second[j] + 1; i &lt;= esup.second[j + 1]; ++i) {</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">  for (std::size_t n = 0; n &lt; 4; ++n) {</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">  auto p = ext[0] + j;</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">  auto q = m_tetinpoel[esup.first[i] * 4 + n];</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">  if (p &lt; q) star[p].insert(q);</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">  if (p &gt; q) star[q].insert(p);</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">  // Starting node ID (on all PEs) while assigning new edge-nodes</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">  nnode = tk::ExodusIIMeshReader(g_inputdeck.get&lt;tag::cmd, tag::io,</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">  tag::input&gt;()).readHeader();</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">  // Add new edge-nodes</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">  tk::UnsMesh::EdgeNodes edgenodes;</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">  for (const auto &amp;s : star) {</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">  for (auto q : s.second) {</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">  edgenodes[ {{ s.first, q }} ] = nnode++;</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>(<a class="code" href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">m_tetinpoel</a>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Generate maps associating new node IDs (as in producing</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// contiguous-row-id linear system contributions)to edges (a pair of old</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// node IDs) in tk::UnsMesh::EdgeNodes maps, associated to and categorized</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// by chares. Note that the new edge-node IDs assigned here will be</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// overwritten with globally unique node IDs after reordering.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; conn : <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keyword">auto</span>&amp; en = <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>[ conn.first ];</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordflow">for</span> (std::size_t e=0; e&lt;conn.second.size()/4; ++e) {</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> A = conn.second[e*4+0];</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> B = conn.second[e*4+1];</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> C = conn.second[e*4+2];</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> D = conn.second[e*4+3];</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          <span class="comment">// Look up the added node IDs based on old ids {A,B}</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          <span class="comment">// (vector)</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;          <span class="comment">/*</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">             const auto AB = tk::cref_find( edgenodes, {{ A,B }} );</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">             const auto AC = tk::cref_find( edgenodes, {{ A,C }} );</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">             const auto AD = tk::cref_find( edgenodes, {{ A,D }} );</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">             const auto BC = tk::cref_find( edgenodes, {{ B,C }} );</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">             const auto BD = tk::cref_find( edgenodes, {{ B,D }} );</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">             const auto CD = tk::cref_find( edgenodes, {{ C,D }} );</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;          <span class="comment">// TODO: We should likely check the return values here</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> AB = mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">find</a>(A, B);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> AC = mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">find</a>(A, C);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> AD = mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">find</a>(A, D);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> BC = mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">find</a>(B, C);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> BD = mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">find</a>(B, D);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">int</span> CD = mesh_adapter-&gt;<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">find</a>(C, D);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;          en[ {{A,B}} ] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(AB);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;          en[ {{A,C}} ] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(AC);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;          en[ {{A,D}} ] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(AD);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;          en[ {{B,C}} ] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(BC);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;          en[ {{B,D}} ] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(BD);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;          en[ {{C,D}} ] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(CD);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a8b3d8b93a4d1e0be973cb29e4b2f99da">generate_compact_inpoel</a>();</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keyword">delete</span> mesh_adapter;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// TODO: This only needs to have set en? Which is m_chedgenodes.</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div><div class="ttc" id="class_a_m_r_1_1node__connectivity__t_html_aef83853c4d5dbc74d9f886835ada5d2a"><div class="ttname"><a href="class_a_m_r_1_1node__connectivity__t.html#aef83853c4d5dbc74d9f886835ada5d2a">AMR::node_connectivity_t::find</a></div><div class="ttdeci">int find(size_t A, size_t B)</div><div class="ttdef"><b>Definition:</b> <a href="node__connectivity_8h_source.html#l00112">node_connectivity.h:112</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a46ab95a011736afcf56751531eef2280"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">inciter::Partitioner::m_chedgenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodes &gt; m_chedgenodes</div><div class="ttdoc">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edge...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8b3d8b93a4d1e0be973cb29e4b2f99da"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8b3d8b93a4d1e0be973cb29e4b2f99da">inciter::Partitioner::generate_compact_inpoel</a></div><div class="ttdeci">void generate_compact_inpoel()</div><div class="ttdoc">Generate compact mesh connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00827">Partitioner.C:827</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_aec69204090a420662250563dc5de3ae6"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#aec69204090a420662250563dc5de3ae6">AMR::mesh_adapter_t::init</a></div><div class="ttdeci">void init(const std::vector&lt; size_t &gt; &amp;tetinpoel, size_t num_nodes)</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8_c_source.html#l00021">mesh_adapter.C:21</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6c22f2f34f5ec9dd1c082156156c7f7a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6c22f2f34f5ec9dd1c082156156c7f7a">inciter::Partitioner::m_tetinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_tetinpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00221">Partitioner.h:221</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_a88f9567e3632ef1e1bcb64e750bb817d"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#a88f9567e3632ef1e1bcb64e750bb817d">AMR::mesh_adapter_t::uniform_refinement</a></div><div class="ttdeci">void uniform_refinement()</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8_c_source.html#l00073">mesh_adapter.C:73</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_a39da1e19190151486bf54ddf71a00fa1"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">AMR::mesh_adapter_t::node_connectivity</a></div><div class="ttdeci">AMR::node_connectivity_t node_connectivity</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00028">mesh_adapter.h:28</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00019">mesh_adapter.h:19</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a66ce5723b0c2062be7a16ff93fd99001_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a96d91369a111de7aa4442f27926751cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d91369a111de7aa4442f27926751cc">&#9670;&nbsp;</a></span>reorder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::reorder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reorder global mesh node IDs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00701">701</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00257">m_ecommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00263">m_edgeset</a>, <a class="el" href="_partitioner_8h_source.html#l00271">m_linedges</a>, <a class="el" href="_partitioner_8h_source.html#l00267">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00250">m_ncommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>, and <a class="el" href="_partitioner_8h_source.html#l00208">m_start</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00133">offset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;{</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Activate SDAG waits for having requests arrive from other PEs for some</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// of our node IDs; and for computing/receiving lower and upper bounds of</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// global node IDs our PE operates on after reordering</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  wait4prep();</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  wait4bounds();</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  wait4reorder();</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// In serial signal to the runtime system that we have participated in</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// reordering. This is required here because this is only triggered if</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="comment">// communication is required during mesh node reordering. See also</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="comment">// particioner.ci.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">if</span> (CkNumPes() == 1) participated_complete();</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="comment">// Send out request for new global node IDs for nodes we do not reorder</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>)</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    thisProxy[ c.first ].request( CkMyPe(), c.second );</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Send out request for new global node IDs for edges we do not reorder</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a>)</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    thisProxy[ e.first ].request( CkMyPe(), e.second );</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// Lambda to decide if node ID is being assigned a new ID by us</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keyword">auto</span> ownnode = [ this ]( std::size_t p ) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keyword">using</span> Set = <span class="keyword">typename</span> std::remove_reference&lt;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                  decltype(m_ncommunication) &gt;::type::value_type;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">return</span> !std::any_of( m_ncommunication.cbegin(), m_ncommunication.cend(),</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                         [&amp;](<span class="keyword">const</span> Set&amp; s)</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                         { <span class="keywordflow">return</span> s.second.find(p) != s.second.cend(); } );</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  };</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// Lambda to decide if edge-node ID is being assigned a new ID by us</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keyword">auto</span> ownedge = [ this ]( <span class="keyword">const</span> <a class="code" href="classtk_1_1_uns_mesh.html#a622c34bab099c772650f046b848346d7">tk::UnsMesh::Edge</a>&amp; e ) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keyword">using</span> Set = <span class="keyword">typename</span> std::remove_reference&lt;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                  decltype(m_ecommunication) &gt;::type::value_type;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> !std::any_of( m_ecommunication.cbegin(), m_ecommunication.cend(),</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                         [&amp;](<span class="keyword">const</span> Set&amp; s)</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                         { <span class="keywordflow">return</span> s.second.find(e) != s.second.cend(); } );</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  };</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Reorder our chunk of the mesh node IDs by looping through all of our</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="comment">// node IDs (resulting from reading our chunk of the mesh cells). We test</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="comment">// if we are to assign a new ID to a node ID, and if so, we assign new ID,</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// i.e., reorder, by constructing a map associating new to old IDs. We</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// also count up the reordered nodes, which also serves as the new node</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">// id.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (ownnode(p)) <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>[ p ] = <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>++;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// Reorder our chunk of the mesh edges by looping through all of our edges</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// (resulting from initial uniform refinement of our chunk of the mesh</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="comment">// cells). We test if we are to assign a new ID to an edge, and if so, we</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// assign new ID, i.e., reorder, by constructing a map associating new</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="comment">// node IDs to edges. We also count up the reordered edge-nodes, which</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="comment">// also serves as the new node id.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">m_edgeset</a>)</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (ownedge(e)) <a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>[ e ] = <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>++;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// Trigger SDAG wait indicating that reordering own node IDs are complete</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  reorderowned_complete();</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// If all our nodes have new IDs assigned, signal that to the runtime</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>.size() == m_nodeset.size()) nodesreorder_complete();</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// If all our edges have new IDs assigned, signal that to the runtime</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>.size() == m_edgeset.size()) edgesreorder_complete();</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00267">Partitioner.h:267</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a872a89f66a6595a32ab64f153b2ebc76"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">inciter::Partitioner::m_ecommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; m_ecommunication</div><div class="ttdoc">Communication map used for distributed mesh edge-node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00257">Partitioner.h:257</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ab889d010f8425c8475f347d70aacdf85"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">inciter::Partitioner::m_linedges</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodes m_linedges</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00271">Partitioner.h:271</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a622c34bab099c772650f046b848346d7"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a622c34bab099c772650f046b848346d7">tk::UnsMesh::Edge</a></div><div class="ttdeci">std::array&lt; std::size_t, 2 &gt; Edge</div><div class="ttdoc">Edge: IDs of two end-points. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00031">UnsMesh.h:31</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a803838f68fa952cd41d1d9b6e5941c6a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">inciter::Partitioner::m_start</a></div><div class="ttdeci">std::size_t m_start</div><div class="ttdoc">Starting global mesh node ID for node reordering on this PE during mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00208">Partitioner.h:208</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00250">Partitioner.h:250</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a93e0c810002c42534cb474f9cf71eaeb"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a93e0c810002c42534cb474f9cf71eaeb">inciter::Partitioner::m_edgeset</a></div><div class="ttdeci">tk::UnsMesh::Edges m_edgeset</div><div class="ttdoc">Unique global edges whose nodes chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00263">Partitioner.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa789d014a17b190534b6a05738bd7033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa789d014a17b190534b6a05738bd7033">&#9670;&nbsp;</a></span>reordered()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::reordered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute final result of reordering. </p>
<p>This member function is called when both those node IDs that we assign a new ordering to as well as those assigned new IDs by other PEs have been reordered (and we contribute to) and we are ready (on this PE) to compute our final result of the reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00979">979</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l01126">bounds()</a>, <a class="el" href="_container_util_8h_source.html#l00037">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00168">tk::destroy()</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_chedgenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00280">m_chfilenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00273">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00257">m_ecommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00301">m_edgechares</a>, <a class="el" href="_partitioner_8h_source.html#l00271">m_linedges</a>, <a class="el" href="_partitioner_8h_source.html#l00267">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00312">m_msum</a>, <a class="el" href="_partitioner_8h_source.html#l00324">m_msumed</a>, <a class="el" href="_partitioner_8h_source.html#l00250">m_ncommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00296">m_nodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_nodeset</a>, and <a class="el" href="_container_util_8h_source.html#l00053">tk::ref_find()</a>.</p>
<div class="fragment"><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// Free memory used by communication maps used to store nodes and</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">// edge-nodes and associated PEs during reordering.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a> );</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">m_ecommunication</a> );</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// Free memory used by maps associating a list of chare IDs to old (as in</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// file) global mesh node IDs and to edges as no longer needed.</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">m_nodechares</a> );</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">m_edgechares</a> );</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// Construct maps associating old node IDs (as in file) to new node IDs</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// (as in producing contiguous-row-id linear system contributions)</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">// associated to chare IDs (outer key).</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>) {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keyword">auto</span>&amp; nodes = <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>[ c.first ];</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : c.second) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keyword">auto</span> n = <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>.find(p);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="keywordflow">if</span> (n != end(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>)) nodes[ n-&gt;second ] = p;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// Update node IDs of edges, i.e., the map values</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">m_chedgenodes</a>)</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; e : c.second)</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;       e.second = <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">m_linedges</a>, e.first );</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span> (!m_chedgenodes.empty()) {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">// Update chare-categorized element connectivities with new nodes and</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// newly added edge-nodes during initial unifor mesh refinement</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    decltype(m_chinpoel) refinpoel;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; chi : m_chinpoel) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keyword">auto</span>&amp; ri = refinpoel[ chi.first ];</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; edgenodes = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( m_chedgenodes, chi.first );</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">for</span> (std::size_t e=0; e&lt;chi.second.size()/4; ++e) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keyword">auto</span> A = chi.second[e*4+0];</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keyword">auto</span> B = chi.second[e*4+1];</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keyword">auto</span> C = chi.second[e*4+2];</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keyword">auto</span> D = chi.second[e*4+3];</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> nA = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, A );</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> nB = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, B );</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> nC = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, C );</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> nD = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, D );</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> AB = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, {{ A,B }} );</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> AC = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, {{ A,C }} );</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> AD = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, {{ A,D }} );</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> BC = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, {{ B,C }} );</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> BD = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, {{ B,D }} );</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> CD = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, {{ C,D }} );</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="comment">// update connectivity of our mesh chunk</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        std::vector&lt; std::size_t &gt; newelems{{ nA, AB, AC, AD,</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                                              nB, BC, AB, BD,</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                                              nC, AC, BC, CD,</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                                              nD, AD, CD, BD,</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                              BC, CD, AC, BD,</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                                              AB, BD, AC, AD,</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                                              AB, BC, AC, BD,</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                                              AC, BD, CD, AD }};</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        ri.insert( end(ri), begin(newelems), end(newelems) );</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    m_chinpoel = std::move( refinpoel );</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">// Update chare-categorized mesh nodes surrounding our mesh chunk with</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="comment">// the reordered node IDs</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    decltype(<a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>) newmsum;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>) {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <span class="keyword">auto</span>&amp; m = newmsum[ c.first ];</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : c.second) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keyword">auto</span>&amp; s = m[ e.first ];</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> n : e.second)</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;          s.insert( <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, n ) );</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    m_msum = std::move( newmsum );</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// Add newly added edge-nodes to chare-categorized mesh nodes</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="comment">// surrounding our mesh chunk</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">m_msumed</a>) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keyword">auto</span>&amp; sur = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( m_msum, c.first );</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; edgenodes = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( m_chedgenodes, c.first );</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : c.second) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keyword">auto</span>&amp; s = <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>( sur, e.first );</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ed : e.second)</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;          s.insert( <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( edgenodes, ed ) );</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    }</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_msumed );</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="comment">// Update node IDs of edges, i.e., the map keys</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : m_chedgenodes) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <a class="code" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> edgenodes;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; e : c.second)</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;         edgenodes[ {{ <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>,e.first[0]),</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                       <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>,e.first[1]) }} ] = e.second;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      c.second = std::move( edgenodes );</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="comment">// Update chare-categorized element connectivities with the reordered</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">// node IDs</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : m_chinpoel)</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : c.second) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keyword">auto</span> n = <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>.find(p);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> (n != end(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>)) p = n-&gt;second;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// Update chare-categorized mesh nodes surrounding our mesh chunk with</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="comment">// the reordered node IDs</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : m_msum)</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; s : c.second) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        decltype(s.second) n;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        for (auto p : s.second) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          <span class="keyword">auto</span> it = <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>.find(p);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          <span class="keywordflow">if</span> (it != end(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>)) n.insert( it-&gt;second );</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        s.second = std::move( n );</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// Update unique global node IDs chares on our PE will contribute to with</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// the reordered node IDs</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a> );</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : m_chinpoel)</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : c.second)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.insert( i );</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">//if ( g_inputdeck.get&lt; tag::cmd, tag::feedback &gt;() )</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">//  m_host.pereordered();</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="comment">// Compute lower and upper bounds of reordered node IDs our PE operates on</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9ee1971863741cc4afb7cae051197599">bounds</a>();</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a46ab95a011736afcf56751531eef2280"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a46ab95a011736afcf56751531eef2280">inciter::Partitioner::m_chedgenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodes &gt; m_chedgenodes</div><div class="ttdoc">Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edge...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae1ae8d64958a052765f925ddf8aafdcf"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae1ae8d64958a052765f925ddf8aafdcf">inciter::Partitioner::m_msumed</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; &gt; m_msumed</div><div class="ttdoc">Mesh edges given by two global mesh node IDs associated to chare IDs bordering the mesh chunk held by...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00324">Partitioner.h:324</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00267">Partitioner.h:267</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a872a89f66a6595a32ab64f153b2ebc76"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a872a89f66a6595a32ab64f153b2ebc76">inciter::Partitioner::m_ecommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::Edges &gt; m_ecommunication</div><div class="ttdoc">Communication map used for distributed mesh edge-node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00257">Partitioner.h:257</a></div></div>
<div class="ttc" id="namespacetk_html_ab2aac5f0fd93d5119cfe50a39f3515c9"><div class="ttname"><a href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a></div><div class="ttdeci">auto ref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00053">ContainerUtil.h:53</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ab889d010f8425c8475f347d70aacdf85"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab889d010f8425c8475f347d70aacdf85">inciter::Partitioner::m_linedges</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodes m_linedges</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00271">Partitioner.h:271</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00312">Partitioner.h:312</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00280">Partitioner.h:280</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00037">ContainerUtil.h:37</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac044bbfdfeabe7324f746641d3b9f5d4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac044bbfdfeabe7324f746641d3b9f5d4">inciter::Partitioner::m_nodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodechares</div><div class="ttdoc">Map associating a set of chare IDs to old (as in file) global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00296">Partitioner.h:296</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00168">ContainerUtil.h:168</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Global mesh element connectivity associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00273">Partitioner.h:273</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad1a667401f6ef87d9c25216b9bb50b68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad1a667401f6ef87d9c25216b9bb50b68">inciter::Partitioner::m_edgechares</a></div><div class="ttdeci">tk::UnsMesh::EdgeChares m_edgechares</div><div class="ttdoc">Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file) ...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00301">Partitioner.h:301</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a839b6c15c42461bb067924eb8fb95b42"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a></div><div class="ttdeci">std::unordered_map&lt; Edge, std::size_t, EdgeHash, EdgeEq &gt; EdgeNodes</div><div class="ttdoc">Map associating IDs of mesh nodes to edges. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00047">UnsMesh.h:47</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00250">Partitioner.h:250</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9ee1971863741cc4afb7cae051197599"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9ee1971863741cc4afb7cae051197599">inciter::Partitioner::bounds</a></div><div class="ttdeci">void bounds()</div><div class="ttdoc">Compute lower and upper bounds of reordered node IDs our PE operates on. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01126">Partitioner.C:1126</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aa789d014a17b190534b6a05738bd7033_cgraph.svg" width="515" height="199"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9a2332887a13429f03d23f6b967c37a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2332887a13429f03d23f6b967c37a7">&#9670;&nbsp;</a></span>request() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::request </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>nd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request new global node IDs for old node IDs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>PE request coming from and to which we send new IDs to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nd</td><td>Set of old node IDs whose new IDs are requested </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00161">161</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00203">m_reqNodes</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// Queue up requesting PE and node IDs</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a>.push_back( { p, nd } );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// Trigger SDAG wait signaling that node IDs have been requested from us</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  nodes_requested_complete();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a1713eab87b3e4e49357e4726f2e5ae9b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">inciter::Partitioner::m_reqNodes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_reqNodes</div><div class="ttdoc">Queue of requested node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00203">Partitioner.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d04f6eb8279a7e4182374bbf886d2ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d04f6eb8279a7e4182374bbf886d2ab">&#9670;&nbsp;</a></span>request() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::request </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &amp;&#160;</td>
          <td class="paramname"><em>ed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>PE request coming from and to which we send new IDs to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ed</td><td>Set of edges whose new IDs are requested </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00175">175</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00205">m_reqEdges</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Queue up requesting PE and node IDs</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">m_reqEdges</a>.push_back( { p, ed } );</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// Trigger SDAG wait signaling that node IDs have been requested from us</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  nodes_requested_complete();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aafdbad8ad3207d5c7e15a21fab7e86b5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aafdbad8ad3207d5c7e15a21fab7e86b5">inciter::Partitioner::m_reqEdges</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, tk::UnsMesh::Edges &gt; &gt; m_reqEdges</div><div class="ttdoc">Queue of requested edge-node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00205">Partitioner.h:205</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab20dba0e97e8708187d1bb3afe4b7d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20dba0e97e8708187d1bb3afe4b7d8a">&#9670;&nbsp;</a></span>stdCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::stdCost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the variance of the communication cost of merging the linear system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">av</td><td>Average of the communication cost</td></tr>
  </table>
  </dd>
</dl>
<p>Computing the standard deviation is done via computing and summing up the variances on each PE and asynchronously reducing the sum to our host. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00314">314</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00191">m_cb</a>, and <a class="el" href="_partitioner_8h_source.html#l00291">m_cost</a>.</p>
<div class="fragment"><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> var = (<a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>-av)*(<a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>-av);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  contribute( <span class="keyword">sizeof</span>(<a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>), &amp;var, CkReduction::sum_double,</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;              <a class="code" href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">m_cb</a>.get&lt; <a class="code" href="structtag_1_1stdcost.html">tag::stdcost</a> &gt;() );</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a5859014223f5ecabec8cd04e37ddb823"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">inciter::Partitioner::m_cost</a></div><div class="ttdeci">tk::real m_cost</div><div class="ttdoc">Communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00291">Partitioner.h:291</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a83ff73ef88708f4b27e0dccb8039b317"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a83ff73ef88708f4b27e0dccb8039b317">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::part, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::load, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00191">Partitioner.h:191</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
<div class="ttc" id="structtag_1_1stdcost_html"><div class="ttname"><a href="structtag_1_1stdcost.html">tag::stdcost</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00166">Tags.h:166</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a54f7b1a33fb9c30b1d84552b5d5731d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54f7b1a33fb9c30b1d84552b5d5731d0">&#9670;&nbsp;</a></span>m_bc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CProxy_BoundaryConditions inciter::Partitioner::m_bc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Boundary conditions proxy. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00197">197</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>.</p>

</div>
</div>
<a id="ac6b629930d0141cd3edc26f75f1dc001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b629930d0141cd3edc26f75f1dc001">&#9670;&nbsp;</a></span>m_belem</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; inciter::Partitioner::m_belem</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Boundary element list from side-sets. m_belem is the list of boundary elements corresponding to the boundary face number in m_bface. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00334">334</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>.</p>

</div>
</div>
<a id="ac3678a5d05b8c5356840f28568bf3609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3678a5d05b8c5356840f28568bf3609">&#9670;&nbsp;</a></span>m_bface</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; inciter::Partitioner::m_bface</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Boundary face list from side-sets. m_bface is the list of boundary faces in the side-sets. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00330">330</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>.</p>

</div>
</div>
<a id="a83ff73ef88708f4b27e0dccb8039b317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83ff73ef88708f4b27e0dccb8039b317">&#9670;&nbsp;</a></span>m_cb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtk_1_1tuple_1_1tagged__tuple.html">tk::tuple::tagged_tuple</a>&lt; <a class="el" href="structtag_1_1part.html">tag::part</a>, CkCallback , <a class="el" href="structtag_1_1distributed.html">tag::distributed</a>, CkCallback , <a class="el" href="structtag_1_1flattened.html">tag::flattened</a>, CkCallback , <a class="el" href="structtag_1_1load.html">tag::load</a>, CkCallback , <a class="el" href="structtag_1_1avecost.html">tag::avecost</a>, CkCallback , <a class="el" href="structtag_1_1stdcost.html">tag::stdcost</a>, CkCallback , <a class="el" href="structtag_1_1coord.html">tag::coord</a>, CkCallback &gt; inciter::Partitioner::m_cb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Charm++ callbacks associated to compile-time tags. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00191">191</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00548">computeCentroids()</a>, <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>, <a class="el" href="_partitioner_8_c_source.html#l00639">distribute()</a>, <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00029">Partitioner()</a>, <a class="el" href="_partitioner_8_c_source.html#l00515">readGraph()</a>, <a class="el" href="_partitioner_8_c_source.html#l00239">recv()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00314">stdCost()</a>.</p>

</div>
</div>
<a id="a5f5a07250189d666de76a9024389a076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f5a07250189d666de76a9024389a076">&#9670;&nbsp;</a></span>m_centroid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; inciter::Partitioner::m_centroid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Element centroid coordinates of our chunk of the mesh. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00225">225</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00548">computeCentroids()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00102">partition()</a>.</p>

</div>
</div>
<a id="a46ab95a011736afcf56751531eef2280"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ab95a011736afcf56751531eef2280">&#9670;&nbsp;</a></span>m_chedgenodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> &gt; inciter::Partitioner::m_chedgenodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edges (a pair of old node IDs) in <a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42" title="Map associating IDs of mesh nodes to edges. ">tk::UnsMesh::EdgeNodes</a> maps, associated to and categorized by chares. </p>
<p>Maps associating new node IDs (as in producing contiguous-row-id linear system contributions) to edges (a pair of old node IDs, as in file) associated to chare IDs (outer key) for only the nodes newly added as a result of initial uniform refinement. </p><dl class="section note"><dt>Note</dt><dd>Used for looking up boundary conditions </dd></dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00289">289</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01126">bounds()</a>, <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00861">refine()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a91f7cda531ab7d88b9130b19a10987f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f7cda531ab7d88b9130b19a10987f9">&#9670;&nbsp;</a></span>m_chfilenodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; inciter::Partitioner::m_chfilenodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contributions) categorized by chares. </p>
<p>Maps associating old node IDs (as in file) as map-values to new node IDs (as in producing contiguous-row-id linear system contributions) as map-keys, associated to chare IDs (outer keys). </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00280">280</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01126">bounds()</a>, <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="ad47619073f5c32f56f05e20434c296f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad47619073f5c32f56f05e20434c296f5">&#9670;&nbsp;</a></span>m_chinpoel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; inciter::Partitioner::m_chinpoel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global mesh element connectivity associated to chares owned. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00273">273</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00219">add()</a>, <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00639">distribute()</a>, <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00827">generate_compact_inpoel()</a>, <a class="el" href="_partitioner_8_c_source.html#l00861">refine()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a5859014223f5ecabec8cd04e37ddb823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5859014223f5ecabec8cd04e37ddb823">&#9670;&nbsp;</a></span>m_cost</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> inciter::Partitioner::m_cost</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Communication cost of linear system merging for our PE. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00291">291</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00314">stdCost()</a>.</p>

</div>
</div>
<a id="a1e8699c4b7b54736ef093032c14366f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8699c4b7b54736ef093032c14366f0">&#9670;&nbsp;</a></span>m_ecomm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt; inciter::Partitioner::m_ecomm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Temporary communication map used to receive global mesh edges. </p>
<p>This map, on each PE, associates the list of global mesh edges indices to fellow PE IDs from which we will receive new nodes IDs (as in producing contiguous-row-id linear system contributions) associated to edges during reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00243">243</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>.</p>

</div>
</div>
<a id="a872a89f66a6595a32ab64f153b2ebc76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a872a89f66a6595a32ab64f153b2ebc76">&#9670;&nbsp;</a></span>m_ecommunication</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt; inciter::Partitioner::m_ecommunication</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Communication map used for distributed mesh edge-node reordering. </p>
<p>This map, on each PE, associates the list of global mesh edges to fellow PE IDs from which we will receive new node IDs (as in producing contiguous-row-id linear system contributions)associated to edges during reordering. Only data that will be received from PEs with a lower index are stored. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00257">257</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="ad1a667401f6ef87d9c25216b9bb50b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1a667401f6ef87d9c25216b9bb50b68">&#9670;&nbsp;</a></span>m_edgechares</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a11a7aae0f8c2d3292b9b7e3f5ea50c9c">tk::UnsMesh::EdgeChares</a> inciter::Partitioner::m_edgechares</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating a set of chare IDs to edges given by two old global mesh node IDs (old as in file) </p>
<p>Note that a single edge can be associated to multiple chare IDs as multiple chares can contribute to a single edge. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00301">301</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00362">query()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a93e0c810002c42534cb474f9cf71eaeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e0c810002c42534cb474f9cf71eaeb">&#9670;&nbsp;</a></span>m_edgeset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> inciter::Partitioner::m_edgeset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique global edges whose nodes chares on our PE will contribute to in a linear system. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00263">263</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00352">gather()</a>, <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00204">neworder()</a>, <a class="el" href="_partitioner_8_c_source.html#l00362">query()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>.</p>

</div>
</div>
<a id="a79c3d9b96c85defca02aec79aabfa9df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79c3d9b96c85defca02aec79aabfa9df">&#9670;&nbsp;</a></span>m_gelemid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; long &gt; inciter::Partitioner::m_gelemid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global element IDs we read (our chunk of the mesh) </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00223">223</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00589">chareNodes()</a>, <a class="el" href="_partitioner_8_c_source.html#l00102">partition()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00515">readGraph()</a>.</p>

</div>
</div>
<a id="a59274d7dc87ef5bdc5587498133dbee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59274d7dc87ef5bdc5587498133dbee9">&#9670;&nbsp;</a></span>m_host</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CProxy_Transporter inciter::Partitioner::m_host</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Host proxy. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00193">193</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>.</p>

</div>
</div>
<a id="ab889d010f8425c8475f347d70aacdf85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab889d010f8425c8475f347d70aacdf85">&#9670;&nbsp;</a></span>m_linedges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a839b6c15c42461bb067924eb8fb95b42">tk::UnsMesh::EdgeNodes</a> inciter::Partitioner::m_linedges</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-values to edges given by two old node IDs (as in file) as map-keys. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00271">271</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00204">neworder()</a>, <a class="el" href="_partitioner_8_c_source.html#l00791">prepare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a8823c8f12b3785866f960abb76c005a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8823c8f12b3785866f960abb76c005a4">&#9670;&nbsp;</a></span>m_linnodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::size_t, std::size_t &gt; inciter::Partitioner::m_linnodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-values to old node IDs (as in file) as map-keys. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00267">267</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00189">neworder()</a>, <a class="el" href="_partitioner_8_c_source.html#l00791">prepare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="aaea6e9f6686a321f6b3f98c7d9a9cac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea6e9f6686a321f6b3f98c7d9a9cac0">&#9670;&nbsp;</a></span>m_lower</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_lower</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lower bound of node IDs our PE operates on after reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00229">229</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00303">lower()</a>.</p>

</div>
</div>
<a id="a0a211fd24b020e1fa49bc36032035d0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a211fd24b020e1fa49bc36032035d0a">&#9670;&nbsp;</a></span>m_msum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; inciter::Partitioner::m_msum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) chare IDs this PE owns. </p>
<p>msum: (M)esh chunks (S)urrounding (M)esh chunks storing mesh nodes. Outer map-key: chare IDs this PE owns whose neighbors are stored, inner map-key: chare IDs of those chares that hold mesh chunks surrounding the outer-key chare's mesh, map-values: global new (reordered, as in producing contiguous-row-id linear system contributions) mesh node IDs along the border of chares (at which the chares will need to communicate) during time stepping. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00312">312</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="ae1ae8d64958a052765f925ddf8aafdcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1ae8d64958a052765f925ddf8aafdcf">&#9670;&nbsp;</a></span>m_msumed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt; &gt; inciter::Partitioner::m_msumed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mesh edges given by two global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) chare IDs this PE owns. </p>
<p>msum: (M)esh chunks (S)urrounding (M)esh chunks storing mesh nodes. Outer map-key: chare IDs this PE owns whose neighbors are stored, inner map-key: chare IDs of those chares that hold mesh chunks surrounding the outer-key chare's mesh, map-values: mesh edges given by two global new (reordered, as in producing contiguous-row-id linear system contributions) mesh node IDs along the border of chares (at which the chares will need to communicate) during time stepping. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00324">324</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a53c33c64f81408a8b9e1d52aa39a2dbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53c33c64f81408a8b9e1d52aa39a2dbb">&#9670;&nbsp;</a></span>m_nbfac</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_nbfac</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total number of Boundary faces. m_nbfac is the total number of boundary faces in all side-sets. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00327">327</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>.</p>

</div>
</div>
<a id="aebd33481dcb2404d2b65835784a0ad6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd33481dcb2404d2b65835784a0ad6b">&#9670;&nbsp;</a></span>m_nchare</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inciter::Partitioner::m_nchare</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total number of chares across all PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00227">227</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00680">chareDistribution()</a>, <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00102">partition()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00774">pe()</a>.</p>

</div>
</div>
<a id="a0996cf378d056d18ab8c89b77bc5e9a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0996cf378d056d18ab8c89b77bc5e9a1">&#9670;&nbsp;</a></span>m_ncomm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; inciter::Partitioner::m_ncomm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Temporary communication map used to receive global mesh node IDs. </p>
<p>This map, on each PE, associates the list of global mesh point indices to fellow PE IDs from which we will receive new node IDs (as in producing contiguous-row-id linear system contributions) during reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00237">237</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>.</p>

</div>
</div>
<a id="a8a53be8a1baf2fcea27274a757150601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a53be8a1baf2fcea27274a757150601">&#9670;&nbsp;</a></span>m_ncommunication</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_set&lt;std::size_t&gt; &gt; inciter::Partitioner::m_ncommunication</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Communication map used for distributed mesh node reordering. </p>
<p>This map, on each PE, associates the list of global mesh point indices to fellow PE IDs from which we will receive new node IDs (as in producing contiguous-row-id linear system contributions) during reordering. Only data that will be received from PEs with a lower index are stored. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00250">250</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="ac044bbfdfeabe7324f746641d3b9f5d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac044bbfdfeabe7324f746641d3b9f5d4">&#9670;&nbsp;</a></span>m_nodechares</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; inciter::Partitioner::m_nodechares</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating a set of chare IDs to old (as in file) global mesh node IDs. </p>
<p>Note that a single global mesh ID can be associated to multiple chare IDs as multiple chares can contribute to a single mesh node. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00296">296</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00362">query()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a054bc425f1c654d3aa4afb2fc9dd229c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054bc425f1c654d3aa4afb2fc9dd229c">&#9670;&nbsp;</a></span>m_nodeset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; std::size_t &gt; inciter::Partitioner::m_nodeset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique global node IDs chares on our PE will contribute to in a linear system. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00260">260</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00329">cost()</a>, <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00248">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00352">gather()</a>, <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00189">neworder()</a>, <a class="el" href="_partitioner_8_c_source.html#l00362">query()</a>, <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00979">reordered()</a>.</p>

</div>
</div>
<a id="a0518feebf27d6038e52a84d3bf83349e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0518feebf27d6038e52a84d3bf83349e">&#9670;&nbsp;</a></span>m_noffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_noffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter for number of offsets. </p>
<p>This counts the to-be-received node IDs received while computing global mesh node ID offsets for each PE rquired for node reordering later </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00213">213</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00133">offset()</a>.</p>

</div>
</div>
<a id="aa6450dbbf36bf5cb36088bdcec7a4445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6450dbbf36bf5cb36088bdcec7a4445">&#9670;&nbsp;</a></span>m_npe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_npe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of fellow PEs to send elem IDs to. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00201">201</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00639">distribute()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00239">recv()</a>.</p>

</div>
</div>
<a id="a14f06d050b2bce8637646757de64ea87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14f06d050b2bce8637646757de64ea87">&#9670;&nbsp;</a></span>m_nquery</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_nquery</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter for number of masks of to-be-received global mesh node IDs received. </p>
<p>This counts the to-be-received node ID masks received while gathering the node IDs that need to be received (instead of uniquely assigned) by each PE </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00219">219</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00402">mask()</a>.</p>

</div>
</div>
<a id="aafdbad8ad3207d5c7e15a21fab7e86b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafdbad8ad3207d5c7e15a21fab7e86b5">&#9670;&nbsp;</a></span>m_reqEdges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a11894f8b13b973c0e30146023fe88123">tk::UnsMesh::Edges</a> &gt; &gt; inciter::Partitioner::m_reqEdges</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue of requested edge-node IDs from PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00205">205</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00791">prepare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00175">request()</a>.</p>

</div>
</div>
<a id="a1713eab87b3e4e49357e4726f2e5ae9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1713eab87b3e4e49357e4726f2e5ae9b">&#9670;&nbsp;</a></span>m_reqNodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; int, std::unordered_set&lt;std::size_t&gt; &gt; &gt; inciter::Partitioner::m_reqNodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue of requested node IDs from PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00203">203</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00791">prepare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00161">request()</a>.</p>

</div>
</div>
<a id="ae768c5ce71927c4fb5332095a9901a3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae768c5ce71927c4fb5332095a9901a3e">&#9670;&nbsp;</a></span>m_scheme</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinciter_1_1_scheme.html">Scheme</a> inciter::Partitioner::m_scheme</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> scheme. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00199">199</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01205">createDiscWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01256">createWorkers()</a>.</p>

</div>
</div>
<a id="a873290f952719d8df09aa888a37ca623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a873290f952719d8df09aa888a37ca623">&#9670;&nbsp;</a></span>m_solver</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tk::CProxy_Solver inciter::Partitioner::m_solver</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Linear system solver proxy. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00195">195</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01256">createWorkers()</a>.</p>

</div>
</div>
<a id="a803838f68fa952cd41d1d9b6e5941c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a803838f68fa952cd41d1d9b6e5941c6a">&#9670;&nbsp;</a></span>m_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_start</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starting global mesh node ID for node reordering on this PE during mesh node reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00208">208</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00133">offset()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00701">reorder()</a>.</p>

</div>
</div>
<a id="a6c22f2f34f5ec9dd1c082156156c7f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c22f2f34f5ec9dd1c082156156c7f7a">&#9670;&nbsp;</a></span>m_tetinpoel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt; inciter::Partitioner::m_tetinpoel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tetrtahedron element connectivity of our chunk of the mesh. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00221">221</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00589">chareNodes()</a>, <a class="el" href="_partitioner_8_c_source.html#l00548">computeCentroids()</a>, <a class="el" href="_partitioner_8_c_source.html#l00827">generate_compact_inpoel()</a>, <a class="el" href="_partitioner_8_c_source.html#l00102">partition()</a>, <a class="el" href="_partitioner_8_c_source.html#l00515">readGraph()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00861">refine()</a>.</p>

</div>
</div>
<a id="ad643d4c35b6a56eef0a3a48a588e366d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad643d4c35b6a56eef0a3a48a588e366d">&#9670;&nbsp;</a></span>m_upper</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_upper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upper bound of node IDs our PE operates on after reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00231">231</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01126">bounds()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01177">create()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/tmp/TeamCity-14/work/821a9fd6f64749d9/src/Inciter/<a class="el" href="_partitioner_8h_source.html">Partitioner.h</a></li>
<li>/tmp/TeamCity-14/work/821a9fd6f64749d9/src/Inciter/<a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 26 2018 04:50:04 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
