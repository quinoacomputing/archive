<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: inciter::Partitioner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceinciter.html">inciter</a></li><li class="navelem"><a class="el" href="classinciter_1_1_partitioner.html">Partitioner</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classinciter_1_1_partitioner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">inciter::Partitioner Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for inciter::Partitioner:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner__inherit__graph.svg" width="144" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa061d2f7f0530069b8270ef163d5392d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa061d2f7f0530069b8270ef163d5392d">Partitioner</a> (const std::vector&lt; CkCallback &gt; &amp;cb, const CProxy_Transporter &amp;host, const tk::CProxy_Solver &amp;solver, const <a class="el" href="classinciter_1_1_scheme.html">Scheme</a> &amp;scheme, const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;bface, const std::vector&lt; std::size_t &gt; &amp;triinpoel)</td></tr>
<tr class="memdesc:aa061d2f7f0530069b8270ef163d5392d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aa061d2f7f0530069b8270ef163d5392d">More...</a><br /></td></tr>
<tr class="separator:aa061d2f7f0530069b8270ef163d5392d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e2f33ec5a5e15270a206812fa843258"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0e2f33ec5a5e15270a206812fa843258">partchare</a> (int nchare)</td></tr>
<tr class="memdesc:a0e2f33ec5a5e15270a206812fa843258"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition the computational mesh into a number of chares.  <a href="#a0e2f33ec5a5e15270a206812fa843258">More...</a><br /></td></tr>
<tr class="separator:a0e2f33ec5a5e15270a206812fa843258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a766863eaeba226362f627495ca2bc578"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a766863eaeba226362f627495ca2bc578">offset</a> (int p, std::size_t u)</td></tr>
<tr class="memdesc:a766863eaeba226362f627495ca2bc578"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive number of uniquely assigned global mesh node IDs from lower PEs.  <a href="#a766863eaeba226362f627495ca2bc578">More...</a><br /></td></tr>
<tr class="separator:a766863eaeba226362f627495ca2bc578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2332887a13429f03d23f6b967c37a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9a2332887a13429f03d23f6b967c37a7">request</a> (int p, const std::unordered_set&lt; std::size_t &gt; &amp;nd)</td></tr>
<tr class="memdesc:a9a2332887a13429f03d23f6b967c37a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request new global node IDs for old node IDs.  <a href="#a9a2332887a13429f03d23f6b967c37a7">More...</a><br /></td></tr>
<tr class="separator:a9a2332887a13429f03d23f6b967c37a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d6dc1f7515fdb881a0420f4a5481be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac5d6dc1f7515fdb881a0420f4a5481be">request</a> (int p, const <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &amp;ed)</td></tr>
<tr class="separator:ac5d6dc1f7515fdb881a0420f4a5481be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b83bc68c80546762bd70324cb11fd65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a2b83bc68c80546762bd70324cb11fd65">neworder</a> (const std::unordered_map&lt; std::size_t, std::tuple&lt; std::size_t, <a class="el" href="classtk_1_1_uns_mesh.html#a880f09d552514074c37973e005b1f63e">tk::UnsMesh::Coord</a> &gt; &gt; &amp;nodes)</td></tr>
<tr class="memdesc:a2b83bc68c80546762bd70324cb11fd65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive new (reordered) global node IDs and coordinates.  <a href="#a2b83bc68c80546762bd70324cb11fd65">More...</a><br /></td></tr>
<tr class="separator:a2b83bc68c80546762bd70324cb11fd65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa8fd92de049d2bf7327439b5c4a8d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a4fa8fd92de049d2bf7327439b5c4a8d5">addPeMesh</a> (int frompe, const std::vector&lt; std::size_t &gt; &amp;inpoel, const <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &amp;cm)</td></tr>
<tr class="memdesc:a4fa8fd92de049d2bf7327439b5c4a8d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive mesh elements and their node coordinates after partitioning.  <a href="#a4fa8fd92de049d2bf7327439b5c4a8d5">More...</a><br /></td></tr>
<tr class="separator:a4fa8fd92de049d2bf7327439b5c4a8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecff4da51523c7d040517559bf06ad89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aecff4da51523c7d040517559bf06ad89">addChMesh</a> (int frompe, const std::unordered_map&lt; int, std::tuple&lt; std::vector&lt; std::size_t &gt;, <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &gt; &gt; &amp;chmesh)</td></tr>
<tr class="memdesc:aecff4da51523c7d040517559bf06ad89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive mesh associated to chares we own after refinement.  <a href="#aecff4da51523c7d040517559bf06ad89">More...</a><br /></td></tr>
<tr class="separator:aecff4da51523c7d040517559bf06ad89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a7ddaf60dc0d751b75d799d81dd944"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#af3a7ddaf60dc0d751b75d799d81dd944">recvPeMesh</a> ()</td></tr>
<tr class="memdesc:af3a7ddaf60dc0d751b75d799d81dd944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledge received mesh chunk and its nodes during initial refinement.  <a href="#af3a7ddaf60dc0d751b75d799d81dd944">More...</a><br /></td></tr>
<tr class="separator:af3a7ddaf60dc0d751b75d799d81dd944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05827515cc8413abf5f7c25b03e01195"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a05827515cc8413abf5f7c25b03e01195">recvChMesh</a> ()</td></tr>
<tr class="memdesc:a05827515cc8413abf5f7c25b03e01195"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledge received mesh after initial mesh refinement.  <a href="#a05827515cc8413abf5f7c25b03e01195">More...</a><br /></td></tr>
<tr class="separator:a05827515cc8413abf5f7c25b03e01195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d838ef74d9f7cec293b8f2d70147f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a32d838ef74d9f7cec293b8f2d70147f2">bndEdges</a> ()</td></tr>
<tr class="memdesc:a32d838ef74d9f7cec293b8f2d70147f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate boundary edges and send them to all PEs.  <a href="#a32d838ef74d9f7cec293b8f2d70147f2">More...</a><br /></td></tr>
<tr class="separator:a32d838ef74d9f7cec293b8f2d70147f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad8a25af8fa821e5a1c2752f5e136812"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aad8a25af8fa821e5a1c2752f5e136812">addBndEdges</a> (int frompe, const <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &amp;ed)</td></tr>
<tr class="memdesc:aad8a25af8fa821e5a1c2752f5e136812"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive boundary edges from all PEs (including this one)  <a href="#aad8a25af8fa821e5a1c2752f5e136812">More...</a><br /></td></tr>
<tr class="separator:aad8a25af8fa821e5a1c2752f5e136812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518fc88c6edb0bd84f7babb31371bd92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a518fc88c6edb0bd84f7babb31371bd92">addRefBndEdges</a> (int frompe, const <a class="el" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> &amp;ed)</td></tr>
<tr class="memdesc:a518fc88c6edb0bd84f7babb31371bd92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive newly added mesh node IDs on our PE boundary.  <a href="#a518fc88c6edb0bd84f7babb31371bd92">More...</a><br /></td></tr>
<tr class="separator:a518fc88c6edb0bd84f7babb31371bd92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28e6cd5e1f58f0042925ce021d4ea9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad28e6cd5e1f58f0042925ce021d4ea9d">recvRefBndEdges</a> ()</td></tr>
<tr class="memdesc:ad28e6cd5e1f58f0042925ce021d4ea9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledge received newly added node IDs to edges shared among multiple PEs.  <a href="#ad28e6cd5e1f58f0042925ce021d4ea9d">More...</a><br /></td></tr>
<tr class="separator:ad28e6cd5e1f58f0042925ce021d4ea9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2f86764f7f56780add41a31d2a6197"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9b2f86764f7f56780add41a31d2a6197">correctref</a> ()</td></tr>
<tr class="memdesc:a9b2f86764f7f56780add41a31d2a6197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Correct refinement to arrive at a conforming mesh across PE boundaries.  <a href="#a9b2f86764f7f56780add41a31d2a6197">More...</a><br /></td></tr>
<tr class="separator:a9b2f86764f7f56780add41a31d2a6197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f8164a9d5c3c4df5b05f62e3451e49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#af5f8164a9d5c3c4df5b05f62e3451e49">nextref</a> ()</td></tr>
<tr class="memdesc:af5f8164a9d5c3c4df5b05f62e3451e49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide wether to continue with another step of initial mesh refinement.  <a href="#af5f8164a9d5c3c4df5b05f62e3451e49">More...</a><br /></td></tr>
<tr class="separator:af5f8164a9d5c3c4df5b05f62e3451e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b9184c4c34f337693bb1e80b858b12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a02b9184c4c34f337693bb1e80b858b12">flatten</a> ()</td></tr>
<tr class="memdesc:a02b9184c4c34f337693bb1e80b858b12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare owned mesh node IDs for reordering.  <a href="#a02b9184c4c34f337693bb1e80b858b12">More...</a><br /></td></tr>
<tr class="separator:a02b9184c4c34f337693bb1e80b858b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef486986479c66f4480d60834f17a21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a6ef486986479c66f4480d60834f17a21">lower</a> (std::size_t low)</td></tr>
<tr class="memdesc:a6ef486986479c66f4480d60834f17a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive lower bound of node IDs our PE operates on after reordering.  <a href="#a6ef486986479c66f4480d60834f17a21">More...</a><br /></td></tr>
<tr class="separator:a6ef486986479c66f4480d60834f17a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20dba0e97e8708187d1bb3afe4b7d8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ab20dba0e97e8708187d1bb3afe4b7d8a">stdCost</a> (<a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> av)</td></tr>
<tr class="memdesc:ab20dba0e97e8708187d1bb3afe4b7d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the variance of the communication cost of merging the linear system.  <a href="#ab20dba0e97e8708187d1bb3afe4b7d8a">More...</a><br /></td></tr>
<tr class="separator:ab20dba0e97e8708187d1bb3afe4b7d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad334fe5a4acd071eaeedd859533e4857"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad334fe5a4acd071eaeedd859533e4857">gather</a> ()</td></tr>
<tr class="memdesc:ad334fe5a4acd071eaeedd859533e4857"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start gathering global node IDs this PE will need to receive (instead of assign) during reordering.  <a href="#ad334fe5a4acd071eaeedd859533e4857">More...</a><br /></td></tr>
<tr class="separator:ad334fe5a4acd071eaeedd859533e4857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f221f759ecd832939d8e7e7ab101d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a80f221f759ecd832939d8e7e7ab101d4">query</a> (int p, const std::vector&lt; std::size_t &gt; &amp;nodes)</td></tr>
<tr class="memdesc:a80f221f759ecd832939d8e7e7ab101d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those from during reordering.  <a href="#a80f221f759ecd832939d8e7e7ab101d4">More...</a><br /></td></tr>
<tr class="separator:a80f221f759ecd832939d8e7e7ab101d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa810ee137b21edb02e356fe94ccfede4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa810ee137b21edb02e356fe94ccfede4">mask</a> (int p, const std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; &amp;cn)</td></tr>
<tr class="memdesc:aa810ee137b21edb02e356fe94ccfede4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive mask of to-be-received global mesh node IDs.  <a href="#aa810ee137b21edb02e356fe94ccfede4">More...</a><br /></td></tr>
<tr class="separator:aa810ee137b21edb02e356fe94ccfede4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0f0f348d320343d28c320f975d2da7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a4a0f0f348d320343d28c320f975d2da7">createWorkers</a> ()</td></tr>
<tr class="memdesc:a4a0f0f348d320343d28c320f975d2da7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create worker chare array elements on this PE.  <a href="#a4a0f0f348d320343d28c320f975d2da7">More...</a><br /></td></tr>
<tr class="separator:a4a0f0f348d320343d28c320f975d2da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a604caaa8da62d39ca838e34a2df7758a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a604caaa8da62d39ca838e34a2df7758a">partref</a> ()</td></tr>
<tr class="memdesc:a604caaa8da62d39ca838e34a2df7758a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition the mesh before a (potential) refinement step.  <a href="#a604caaa8da62d39ca838e34a2df7758a">More...</a><br /></td></tr>
<tr class="separator:a604caaa8da62d39ca838e34a2df7758a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50a26d00da770de46a114e906e421cc"><td class="memItemLeft" align="right" valign="top">std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ab50a26d00da770de46a114e906e421cc">centroids</a> (const std::vector&lt; std::size_t &gt; &amp;inpoel, const <a class="el" href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a> &amp;coord)</td></tr>
<tr class="memdesc:ab50a26d00da770de46a114e906e421cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute element centroid coordinates.  <a href="#ab50a26d00da770de46a114e906e421cc">More...</a><br /></td></tr>
<tr class="separator:ab50a26d00da770de46a114e906e421cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77dabb793af5836da2b7da267aea1d54"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a77dabb793af5836da2b7da267aea1d54">categorize</a> (const std::vector&lt; std::size_t &gt; &amp;che, const std::vector&lt; std::size_t &gt; &amp;inpoel) const</td></tr>
<tr class="memdesc:a77dabb793af5836da2b7da267aea1d54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Categorize mesh elements (given by their gobal node IDs) by target.  <a href="#a77dabb793af5836da2b7da267aea1d54">More...</a><br /></td></tr>
<tr class="separator:a77dabb793af5836da2b7da267aea1d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b854cdfd3a566fd637a6f842d7fc58c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">coordmap</a> (const std::vector&lt; std::size_t &gt; &amp;inpoel)</td></tr>
<tr class="memdesc:a5b854cdfd3a566fd637a6f842d7fc58c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract coordinates associated to global nodes of a mesh chunk.  <a href="#a5b854cdfd3a566fd637a6f842d7fc58c">More...</a><br /></td></tr>
<tr class="separator:a5b854cdfd3a566fd637a6f842d7fc58c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a635aeca8b4181238f2b3e904130b0253"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a635aeca8b4181238f2b3e904130b0253">distributePe</a> (std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;elems)</td></tr>
<tr class="memdesc:a635aeca8b4181238f2b3e904130b0253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Distribute mesh to their PEs during initial mesh refinement.  <a href="#a635aeca8b4181238f2b3e904130b0253">More...</a><br /></td></tr>
<tr class="separator:a635aeca8b4181238f2b3e904130b0253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3f532b844c7a16d3ed9ede60214f833"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa3f532b844c7a16d3ed9ede60214f833">distributeCh</a> (std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;elems)</td></tr>
<tr class="memdesc:aa3f532b844c7a16d3ed9ede60214f833"><td class="mdescLeft">&#160;</td><td class="mdescRight">Distribute mesh to their owner PEs after initial mesh refinement.  <a href="#aa3f532b844c7a16d3ed9ede60214f833">More...</a><br /></td></tr>
<tr class="separator:aa3f532b844c7a16d3ed9ede60214f833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66ce5723b0c2062be7a16ff93fd99001"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a66ce5723b0c2062be7a16ff93fd99001">refine</a> ()</td></tr>
<tr class="memdesc:a66ce5723b0c2062be7a16ff93fd99001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optionally refine mesh.  <a href="#a66ce5723b0c2062be7a16ff93fd99001">More...</a><br /></td></tr>
<tr class="separator:a66ce5723b0c2062be7a16ff93fd99001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff4dbdf5ad4dee1c31d65d5b75291e68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aff4dbdf5ad4dee1c31d65d5b75291e68">finishref</a> ()</td></tr>
<tr class="memdesc:aff4dbdf5ad4dee1c31d65d5b75291e68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish initiel mesh refinement.  <a href="#aff4dbdf5ad4dee1c31d65d5b75291e68">More...</a><br /></td></tr>
<tr class="separator:aff4dbdf5ad4dee1c31d65d5b75291e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff3c9b62b74448338c417139124a7f35"><td class="memItemLeft" align="right" valign="top">std::array&lt; int, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">distribution</a> (int npart) const</td></tr>
<tr class="memdesc:aff3c9b62b74448338c417139124a7f35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute chare (partition) distribution.  <a href="#aff3c9b62b74448338c417139124a7f35">More...</a><br /></td></tr>
<tr class="separator:aff3c9b62b74448338c417139124a7f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96d91369a111de7aa4442f27926751cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a96d91369a111de7aa4442f27926751cc">reorder</a> ()</td></tr>
<tr class="memdesc:a96d91369a111de7aa4442f27926751cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reorder global mesh node IDs.  <a href="#a96d91369a111de7aa4442f27926751cc">More...</a><br /></td></tr>
<tr class="separator:a96d91369a111de7aa4442f27926751cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b552950fcbc37a2481c3a8c3708d945"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">pe</a> (int id) const</td></tr>
<tr class="memdesc:a2b552950fcbc37a2481c3a8c3708d945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return processing element for chare id.  <a href="#a2b552950fcbc37a2481c3a8c3708d945">More...</a><br /></td></tr>
<tr class="separator:a2b552950fcbc37a2481c3a8c3708d945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2597580e502900fcc96109e86da060b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a2597580e502900fcc96109e86da060b9">prepare</a> ()</td></tr>
<tr class="memdesc:a2597580e502900fcc96109e86da060b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate new node IDs to old ones and return them to the requestor(s)  <a href="#a2597580e502900fcc96109e86da060b9">More...</a><br /></td></tr>
<tr class="separator:a2597580e502900fcc96109e86da060b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf3a1d351ee6ae5b76c95fdd0f543165"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#adf3a1d351ee6ae5b76c95fdd0f543165">uniformRefine</a> ()</td></tr>
<tr class="memdesc:adf3a1d351ee6ae5b76c95fdd0f543165"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do uniform mesh refinement.  <a href="#adf3a1d351ee6ae5b76c95fdd0f543165">More...</a><br /></td></tr>
<tr class="separator:adf3a1d351ee6ae5b76c95fdd0f543165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac3e650bd934bda593f1f11e532b680"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a7ac3e650bd934bda593f1f11e532b680">errorRefine</a> ()</td></tr>
<tr class="memdesc:a7ac3e650bd934bda593f1f11e532b680"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do error-based mesh refinement.  <a href="#a7ac3e650bd934bda593f1f11e532b680">More...</a><br /></td></tr>
<tr class="separator:a7ac3e650bd934bda593f1f11e532b680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a567bb49b4a25654c6db63a347050488b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a567bb49b4a25654c6db63a347050488b">userRefine</a> ()</td></tr>
<tr class="memdesc:a567bb49b4a25654c6db63a347050488b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do mesh refinement based on user explicitly tagging edges.  <a href="#a567bb49b4a25654c6db63a347050488b">More...</a><br /></td></tr>
<tr class="separator:a567bb49b4a25654c6db63a347050488b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4ca1da0cf7ebde7678de009daffc8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#abc4ca1da0cf7ebde7678de009daffc8f">correctRefine</a> (const <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &amp;extra)</td></tr>
<tr class="memdesc:abc4ca1da0cf7ebde7678de009daffc8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do mesh refinement correcting PE-boundary edges.  <a href="#abc4ca1da0cf7ebde7678de009daffc8f">More...</a><br /></td></tr>
<tr class="separator:abc4ca1da0cf7ebde7678de009daffc8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c73832aa2e5fbec23c43a225bcc3cb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">updateMesh</a> (<a class="el" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> &amp;refiner)</td></tr>
<tr class="memdesc:a9c73832aa2e5fbec23c43a225bcc3cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update mesh after refinement.  <a href="#a9c73832aa2e5fbec23c43a225bcc3cb2">More...</a><br /></td></tr>
<tr class="separator:a9c73832aa2e5fbec23c43a225bcc3cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb0dc623f986276957da5fa1f5e5c549"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#afb0dc623f986276957da5fa1f5e5c549">updateVolumeMesh</a> (<a class="el" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> &amp;refiner, const std::unordered_set&lt; std::size_t &gt; &amp;old, const std::unordered_set&lt; std::size_t &gt; &amp;ref)</td></tr>
<tr class="memdesc:afb0dc623f986276957da5fa1f5e5c549"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update volume mesh after mesh refinement.  <a href="#afb0dc623f986276957da5fa1f5e5c549">More...</a><br /></td></tr>
<tr class="separator:afb0dc623f986276957da5fa1f5e5c549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a064ad156a50a04a73d1d4cdddedb103d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a064ad156a50a04a73d1d4cdddedb103d">updateBoundaryMesh</a> (<a class="el" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> &amp;refiner, const std::unordered_set&lt; std::size_t &gt; &amp;old, const std::unordered_set&lt; std::size_t &gt; &amp;ref)</td></tr>
<tr class="memdesc:a064ad156a50a04a73d1d4cdddedb103d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update boundary data structures after mesh refinement.  <a href="#a064ad156a50a04a73d1d4cdddedb103d">More...</a><br /></td></tr>
<tr class="separator:a064ad156a50a04a73d1d4cdddedb103d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa33143821e60319c3aac2357b5bc3915"><td class="memItemLeft" align="right" valign="top">tk::Fields&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa33143821e60319c3aac2357b5bc3915">nodeinit</a> (std::size_t npoin, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</td></tr>
<tr class="memdesc:aa33143821e60319c3aac2357b5bc3915"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate initial conditions (IC) at mesh nodes.  <a href="#aa33143821e60319c3aac2357b5bc3915">More...</a><br /></td></tr>
<tr class="separator:aa33143821e60319c3aac2357b5bc3915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa789d014a17b190534b6a05738bd7033"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa789d014a17b190534b6a05738bd7033">reordered</a> ()</td></tr>
<tr class="memdesc:aa789d014a17b190534b6a05738bd7033"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute final result of reordering.  <a href="#aa789d014a17b190534b6a05738bd7033">More...</a><br /></td></tr>
<tr class="separator:aa789d014a17b190534b6a05738bd7033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee1971863741cc4afb7cae051197599"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9ee1971863741cc4afb7cae051197599">bounds</a> ()</td></tr>
<tr class="memdesc:a9ee1971863741cc4afb7cae051197599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute lower and upper bounds of reordered node IDs our PE operates on.  <a href="#a9ee1971863741cc4afb7cae051197599">More...</a><br /></td></tr>
<tr class="separator:a9ee1971863741cc4afb7cae051197599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af92d0f3116e54c674a8521e3796107f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#af92d0f3116e54c674a8521e3796107f9">create</a> ()</td></tr>
<tr class="memdesc:af92d0f3116e54c674a8521e3796107f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create chare array elements on this PE and assign the global mesh element IDs they will operate on.  <a href="#af92d0f3116e54c674a8521e3796107f9">More...</a><br /></td></tr>
<tr class="separator:af92d0f3116e54c674a8521e3796107f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36d8a613c1a4a1946483409fba78deec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a36d8a613c1a4a1946483409fba78deec">createDiscWorkers</a> ()</td></tr>
<tr class="memdesc:a36d8a613c1a4a1946483409fba78deec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create <a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> chare array elements on this PE.  <a href="#a36d8a613c1a4a1946483409fba78deec">More...</a><br /></td></tr>
<tr class="separator:a36d8a613c1a4a1946483409fba78deec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928626a30505aac8c3e41b9bf5b001de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a928626a30505aac8c3e41b9bf5b001de">cost</a> (std::size_t l, std::size_t u)</td></tr>
<tr class="memdesc:a928626a30505aac8c3e41b9bf5b001de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute communication cost of linear system merging for our PE.  <a href="#a928626a30505aac8c3e41b9bf5b001de">More...</a><br /></td></tr>
<tr class="separator:a928626a30505aac8c3e41b9bf5b001de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147d5658a48e98fd77a3eb0bdaf941f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a147d5658a48e98fd77a3eb0bdaf941f1">positiveJacobians</a> (const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; chinpoel, const <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &amp;cm)</td></tr>
<tr class="memdesc:a147d5658a48e98fd77a3eb0bdaf941f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test for positivity of the Jacobian for all cells in multiple meshes.  <a href="#a147d5658a48e98fd77a3eb0bdaf941f1">More...</a><br /></td></tr>
<tr class="separator:a147d5658a48e98fd77a3eb0bdaf941f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a61829bbd2a87e52c4e32cb62b6303e0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtk_1_1tuple_1_1tagged__tuple.html">tk::tuple::tagged_tuple</a>&lt; <a class="el" href="structtag_1_1refdistributed.html">tag::refdistributed</a>, CkCallback, <a class="el" href="structtag_1_1matched.html">tag::matched</a>, CkCallback, <a class="el" href="structtag_1_1refined.html">tag::refined</a>, CkCallback, <a class="el" href="structtag_1_1distributed.html">tag::distributed</a>, CkCallback, <a class="el" href="structtag_1_1flattened.html">tag::flattened</a>, CkCallback, <a class="el" href="structtag_1_1avecost.html">tag::avecost</a>, CkCallback, <a class="el" href="structtag_1_1stdcost.html">tag::stdcost</a>, CkCallback, <a class="el" href="structtag_1_1coord.html">tag::coord</a>, CkCallback &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a></td></tr>
<tr class="memdesc:a61829bbd2a87e52c4e32cb62b6303e0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Charm++ callbacks associated to compile-time tags.  <a href="#a61829bbd2a87e52c4e32cb62b6303e0b">More...</a><br /></td></tr>
<tr class="separator:a61829bbd2a87e52c4e32cb62b6303e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59274d7dc87ef5bdc5587498133dbee9"><td class="memItemLeft" align="right" valign="top">CProxy_Transporter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a></td></tr>
<tr class="memdesc:a59274d7dc87ef5bdc5587498133dbee9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Host proxy.  <a href="#a59274d7dc87ef5bdc5587498133dbee9">More...</a><br /></td></tr>
<tr class="separator:a59274d7dc87ef5bdc5587498133dbee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873290f952719d8df09aa888a37ca623"><td class="memItemLeft" align="right" valign="top">tk::CProxy_Solver&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a></td></tr>
<tr class="memdesc:a873290f952719d8df09aa888a37ca623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Linear system solver proxy.  <a href="#a873290f952719d8df09aa888a37ca623">More...</a><br /></td></tr>
<tr class="separator:a873290f952719d8df09aa888a37ca623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae768c5ce71927c4fb5332095a9901a3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinciter_1_1_scheme.html">Scheme</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a></td></tr>
<tr class="memdesc:ae768c5ce71927c4fb5332095a9901a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> scheme.  <a href="#ae768c5ce71927c4fb5332095a9901a3e">More...</a><br /></td></tr>
<tr class="separator:ae768c5ce71927c4fb5332095a9901a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a014b468e68f031bd2adbc78a7819e531"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">m_npeDist</a></td></tr>
<tr class="separator:a014b468e68f031bd2adbc78a7819e531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6450dbbf36bf5cb36088bdcec7a4445"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a></td></tr>
<tr class="separator:aa6450dbbf36bf5cb36088bdcec7a4445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9166e2ef7ec475b0863383ea1afb38e7"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">m_ndist</a></td></tr>
<tr class="memdesc:a9166e2ef7ec475b0863383ea1afb38e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter during distribution of mesh during initial mesh refinement.  <a href="#a9166e2ef7ec475b0863383ea1afb38e7">More...</a><br /></td></tr>
<tr class="separator:a9166e2ef7ec475b0863383ea1afb38e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a235100235d9321fe8ad67bed3566263c"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">m_nedge</a></td></tr>
<tr class="memdesc:a235100235d9321fe8ad67bed3566263c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter during distribution of PE-boundary edges during initial mesh refinement.  <a href="#a235100235d9321fe8ad67bed3566263c">More...</a><br /></td></tr>
<tr class="separator:a235100235d9321fe8ad67bed3566263c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a433f963dc85816ff5667de8d0ee269e1"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">m_nref</a></td></tr>
<tr class="memdesc:a433f963dc85816ff5667de8d0ee269e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter during distribution of newly added nodes to PE-boundary edges.  <a href="#a433f963dc85816ff5667de8d0ee269e1">More...</a><br /></td></tr>
<tr class="separator:a433f963dc85816ff5667de8d0ee269e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77db7e343f48921c4fd9900249d8b2f9"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a></td></tr>
<tr class="separator:a77db7e343f48921c4fd9900249d8b2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132adb59d0c9e34782cc7ef84384875e"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a></td></tr>
<tr class="memdesc:a132adb59d0c9e34782cc7ef84384875e"><td class="mdescLeft">&#160;</td><td class="mdescRight">PEs we share at least a single edge with during initial mesh refinement.  <a href="#a132adb59d0c9e34782cc7ef84384875e">More...</a><br /></td></tr>
<tr class="separator:a132adb59d0c9e34782cc7ef84384875e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba177cca8c93f41df7565d8392289d1d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81fa">ctr::AMRInitialType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a></td></tr>
<tr class="memdesc:aba177cca8c93f41df7565d8392289d1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial mesh refinement type list (in reverse order)  <a href="#aba177cca8c93f41df7565d8392289d1d">More...</a><br /></td></tr>
<tr class="separator:aba177cca8c93f41df7565d8392289d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad88746cb95f9238d7f108f5aff126cda"><td class="memItemLeft" align="right" valign="top">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a></td></tr>
<tr class="memdesc:ad88746cb95f9238d7f108f5aff126cda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elements of the mesh chunk we operate on.  <a href="#ad88746cb95f9238d7f108f5aff126cda">More...</a><br /></td></tr>
<tr class="separator:ad88746cb95f9238d7f108f5aff126cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9461a4296751af3df761bef9008dc506"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> = std::get&lt;0&gt;( <a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> )</td></tr>
<tr class="memdesc:a9461a4296751af3df761bef9008dc506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alias to element connectivity with local node IDs in m_el.  <a href="#a9461a4296751af3df761bef9008dc506">More...</a><br /></td></tr>
<tr class="separator:a9461a4296751af3df761bef9008dc506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf05cd7be846fe7d3ab6370ba35503ef"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a> = std::get&lt;1&gt;( <a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> )</td></tr>
<tr class="memdesc:aaf05cd7be846fe7d3ab6370ba35503ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alias to global node IDs of owned elements in m_el.  <a href="#aaf05cd7be846fe7d3ab6370ba35503ef">More...</a><br /></td></tr>
<tr class="separator:aaf05cd7be846fe7d3ab6370ba35503ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98647bf8dec4144364598a1a293f0bc2"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a> = std::get&lt;2&gt;( <a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> )</td></tr>
<tr class="memdesc:a98647bf8dec4144364598a1a293f0bc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alias to local node IDs associated to the global ones of owned elements in m_el.  <a href="#a98647bf8dec4144364598a1a293f0bc2">More...</a><br /></td></tr>
<tr class="separator:a98647bf8dec4144364598a1a293f0bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a765fd4aca23b340e45e463c64ee7c944"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a></td></tr>
<tr class="memdesc:a765fd4aca23b340e45e463c64ee7c944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh refinement.  <a href="#a765fd4aca23b340e45e463c64ee7c944">More...</a><br /></td></tr>
<tr class="separator:a765fd4aca23b340e45e463c64ee7c944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017d196502387fcfe4f4128b3d5200c4"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a></td></tr>
<tr class="memdesc:a017d196502387fcfe4f4128b3d5200c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique set of boundary edges associated to PEs we share these edges with.  <a href="#a017d196502387fcfe4f4128b3d5200c4">More...</a><br /></td></tr>
<tr class="separator:a017d196502387fcfe4f4128b3d5200c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9ac9f7fe233a64ce71b5dd9fec298d0"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">m_edgenodePe</a></td></tr>
<tr class="memdesc:ae9ac9f7fe233a64ce71b5dd9fec298d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh refinement associated to a(nother) PE the edge is shared with.  <a href="#ae9ac9f7fe233a64ce71b5dd9fec298d0">More...</a><br /></td></tr>
<tr class="separator:ae9ac9f7fe233a64ce71b5dd9fec298d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1713eab87b3e4e49357e4726f2e5ae9b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a></td></tr>
<tr class="memdesc:a1713eab87b3e4e49357e4726f2e5ae9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue of requested node IDs from PEs.  <a href="#a1713eab87b3e4e49357e4726f2e5ae9b">More...</a><br /></td></tr>
<tr class="separator:a1713eab87b3e4e49357e4726f2e5ae9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a803838f68fa952cd41d1d9b6e5941c6a"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a></td></tr>
<tr class="memdesc:a803838f68fa952cd41d1d9b6e5941c6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starting global mesh node ID for node reordering on this PE during mesh node reordering.  <a href="#a803838f68fa952cd41d1d9b6e5941c6a">More...</a><br /></td></tr>
<tr class="separator:a803838f68fa952cd41d1d9b6e5941c6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0518feebf27d6038e52a84d3bf83349e"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">m_noffset</a></td></tr>
<tr class="memdesc:a0518feebf27d6038e52a84d3bf83349e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for number of offsets.  <a href="#a0518feebf27d6038e52a84d3bf83349e">More...</a><br /></td></tr>
<tr class="separator:a0518feebf27d6038e52a84d3bf83349e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f06d050b2bce8637646757de64ea87"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">m_nquery</a></td></tr>
<tr class="memdesc:a14f06d050b2bce8637646757de64ea87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for number of queries for global mesh node IDs.  <a href="#a14f06d050b2bce8637646757de64ea87">More...</a><br /></td></tr>
<tr class="separator:a14f06d050b2bce8637646757de64ea87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3356e3bc9acbadf37c511d7847a31f5a"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a3356e3bc9acbadf37c511d7847a31f5a">m_nmask</a></td></tr>
<tr class="memdesc:a3356e3bc9acbadf37c511d7847a31f5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for number of masks of to-be-received global mesh node IDs received.  <a href="#a3356e3bc9acbadf37c511d7847a31f5a">More...</a><br /></td></tr>
<tr class="separator:a3356e3bc9acbadf37c511d7847a31f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe5d06e4427f2b077644843b51d44b9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a></td></tr>
<tr class="memdesc:affe5d06e4427f2b077644843b51d44b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tetrtahedron element connectivity of our chunk of the mesh (global ids)  <a href="#affe5d06e4427f2b077644843b51d44b9">More...</a><br /></td></tr>
<tr class="separator:affe5d06e4427f2b077644843b51d44b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93b32ac4a8ccd3c08e4ca27a56862f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a></td></tr>
<tr class="memdesc:ac93b32ac4a8ccd3c08e4ca27a56862f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates of mesh nodes of our chunk of the mesh.  <a href="#ac93b32ac4a8ccd3c08e4ca27a56862f3">More...</a><br /></td></tr>
<tr class="separator:ac93b32ac4a8ccd3c08e4ca27a56862f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad21a82b7ef75e411776927bf3fe10cd7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a></td></tr>
<tr class="memdesc:ad21a82b7ef75e411776927bf3fe10cd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates associated to global node IDs of our mesh chunk.  <a href="#ad21a82b7ef75e411776927bf3fe10cd7">More...</a><br /></td></tr>
<tr class="separator:ad21a82b7ef75e411776927bf3fe10cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd33481dcb2404d2b65835784a0ad6b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a></td></tr>
<tr class="memdesc:aebd33481dcb2404d2b65835784a0ad6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total number of chares across all PEs.  <a href="#aebd33481dcb2404d2b65835784a0ad6b">More...</a><br /></td></tr>
<tr class="separator:aebd33481dcb2404d2b65835784a0ad6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea6e9f6686a321f6b3f98c7d9a9cac0"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a></td></tr>
<tr class="memdesc:aaea6e9f6686a321f6b3f98c7d9a9cac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower bound of node IDs our PE operates on after reordering.  <a href="#aaea6e9f6686a321f6b3f98c7d9a9cac0">More...</a><br /></td></tr>
<tr class="separator:aaea6e9f6686a321f6b3f98c7d9a9cac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad643d4c35b6a56eef0a3a48a588e366d"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a></td></tr>
<tr class="memdesc:ad643d4c35b6a56eef0a3a48a588e366d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upper bound of node IDs our PE operates on after reordering.  <a href="#ad643d4c35b6a56eef0a3a48a588e366d">More...</a><br /></td></tr>
<tr class="separator:ad643d4c35b6a56eef0a3a48a588e366d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0996cf378d056d18ab8c89b77bc5e9a1"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a></td></tr>
<tr class="memdesc:a0996cf378d056d18ab8c89b77bc5e9a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary communication map used to receive global mesh node IDs.  <a href="#a0996cf378d056d18ab8c89b77bc5e9a1">More...</a><br /></td></tr>
<tr class="separator:a0996cf378d056d18ab8c89b77bc5e9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a53be8a1baf2fcea27274a757150601"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a></td></tr>
<tr class="memdesc:a8a53be8a1baf2fcea27274a757150601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communication map used for distributed mesh node reordering.  <a href="#a8a53be8a1baf2fcea27274a757150601">More...</a><br /></td></tr>
<tr class="separator:a8a53be8a1baf2fcea27274a757150601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054bc425f1c654d3aa4afb2fc9dd229c"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a></td></tr>
<tr class="memdesc:a054bc425f1c654d3aa4afb2fc9dd229c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique global node IDs chares on our PE will contribute to in a linear system.  <a href="#a054bc425f1c654d3aa4afb2fc9dd229c">More...</a><br /></td></tr>
<tr class="separator:a054bc425f1c654d3aa4afb2fc9dd229c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaac84a616435db5f54b8286a2774b23"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">m_nodech</a></td></tr>
<tr class="separator:adaac84a616435db5f54b8286a2774b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8823c8f12b3785866f960abb76c005a4"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::size_t, std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a></td></tr>
<tr class="memdesc:a8823c8f12b3785866f960abb76c005a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-values to old node IDs (as in file) as map-keys.  <a href="#a8823c8f12b3785866f960abb76c005a4">More...</a><br /></td></tr>
<tr class="separator:a8823c8f12b3785866f960abb76c005a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad47619073f5c32f56f05e20434c296f5"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a></td></tr>
<tr class="memdesc:ad47619073f5c32f56f05e20434c296f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mesh connectivity using global node IDs associated to chares owned.  <a href="#ad47619073f5c32f56f05e20434c296f5">More...</a><br /></td></tr>
<tr class="separator:ad47619073f5c32f56f05e20434c296f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f605a01e11ea28aa04fb3a717fb075"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">m_chcoordmap</a></td></tr>
<tr class="memdesc:a11f605a01e11ea28aa04fb3a717fb075"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates associated to global node IDs of our mesh chunk for chares.  <a href="#a11f605a01e11ea28aa04fb3a717fb075">More...</a><br /></td></tr>
<tr class="separator:a11f605a01e11ea28aa04fb3a717fb075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f7cda531ab7d88b9130b19a10987f9"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a></td></tr>
<tr class="memdesc:a91f7cda531ab7d88b9130b19a10987f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contributions) categorized by chares.  <a href="#a91f7cda531ab7d88b9130b19a10987f9">More...</a><br /></td></tr>
<tr class="separator:a91f7cda531ab7d88b9130b19a10987f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5859014223f5ecabec8cd04e37ddb823"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a></td></tr>
<tr class="memdesc:a5859014223f5ecabec8cd04e37ddb823"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communication cost of linear system merging for our PE.  <a href="#a5859014223f5ecabec8cd04e37ddb823">More...</a><br /></td></tr>
<tr class="separator:a5859014223f5ecabec8cd04e37ddb823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae3ab90a1e0e88de39ba269ab90637b"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a></td></tr>
<tr class="memdesc:acae3ab90a1e0e88de39ba269ab90637b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries.  <a href="#acae3ab90a1e0e88de39ba269ab90637b">More...</a><br /></td></tr>
<tr class="separator:acae3ab90a1e0e88de39ba269ab90637b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a211fd24b020e1fa49bc36032035d0a"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a></td></tr>
<tr class="memdesc:a0a211fd24b020e1fa49bc36032035d0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) chare IDs this PE owns.  <a href="#a0a211fd24b020e1fa49bc36032035d0a">More...</a><br /></td></tr>
<tr class="separator:a0a211fd24b020e1fa49bc36032035d0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3678a5d05b8c5356840f28568bf3609"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a></td></tr>
<tr class="memdesc:ac3678a5d05b8c5356840f28568bf3609"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of boundary faces associated to side-set IDs.  <a href="#ac3678a5d05b8c5356840f28568bf3609">More...</a><br /></td></tr>
<tr class="separator:ac3678a5d05b8c5356840f28568bf3609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1af520c1436ffde6c975a541bfda8ac"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a></td></tr>
<tr class="memdesc:ac1af520c1436ffde6c975a541bfda8ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boundary face-node connectivity.  <a href="#ac1af520c1436ffde6c975a541bfda8ac">More...</a><br /></td></tr>
<tr class="separator:ac1af520c1436ffde6c975a541bfda8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classinciter_1_1_partitioner.html">Partitioner</a> Charm++ chare group class</p>
<p>Instantiations of <a class="el" href="classinciter_1_1_partitioner.html">Partitioner</a> comprise a processor aware Charm++ chare group. When instantiated, a new object is created on each PE and not more (as opposed to individual chares or chare array object elements). See also the Charm++ interface file <a class="el" href="partitioner_8ci.html">partitioner.ci</a>. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00091">91</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa061d2f7f0530069b8270ef163d5392d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa061d2f7f0530069b8270ef163d5392d">&#9670;&nbsp;</a></span>Partitioner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Partitioner::Partitioner </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; CkCallback &gt; &amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CProxy_Transporter &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const tk::CProxy_Solver &amp;&#160;</td>
          <td class="paramname"><em>solver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classinciter_1_1_scheme.html">Scheme</a> &amp;&#160;</td>
          <td class="paramname"><em>scheme</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>bface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>triinpoel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Charm++ callbacks </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Host Charm++ proxy we are being called from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">solver</td><td>Linear system solver proxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bc</td><td>Boundary conditions group proxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scheme</td><td><a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> scheme </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bface</td><td>Face lists mapped to side set ids </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">triinpoel</td><td>Interconnectivity of points and boundary-face </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00045">45</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l01309">finishref()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_reorder_8_c_source.html#l00164">tk::global2local()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00244">m_el</a>, <a class="el" href="_partitioner_8h_source.html#l00248">m_gid</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00237">m_initref</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_mesh_reader_8_c_source.html#l00048">inciter::MeshReader::readCoords()</a>, and <a class="el" href="_mesh_reader_8_c_source.html#l00018">inciter::MeshReader::readGraph()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                            :</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>( cb[0], cb[1], cb[2], cb[3], cb[4], cb[5], cb[6], cb[7] ),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>( host ),</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a>( solver ),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>( scheme ),</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">m_npeDist</a>( 0 ),</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a>( 0 ),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">m_ndist</a>( 0 ),</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">m_nedge</a>( 0 ),</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">m_nref</a>( 0 ),</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a>( 1 ),</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>(),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>(),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a>(),</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>(),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>(),</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">m_edgenodePe</a>(),</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a>(),</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>( 0 ),</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">m_noffset</a>( 0 ),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">m_nquery</a>( 0 ),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a3356e3bc9acbadf37c511d7847a31f5a">m_nmask</a>( 0 ),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>(),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>(),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>(),</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a>( 0 ),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a>( 0 ),</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>( 0 ),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>(),</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>(),</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>(),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">m_nodech</a>(),</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>(),</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>(),</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">m_chcoordmap</a>(),</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>(),</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>( 0.0 ),</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>(),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>(),</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a>( bface ),</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a>( triinpoel )</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">//  Constructor</span><span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//! \param[in] cb Charm++ callbacks</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//! \param[in] host Host Charm++ proxy we are being called from</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">//! \param[in] solver Linear system solver proxy</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//! \param[in] bc Boundary conditions group proxy</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">//! \param[in] scheme Discretization scheme</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">//! \param[in] bface Face lists mapped to side set ids</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//! \param[in] triinpoel Interconnectivity of points and boundary-face</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"></span><span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// Create mesh reader</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="namespacetk.html#a748833535365d6e320da5fcb7d213c30">MeshReader</a> mr( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1io.html">tag::io</a>, <a class="code" href="structtag_1_1input.html">tag::input</a> &gt;() );</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Read our chunk of the mesh graph from file</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  mr.readGraph( <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>, CkNumPes(), CkMyPe() );</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// Compute local data from global mesh connectivity (m_inpoel, m_gid, m_lid)</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> = <a class="code" href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a>( <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a> );</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Read our chunk of the mesh node coordinates from file</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> = mr.readCoords( <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a> );</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Send progress report to host</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.peread();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// Store initial mesh refinement type list in reverse order</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a> = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1init.html">tag::init</a> &gt;();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  std::reverse( begin(<a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>), end(<a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>) );</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1amr.html">tag::amr</a>, <a class="code" href="structtag_1_1init.html">tag::init</a> &gt;().empty() ||</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;       !<a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1edge.html">tag::edge</a> &gt;().empty() )</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a604caaa8da62d39ca838e34a2df7758a">partref</a>();          <span class="comment">// if initial mesh refinement configured, partition</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#aff4dbdf5ad4dee1c31d65d5b75291e68">finishref</a>();        <span class="comment">// if not, continue</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a765fd4aca23b340e45e463c64ee7c944"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">inciter::Partitioner::m_edgenode</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodeCoord m_edgenode</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00254">Partitioner.h:254</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="structtag_1_1amr_html"><div class="ttname"><a href="structtag_1_1amr.html">tag::amr</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00070">Tags.h:70</a></div></div>
<div class="ttc" id="namespacetk_html_a0ee7abd71123782d48e2ec04906fe982"><div class="ttname"><a href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a></div><div class="ttdeci">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; global2local(const std::vector&lt; std::size_t &gt; &amp;ginpoel)</div><div class="ttdoc">Generate element connectivity of local node IDs from connectivity of global node IDs also returning t...</div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00164">Reorder.C:164</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a3356e3bc9acbadf37c511d7847a31f5a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a3356e3bc9acbadf37c511d7847a31f5a">inciter::Partitioner::m_nmask</a></div><div class="ttdeci">std::size_t m_nmask</div><div class="ttdoc">Counter for number of masks of to-be-received global mesh node IDs received. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00281">Partitioner.h:281</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a604caaa8da62d39ca838e34a2df7758a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a604caaa8da62d39ca838e34a2df7758a">inciter::Partitioner::partref</a></div><div class="ttdeci">void partref()</div><div class="ttdoc">Partition the mesh before a (potential) refinement step. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00130">Partitioner.C:130</a></div></div>
<div class="ttc" id="structtag_1_1io_html"><div class="ttname"><a href="structtag_1_1io.html">tag::io</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00015">Tags.h:15</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad88746cb95f9238d7f108f5aff126cda"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">inciter::Partitioner::m_el</a></div><div class="ttdeci">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_el</div><div class="ttdoc">Elements of the mesh chunk we operate on. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00244">Partitioner.h:244</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00317">Partitioner.h:317</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aba177cca8c93f41df7565d8392289d1d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">inciter::Partitioner::m_initref</a></div><div class="ttdeci">std::vector&lt; ctr::AMRInitialType &gt; m_initref</div><div class="ttdoc">Initial mesh refinement type list (in reverse order) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00237">Partitioner.h:237</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa6450dbbf36bf5cb36088bdcec7a4445"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">inciter::Partitioner::m_npe</a></div><div class="ttdeci">std::size_t m_npe</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00225">Partitioner.h:225</a></div></div>
<div class="ttc" id="structtag_1_1edge_html"><div class="ttname"><a href="structtag_1_1edge.html">tag::edge</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00166">Tags.h:166</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a017d196502387fcfe4f4128b3d5200c4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">inciter::Partitioner::m_bndEdges</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeSet &gt; m_bndEdges</div><div class="ttdoc">Unique set of boundary edges associated to PEs we share these edges with. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00256">Partitioner.h:256</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a433f963dc85816ff5667de8d0ee269e1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">inciter::Partitioner::m_nref</a></div><div class="ttdeci">std::size_t m_nref</div><div class="ttdoc">Counter during distribution of newly added nodes to PE-boundary edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00232">Partitioner.h:232</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac3678a5d05b8c5356840f28568bf3609"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">inciter::Partitioner::m_bface</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_bface</div><div class="ttdoc">List of boundary faces associated to side-set IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00348">Partitioner.h:348</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a1713eab87b3e4e49357e4726f2e5ae9b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">inciter::Partitioner::m_reqNodes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_reqNodes</div><div class="ttdoc">Queue of requested node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00262">Partitioner.h:262</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0518feebf27d6038e52a84d3bf83349e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">inciter::Partitioner::m_noffset</a></div><div class="ttdeci">std::size_t m_noffset</div><div class="ttdoc">Counter for number of offsets. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00270">Partitioner.h:270</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaf05cd7be846fe7d3ab6370ba35503ef"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">inciter::Partitioner::m_gid</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_gid</div><div class="ttdoc">Alias to global node IDs of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00248">Partitioner.h:248</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaea6e9f6686a321f6b3f98c7d9a9cac0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">inciter::Partitioner::m_lower</a></div><div class="ttdeci">std::size_t m_lower</div><div class="ttdoc">Lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00291">Partitioner.h:291</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae9ac9f7fe233a64ce71b5dd9fec298d0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">inciter::Partitioner::m_edgenodePe</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodeCoord &gt; m_edgenodePe</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00346">Partitioner.h:346</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_adaac84a616435db5f54b8286a2774b23"><div class="ttname"><a href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">inciter::Partitioner::m_nodech</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodech</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00313">Partitioner.h:313</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5859014223f5ecabec8cd04e37ddb823"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">inciter::Partitioner::m_cost</a></div><div class="ttdeci">tk::real m_cost</div><div class="ttdoc">Communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00330">Partitioner.h:330</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00328">Partitioner.h:328</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77db7e343f48921c4fd9900249d8b2f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">inciter::Partitioner::m_extra</a></div><div class="ttdeci">std::size_t m_extra</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00233">Partitioner.h:233</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a014b468e68f031bd2adbc78a7819e531"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">inciter::Partitioner::m_npeDist</a></div><div class="ttdeci">std::size_t m_npeDist</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00222">Partitioner.h:222</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a14f06d050b2bce8637646757de64ea87"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">inciter::Partitioner::m_nquery</a></div><div class="ttdeci">std::size_t m_nquery</div><div class="ttdoc">Counter for number of queries for global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00275">Partitioner.h:275</a></div></div>
<div class="ttc" id="namespacetk_html_a748833535365d6e320da5fcb7d213c30"><div class="ttname"><a href="namespacetk.html#a748833535365d6e320da5fcb7d213c30">tk::MeshReader</a></div><div class="ttdeci">MeshReader</div><div class="ttdoc">Supported mesh readers. </div><div class="ttdef"><b>Definition:</b> <a href="_mesh_factory_8h_source.html#l00022">MeshFactory.h:22</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9166e2ef7ec475b0863383ea1afb38e7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">inciter::Partitioner::m_ndist</a></div><div class="ttdeci">std::size_t m_ndist</div><div class="ttdoc">Counter during distribution of mesh during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a873290f952719d8df09aa888a37ca623"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">inciter::Partitioner::m_solver</a></div><div class="ttdeci">tk::CProxy_Solver m_solver</div><div class="ttdoc">Linear system solver proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00217">Partitioner.h:217</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="structtag_1_1init_html"><div class="ttname"><a href="structtag_1_1init.html">tag::init</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00139">Tags.h:139</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae768c5ce71927c4fb5332095a9901a3e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">inciter::Partitioner::m_scheme</a></div><div class="ttdeci">Scheme m_scheme</div><div class="ttdoc">Discretization scheme. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00219">Partitioner.h:219</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="structtag_1_1input_html"><div class="ttname"><a href="structtag_1_1input.html">tag::input</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00016">Tags.h:16</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac1af520c1436ffde6c975a541bfda8ac"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">inciter::Partitioner::m_triinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_triinpoel</div><div class="ttdoc">Boundary face-node connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00350">Partitioner.h:350</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_acae3ab90a1e0e88de39ba269ab90637b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">inciter::Partitioner::m_bnodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_bnodechares</div><div class="ttdoc">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00335">Partitioner.h:335</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a132adb59d0c9e34782cc7ef84384875e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">inciter::Partitioner::m_pe</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; m_pe</div><div class="ttdoc">PEs we share at least a single edge with during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00235">Partitioner.h:235</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aff4dbdf5ad4dee1c31d65d5b75291e68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aff4dbdf5ad4dee1c31d65d5b75291e68">inciter::Partitioner::finishref</a></div><div class="ttdeci">void finishref()</div><div class="ttdoc">Finish initiel mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01309">Partitioner.C:1309</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a11f605a01e11ea28aa04fb3a717fb075"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">inciter::Partitioner::m_chcoordmap</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::CoordMap &gt; m_chcoordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk for chares. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00321">Partitioner.h:321</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a803838f68fa952cd41d1d9b6e5941c6a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">inciter::Partitioner::m_start</a></div><div class="ttdeci">std::size_t m_start</div><div class="ttdoc">Starting global mesh node ID for node reordering on this PE during mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00265">Partitioner.h:265</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ad30c6f520ba46308e32e3ea7ed44d5d0"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">inciter::ctr::amr</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::amr, bool, tag::init, std::vector&lt; AMRInitialType &gt;, tag::refvar, std::vector&lt; std::string &gt;, tag::id, std::vector&lt; std::size_t &gt;, tag::error, AMRErrorType, tag::edge, std::vector&lt; kw::amr_initref::info::expect::type &gt; &gt; amr</div><div class="ttdoc">Adaptive-mesh refinement options. </div><div class="ttdef"><b>Definition:</b> <a href="_control_2_inciter_2_types_8h_source.html#l00051">Types.h:51</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad643d4c35b6a56eef0a3a48a588e366d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">inciter::Partitioner::m_upper</a></div><div class="ttdeci">std::size_t m_upper</div><div class="ttdoc">Upper bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00293">Partitioner.h:293</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a235100235d9321fe8ad67bed3566263c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">inciter::Partitioner::m_nedge</a></div><div class="ttdeci">std::size_t m_nedge</div><div class="ttdoc">Counter during distribution of PE-boundary edges during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00230">Partitioner.h:230</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00306">Partitioner.h:306</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0996cf378d056d18ab8c89b77bc5e9a1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">inciter::Partitioner::m_ncomm</a></div><div class="ttdeci">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncomm</div><div class="ttdoc">Temporary communication map used to receive global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00299">Partitioner.h:299</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aa061d2f7f0530069b8270ef163d5392d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aad8a25af8fa821e5a1c2752f5e136812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8a25af8fa821e5a1c2752f5e136812">&#9670;&nbsp;</a></span>addBndEdges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::addBndEdges </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frompe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &amp;&#160;</td>
          <td class="paramname"><em>ed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive boundary edges from all PEs (including this one) </p>
<p>Receive boundary edges from all PEs (including this one) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frompe</td><td>PE call coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ed</td><td>Edges on frompe's boundary (with global node IDs) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01043">1043</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_partitioner_8h_source.html#l00256">m_bndEdges</a>, <a class="el" href="_partitioner_8h_source.html#l00230">m_nedge</a>, <a class="el" href="_partitioner_8h_source.html#l00235">m_pe</a>, and <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>
<div class="fragment"><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;{</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// Store incoming boundary edges</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>[ frompe ].insert( begin(ed), end(ed) );</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">m_nedge</a> == static_cast&lt;std::size_t&gt;(CkNumPes())) {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// Compute unique set of PEs that share at least a single edge with this PE</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ownedges = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>, CkMyPe() );</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>)    <span class="comment">// for all PEs</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">if</span> (p.first != CkMyPe())          <span class="comment">// for all PEs other than this PE</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : p.second)  <span class="comment">// for all boundary edges</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;          <span class="keywordflow">if</span> (ownedges.find(e) != end(ownedges))</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>.insert( p.first );     <span class="comment">// if edge is shared, store its PE</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a66ce5723b0c2062be7a16ff93fd99001">refine</a>();</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a017d196502387fcfe4f4128b3d5200c4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">inciter::Partitioner::m_bndEdges</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeSet &gt; m_bndEdges</div><div class="ttdoc">Unique set of boundary edges associated to PEs we share these edges with. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00256">Partitioner.h:256</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a66ce5723b0c2062be7a16ff93fd99001"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a66ce5723b0c2062be7a16ff93fd99001">inciter::Partitioner::refine</a></div><div class="ttdeci">void refine()</div><div class="ttdoc">Optionally refine mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01067">Partitioner.C:1067</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a132adb59d0c9e34782cc7ef84384875e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">inciter::Partitioner::m_pe</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; m_pe</div><div class="ttdoc">PEs we share at least a single edge with during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00235">Partitioner.h:235</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a235100235d9321fe8ad67bed3566263c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">inciter::Partitioner::m_nedge</a></div><div class="ttdeci">std::size_t m_nedge</div><div class="ttdoc">Counter during distribution of PE-boundary edges during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00230">Partitioner.h:230</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aad8a25af8fa821e5a1c2752f5e136812_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aecff4da51523c7d040517559bf06ad89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecff4da51523c7d040517559bf06ad89">&#9670;&nbsp;</a></span>addChMesh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::addChMesh </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frompe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, std::tuple&lt; std::vector&lt; std::size_t &gt;, <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>chmesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive mesh associated to chares we own after refinement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frompe</td><td>PE call coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmesh</td><td>Map associating mesh connectivities to global node ids and node coordinates for mesh chunks we are assigned by the partitioner </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00292">292</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8_c_source.html#l00954">pe()</a>, and <a class="el" href="_container_util_8h_source.html#l00038">tk::uniquecopy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// Store mesh connectivity and global node coordinates categorized by chares</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : chmesh) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">pe</a>(c.first) == CkMyPe(), <span class="stringliteral">&quot;PE &quot;</span> + std::to_string(CkMyPe()) +</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="stringliteral">&quot; received a mesh whose chare it does not own&quot;</span> );</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// The send side also writes to this so append/concat</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">auto</span>&amp; inpoel = <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>[ c.first ];</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mesh = std::get&lt; 0 &gt;( c.second );</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    inpoel.insert( end(inpoel), begin(mesh), end(mesh) );</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// Store coordinates associated to global node IDs. The send side also</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// writes to this, so concat.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; coord = std::get&lt; 1 &gt;( c.second );</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a>(mesh).size() == coord.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.insert( begin(coord), end(coord) );</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  thisProxy[ frompe ].recvChMesh();</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a2b552950fcbc37a2481c3a8c3708d945"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">inciter::Partitioner::pe</a></div><div class="ttdeci">int pe(int id) const</div><div class="ttdoc">Return processing element for chare id. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00954">Partitioner.C:954</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="namespacetk_html_a33be2bf221a519d736333a9f18c8ffdc"><div class="ttname"><a href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a></div><div class="ttdeci">Container uniquecopy(const Container &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00038">ContainerUtil.h:38</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aecff4da51523c7d040517559bf06ad89_cgraph.svg" width="488" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4fa8fd92de049d2bf7327439b5c4a8d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fa8fd92de049d2bf7327439b5c4a8d5">&#9670;&nbsp;</a></span>addPeMesh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::addPeMesh </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frompe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &amp;&#160;</td>
          <td class="paramname"><em>cm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive mesh elements and their node coordinates after partitioning. </p>
<p>Receive mesh elements and their node coordinates after partitioning </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frompe</td><td>PE call coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh connectivity with global node IDs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cm</td><td>Coordinates associated to global node IDs </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00335">335</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, and <a class="el" href="_container_util_8h_source.html#l00038">tk::uniquecopy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a>(inpoel).size() == cm.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Store mesh connectivity. The send side also writes to this, so concat.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>.insert( end(<a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>), begin(inpoel), end(inpoel) );</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// Store coordinates associated to global node IDs. The send side also writes</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// to this, so concat.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.insert( begin(cm), end(cm) );</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// Acknowledge receipt of mesh</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  thisProxy[ frompe ].recvPeMesh();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="namespacetk_html_a33be2bf221a519d736333a9f18c8ffdc"><div class="ttname"><a href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a></div><div class="ttdeci">Container uniquecopy(const Container &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00038">ContainerUtil.h:38</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a4fa8fd92de049d2bf7327439b5c4a8d5_cgraph.svg" width="443" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a518fc88c6edb0bd84f7babb31371bd92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a518fc88c6edb0bd84f7babb31371bd92">&#9670;&nbsp;</a></span>addRefBndEdges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::addRefBndEdges </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frompe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> &amp;&#160;</td>
          <td class="paramname"><em>ed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive newly added mesh node IDs on our PE boundary. </p>
<p>Receive newly added mesh node IDs on our PE boundary </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frompe</td><td>PE call coming from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ed</td><td>Newly added node IDs associated to parent nodes on PE boundary</td></tr>
  </table>
  </dd>
</dl>
<p>Receive newly added global node IDs and coordinates associated to global parent IDs of edges on our mesh chunk boundary. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01154">1154</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00260">m_edgenodePe</a>.</p>
<div class="fragment"><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;{</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// Save/augment buffer of edge-node (IDs and coords) categorized by sender PE</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">m_edgenodePe</a>[ frompe ].insert( begin(ed), end(ed) );</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">// Acknowledge receipt of PE-boundary edges to sender</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  thisProxy[ frompe ].recvRefBndEdges();</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_ae9ac9f7fe233a64ce71b5dd9fec298d0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">inciter::Partitioner::m_edgenodePe</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodeCoord &gt; m_edgenodePe</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32d838ef74d9f7cec293b8f2d70147f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d838ef74d9f7cec293b8f2d70147f2">&#9670;&nbsp;</a></span>bndEdges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::bndEdges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate boundary edges and send them to all PEs. </p>
<p>This step happens when the mesh chunk on this PE has been distributed after partitioning during an initial mesh refinement step. At this point we have a contiguous chunk of the mesh on this PE as determined by the partitioner. The next step is to extract the edges on the boundary only. The boundary edges (shared by multiple PEs) will be agreed on a refinement that yields a conforming mesh across PE boundaries. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01001">1001</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_derived_data_8_c_source.html#l00933">tk::genEsuelTet()</a>, <a class="el" href="_derived_data_8_c_source.html#l00041">tk::genEsup()</a>, <a class="el" href="_reorder_8_c_source.html#l00164">tk::global2local()</a>, <a class="el" href="_derived_data_8h_source.html#l00033">tk::lpofa</a>, <a class="el" href="_partitioner_8h_source.html#l00244">m_el</a>, <a class="el" href="_partitioner_8h_source.html#l00248">m_gid</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, and <a class="el" href="_partitioner_8h_source.html#l00251">m_lid</a>.</p>
<div class="fragment"><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;{</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( !<a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>.empty(), <span class="stringliteral">&quot;No elements are assigned to PE&quot;</span> );</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// Compute local data from global mesh connectivity (m_inpoel, m_gid, m_lid)</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> = <a class="code" href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a>( <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a> );</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// Generate boundary edges of our mesh chunk</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> bnded;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keyword">auto</span> esup = <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, 4 );         <span class="comment">// elements surrounding points</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keyword">auto</span> esuel = <a class="code" href="namespacetk.html#a5b61b3cb6492e71ff9853404440fddcc">tk::genEsuelTet</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, esup ); <span class="comment">// elems surrounding elements</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;esuel.size()/4; ++e) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keyword">auto</span> mark = e*4;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">for</span> (std::size_t f=0; f&lt;4; ++f) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="keywordflow">if</span> (esuel[mark+f] == -1) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keyword">auto</span> A = <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[ <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>[ mark+<a class="code" href="namespacetk.html#a30ac7c57927d6134e6563817f5d005a0">tk::lpofa</a>[f][0] ] ];</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keyword">auto</span> B = <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[ <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>[ mark+tk::lpofa[f][1] ] ];</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keyword">auto</span> C = <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[ <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>[ mark+tk::lpofa[f][2] ] ];</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        bnded.insert( {{{A,B}}} );</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        bnded.insert( {{{B,C}}} );</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        bnded.insert( {{{C,A}}} );</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( A ) != end(<a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>), <span class="stringliteral">&quot;Local node ID not found&quot;</span> );</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( B ) != end(<a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>), <span class="stringliteral">&quot;Local node ID not found&quot;</span> );</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( C ) != end(<a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>), <span class="stringliteral">&quot;Local node ID not found&quot;</span> );</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// Export boundary edges to all PEs</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  thisProxy.addBndEdges( CkMyPe(), bnded );</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}</div><div class="ttc" id="namespacetk_html_a0ee7abd71123782d48e2ec04906fe982"><div class="ttname"><a href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a></div><div class="ttdeci">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; global2local(const std::vector&lt; std::size_t &gt; &amp;ginpoel)</div><div class="ttdoc">Generate element connectivity of local node IDs from connectivity of global node IDs also returning t...</div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00164">Reorder.C:164</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad88746cb95f9238d7f108f5aff126cda"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">inciter::Partitioner::m_el</a></div><div class="ttdeci">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_el</div><div class="ttdoc">Elements of the mesh chunk we operate on. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00244">Partitioner.h:244</a></div></div>
<div class="ttc" id="namespacetk_html_a30ac7c57927d6134e6563817f5d005a0"><div class="ttname"><a href="namespacetk.html#a30ac7c57927d6134e6563817f5d005a0">tk::lpofa</a></div><div class="ttdeci">const std::array&lt; std::array&lt; std::size_t, 3 &gt;, 4 &gt; lpofa</div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8h_source.html#l00033">DerivedData.h:33</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaf05cd7be846fe7d3ab6370ba35503ef"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">inciter::Partitioner::m_gid</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_gid</div><div class="ttdoc">Alias to global node IDs of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00248">Partitioner.h:248</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a98647bf8dec4144364598a1a293f0bc2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">inciter::Partitioner::m_lid</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp; m_lid</div><div class="ttdoc">Alias to local node IDs associated to the global ones of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00251">Partitioner.h:251</a></div></div>
<div class="ttc" id="namespacetk_html_a5b61b3cb6492e71ff9853404440fddcc"><div class="ttname"><a href="namespacetk.html#a5b61b3cb6492e71ff9853404440fddcc">tk::genEsuelTet</a></div><div class="ttdeci">std::vector&lt; int &gt; genEsuelTet(const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, elements surrounding elements as a fixed length data structure as a ...</div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00933">DerivedData.C:933</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00041">DerivedData.C:41</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a9b201ee5ec18aa6deddbca2a680dec2b"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a></div><div class="ttdeci">std::unordered_set&lt; Edge, EdgeHash, EdgeEq &gt; EdgeSet</div><div class="ttdoc">Unique set of edges. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00068">UnsMesh.h:68</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a32d838ef74d9f7cec293b8f2d70147f2_cgraph.svg" width="464" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9ee1971863741cc4afb7cae051197599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ee1971863741cc4afb7cae051197599">&#9670;&nbsp;</a></span>bounds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::bounds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute lower and upper bounds of reordered node IDs our PE operates on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01811">1811</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00498">lower()</a>, <a class="el" href="_partitioner_8h_source.html#l00328">m_chfilenodes</a>, and <a class="el" href="_partitioner_8h_source.html#l00293">m_upper</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>
<div class="fragment"><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;{</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> = 0;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keyword">using</span> P1 = std::pair&lt; const std::size_t, std::size_t &gt;;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keyword">auto</span> x = std::max_element( begin(c.second), end(c.second),</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;             [](<span class="keyword">const</span> P1&amp; a, <span class="keyword">const</span> P1&amp; b){ return a.first &lt; b.first; } );</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">if</span> (x-&gt;first &gt; <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>) <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> = x-&gt;first;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  }</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="comment">// The bounds are the dividers (global mesh point indices) at which the</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="comment">// linear system assembly is divided among PEs. However, Hypre and thus</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <span class="comment">// Solver expect exclusive upper indices, so we increase the last one by</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="comment">// one here. Note that the cost calculation, Partitioner::cost() also</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="comment">// expects exclusive upper indices.</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() == CkNumPes()-1) ++<a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="comment">// Tell the runtime system that the upper bound has been computed</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  upper_complete();</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">// Set lower index for PE 0 as 0</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() == 0) <a class="code" href="classinciter_1_1_partitioner.html#a6ef486986479c66f4480d60834f17a21">lower</a>(0);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">// All PEs except the last one send their upper indices as the lower index for</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// PE+1</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() &lt; CkNumPes()-1)</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    thisProxy[ CkMyPe()+1 ].lower( <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> );</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00328">Partitioner.h:328</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a6ef486986479c66f4480d60834f17a21"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a6ef486986479c66f4480d60834f17a21">inciter::Partitioner::lower</a></div><div class="ttdeci">void lower(std::size_t low)</div><div class="ttdoc">Receive lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00498">Partitioner.C:498</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad643d4c35b6a56eef0a3a48a588e366d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">inciter::Partitioner::m_upper</a></div><div class="ttdeci">std::size_t m_upper</div><div class="ttdoc">Upper bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00293">Partitioner.h:293</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a9ee1971863741cc4afb7cae051197599_cgraph.svg" width="331" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a77dabb793af5836da2b7da267aea1d54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77dabb793af5836da2b7da267aea1d54">&#9670;&nbsp;</a></span>categorize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; Partitioner::categorize </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Categorize mesh elements (given by their gobal node IDs) by target. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">target</td><td>Targets (chares or PEs) of mesh elements, size: number of elements in the chunk of the mesh graph on this PE. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh connectivity to distribute elemets from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of global mesh node ids connecting elements owned by each target (chare or PE) </dd></dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00725">725</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, and <a class="el" href="_exception_8h_source.html#l00054">ErrChk</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( target.size() == inpoel.size()/4, <span class="stringliteral">&quot;Size mismatch&quot;</span>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// Categorize global mesh node ids of elements by target</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; nodes;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;target.size(); ++e) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keyword">auto</span>&amp; c = nodes[ <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(target[e]) ];</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">for</span> (std::size_t n=0; n&lt;4; ++n) c.push_back( inpoel[e*4+n] );</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="comment">// Make sure all PEs have targets assigned</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( !nodes.empty(), <span class="stringliteral">&quot;No nodes have been assigned to chares on PE &quot;</span> );</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// This check should always be done, hence ErrChk and not Assert, as it</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">// can result from particular pathological combinations of (1) too large</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">// degree of virtualization, (2) too many PEs, and/or (3) too small of a</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// mesh and not due to programmer error.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : nodes)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a>( !c.second.empty(),</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="stringliteral">&quot;Overdecomposition of the mesh is too large compared to the &quot;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="stringliteral">&quot;number of work units computed based on the degree of &quot;</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="stringliteral">&quot;virtualization desired. As a result, there would be at least &quot;</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="stringliteral">&quot;one work unit with no mesh elements to work on, i.e., nothing &quot;</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="stringliteral">&quot;to do. Solution 1: decrease the virtualization to a lower &quot;</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="stringliteral">&quot;value using the command-line argument &#39;-u&#39;. Solution 2: &quot;</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="stringliteral">&quot;decrease the number processing elements (PEs) using the &quot;</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="stringliteral">&quot;charmrun command-line argument &#39;+pN&#39; where N is the number of &quot;</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="stringliteral">&quot;PEs, which implicitly increases the size (and thus decreases &quot;</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="stringliteral">&quot;the number) of work units.)&quot;</span> );</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">return</span> nodes;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div><div class="ttc" id="_exception_8h_html_ac75cd6578896829d2bfbccf5de71de4f"><div class="ttname"><a href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a></div><div class="ttdeci">#define ErrChk(expr,...)</div><div class="ttdoc">ErrChk macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00054">Exception.h:54</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab50a26d00da770de46a114e906e421cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50a26d00da770de46a114e906e421cc">&#9670;&nbsp;</a></span>centroids()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; Partitioner::centroids </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a> &amp;&#160;</td>
          <td class="paramname"><em>coord</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute element centroid coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh connectivity with local ids </td></tr>
    <tr><td class="paramdir"></td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00685">685</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, and <a class="el" href="_container_util_8h_source.html#l00038">tk::uniquecopy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a>(inpoel).size() == coord[0].size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; x = coord[0];</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; y = coord[1];</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; z = coord[2];</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// Make room for element centroid coordinates</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; cent;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keyword">auto</span>&amp; cx = cent[0];</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keyword">auto</span>&amp; cy = cent[1];</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keyword">auto</span>&amp; cz = cent[2];</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keyword">auto</span> num = inpoel.size()/4;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  cx.resize( num );</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  cy.resize( num );</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  cz.resize( num );</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// Compute element centroids for mesh passed in</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;num; ++e) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keyword">auto</span> A = inpoel[e*4+0];</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keyword">auto</span> B = inpoel[e*4+1];</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keyword">auto</span> C = inpoel[e*4+2];</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keyword">auto</span> D = inpoel[e*4+3];</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    cx[e] = (x[A] + x[B] + x[C] + x[D]) / 4.0;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    cy[e] = (y[A] + y[B] + y[C] + y[D]) / 4.0;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    cz[e] = (z[A] + z[B] + z[C] + z[D]) / 4.0;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">return</span> cent;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;}</div><div class="ttc" id="namespacetk_html_a33be2bf221a519d736333a9f18c8ffdc"><div class="ttname"><a href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a></div><div class="ttdeci">Container uniquecopy(const Container &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00038">ContainerUtil.h:38</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_ab50a26d00da770de46a114e906e421cc_cgraph.svg" width="443" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5b854cdfd3a566fd637a6f842d7fc58c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b854cdfd3a566fd637a6f842d7fc58c">&#9670;&nbsp;</a></span>coordmap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> Partitioner::coordmap </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract coordinates associated to global nodes of a mesh chunk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh connectivity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Map storing the coordinates of unique nodes associated to global node IDs in mesh given by inpoel </dd></dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00769">769</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00251">m_lid</a>, and <a class="el" href="_container_util_8h_source.html#l00038">tk::uniquecopy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;{</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( inpoel.size() % 4 == 0, <span class="stringliteral">&quot;Incomplete mesh connectivity&quot;</span> );</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> map;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> g : <a class="code" href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a>(inpoel)) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;     <span class="keyword">auto</span> i = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, g );</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;     <span class="keyword">auto</span>&amp; c = map[g];</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;     c[0] = <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0][i];</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;     c[1] = <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[1][i];</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;     c[2] = <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[2][i];</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a>(inpoel).size() == map.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">return</span> map;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div><div class="ttc" id="classtk_1_1_uns_mesh_html_a4b2d1f8043c0354b11461c118a4379c5"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, Coord &gt; CoordMap</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00034">UnsMesh.h:34</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a98647bf8dec4144364598a1a293f0bc2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">inciter::Partitioner::m_lid</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp; m_lid</div><div class="ttdoc">Alias to local node IDs associated to the global ones of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00251">Partitioner.h:251</a></div></div>
<div class="ttc" id="namespacetk_html_a33be2bf221a519d736333a9f18c8ffdc"><div class="ttname"><a href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a></div><div class="ttdeci">Container uniquecopy(const Container &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00038">ContainerUtil.h:38</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a5b854cdfd3a566fd637a6f842d7fc58c_cgraph.svg" width="443" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9b2f86764f7f56780add41a31d2a6197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b2f86764f7f56780add41a31d2a6197">&#9670;&nbsp;</a></span>correctref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::correctref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Correct refinement to arrive at a conforming mesh across PE boundaries. </p>
<p>This function is called repeatedly until there is not a a single edge that needs correction for the whole distributed problem to arrive at a conforming mesh across PE boundaries during this initial mesh refinement step. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01191">1191</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l01487">correctRefine()</a>, <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_partitioner_8h_source.html#l00256">m_bndEdges</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00254">m_edgenode</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_edgenodePe</a>, <a class="el" href="_partitioner_8h_source.html#l00233">m_extra</a>, <a class="el" href="_partitioner_8h_source.html#l00251">m_lid</a>, <a class="el" href="_partitioner_8h_source.html#l00232">m_nref</a>, and <a class="el" href="_partitioner_8h_source.html#l00235">m_pe</a>.</p>
<div class="fragment"><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;{</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// Storage for edges that still need a new node to yield a conforming mesh</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> extra;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="comment">// Ensure that the same global node ID has been assigned by all PEs and that</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="comment">// the new nodes have the same coordinates generated by potentially multiple</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// PEs sharing the refined edge. This is done by searching for all edges that</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="comment">// we share with and refined by other PEs: (1) If the incoming edge is found</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// among our refined ones, we ensure the newly assigned global IDs equal</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// (independently assigned by multiple PEs) and also that the new node</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="comment">// coordinates equal to machine precision. (2) If the incoming edge is not</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// found among our refined ones, we need to correct the mesh to make it</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// conforming since the edge has been refined by the remote PE. We collect</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// these extra edges, and run a correction refinement, whose result then</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="comment">// needs to be communicated again as the new refinement step may introduce</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="comment">// new edges that other PEs did not refine but are shared.</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : <a class="code" href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">m_edgenodePe</a>)        <span class="comment">// for all PEs we share edges with</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : p.second) {        <span class="comment">// for all refined edges on p.first</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keyword">auto</span> i = <a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>.find( e.first );  <span class="comment">// find refined edge given parents</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <span class="keywordflow">if</span> (i != end(<a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>)) {           <span class="comment">// found same added node on edge</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="comment">// locally assigned added node ID and coordinates: i-&gt;second</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="comment">// remotely assigned added node ID and coordinates: e.second</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="comment">// Ensure global IDs of newly added nodes are the same</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( std::get&lt; 0 &gt;( i-&gt;second ) == std::get&lt; 0 &gt;( e.second ),</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                <span class="stringliteral">&quot;Remotely and locally assigned global ids mismatch&quot;</span> );</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="comment">// Ensure coordinates are the same</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( std::abs( std::get&lt;1&gt;(i-&gt;second) - std::get&lt;1&gt;(e.second) ) &lt;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                  std::numeric_limits&lt;tk::real&gt;::epsilon() &amp;&amp;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                std::abs( std::get&lt;2&gt;(i-&gt;second) - std::get&lt;2&gt;(e.second) ) &lt;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                  std::numeric_limits&lt;tk::real&gt;::epsilon() &amp;&amp;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                std::abs( std::get&lt;3&gt;(i-&gt;second) - std::get&lt;3&gt;(e.second) ) &lt;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                  std::numeric_limits&lt;tk::real&gt;::epsilon(),</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                <span class="stringliteral">&quot;Remote and local added node coordinates mismatch&quot;</span> );</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      } <span class="keywordflow">else</span> {  <span class="comment">// remote PE added node on edge but we did not</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="comment">// Make sure we know about this boundary-PE edge (that we did not refine)</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>.find( CkMyPe() )-&gt;second.find( e.first ) !=</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>.find( CkMyPe() )-&gt;second.end(),</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="stringliteral">&quot;Local node IDs of boundary edge not found&quot;</span> );</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="comment">// Save edge (given by parent global node IDs) to which the remote PE</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="comment">// has added a new node but we did not. Will need to correct the mesh so</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="comment">// it conforms across PEs.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        extra.insert( {{ { <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, e.first[0] ),</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                           <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, e.first[1] ) } }} );</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// Store number of extra edges on this PE which this PE did not add but was</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// refined by another PE, so now we need to tag and refine them and propagate</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// reconnection of neighbor cells to arrive at conforming mesh across PE</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// boundaries.</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a> = extra.size();</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// Refine mesh triggered by nodes added on PE-boundary edges by other PEs</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="comment">// PEs</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#abc4ca1da0cf7ebde7678de009daffc8f">correctRefine</a>( extra );</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="comment">// Since refining edges that we originally did not but other PEs did may</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="comment">// result in refining new edges that may be shared along PE boundaries, we</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// now need to communicate these edges and potentially repeat the correction</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// step. This must happen until all PEs that share edges can agree that there</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// are no more edges to correct. Only then this refinement step can be</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">// considered complete.</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>.empty())</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    contribute( <span class="keyword">sizeof</span>(std::size_t), &amp;<a class="code" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a>, CkReduction::max_int,</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1matched.html">tag::matched</a> &gt;() );</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">m_nref</a> = 0;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : <a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>) {       <span class="comment">// for all PEs we share at least an edge with</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="comment">// For all boundary edges of PE p, find out if we have added a new</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <span class="comment">// node to it, and if so, export parents-&gt;(newid,coords) to p.</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <a class="code" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> exp;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>,p)) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keyword">auto</span> i = <a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>.find(e);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">if</span> (i != end(<a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>)) exp[ e ] = i-&gt;second;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      thisProxy[ p ].addRefBndEdges( CkMyPe(), exp );</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a765fd4aca23b340e45e463c64ee7c944"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">inciter::Partitioner::m_edgenode</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodeCoord m_edgenode</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00254">Partitioner.h:254</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a017d196502387fcfe4f4128b3d5200c4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">inciter::Partitioner::m_bndEdges</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeSet &gt; m_bndEdges</div><div class="ttdoc">Unique set of boundary edges associated to PEs we share these edges with. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00256">Partitioner.h:256</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a433f963dc85816ff5667de8d0ee269e1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">inciter::Partitioner::m_nref</a></div><div class="ttdeci">std::size_t m_nref</div><div class="ttdoc">Counter during distribution of newly added nodes to PE-boundary edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00232">Partitioner.h:232</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae9ac9f7fe233a64ce71b5dd9fec298d0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">inciter::Partitioner::m_edgenodePe</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodeCoord &gt; m_edgenodePe</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77db7e343f48921c4fd9900249d8b2f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">inciter::Partitioner::m_extra</a></div><div class="ttdeci">std::size_t m_extra</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00233">Partitioner.h:233</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="structtag_1_1matched_html"><div class="ttname"><a href="structtag_1_1matched.html">tag::matched</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00085">Tags.h:85</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a7ad1f185e755943972c23fb884b06b5d"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a></div><div class="ttdeci">std::unordered_map&lt; Edge, std::tuple&lt; std::size_t, real, real, real &gt;, EdgeHash, EdgeEq &gt; EdgeNodeCoord</div><div class="ttdoc">Map associating the ID and the coordinates of a node to an edge. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00065">UnsMesh.h:65</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a98647bf8dec4144364598a1a293f0bc2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">inciter::Partitioner::m_lid</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp; m_lid</div><div class="ttdoc">Alias to local node IDs associated to the global ones of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00251">Partitioner.h:251</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a132adb59d0c9e34782cc7ef84384875e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">inciter::Partitioner::m_pe</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; m_pe</div><div class="ttdoc">PEs we share at least a single edge with during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00235">Partitioner.h:235</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_abc4ca1da0cf7ebde7678de009daffc8f"><div class="ttname"><a href="classinciter_1_1_partitioner.html#abc4ca1da0cf7ebde7678de009daffc8f">inciter::Partitioner::correctRefine</a></div><div class="ttdeci">void correctRefine(const tk::UnsMesh::EdgeSet &amp;extra)</div><div class="ttdoc">Do mesh refinement correcting PE-boundary edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01487">Partitioner.C:1487</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a9b201ee5ec18aa6deddbca2a680dec2b"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a></div><div class="ttdeci">std::unordered_set&lt; Edge, EdgeHash, EdgeEq &gt; EdgeSet</div><div class="ttdoc">Unique set of edges. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00068">UnsMesh.h:68</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a9b2f86764f7f56780add41a31d2a6197_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="abc4ca1da0cf7ebde7678de009daffc8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4ca1da0cf7ebde7678de009daffc8f">&#9670;&nbsp;</a></span>correctRefine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::correctRefine </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &amp;&#160;</td>
          <td class="paramname"><em>extra</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do mesh refinement correcting PE-boundary edges. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">extra</td><td>Unique set of edges that need a new node on PE boundaries </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01487">1487</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="mesh__adapter_8_c_source.html#l00084">AMR::mesh_adapter_t::error_refinement()</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, and <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>.</p>
<div class="fragment"><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;{</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordflow">if</span> (!extra.empty()) {</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="comment">// Instantiate mesh refiner</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <a class="code" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> refiner( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> );</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  </div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// Generate list of edges that need to be corrected</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    std::vector&lt; edge_t &gt; edge;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : extra) edge.push_back( <a class="code" href="classedge__t.html">edge_t</a>(e[0],e[1]) );</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    std::vector&lt; real_t &gt; crit( edge.size(), 1.0 );</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  </div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">// Do refinement including edges that need to be corrected</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    refiner.error_refinement( edge, crit );</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  </div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="comment">// Update mesh coordinates and connectivity</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">updateMesh</a>( refiner );</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  }</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a9c73832aa2e5fbec23c43a225bcc3cb2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">inciter::Partitioner::updateMesh</a></div><div class="ttdeci">void updateMesh(AMR::mesh_adapter_t &amp;refiner)</div><div class="ttdoc">Update mesh after refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01511">Partitioner.C:1511</a></div></div>
<div class="ttc" id="classedge__t_html"><div class="ttname"><a href="classedge__t.html">edge_t</a></div><div class="ttdef"><b>Definition:</b> <a href="edge_8h_source.html#l00008">edge.h:8</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00022">mesh_adapter.h:22</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_abc4ca1da0cf7ebde7678de009daffc8f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a928626a30505aac8c3e41b9bf5b001de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a928626a30505aac8c3e41b9bf5b001de">&#9670;&nbsp;</a></span>cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> Partitioner::cost </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute communication cost of linear system merging for our PE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">l</td><td>Lower global node ID this PE works on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u</td><td>Upper global node ID this PE works on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Communication cost for our PE</dd></dl>
<p>The cost is a real number between 0 and 1, defined as the number of mesh points we do not own, i.e., need to send to some other PE, divided by the total number of points we contribute to. The lower the better. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00524">524</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, and <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;{</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  std::size_t ownpts = 0, compts = 0;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>) <span class="keywordflow">if</span> (p &gt;= l &amp;&amp; p &lt; u) ++ownpts; <span class="keywordflow">else</span> ++compts;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Free storage of unique global node IDs chares on our PE will contribute to</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// as it is no longer needed after computing the communication cost.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_nodeset );</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a><span class="keyword">&gt;</span>(compts) / static_cast&lt;tk::real&gt;(ownpts + compts);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a928626a30505aac8c3e41b9bf5b001de_cgraph.svg" width="286" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af92d0f3116e54c674a8521e3796107f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af92d0f3116e54c674a8521e3796107f9">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create chare array elements on this PE and assign the global mesh element IDs they will operate on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01855">1855</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00524">cost()</a>, <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">inciter::ctr::DiagCG</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00330">m_cost</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00291">m_lower</a>, <a class="el" href="_partitioner_8h_source.html#l00217">m_solver</a>, <a class="el" href="_partitioner_8h_source.html#l00293">m_upper</a>, and <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">inciter::ctr::MatCG</a>.</p>
<div class="fragment"><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;{</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pebounds();</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="comment">// Initiate asynchronous reduction across all Partitioner objects computing</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="comment">// the average communication cost of merging the linear system</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a> = <a class="code" href="classinciter_1_1_partitioner.html#a928626a30505aac8c3e41b9bf5b001de">cost</a>( <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a>, <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> );</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  contribute( <span class="keyword">sizeof</span>(<a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>), &amp;<a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>, CkReduction::sum_double,</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;              <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1avecost.html">tag::avecost</a> &gt;() );</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="comment">// Create worker chare array elements</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a36d8a613c1a4a1946483409fba78deec">createDiscWorkers</a>();</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="comment">// Broadcast our bounds of global node IDs to all matrix solvers</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> scheme = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1discr.html">tag::discr</a>, <a class="code" href="structtag_1_1scheme.html">tag::scheme</a> &gt;();</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="keywordflow">if</span> (scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">ctr::SchemeType::MatCG</a> || scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">ctr::SchemeType::DiagCG</a>)</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a>.bounds( CkMyPe(), <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a>, <a class="code" href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">m_upper</a> );</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="keywordflow">else</span> <span class="comment">// if no MatCG, no matrix solver, continue</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    contribute( <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1coord.html">tag::coord</a> &gt;() );</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="structtag_1_1avecost_html"><div class="ttname"><a href="structtag_1_1avecost.html">tag::avecost</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00177">Tags.h:177</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">inciter::ctr::SchemeType::DiagCG</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a928626a30505aac8c3e41b9bf5b001de"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a928626a30505aac8c3e41b9bf5b001de">inciter::Partitioner::cost</a></div><div class="ttdeci">tk::real cost(std::size_t l, std::size_t u)</div><div class="ttdoc">Compute communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00524">Partitioner.C:524</a></div></div>
<div class="ttc" id="structtag_1_1coord_html"><div class="ttname"><a href="structtag_1_1coord.html">tag::coord</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00170">Tags.h:170</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaea6e9f6686a321f6b3f98c7d9a9cac0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">inciter::Partitioner::m_lower</a></div><div class="ttdeci">std::size_t m_lower</div><div class="ttdoc">Lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00291">Partitioner.h:291</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">inciter::ctr::SchemeType::MatCG</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5859014223f5ecabec8cd04e37ddb823"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">inciter::Partitioner::m_cost</a></div><div class="ttdeci">tk::real m_cost</div><div class="ttdoc">Communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00330">Partitioner.h:330</a></div></div>
<div class="ttc" id="structtag_1_1discr_html"><div class="ttname"><a href="structtag_1_1discr.html">tag::discr</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00134">Tags.h:134</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a36d8a613c1a4a1946483409fba78deec"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a36d8a613c1a4a1946483409fba78deec">inciter::Partitioner::createDiscWorkers</a></div><div class="ttdeci">void createDiscWorkers()</div><div class="ttdoc">Create Discretization chare array elements on this PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01882">Partitioner.C:1882</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a873290f952719d8df09aa888a37ca623"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">inciter::Partitioner::m_solver</a></div><div class="ttdeci">tk::CProxy_Solver m_solver</div><div class="ttdoc">Linear system solver proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00217">Partitioner.h:217</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="structtag_1_1scheme_html"><div class="ttname"><a href="structtag_1_1scheme.html">tag::scheme</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00072">Tags.h:72</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad643d4c35b6a56eef0a3a48a588e366d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad643d4c35b6a56eef0a3a48a588e366d">inciter::Partitioner::m_upper</a></div><div class="ttdeci">std::size_t m_upper</div><div class="ttdoc">Upper bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00293">Partitioner.h:293</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_af92d0f3116e54c674a8521e3796107f9_cgraph.svg" width="579" height="203"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a36d8a613c1a4a1946483409fba78deec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36d8a613c1a4a1946483409fba78deec">&#9670;&nbsp;</a></span>createDiscWorkers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::createDiscWorkers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create <a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> chare array elements on this PE. </p>
<p>We create chare array elements by calling the insert() member function, which allows specifying the PE on which the array element is created. and we send each chare array element the chunk of mesh it will operate on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01882">1882</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, <a class="el" href="_inciter_2_scheme_8h_source.html#l00220">inciter::Scheme::discInsert()</a>, <a class="el" href="_partitioner_8_c_source.html#l00878">distribution()</a>, <a class="el" href="_partitioner_8h_source.html#l00321">m_chcoordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00346">m_msum</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_nchare</a>, <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>, and <a class="el" href="_partitioner_8h_source.html#l00219">m_scheme</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;{</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="keyword">auto</span> dist = <a class="code" href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">distribution</a>( <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> );</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;dist[1]; ++c) {</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="comment">// Compute chare ID</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keyword">auto</span> cid = CkMyPe() * dist[0] + c;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="comment">// Guard those searches that operate on empty containers in serial</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="keyword">typename</span> decltype(<a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>)::mapped_type msum;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>.empty()) msum = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>, cid );</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment">// Create worker array element using Charm++ dynamic chare array element</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="comment">// insertion: 1st arg: chare id, last arg: PE chare is created on, middle</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="comment">// args: Discretization ctor args. See also Charm++ manual, Sec. &quot;Dynamic</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="comment">// Insertion&quot;.</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme.html#a1d1ce75b756fe1d53ed4ced26f9bccbd">discInsert</a>( cid, <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>, <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>,cid),</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">m_chcoordmap</a>,cid), msum, <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a>, CkMyPe() );</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="comment">// Free storage for unique global mesh nodes chares on our PE will</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="comment">// contribute to in a linear system as no longer needed.</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a> );</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="comment">// Free storage of global mesh node IDs associated to chare IDs bordering</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="comment">// the mesh chunk held by and associated to chare IDs we own as it is no</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="comment">// longer needed after creating the workers.</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a> );</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00346">Partitioner.h:346</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aff3c9b62b74448338c417139124a7f35"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">inciter::Partitioner::distribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; distribution(int npart) const</div><div class="ttdoc">Compute chare (partition) distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00878">Partitioner.C:878</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae768c5ce71927c4fb5332095a9901a3e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">inciter::Partitioner::m_scheme</a></div><div class="ttdeci">Scheme m_scheme</div><div class="ttdoc">Discretization scheme. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00219">Partitioner.h:219</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a11f605a01e11ea28aa04fb3a717fb075"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">inciter::Partitioner::m_chcoordmap</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::CoordMap &gt; m_chcoordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk for chares. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00321">Partitioner.h:321</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_html_a1d1ce75b756fe1d53ed4ced26f9bccbd"><div class="ttname"><a href="classinciter_1_1_scheme.html#a1d1ce75b756fe1d53ed4ced26f9bccbd">inciter::Scheme::discInsert</a></div><div class="ttdeci">void discInsert(const CkArrayIndex1D &amp;x, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_scheme_8h_source.html#l00220">Scheme.h:220</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a36d8a613c1a4a1946483409fba78deec_cgraph.svg" width="395" height="196"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4a0f0f348d320343d28c320f975d2da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0f0f348d320343d28c320f975d2da7">&#9670;&nbsp;</a></span>createWorkers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::createWorkers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create worker chare array elements on this PE. </p>
<p>We create chare array elements by calling the insert() member function, which allows specifying the PE on which the array element is created. and we send each chare array element the chunk of mesh it will operate on. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01917">1917</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, <a class="el" href="_partitioner_8_c_source.html#l00878">distribution()</a>, <a class="el" href="_scheme_base_8h_source.html#l00061">inciter::SchemeBase::get()</a>, <a class="el" href="_inciter_2_scheme_8h_source.html#l00326">inciter::Scheme::insert()</a>, <a class="el" href="_partitioner_8h_source.html#l00348">m_bface</a>, <a class="el" href="_partitioner_8h_source.html#l00328">m_chfilenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00317">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_nchare</a>, <a class="el" href="_partitioner_8h_source.html#l00219">m_scheme</a>, <a class="el" href="_partitioner_8h_source.html#l00217">m_solver</a>, <a class="el" href="_partitioner_8h_source.html#l00350">m_triinpoel</a>, and <a class="el" href="_container_util_8h_source.html#l00023">tk::unique()</a>.</p>
<div class="fragment"><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;{</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keyword">auto</span> dist = <a class="code" href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">distribution</a>( <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> );</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="comment">// Prepare data to pass to and put in a request to create worker chares</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;dist[1]; ++c) {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="comment">// Compute chare ID (linear distribution across PEs)</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keyword">auto</span> cid = CkMyPe() * dist[0] + c;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <span class="comment">// Find mesh connectivity for this chare (with new global ids)</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keyword">auto</span> chinpoel = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>, cid );</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="comment">// Generate map associating new(value) to file(key) node ids for this chare</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    decltype(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>) newnodes;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; chfilenodes = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>, cid );</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : chinpoel) newnodes[ <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(chfilenodes,i) ] = i;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="comment">// Generate face set for this chare for potentially faster searches</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="classtk_1_1_uns_mesh.html#a5004e2a1a99924a9b9dfea050bb432a7">tk::UnsMesh::FaceSet</a> faceset;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="keywordflow">for</span> (std::size_t e=0; e&lt;chinpoel.size()/4; ++e) { <span class="comment">// for all tets in chare</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      <span class="keyword">auto</span> mark = e*4;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <span class="keywordflow">for</span> (std::size_t f=0; f&lt;4; ++f) <span class="comment">// for all tet faces</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        faceset.insert( {{{ chinpoel[ mark + tk::lpofa[f][0] ],</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                            chinpoel[ mark + tk::lpofa[f][1] ],</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                            chinpoel[ mark + tk::lpofa[f][2] ] }}} );</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    }</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  </div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="comment">// Generate boundary face and node ids (after mesh node reordering)</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    std::vector&lt; std::size_t &gt; chtriinpoel;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; chbface;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; chbnode;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    std::size_t cnt = 0;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ss : <a class="code" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a>)  <span class="comment">// for all phsyical boundaries (sidesets)</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> f : ss.second) {    <span class="comment">// for all faces on this physical boundary</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="comment">// attempt to find face nodes on this chare</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keyword">auto</span> f1 = newnodes.find( <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a>[f*3+0] );</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        <span class="keyword">auto</span> f2 = newnodes.find( <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a>[f*3+1] );</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <span class="keyword">auto</span> f3 = newnodes.find( <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a>[f*3+2] );</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <span class="comment">// if face node on this chare, assign its new (global) id to side set</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keyword">auto</span>&amp; n = chbnode[ ss.first ];</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <span class="keywordflow">if</span> (f1 != end(newnodes)) n.push_back( f1-&gt;second );</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        <span class="keywordflow">if</span> (f2 != end(newnodes)) n.push_back( f2-&gt;second );</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <span class="keywordflow">if</span> (f3 != end(newnodes)) n.push_back( f3-&gt;second );</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="comment">// if all 3 nodes of the physical boundary face are on this chare</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordflow">if</span> (f1 != end(newnodes) &amp;&amp; f2 != end(newnodes) &amp;&amp; f3 != end(newnodes)) {</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;          <span class="comment">// Create face with new node ids (after mesh node reordering)</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;          std::array&lt; std::size_t, 3 &gt; t{{f1-&gt;second, f2-&gt;second, f3-&gt;second}};</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;          <span class="comment">// if this boundary face is on this chare</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;          <span class="keywordflow">if</span> (faceset.find(t) != end(faceset)) {</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <span class="comment">// store face connectivity with new (global) node ids of this chare</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            chtriinpoel.insert( end(chtriinpoel), begin(t), end(t) );</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            <span class="comment">// generate/store physical boundary face id associated to sideset id</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;            chbface[ ss.first ].push_back( cnt++ );</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;          }</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        }</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      }</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="comment">// Make boundary node IDs unique for each physical boundary (side set)</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; s : chbnode) <a class="code" href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a>( s.second );</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <span class="comment">// Face data class</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    FaceData fd( chinpoel, chbface, chbnode, chtriinpoel );</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="comment">// Make sure (bound) base is already created and accessible</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme_base.html#a346149e6f93b08edc96a7515d3411a02">get</a>()[cid].ckLocal() != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;About to pass nullptr&quot;</span> );</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="comment">// Create worker array element using Charm++ dynamic chare array element</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="comment">// insertion: 1st arg: chare id, last arg: PE chare is created on, middle</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="comment">// args: Discretization&#39;s child ctor args. See also Charm++ manual, Sec.</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="comment">// &quot;Dynamic Insertion&quot;.</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme.html#ae69bc42c92ce04d6b1fd15fc92937f1a">insert</a>( cid, <a class="code" href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">m_scheme</a>.<a class="code" href="classinciter_1_1_scheme_base.html#a346149e6f93b08edc96a7515d3411a02">get</a>(), <a class="code" href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">m_solver</a>, fd, CkMyPe() );</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_bface );</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a> );</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00317">Partitioner.h:317</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac3678a5d05b8c5356840f28568bf3609"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">inciter::Partitioner::m_bface</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_bface</div><div class="ttdoc">List of boundary faces associated to side-set IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00348">Partitioner.h:348</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aff3c9b62b74448338c417139124a7f35"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">inciter::Partitioner::distribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; distribution(int npart) const</div><div class="ttdoc">Compute chare (partition) distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00878">Partitioner.C:878</a></div></div>
<div class="ttc" id="namespacetk_html_a87af1b002bc711716bd170a714bda211"><div class="ttname"><a href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a></div><div class="ttdeci">void unique(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00023">ContainerUtil.h:23</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_html_ae69bc42c92ce04d6b1fd15fc92937f1a"><div class="ttname"><a href="classinciter_1_1_scheme.html#ae69bc42c92ce04d6b1fd15fc92937f1a">inciter::Scheme::insert</a></div><div class="ttdeci">void insert(const CkArrayIndex1D &amp;x, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_scheme_8h_source.html#l00326">Scheme.h:326</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00328">Partitioner.h:328</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a873290f952719d8df09aa888a37ca623"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a873290f952719d8df09aa888a37ca623">inciter::Partitioner::m_solver</a></div><div class="ttdeci">tk::CProxy_Solver m_solver</div><div class="ttdoc">Linear system solver proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00217">Partitioner.h:217</a></div></div>
<div class="ttc" id="classinciter_1_1_scheme_base_html_a346149e6f93b08edc96a7515d3411a02"><div class="ttname"><a href="classinciter_1_1_scheme_base.html#a346149e6f93b08edc96a7515d3411a02">inciter::SchemeBase::get</a></div><div class="ttdeci">CProxy_Discretization &amp; get() noexcept</div><div class="ttdoc">Get reference to discretization proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_scheme_base_8h_source.html#l00061">SchemeBase.h:61</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae768c5ce71927c4fb5332095a9901a3e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae768c5ce71927c4fb5332095a9901a3e">inciter::Partitioner::m_scheme</a></div><div class="ttdeci">Scheme m_scheme</div><div class="ttdoc">Discretization scheme. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00219">Partitioner.h:219</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac1af520c1436ffde6c975a541bfda8ac"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">inciter::Partitioner::m_triinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_triinpoel</div><div class="ttdoc">Boundary face-node connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00350">Partitioner.h:350</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a5004e2a1a99924a9b9dfea050bb432a7"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a5004e2a1a99924a9b9dfea050bb432a7">tk::UnsMesh::FaceSet</a></div><div class="ttdeci">std::unordered_set&lt; Face, FaceHasher, FaceEq &gt; FaceSet</div><div class="ttdoc">Unique set of node ID triplets representing unique tetrahedron faces. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00092">UnsMesh.h:92</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a4a0f0f348d320343d28c320f975d2da7_cgraph.svg" width="374" height="295"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa3f532b844c7a16d3ed9ede60214f833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f532b844c7a16d3ed9ede60214f833">&#9670;&nbsp;</a></span>distributeCh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::distributeCh </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>elems</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Distribute mesh to their owner PEs after initial mesh refinement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">elems</td><td>Mesh cells (with global node IDs) categorized by target chares </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00829">829</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00769">coordmap()</a>, <a class="el" href="_partitioner_8_c_source.html#l00878">distribution()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_nchare</a>, <a class="el" href="_partitioner_8h_source.html#l00225">m_npe</a>, and <a class="el" href="_partitioner_8_c_source.html#l00954">pe()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>.</p>
<div class="fragment"><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;{</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keyword">auto</span> dist = <a class="code" href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">distribution</a>( <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> );</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// Extract those mesh connectivities whose chares live on this PE</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;dist[1]; ++c) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keyword">auto</span> chid = CkMyPe() * dist[0] + c;   <span class="comment">// compute owned chare ID</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = elems.find( chid );   <span class="comment">// attempt to find its nodes</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (it != end(elems)) {               <span class="comment">// if found</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keyword">auto</span>&amp; inp = <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>[ chid ];     <span class="comment">// store own mesh</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      inp.insert( end(inp), begin(it-&gt;second), end(it-&gt;second) );</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keyword">auto</span> cm = <a class="code" href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">coordmap</a>( it-&gt;second );   <span class="comment">// extract node coordinates </span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.insert( begin(cm), end(cm) );  <span class="comment">// concatenate node coords</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      elems.erase( it );                  <span class="comment">// remove chare ID and nodes</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( elems.find(chid) == end(elems), <span class="stringliteral">&quot;Not all owned node IDs stored&quot;</span> );</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// Construct export map associating mesh connectivities with global node</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// indices and node coordinates for mesh chunks associated to chare IDs (inner</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// key) owned by chares we do not own.</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  std::unordered_map&lt; int,                              <span class="comment">// target PE</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    std::unordered_map&lt; int,                            <span class="comment">// chare ID</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      std::tuple&lt; std::vector&lt; std::size_t &gt;,           <span class="comment">// mesh connectivity</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                  <a class="code" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &gt; &gt; &gt; exp;      <span class="comment">// node ID &amp; coords</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : elems)</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    exp[ <a class="code" href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">pe</a>(c.first) ][ c.first ] =</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      std::make_tuple( c.second, <a class="code" href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">coordmap</a>(c.second) );</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// Export chare IDs and mesh we do not own to fellow PEs</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordflow">if</span> (exp.empty()) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    contribute( <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1distributed.html">tag::distributed</a> &gt;() );</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() )</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pedistributed();</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;     <a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a> = exp.size();</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;     <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : exp)</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;       thisProxy[ p.first ].addChMesh( CkMyPe(), p.second );</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div><div class="ttc" id="classtk_1_1_uns_mesh_html_a4b2d1f8043c0354b11461c118a4379c5"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, Coord &gt; CoordMap</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00034">UnsMesh.h:34</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a2b552950fcbc37a2481c3a8c3708d945"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a2b552950fcbc37a2481c3a8c3708d945">inciter::Partitioner::pe</a></div><div class="ttdeci">int pe(int id) const</div><div class="ttdoc">Return processing element for chare id. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00954">Partitioner.C:954</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5b854cdfd3a566fd637a6f842d7fc58c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">inciter::Partitioner::coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap coordmap(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Extract coordinates associated to global nodes of a mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00769">Partitioner.C:769</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa6450dbbf36bf5cb36088bdcec7a4445"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">inciter::Partitioner::m_npe</a></div><div class="ttdeci">std::size_t m_npe</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00225">Partitioner.h:225</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="structtag_1_1distributed_html"><div class="ttname"><a href="structtag_1_1distributed.html">tag::distributed</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00172">Tags.h:172</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aff3c9b62b74448338c417139124a7f35"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">inciter::Partitioner::distribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; distribution(int npart) const</div><div class="ttdoc">Compute chare (partition) distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00878">Partitioner.C:878</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aa3f532b844c7a16d3ed9ede60214f833_cgraph.svg" width="651" height="227"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a635aeca8b4181238f2b3e904130b0253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a635aeca8b4181238f2b3e904130b0253">&#9670;&nbsp;</a></span>distributePe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::distributePe </td>
          <td>(</td>
          <td class="paramtype">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>elems</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Distribute mesh to their PEs during initial mesh refinement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">elems</td><td>Mesh cells (with global node IDs) categorized by target PEs </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00795">795</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l00769">coordmap()</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00227">m_ndist</a>, <a class="el" href="_partitioner_8h_source.html#l00230">m_nedge</a>, and <a class="el" href="_partitioner_8h_source.html#l00222">m_npeDist</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;{</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">// Store own mesh connectivity</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keyword">auto</span> i = elems.find( CkMyPe() );</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> (i != end(elems)) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// Store our mesh chunk. The receive side also writes to this, so concat.</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>.insert( end(<a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>), begin(i-&gt;second), end(i-&gt;second) );</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="comment">// store coordinates associated to global nodes of our mesh chunk</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keyword">auto</span> cm = <a class="code" href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">coordmap</a>( i-&gt;second );</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// the receive side also writes to this, so concatenate</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.insert( begin(cm), end(cm) );</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="comment">// remove our mesh chunk from list (the rest will be exported)</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    elems.erase( i );</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">m_nedge</a> = 0;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// Export connectivities to other PEs</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (elems.empty())</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    contribute( <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1refdistributed.html">tag::refdistributed</a> &gt;() );</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">m_ndist</a> = 0;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">m_npeDist</a> = elems.size();</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : elems)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      thisProxy[ p.first ].addPeMesh( CkMyPe(), p.second, <a class="code" href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">coordmap</a>(p.second) );</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5b854cdfd3a566fd637a6f842d7fc58c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5b854cdfd3a566fd637a6f842d7fc58c">inciter::Partitioner::coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap coordmap(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Extract coordinates associated to global nodes of a mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00769">Partitioner.C:769</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a014b468e68f031bd2adbc78a7819e531"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">inciter::Partitioner::m_npeDist</a></div><div class="ttdeci">std::size_t m_npeDist</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00222">Partitioner.h:222</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9166e2ef7ec475b0863383ea1afb38e7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">inciter::Partitioner::m_ndist</a></div><div class="ttdeci">std::size_t m_ndist</div><div class="ttdoc">Counter during distribution of mesh during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="structtag_1_1refdistributed_html"><div class="ttname"><a href="structtag_1_1refdistributed.html">tag::refdistributed</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00171">Tags.h:171</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a235100235d9321fe8ad67bed3566263c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a235100235d9321fe8ad67bed3566263c">inciter::Partitioner::m_nedge</a></div><div class="ttdeci">std::size_t m_nedge</div><div class="ttdoc">Counter during distribution of PE-boundary edges during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00230">Partitioner.h:230</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a635aeca8b4181238f2b3e904130b0253_cgraph.svg" width="627" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aff3c9b62b74448338c417139124a7f35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff3c9b62b74448338c417139124a7f35">&#9670;&nbsp;</a></span>distribution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; int, 2 &gt; Partitioner::distribution </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>npart</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute chare (partition) distribution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">npart</td><td>Total number of chares (partitions) to distribute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Chunksize, i.e., number of chares per all PEs except the last one, and the number of chares for my PE</dd></dl>
<p>Chare ids are distributed to PEs in a linear continguous order with the last PE taking the remainder if the number of PEs is not divisible by the number chares. For example, if nchare=7 and npe=3, the chare distribution is PE0: 0 1, PE1: 2 3, and PE2: 4 5 6. As a result of this distribution, all PEs will have their chare-categorized element connectivity filled with the global mesh node IDs associated to the Charm++ chare IDs each PE owns. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00878">878</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>.</p>
<div class="fragment"><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keyword">auto</span> chunksize = npart / CkNumPes();</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keyword">auto</span> mynchare = chunksize;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> (CkMyPe() == CkNumPes()-1) mynchare += npart % CkNumPes();</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">return</span> {{ chunksize, mynchare }};</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a7ac3e650bd934bda593f1f11e532b680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ac3e650bd934bda593f1f11e532b680">&#9670;&nbsp;</a></span>errorRefine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::errorRefine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do error-based mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01341">1341</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="mesh__adapter_8_c_source.html#l00084">AMR::mesh_adapter_t::error_refinement()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_derived_data_8_c_source.html#l00041">tk::genEsup()</a>, <a class="el" href="_derived_data_8_c_source.html#l00124">tk::genPsup()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="_partitioner_8_c_source.html#l01433">nodeinit()</a>, <a class="el" href="_derived_data_8_c_source.html#l00028">tk::npoin()</a>, <a class="el" href="_error_8_c_source.html#l00022">AMR::Error::scalar()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>
<div class="fragment"><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;{</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="comment">// Instantiate mesh refiner</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <a class="code" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> refiner( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> );</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// Find number of nodes in old mesh</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> = <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> );</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">// Generate edges surrounding points in old mesh</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keyword">auto</span> esup = <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, 4 );</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keyword">auto</span> psup = <a class="code" href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, 4, esup );</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="comment">// Evaluate initial conditions at mesh nodes</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keyword">auto</span> u = <a class="code" href="classinciter_1_1_partitioner.html#aa33143821e60319c3aac2357b5bc3915">nodeinit</a>( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>, esup );</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">// Get the indices (in the system of systems) of refinement variables and the</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="comment">// error indicator configured</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; refidx = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1id.html">tag::id</a> &gt;();</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keyword">auto</span> errtype = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1error.html">tag::error</a> &gt;();</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="comment">// Compute errors in ICs and define refinement criteria for edges</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  std::vector&lt; edge_t &gt; edge;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  std::vector&lt; real_t &gt; crit;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <a class="code" href="class_a_m_r_1_1_error.html">AMR::Error</a> error;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">for</span> (std::size_t p=0; p&lt;<a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>; ++p)   <span class="comment">// for all mesh nodes on this PE</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> q : <a class="code" href="classtk_1_1_around.html">tk::Around</a>(psup,p)) { <span class="comment">// for all nodes surrounding p</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;       <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> cmax = 0.0;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;       <a class="code" href="classedge__t.html">edge_t</a> e(p,q);</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;       <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : refidx) {          <span class="comment">// for all refinement variables</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;         <span class="keyword">auto</span> c = error.<a class="code" href="class_a_m_r_1_1_error.html#a7049cc5aaf2363427d8d428bad9d5216">scalar</a>( u, e, i, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>, <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, esup, errtype );</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;         <span class="keywordflow">if</span> (c &gt; cmax) cmax = c;        <span class="comment">// find max error at edge</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;       }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;       <span class="keywordflow">if</span> (cmax &gt; 0.0) {         <span class="comment">// if nonzero error, will pass edge to refiner</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;         edge.push_back( e );</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;         crit.push_back( cmax );</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;       }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;     }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( edge.size() == crit.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="comment">// Do error-based refinement</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  refiner.error_refinement( edge, crit );</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">// Update mesh coordinates and connectivity</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">updateMesh</a>( refiner );</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;}</div><div class="ttc" id="class_a_m_r_1_1_error_html"><div class="ttname"><a href="class_a_m_r_1_1_error.html">AMR::Error</a></div><div class="ttdoc">Class for computing error estimates for mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_inciter_2_a_m_r_2_error_8h_source.html#l00020">Error.h:20</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9c73832aa2e5fbec23c43a225bcc3cb2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">inciter::Partitioner::updateMesh</a></div><div class="ttdeci">void updateMesh(AMR::mesh_adapter_t &amp;refiner)</div><div class="ttdoc">Update mesh after refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01511">Partitioner.C:1511</a></div></div>
<div class="ttc" id="classedge__t_html"><div class="ttname"><a href="classedge__t.html">edge_t</a></div><div class="ttdef"><b>Definition:</b> <a href="edge_8h_source.html#l00008">edge.h:8</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="structtag_1_1error_html"><div class="ttname"><a href="structtag_1_1error.html">tag::error</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00033">Tags.h:33</a></div></div>
<div class="ttc" id="classtk_1_1_around_html"><div class="ttname"><a href="classtk_1_1_around.html">tk::Around</a></div><div class="ttdoc">Helper class simplifying client code for iterating on entries surrounding entries via linked lists de...</div><div class="ttdef"><b>Definition:</b> <a href="_around_8h_source.html#l00027">Around.h:27</a></div></div>
<div class="ttc" id="namespacetk_html_ad2a88a65102c17149b44660db15d445b"><div class="ttname"><a href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genPsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, points surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00124">DerivedData.C:124</a></div></div>
<div class="ttc" id="class_a_m_r_1_1_error_html_a7049cc5aaf2363427d8d428bad9d5216"><div class="ttname"><a href="class_a_m_r_1_1_error.html#a7049cc5aaf2363427d8d428bad9d5216">AMR::Error::scalar</a></div><div class="ttdeci">tk::real scalar(const tk::Fields &amp;u, const edge_t &amp;edge, ncomp_t c, const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup, inciter::ctr::AMRErrorType err) const</div><div class="ttdoc">Compute error estimate for a scalar quantity. </div><div class="ttdef"><b>Definition:</b> <a href="_error_8_c_source.html#l00022">Error.C:22</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="structtag_1_1id_html"><div class="ttname"><a href="structtag_1_1id.html">tag::id</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00165">Tags.h:165</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00041">DerivedData.C:41</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ad30c6f520ba46308e32e3ea7ed44d5d0"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">inciter::ctr::amr</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::amr, bool, tag::init, std::vector&lt; AMRInitialType &gt;, tag::refvar, std::vector&lt; std::string &gt;, tag::id, std::vector&lt; std::size_t &gt;, tag::error, AMRErrorType, tag::edge, std::vector&lt; kw::amr_initref::info::expect::type &gt; &gt; amr</div><div class="ttdoc">Adaptive-mesh refinement options. </div><div class="ttdef"><b>Definition:</b> <a href="_control_2_inciter_2_types_8h_source.html#l00051">Types.h:51</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00022">mesh_adapter.h:22</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa33143821e60319c3aac2357b5bc3915"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa33143821e60319c3aac2357b5bc3915">inciter::Partitioner::nodeinit</a></div><div class="ttdeci">tk::Fields nodeinit(std::size_t npoin, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Evaluate initial conditions (IC) at mesh nodes. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01433">Partitioner.C:1433</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a7ac3e650bd934bda593f1f11e532b680_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aff4dbdf5ad4dee1c31d65d5b75291e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff4dbdf5ad4dee1c31d65d5b75291e68">&#9670;&nbsp;</a></span>finishref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::finishref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finish initiel mesh refinement. </p>
<p>This function is called as after initial mesh refinement has finished. If initial mesh reifnement was not configured by the user, this is the point where we continue after the constructor, by computing the total number of elements across the whole problem. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01309">1309</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, and <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01280">nextref()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>.</p>
<div class="fragment"><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;{</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="comment">// Compute final number of cells across whole problem</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keyword">auto</span> nelem = <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>.size()/4;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  contribute( <span class="keyword">sizeof</span>(uint64_t), &amp;nelem, CkReduction::sum_int,</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;              <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1refined.html">tag::refined</a> &gt;() );</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="structtag_1_1refined_html"><div class="ttname"><a href="structtag_1_1refined.html">tag::refined</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00084">Tags.h:84</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02b9184c4c34f337693bb1e80b858b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02b9184c4c34f337693bb1e80b858b12">&#9670;&nbsp;</a></span>flatten()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::flatten </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare owned mesh node IDs for reordering. </p>
<p>The 'flatten' is used here as a concatenation of a data structure that stores date categorized by chares owned on this PE. The result of the flattening is thus a simpler data structure that is no longer categorized by (or associated to) chares. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00368">368</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::CREATE</a>, <a class="el" href="_partitioner_8_c_source.html#l00878">distribution()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_derived_data_8_c_source.html#l00933">tk::genEsuelTet()</a>, <a class="el" href="_derived_data_8_c_source.html#l00041">tk::genEsup()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_reorder_8_c_source.html#l00164">tk::global2local()</a>, <a class="el" href="_derived_data_8h_source.html#l00033">tk::lpofa</a>, <a class="el" href="_partitioner_8h_source.html#l00335">m_bnodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00321">m_chcoordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_nchare</a>, <a class="el" href="_partitioner_8h_source.html#l00313">m_nodech</a>, <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>, <a class="el" href="_derived_data_8_c_source.html#l00028">tk::npoin()</a>, <a class="el" href="_partitioner_8_c_source.html#l00460">positiveJacobians()</a>, <a class="el" href="_container_util_8h_source.html#l00023">tk::unique()</a>, and <a class="el" href="_exodus_i_i_mesh_writer_8_c_source.html#l00075">tk::ExodusIIMeshWriter::writeMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;{</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  std::size_t l = 0;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; i : <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>) {      <span class="comment">// for all meshes passed in</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// generate local ids and connectivity from global connectivity</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">auto</span> el = <a class="code" href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a>( i.second );</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; inpoel = std::get&lt; 0 &gt;( el );   <span class="comment">// local connectivity</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lid = std::get&lt; 2 &gt;( el );      <span class="comment">// global-&gt;local node ids</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">auto</span> np = <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a>( inpoel );</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a> coord;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    coord[0].resize( np );</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    coord[1].resize( np );</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    coord[2].resize( np );</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keyword">auto</span> p = lid.find( c.first );</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">if</span> (p != lid.end()) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( p-&gt;second &lt; np, <span class="stringliteral">&quot;Indexing out of coord vector&quot;</span> );</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        coord[0][p-&gt;second] = c.second[0];</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        coord[1][p-&gt;second] = c.second[1];</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        coord[2][p-&gt;second] = c.second[2];</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> refmesh( inpoel, coord );</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a> mw( <span class="stringliteral">&quot;initref.flatten.&quot;</span> + std::to_string(l++) + <span class="charliteral">&#39;.&#39;</span> +</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                               std::to_string(CkMyPe()),</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                               <a class="code" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a> );</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    mw.writeMesh( refmesh );</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// Make sure all cells of all chare meshes have non-negative Jacobians</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a147d5658a48e98fd77a3eb0bdaf941f1">positiveJacobians</a>( m_chinpoel, m_coordmap ),</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;          <span class="stringliteral">&quot;Chare-partitioned mesh cell Jacobian non-positive&quot;</span> );</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// Make sure we are not fed garbage</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( m_chinpoel.size() ==</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keyword">static_cast&lt;</span> std::size_t <span class="keyword">&gt;</span>( <a class="code" href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">distribution</a>(<a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a>)[1] ),</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <span class="stringliteral">&quot;Global mesh nodes ids associated to chares on PE &quot;</span> +</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          std::to_string( CkMyPe() ) + <span class="stringliteral">&quot; is incomplete&quot;</span> );</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// Flatten node IDs of elements our chares operate on and associate global</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">// node ID to chare IDs.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : m_chinpoel)</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : c.second) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.insert( i );</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">m_nodech</a>[ i ].push_back( c.first );</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">m_chcoordmap</a>.clear();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="comment">// Find chare-boundary nodes of all chares on this PE</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : m_chinpoel) {    <span class="comment">// for all chare connectivities</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// generate local ids and connectivity from global connectivity</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">auto</span> el = <a class="code" href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a>( c.second );</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; inpoel = std::get&lt; 0 &gt;( el );   <span class="comment">// local connectivity</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; gid = std::get&lt; 1 &gt;( el );      <span class="comment">// local-&gt;global node ids</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keyword">auto</span> esup = <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>( inpoel, 4 );       <span class="comment">// elements surrounding points</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">auto</span> esuel = <a class="code" href="namespacetk.html#a5b61b3cb6492e71ff9853404440fddcc">tk::genEsuelTet</a>( inpoel, esup ); <span class="comment">// elems surrounding elements</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// collect chare boundary nodes</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">for</span> (std::size_t e=0; e&lt;esuel.size()/4; ++e) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keyword">auto</span> mark = e*4;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">for</span> (std::size_t f=0; f&lt;4; ++f) {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> (esuel[mark+f] == -1) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;          <span class="keyword">auto</span> A = gid[ inpoel[ mark+<a class="code" href="namespacetk.html#a30ac7c57927d6134e6563817f5d005a0">tk::lpofa</a>[f][0] ] ];</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;          <span class="keyword">auto</span> B = gid[ inpoel[ mark+tk::lpofa[f][1] ] ];</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          <span class="keyword">auto</span> C = gid[ inpoel[ mark+tk::lpofa[f][2] ] ];</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>[ A ].push_back( c.first );</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>[ B ].push_back( c.first );</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>[ C ].push_back( c.first );</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// Make node chare lists unique</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; n : <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>) <a class="code" href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a>( n.second );</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.peflattened();</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// Signal host that we are ready for computing the communication map,</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// required for parallel distributed global mesh node reordering</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  contribute( <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1flattened.html">tag::flattened</a> &gt;() );</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="namespacetk_html_a0ee7abd71123782d48e2ec04906fe982"><div class="ttname"><a href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a></div><div class="ttdeci">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; global2local(const std::vector&lt; std::size_t &gt; &amp;ginpoel)</div><div class="ttdoc">Generate element connectivity of local node IDs from connectivity of global node IDs also returning t...</div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00164">Reorder.C:164</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a2ed8d512b099636a98ba6b35b1118d6f"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a></div><div class="ttdeci">std::array&lt; std::vector&lt; real &gt;, 3 &gt; Coords</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00032">UnsMesh.h:32</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html"><div class="ttname"><a href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a></div><div class="ttdoc">3D unstructured mesh class </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00029">UnsMesh.h:29</a></div></div>
<div class="ttc" id="namespacetk_html_a30ac7c57927d6134e6563817f5d005a0"><div class="ttname"><a href="namespacetk.html#a30ac7c57927d6134e6563817f5d005a0">tk::lpofa</a></div><div class="ttdeci">const std::array&lt; std::array&lt; std::size_t, 3 &gt;, 4 &gt; lpofa</div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8h_source.html#l00033">DerivedData.h:33</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aff3c9b62b74448338c417139124a7f35"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aff3c9b62b74448338c417139124a7f35">inciter::Partitioner::distribution</a></div><div class="ttdeci">std::array&lt; int, 2 &gt; distribution(int npart) const</div><div class="ttdoc">Compute chare (partition) distribution. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00878">Partitioner.C:878</a></div></div>
<div class="ttc" id="namespacetk_html_a87af1b002bc711716bd170a714bda211"><div class="ttname"><a href="namespacetk.html#a87af1b002bc711716bd170a714bda211">tk::unique</a></div><div class="ttdeci">void unique(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00023">ContainerUtil.h:23</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_adaac84a616435db5f54b8286a2774b23"><div class="ttname"><a href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">inciter::Partitioner::m_nodech</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodech</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00313">Partitioner.h:313</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a147d5658a48e98fd77a3eb0bdaf941f1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a147d5658a48e98fd77a3eb0bdaf941f1">inciter::Partitioner::positiveJacobians</a></div><div class="ttdeci">bool positiveJacobians(const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; chinpoel, const tk::UnsMesh::CoordMap &amp;cm)</div><div class="ttdoc">Test for positivity of the Jacobian for all cells in multiple meshes. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00460">Partitioner.C:460</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_writer_html"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_writer_8h_source.html#l00029">ExodusIIMeshWriter.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="structtag_1_1flattened_html"><div class="ttname"><a href="structtag_1_1flattened.html">tag::flattened</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00173">Tags.h:173</a></div></div>
<div class="ttc" id="namespacetk_html_a5b61b3cb6492e71ff9853404440fddcc"><div class="ttname"><a href="namespacetk.html#a5b61b3cb6492e71ff9853404440fddcc">tk::genEsuelTet</a></div><div class="ttdeci">std::vector&lt; int &gt; genEsuelTet(const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, elements surrounding elements as a fixed length data structure as a ...</div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00933">DerivedData.C:933</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_acae3ab90a1e0e88de39ba269ab90637b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">inciter::Partitioner::m_bnodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_bnodechares</div><div class="ttdoc">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00335">Partitioner.h:335</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00041">DerivedData.C:41</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a11f605a01e11ea28aa04fb3a717fb075"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">inciter::Partitioner::m_chcoordmap</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::CoordMap &gt; m_chcoordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk for chares. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00321">Partitioner.h:321</a></div></div>
<div class="ttc" id="namespacetk_html_aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d"><div class="ttname"><a href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a02b9184c4c34f337693bb1e80b858b12_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ad334fe5a4acd071eaeedd859533e4857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad334fe5a4acd071eaeedd859533e4857">&#9670;&nbsp;</a></span>gather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::gather </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start gathering global node IDs this PE will need to receive (instead of assign) during reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00547">547</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00335">m_bnodechares</a>, and <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// Exctract boundary chare nodes to vector</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  std::vector&lt; std::size_t &gt; bnodes( <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>.size() );</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  std::size_t i = 0;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; n : <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>) bnodes[ i++ ] = n.first;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// Send chare boundary nodes to all PEs in a broadcast fashion</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  thisProxy.query( CkMyPe(), bnodes );</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pegather();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_acae3ab90a1e0e88de39ba269ab90637b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">inciter::Partitioner::m_bnodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_bnodechares</div><div class="ttdoc">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00335">Partitioner.h:335</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_ad334fe5a4acd071eaeedd859533e4857_cgraph.svg" width="312" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6ef486986479c66f4480d60834f17a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef486986479c66f4480d60834f17a21">&#9670;&nbsp;</a></span>lower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::lower </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>low</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive lower bound of node IDs our PE operates on after reordering. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">low</td><td>Lower bound of node IDs assigned to us </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00498">498</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00291">m_lower</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01811">bounds()</a>.</p>
<div class="fragment"><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;{</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">m_lower</a> = low;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  lower_complete();</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aaea6e9f6686a321f6b3f98c7d9a9cac0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaea6e9f6686a321f6b3f98c7d9a9cac0">inciter::Partitioner::m_lower</a></div><div class="ttdeci">std::size_t m_lower</div><div class="ttdoc">Lower bound of node IDs our PE operates on after reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00291">Partitioner.h:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa810ee137b21edb02e356fe94ccfede4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa810ee137b21edb02e356fe94ccfede4">&#9670;&nbsp;</a></span>mask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::mask </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>cn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive mask of to-be-received global mesh node IDs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>The PE uniquely assigns the node IDs marked listed in ch </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cn</td><td>Vector containing the set of potentially multiple chare IDs that we own (i.e., contribute to) for all of our node IDs.</td></tr>
  </table>
  </dd>
</dl>
<p>Note that every PE will call this function, since <a class="el" href="classinciter_1_1_partitioner.html#a80f221f759ecd832939d8e7e7ab101d4" title="Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those fr...">query()</a> was called in a broadcast fashion and <a class="el" href="classinciter_1_1_partitioner.html#a80f221f759ecd832939d8e7e7ab101d4" title="Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those fr...">query()</a> answers to every PE once. This is more efficient than calling only the PEs from which we would have to receive results from. Thus the incoming results are only interesting from PEs with lower IDs than ours. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00600">600</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00335">m_bnodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00346">m_msum</a>, <a class="el" href="_partitioner_8h_source.html#l00299">m_ncomm</a>, <a class="el" href="_partitioner_8h_source.html#l00306">m_ncommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00281">m_nmask</a>, <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>, and <a class="el" href="_container_util_8h_source.html#l00067">tk::ref_find()</a>.</p>
<div class="fragment"><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// Store the old global mesh node IDs associated to chare IDs bordering the</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// mesh chunk held by and associated to chare IDs we own. This loop computes</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// m_msum, a symmetric chare-node communication map, that associates (in its</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// inner map) a unique set of global node IDs to areceiving chare ID, both</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// associated (in its outer map) to a sending chare ID.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; h : cn) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; chares = <a class="code" href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>, h.first );</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : chares) {           <span class="comment">// surrounded chares</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keyword">auto</span>&amp; sch = <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>[c];</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> s : h.second)         <span class="comment">// surrounding chares</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span> (s != c) sch[ s ].insert( h.first );</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">// Associate global mesh node IDs to lower PEs we will need to receive from</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">// during node reordering. The choice of associated container is std::map,</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// which is ordered (vs. unordered, hash-map). This is required by the</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// following operation that makes the mesh node IDs unique in the</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// communication map. (We are called in an unordered fashion, so we need to</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// collect from all PEs and then we need to make the node IDs unique, keeping</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// only the lowest PEs a node ID is associated with.) Note that m_ncomm is an</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// asymmetric PE-node communication map, associating a set of unique global</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="comment">// node IDs to PE IDs from which we (this PE) will need to receive newly</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// assigned node IDs during global mesh node reordering. This map is</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">// asymmetric, beacuse of the agreement of the reordering that if a mesh node</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// is shared by multiple PEs, the PE with the lowest ID gets to assign a new</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// ID to it and all others must receive it instead of assigning it.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">if</span> (p &lt; CkMyPe()) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keyword">auto</span>&amp; <span class="keywordtype">id</span> = <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>[ p ];</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; h : cn) <span class="keywordtype">id</span>.insert( h.first );</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a3356e3bc9acbadf37c511d7847a31f5a">m_nmask</a> == static_cast&lt;std::size_t&gt;(CkNumPes())) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// Make sure we have received all we need</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.size() == <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(CkMyPe()),</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="stringliteral">&quot;Communication map size on PE &quot;</span> +</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            std::to_string(CkMyPe()) + <span class="stringliteral">&quot; must equal &quot;</span> +</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            std::to_string(CkMyPe()) );</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">// Fill new hash-map, keeping only unique node IDs obtained from the</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// lowest possible PEs</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c=<a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.cbegin(); c!=<a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.cend(); ++c) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keyword">auto</span>&amp; n = <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>[ c-&gt;first ];</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> j : c-&gt;second)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">if</span> (std::none_of( <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>.cbegin(), c,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;             [ j ]( <span class="keyword">const</span> <span class="keyword">typename</span> decltype(<a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a>)::value_type&amp; s )</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;             { <span class="keywordflow">return</span> s.second.find(j) != end(s.second); } )) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;          n.insert(j);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span> (n.empty()) <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>.erase( c-&gt;first );</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// Free storage of temporary communication map used to receive global</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// mesh node IDs as it is no longer needed once the final communication</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// map is generated.</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">m_ncomm</a> );</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Count up total number of nodes we will need receive during reordering</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    std::size_t nrecv = 0;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; u : <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>) nrecv += u.second.size();</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pemask();</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// Compute number of mesh node IDs we will assign IDs to</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">auto</span> nuniq = <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.size() - nrecv;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">// Start computing PE offsets for node reordering</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    thisProxy.offset( CkMyPe(), nuniq );</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a3356e3bc9acbadf37c511d7847a31f5a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a3356e3bc9acbadf37c511d7847a31f5a">inciter::Partitioner::m_nmask</a></div><div class="ttdeci">std::size_t m_nmask</div><div class="ttdoc">Counter for number of masks of to-be-received global mesh node IDs received. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00281">Partitioner.h:281</a></div></div>
<div class="ttc" id="namespacetk_html_ab2aac5f0fd93d5119cfe50a39f3515c9"><div class="ttname"><a href="namespacetk.html#ab2aac5f0fd93d5119cfe50a39f3515c9">tk::ref_find</a></div><div class="ttdeci">auto ref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00067">ContainerUtil.h:67</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00346">Partitioner.h:346</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_acae3ab90a1e0e88de39ba269ab90637b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">inciter::Partitioner::m_bnodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_bnodechares</div><div class="ttdoc">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00335">Partitioner.h:335</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00306">Partitioner.h:306</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0996cf378d056d18ab8c89b77bc5e9a1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0996cf378d056d18ab8c89b77bc5e9a1">inciter::Partitioner::m_ncomm</a></div><div class="ttdeci">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncomm</div><div class="ttdoc">Temporary communication map used to receive global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00299">Partitioner.h:299</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aa810ee137b21edb02e356fe94ccfede4_cgraph.svg" width="456" height="134"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2b83bc68c80546762bd70324cb11fd65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b83bc68c80546762bd70324cb11fd65">&#9670;&nbsp;</a></span>neworder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::neworder </td>
          <td>(</td>
          <td class="paramtype">const std::unordered_map&lt; std::size_t, std::tuple&lt; std::size_t, <a class="el" href="classtk_1_1_uns_mesh.html#a880f09d552514074c37973e005b1f63e">tk::UnsMesh::Coord</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>nodes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive new (reordered) global node IDs and coordinates. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nd</td><td>Map associating new to old node IDs </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00266">266</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_partitioner_8h_source.html#l00321">m_chcoordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00317">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00313">m_nodech</a>, <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// Signal to the runtime system that we have participated in reordering</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  participated_complete();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// Store new node IDs associated to old ones, and node coordinates associated</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// to new node IDs. Since multiple chares can contribute to a single node, we</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="comment">// store such shared node coordinates for all chares that contribute.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : nodes) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">auto</span> <span class="keywordtype">id</span> = std::get&lt; 0 &gt;( p.second );</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keyword">auto</span> coord = std::get&lt; 1 &gt;( p.second );</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>[ p.first ] = id;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">m_nodech</a>,p.first))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">m_chcoordmap</a>[ c ].emplace( <span class="keywordtype">id</span>, coord );</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// If all our nodes have new IDs assigned, reorder complete on this PE</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">if</span> (m_linnodes.size() == <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.size()) <a class="code" href="classinciter_1_1_partitioner.html#aa789d014a17b190534b6a05738bd7033">reordered</a>();</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00317">Partitioner.h:317</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_adaac84a616435db5f54b8286a2774b23"><div class="ttname"><a href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">inciter::Partitioner::m_nodech</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodech</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00313">Partitioner.h:313</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa789d014a17b190534b6a05738bd7033"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa789d014a17b190534b6a05738bd7033">inciter::Partitioner::reordered</a></div><div class="ttdeci">void reordered()</div><div class="ttdoc">Compute final result of reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01761">Partitioner.C:1761</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a11f605a01e11ea28aa04fb3a717fb075"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">inciter::Partitioner::m_chcoordmap</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::CoordMap &gt; m_chcoordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk for chares. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00321">Partitioner.h:321</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a2b83bc68c80546762bd70324cb11fd65_cgraph.svg" width="100%" height="447"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="af5f8164a9d5c3c4df5b05f62e3451e49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f8164a9d5c3c4df5b05f62e3451e49">&#9670;&nbsp;</a></span>nextref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::nextref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decide wether to continue with another step of initial mesh refinement. </p>
<p>At this point the mesh has been refined and all PEs have received a map associating the global IDs and the coordinates of a node added to an edge during initial mesh refinement associated to all other PEs the edges are shared with. Now the mesh is corrected so that it conforms across PE-boundaries by tagging those edges for refinement that have been refined by at least a PE. This concludes this initial mesh refinement step, and we continue if there are more steps configured by the user. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01280">1280</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::CREATE</a>, <a class="el" href="_partitioner_8_c_source.html#l01309">finishref()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00237">m_initref</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, and <a class="el" href="_exodus_i_i_mesh_writer_8_c_source.html#l00075">tk::ExodusIIMeshWriter::writeMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;{</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">// Remove initial mesh refinement step from list</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.empty()) <a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.pop_back();</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.empty())       <span class="comment">// Continue to next initial refinement step</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a604caaa8da62d39ca838e34a2df7758a">partref</a>();</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="keywordflow">else</span> {                        <span class="comment">// Finish list of initial mesh refinement steps</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="comment">// Output final mesh after initial mesh refinement</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <a class="code" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> refmesh( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> );</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <a class="code" href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a> mw( <span class="stringliteral">&quot;initref.final.&quot;</span> + std::to_string(CkMyPe()),</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                               <a class="code" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a> );</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    mw.writeMesh( refmesh );</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="comment">// Finish initial mesh refinement</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#aff4dbdf5ad4dee1c31d65d5b75291e68">finishref</a>();</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a604caaa8da62d39ca838e34a2df7758a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a604caaa8da62d39ca838e34a2df7758a">inciter::Partitioner::partref</a></div><div class="ttdeci">void partref()</div><div class="ttdoc">Partition the mesh before a (potential) refinement step. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00130">Partitioner.C:130</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html"><div class="ttname"><a href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a></div><div class="ttdoc">3D unstructured mesh class </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00029">UnsMesh.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aba177cca8c93f41df7565d8392289d1d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">inciter::Partitioner::m_initref</a></div><div class="ttdeci">std::vector&lt; ctr::AMRInitialType &gt; m_initref</div><div class="ttdoc">Initial mesh refinement type list (in reverse order) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00237">Partitioner.h:237</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_writer_html"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_writer_8h_source.html#l00029">ExodusIIMeshWriter.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aff4dbdf5ad4dee1c31d65d5b75291e68"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aff4dbdf5ad4dee1c31d65d5b75291e68">inciter::Partitioner::finishref</a></div><div class="ttdeci">void finishref()</div><div class="ttdoc">Finish initiel mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01309">Partitioner.C:1309</a></div></div>
<div class="ttc" id="namespacetk_html_aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d"><div class="ttname"><a href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_af5f8164a9d5c3c4df5b05f62e3451e49_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa33143821e60319c3aac2357b5bc3915"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa33143821e60319c3aac2357b5bc3915">&#9670;&nbsp;</a></span>nodeinit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tk::Fields Partitioner::nodeinit </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>npoin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>esup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluate initial conditions (IC) at mesh nodes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">npoin</td><td>Number points in mesh (on this PE) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">esup</td><td>Elements surrounding points as linked lists, see <a class="el" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463" title="Generate derived data structure, elements surrounding points. ">tk::genEsup</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Initial conditions (evaluated at t0) at nodes </dd></dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01433">1433</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ead7fb95a565d5b96f24fd2a30a7231729">inciter::ctr::DG</a>, <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">inciter::ctr::DiagCG</a>, <a class="el" href="_discretization_8_c_source.html#l00030">inciter::g_cgpde</a>, <a class="el" href="_discretization_8_c_source.html#l00031">inciter::g_dgpde</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_derived_data_8_c_source.html#l01438">tk::genGeoElemTet()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">inciter::ctr::MatCG</a>, <a class="el" href="_derived_data_8_c_source.html#l00028">tk::npoin()</a>, and <a class="el" href="_exception_8h_source.html#l00031">Throw</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01341">errorRefine()</a>.</p>
<div class="fragment"><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;{</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keyword">auto</span> t0 = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1discr.html">tag::discr</a>, <a class="code" href="structtag_1_1t0.html">tag::t0</a> &gt;();</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="keyword">auto</span> nprop = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1component.html">tag::component</a> &gt;().nprop();</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// Will store nodal ICs</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  tk::Fields u( <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0].size(), nprop );</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="comment">// Evaluate ICs differently depending on nodal or cell-centered discretization</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> scheme = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1discr.html">tag::discr</a>, <a class="code" href="structtag_1_1scheme.html">tag::scheme</a> &gt;();</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordflow">if</span> (scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">ctr::SchemeType::MatCG</a> || scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">ctr::SchemeType::DiagCG</a>) {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">// Node-centered: evaluate ICs for all scalar components integrated</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; eq : <a class="code" href="namespaceinciter.html#a13d1fc7121850561556871530b310016">g_cgpde</a>) eq.initialize( <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>, u, t0 );</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scheme == <a class="code" href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ead7fb95a565d5b96f24fd2a30a7231729">ctr::SchemeType::DG</a>) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="comment">// Initialize cell-centered unknowns</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    tk::Fields ue( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>.size()/4, nprop );</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keyword">auto</span> geoElem = <a class="code" href="namespacetk.html#af33c6a2dc1649b840ab82bfcd3d1617a">tk::genGeoElemTet</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> );</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; eq : <a class="code" href="namespaceinciter.html#a9f44cfbd2d66fc825ad2848240dea587">g_dgpde</a>) eq.initialize( geoElem, ue, t0 );</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="comment">// Transfer initial conditions from cells to nodes</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="keywordflow">for</span> (std::size_t p=0; p&lt;<a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>; ++p) {       <span class="comment">// for all mesh nodes on this PE</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      std::vector&lt; tk::real &gt; up( nprop, 0.0 );</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> vol = 0.0;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> e : <a class="code" href="classtk_1_1_around.html">tk::Around</a>(esup,p)) {       <span class="comment">// for all cells around node p</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="comment">// compute nodal volume: every element contributes their volume / 4</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        vol += geoElem(e,0,0) / 4.0;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="comment">// sum cell value to node weighed by cell volume / 4</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <span class="keywordflow">for</span> (std::size_t c=0; c&lt;nprop; ++c)</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;          up[c] += ue[e][c] * geoElem(e,0,0) / 4.0;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="comment">// store nodal value</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="keywordflow">for</span> (std::size_t c=0; c&lt;nprop; ++c) u(p,c,0) = up[c] / vol;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  } <span class="keywordflow">else</span> <a class="code" href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a>( <span class="stringliteral">&quot;Nodal initialization not handled for discretization scheme&quot;</span> );</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( u.nunk() == <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0].size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( u.nprop() == nprop, <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">return</span> u;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;}</div><div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea0d82657f3a15a4f1307015b28b7bf82b">inciter::ctr::SchemeType::DiagCG</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="namespaceinciter_html_a9f44cfbd2d66fc825ad2848240dea587"><div class="ttname"><a href="namespaceinciter.html#a9f44cfbd2d66fc825ad2848240dea587">inciter::g_dgpde</a></div><div class="ttdeci">std::vector&lt; DGPDE &gt; g_dgpde</div><div class="ttdef"><b>Definition:</b> <a href="_discretization_8_c_source.html#l00031">Discretization.C:31</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ea353e47fe83cde0cbcddf72ac555dd1e4">inciter::ctr::SchemeType::MatCG</a></div></div>
<div class="ttc" id="classtk_1_1_around_html"><div class="ttname"><a href="classtk_1_1_around.html">tk::Around</a></div><div class="ttdoc">Helper class simplifying client code for iterating on entries surrounding entries via linked lists de...</div><div class="ttdef"><b>Definition:</b> <a href="_around_8h_source.html#l00027">Around.h:27</a></div></div>
<div class="ttc" id="structtag_1_1discr_html"><div class="ttname"><a href="structtag_1_1discr.html">tag::discr</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00134">Tags.h:134</a></div></div>
<div class="ttc" id="namespaceinciter_html_a13d1fc7121850561556871530b310016"><div class="ttname"><a href="namespaceinciter.html#a13d1fc7121850561556871530b310016">inciter::g_cgpde</a></div><div class="ttdeci">std::vector&lt; CGPDE &gt; g_cgpde</div><div class="ttdef"><b>Definition:</b> <a href="_discretization_8_c_source.html#l00030">Discretization.C:30</a></div></div>
<div class="ttc" id="_exception_8h_html_a0412f798470c18f503a2c2f63c970ba8"><div class="ttname"><a href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a></div><div class="ttdeci">#define Throw(...)</div><div class="ttdoc">Throw macro that always throws an exception. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00031">Exception.h:31</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_aba4e861eef4516f2b2b8f78e99b5af5ead7fb95a565d5b96f24fd2a30a7231729"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#aba4e861eef4516f2b2b8f78e99b5af5ead7fb95a565d5b96f24fd2a30a7231729">inciter::ctr::SchemeType::DG</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="structtag_1_1t0_html"><div class="ttname"><a href="structtag_1_1t0.html">tag::t0</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00078">Tags.h:78</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="namespacetk_html_af33c6a2dc1649b840ab82bfcd3d1617a"><div class="ttname"><a href="namespacetk.html#af33c6a2dc1649b840ab82bfcd3d1617a">tk::genGeoElemTet</a></div><div class="ttdeci">tk::Fields genGeoElemTet(const std::vector&lt; std::size_t &gt; &amp;inpoel, const tk::UnsMesh::Coords &amp;coord)</div><div class="ttdoc">Generate derived data structure, element geometry. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l01438">DerivedData.C:1438</a></div></div>
<div class="ttc" id="structtag_1_1scheme_html"><div class="ttname"><a href="structtag_1_1scheme.html">tag::scheme</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00072">Tags.h:72</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
<div class="ttc" id="structtag_1_1component_html"><div class="ttname"><a href="structtag_1_1component.html">tag::component</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00135">Tags.h:135</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aa33143821e60319c3aac2357b5bc3915_cgraph.svg" width="582" height="160"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a766863eaeba226362f627495ca2bc578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a766863eaeba226362f627495ca2bc578">&#9670;&nbsp;</a></span>offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::offset </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>u</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive number of uniquely assigned global mesh node IDs from lower PEs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>PE ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u</td><td>Number of mesh node IDs PE p will assign IDs to</td></tr>
  </table>
  </dd>
</dl>
<p>This function computes the offset each PE will need to start assigning its new node IDs from (for those nodes that are not assigned new IDs by any PEs with lower indices). The offset for a PE is the offset for the previous PE plus the number of node IDs the previous PE (uniquely) assigns new IDs for minus the number of node IDs the previous PE receives from others (lower PEs). This is computed here in a parallel/distributed fashion by each PE sending its number of node IDs (that it uniquely assigns) to all PEs. Note that each PE would only need to send this information to higher PEs, but instead this function is called in a broadcast fashion, because that is more efficient than individual calls to only the higher PEs. Therefore when computing the offsets, we only count the lower PEs. When this is done, we have the precise communication map as well as the start offset on all PEs and so we can start the distributed global mesh node ID reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00224">224</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00270">m_noffset</a>, <a class="el" href="_partitioner_8h_source.html#l00265">m_start</a>, and <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (p &lt; CkMyPe()) <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a> += u;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">m_noffset</a> == static_cast&lt;std::size_t&gt;(CkNumPes())) <a class="code" href="classinciter_1_1_partitioner.html#a96d91369a111de7aa4442f27926751cc">reorder</a>();</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a96d91369a111de7aa4442f27926751cc"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a96d91369a111de7aa4442f27926751cc">inciter::Partitioner::reorder</a></div><div class="ttdeci">void reorder()</div><div class="ttdoc">Reorder global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00900">Partitioner.C:900</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0518feebf27d6038e52a84d3bf83349e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0518feebf27d6038e52a84d3bf83349e">inciter::Partitioner::m_noffset</a></div><div class="ttdeci">std::size_t m_noffset</div><div class="ttdoc">Counter for number of offsets. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00270">Partitioner.h:270</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a803838f68fa952cd41d1d9b6e5941c6a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">inciter::Partitioner::m_start</a></div><div class="ttdeci">std::size_t m_start</div><div class="ttdoc">Starting global mesh node ID for node reordering on this PE during mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00265">Partitioner.h:265</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a766863eaeba226362f627495ca2bc578_cgraph.svg" width="100%" height="447"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0e2f33ec5a5e15270a206812fa843258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e2f33ec5a5e15270a206812fa843258">&#9670;&nbsp;</a></span>partchare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::partchare </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nchare</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partition the computational mesh into a number of chares. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nchare</td><td>Number of parts the mesh will be partitioned into</td></tr>
  </table>
  </dd>
</dl>
<p>This function calls the mesh partitioner to partition the (current) mesh after potentially a number of initial mesh refinement steps. The number of partitions equals the number nchare argument which could be larger but not smaller than the number of PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00178">178</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00725">categorize()</a>, <a class="el" href="_partitioner_8_c_source.html#l00685">centroids()</a>, <a class="el" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::CREATE</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00101">tk::zoltan::geomPartMesh()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00289">m_nchare</a>, <a class="el" href="_process_control_8_c_source.html#l00031">tk::rm()</a>, and <a class="el" href="_exodus_i_i_mesh_writer_8_c_source.html#l00075">tk::ExodusIIMeshWriter::writeMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( nchare &gt;= CkNumPes(),</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          <span class="stringliteral">&quot;Number of chares must not be lower than the number of PEs&quot;</span> );</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// Generate element IDs for Zoltan</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  std::vector&lt; long &gt; gelemid( <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>.size()/4 );</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  std::iota( begin(gelemid), end(gelemid), 0 );</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<a class="code" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> <a class="code" href="namespacetk.html#a4d5bfee8e8bdea2bc60e5d725672af09">rm</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> );</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<a class="code" href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a> mwr( <span class="stringliteral">&quot;initref.partchare.&quot;</span> + std::to_string(CkMyPe()),</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                            <a class="code" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a> );</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;mwr.writeMesh( <a class="code" href="namespacetk.html#a4d5bfee8e8bdea2bc60e5d725672af09">rm</a> );</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> = nchare;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> alg = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1selected.html">tag::selected</a>, <a class="code" href="structtag_1_1partitioner.html">tag::partitioner</a> &gt;();</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> che = <a class="code" href="namespacetk_1_1zoltan.html#a1dbf2d9c33b3d81d49b7587ac637adff">tk::zoltan::geomPartMesh</a>( alg,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                             <a class="code" href="classinciter_1_1_partitioner.html#ab50a26d00da770de46a114e906e421cc">centroids</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> ),</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                             gelemid,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                             nchare );</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pepartitioned();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( che.size() == gelemid.size(), <span class="stringliteral">&quot;Size of ownership array (chare ID &quot;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          <span class="stringliteral">&quot;of elements) after mesh partitioning does not equal the number of &quot;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          <span class="stringliteral">&quot;mesh graph elements&quot;</span> );</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.clear();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>.clear();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// Categorize mesh elements (given by their gobal node IDs) by target chare</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// and distribute to their PEs based on mesh partitioning.</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aa3f532b844c7a16d3ed9ede60214f833">distributeCh</a>( <a class="code" href="classinciter_1_1_partitioner.html#a77dabb793af5836da2b7da267aea1d54">categorize</a>( che, <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a> ) );</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="ttc" id="classtk_1_1_uns_mesh_html"><div class="ttname"><a href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a></div><div class="ttdoc">3D unstructured mesh class </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00029">UnsMesh.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ab50a26d00da770de46a114e906e421cc"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab50a26d00da770de46a114e906e421cc">inciter::Partitioner::centroids</a></div><div class="ttdeci">std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; centroids(const std::vector&lt; std::size_t &gt; &amp;inpoel, const tk::UnsMesh::Coords &amp;coord)</div><div class="ttdoc">Compute element centroid coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00685">Partitioner.C:685</a></div></div>
<div class="ttc" id="namespacetk_html_a4d5bfee8e8bdea2bc60e5d725672af09"><div class="ttname"><a href="namespacetk.html#a4d5bfee8e8bdea2bc60e5d725672af09">tk::rm</a></div><div class="ttdeci">void rm(const std::string &amp;file)</div><div class="ttdoc">Remove file from file system. </div><div class="ttdef"><b>Definition:</b> <a href="_process_control_8_c_source.html#l00031">ProcessControl.C:31</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_writer_html"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_writer_8h_source.html#l00029">ExodusIIMeshWriter.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77dabb793af5836da2b7da267aea1d54"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77dabb793af5836da2b7da267aea1d54">inciter::Partitioner::categorize</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; categorize(const std::vector&lt; std::size_t &gt; &amp;che, const std::vector&lt; std::size_t &gt; &amp;inpoel) const</div><div class="ttdoc">Categorize mesh elements (given by their gobal node IDs) by target. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00725">Partitioner.C:725</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="structtag_1_1selected_html"><div class="ttname"><a href="structtag_1_1selected.html">tag::selected</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00133">Tags.h:133</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="structtag_1_1partitioner_html"><div class="ttname"><a href="structtag_1_1partitioner.html">tag::partitioner</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00071">Tags.h:71</a></div></div>
<div class="ttc" id="namespacetk_html_aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d"><div class="ttname"><a href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa3f532b844c7a16d3ed9ede60214f833"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa3f532b844c7a16d3ed9ede60214f833">inciter::Partitioner::distributeCh</a></div><div class="ttdeci">void distributeCh(std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;elems)</div><div class="ttdoc">Distribute mesh to their owner PEs after initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00829">Partitioner.C:829</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a1dbf2d9c33b3d81d49b7587ac637adff"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a1dbf2d9c33b3d81d49b7587ac637adff">tk::zoltan::geomPartMesh</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; geomPartMesh(tk::ctr::PartitioningAlgorithmType algorithm, const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;centroid, const std::vector&lt; long &gt; &amp;elemid, int npart)</div><div class="ttdoc">Partition mesh using Zoltan2 with a geometric partitioner, such as RCB, RIB. </div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00101">ZoltanInterOp.C:101</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a0e2f33ec5a5e15270a206812fa843258_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a604caaa8da62d39ca838e34a2df7758a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a604caaa8da62d39ca838e34a2df7758a">&#9670;&nbsp;</a></span>partref()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::partref </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partition the mesh before a (potential) refinement step. </p>
<p>This function calls the mesh partitioner to partition (or re-partition) the (current) mesh as a first step for an initial mesh refinement step. The number of partitions always equals the numher of PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00130">130</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_partitioner_8_c_source.html#l00725">categorize()</a>, <a class="el" href="_partitioner_8_c_source.html#l00685">centroids()</a>, <a class="el" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::CREATE</a>, <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00101">tk::zoltan::geomPartMesh()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00256">m_bndEdges</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00254">m_edgenode</a>, <a class="el" href="_partitioner_8h_source.html#l00260">m_edgenodePe</a>, <a class="el" href="_partitioner_8h_source.html#l00233">m_extra</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00237">m_initref</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00235">m_pe</a>, <a class="el" href="_process_control_8_c_source.html#l00031">tk::rm()</a>, and <a class="el" href="_exodus_i_i_mesh_writer_8_c_source.html#l00075">tk::ExodusIIMeshWriter::writeMesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01280">nextref()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// Generate element IDs for Zoltan</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  std::vector&lt; long &gt; gelemid( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>.size()/4 );</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  std::iota( begin(gelemid), end(gelemid), 0 );</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{<span class="keyword">auto</span> initref = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1init.html">tag::init</a> &gt;();</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">auto</span> level = initref.size() - <a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.size();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<a class="code" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> <a class="code" href="namespacetk.html#a4d5bfee8e8bdea2bc60e5d725672af09">rm</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> );</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<a class="code" href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a> mwr( <span class="stringliteral">&quot;initref.partref.&quot;</span> + std::to_string(level) + <span class="charliteral">&#39;.&#39;</span> +</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                             std::to_string(CkMyPe()),</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                            <a class="code" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a> );</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;mwr.writeMesh( <a class="code" href="namespacetk.html#a4d5bfee8e8bdea2bc60e5d725672af09">rm</a> );}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// Partition the mesh using Zoltan to number of PEs parts</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> alg = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1selected.html">tag::selected</a>, <a class="code" href="structtag_1_1partitioner.html">tag::partitioner</a> &gt;();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> pel = <a class="code" href="namespacetk_1_1zoltan.html#a1dbf2d9c33b3d81d49b7587ac637adff">tk::zoltan::geomPartMesh</a>( alg,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                             <a class="code" href="classinciter_1_1_partitioner.html#ab50a26d00da770de46a114e906e421cc">centroids</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> ),</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                             gelemid,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                             CkNumPes() );</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( pel.size() == gelemid.size(), <span class="stringliteral">&quot;Size of ownership array (PE of &quot;</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;          <span class="stringliteral">&quot;elements) after mesh partitioning does not equal the number of mesh &quot;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <span class="stringliteral">&quot;graph elements&quot;</span> );</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// Prepare for a step of initial mesh refinement</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a> = 1;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>.clear();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>.clear();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">m_edgenodePe</a>.clear();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>.clear();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.clear();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">auto</span> g = <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>.clear();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// Categorize mesh elements (given by their gobal node IDs) by target PE and</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// distribute to their PEs based on mesh partitioning.</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a635aeca8b4181238f2b3e904130b0253">distributePe</a>( <a class="code" href="classinciter_1_1_partitioner.html#a77dabb793af5836da2b7da267aea1d54">categorize</a>( pel, g ) );</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a765fd4aca23b340e45e463c64ee7c944"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">inciter::Partitioner::m_edgenode</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodeCoord m_edgenode</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00254">Partitioner.h:254</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html"><div class="ttname"><a href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a></div><div class="ttdoc">3D unstructured mesh class </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00029">UnsMesh.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aba177cca8c93f41df7565d8392289d1d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">inciter::Partitioner::m_initref</a></div><div class="ttdeci">std::vector&lt; ctr::AMRInitialType &gt; m_initref</div><div class="ttdoc">Initial mesh refinement type list (in reverse order) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00237">Partitioner.h:237</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a017d196502387fcfe4f4128b3d5200c4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">inciter::Partitioner::m_bndEdges</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeSet &gt; m_bndEdges</div><div class="ttdoc">Unique set of boundary edges associated to PEs we share these edges with. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00256">Partitioner.h:256</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ae9ac9f7fe233a64ce71b5dd9fec298d0"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ae9ac9f7fe233a64ce71b5dd9fec298d0">inciter::Partitioner::m_edgenodePe</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeNodeCoord &gt; m_edgenodePe</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00260">Partitioner.h:260</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ab50a26d00da770de46a114e906e421cc"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ab50a26d00da770de46a114e906e421cc">inciter::Partitioner::centroids</a></div><div class="ttdeci">std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; centroids(const std::vector&lt; std::size_t &gt; &amp;inpoel, const tk::UnsMesh::Coords &amp;coord)</div><div class="ttdoc">Compute element centroid coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00685">Partitioner.C:685</a></div></div>
<div class="ttc" id="namespacetk_html_a4d5bfee8e8bdea2bc60e5d725672af09"><div class="ttname"><a href="namespacetk.html#a4d5bfee8e8bdea2bc60e5d725672af09">tk::rm</a></div><div class="ttdeci">void rm(const std::string &amp;file)</div><div class="ttdoc">Remove file from file system. </div><div class="ttdef"><b>Definition:</b> <a href="_process_control_8_c_source.html#l00031">ProcessControl.C:31</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a635aeca8b4181238f2b3e904130b0253"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a635aeca8b4181238f2b3e904130b0253">inciter::Partitioner::distributePe</a></div><div class="ttdeci">void distributePe(std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; &amp;&amp;elems)</div><div class="ttdoc">Distribute mesh to their PEs during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00795">Partitioner.C:795</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77db7e343f48921c4fd9900249d8b2f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">inciter::Partitioner::m_extra</a></div><div class="ttdeci">std::size_t m_extra</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00233">Partitioner.h:233</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_writer_html"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_writer_8h_source.html#l00029">ExodusIIMeshWriter.h:29</a></div></div>
<div class="ttc" id="structtag_1_1init_html"><div class="ttname"><a href="structtag_1_1init.html">tag::init</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00139">Tags.h:139</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77dabb793af5836da2b7da267aea1d54"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77dabb793af5836da2b7da267aea1d54">inciter::Partitioner::categorize</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; categorize(const std::vector&lt; std::size_t &gt; &amp;che, const std::vector&lt; std::size_t &gt; &amp;inpoel) const</div><div class="ttdoc">Categorize mesh elements (given by their gobal node IDs) by target. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l00725">Partitioner.C:725</a></div></div>
<div class="ttc" id="structtag_1_1selected_html"><div class="ttname"><a href="structtag_1_1selected.html">tag::selected</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00133">Tags.h:133</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="structtag_1_1partitioner_html"><div class="ttname"><a href="structtag_1_1partitioner.html">tag::partitioner</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00071">Tags.h:71</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a132adb59d0c9e34782cc7ef84384875e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">inciter::Partitioner::m_pe</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; m_pe</div><div class="ttdoc">PEs we share at least a single edge with during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00235">Partitioner.h:235</a></div></div>
<div class="ttc" id="namespacetk_html_aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d"><div class="ttname"><a href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ad30c6f520ba46308e32e3ea7ed44d5d0"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">inciter::ctr::amr</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::amr, bool, tag::init, std::vector&lt; AMRInitialType &gt;, tag::refvar, std::vector&lt; std::string &gt;, tag::id, std::vector&lt; std::size_t &gt;, tag::error, AMRErrorType, tag::edge, std::vector&lt; kw::amr_initref::info::expect::type &gt; &gt; amr</div><div class="ttdoc">Adaptive-mesh refinement options. </div><div class="ttdef"><b>Definition:</b> <a href="_control_2_inciter_2_types_8h_source.html#l00051">Types.h:51</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a1dbf2d9c33b3d81d49b7587ac637adff"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a1dbf2d9c33b3d81d49b7587ac637adff">tk::zoltan::geomPartMesh</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; geomPartMesh(tk::ctr::PartitioningAlgorithmType algorithm, const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;centroid, const std::vector&lt; long &gt; &amp;elemid, int npart)</div><div class="ttdoc">Partition mesh using Zoltan2 with a geometric partitioner, such as RCB, RIB. </div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00101">ZoltanInterOp.C:101</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a604caaa8da62d39ca838e34a2df7758a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a2b552950fcbc37a2481c3a8c3708d945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b552950fcbc37a2481c3a8c3708d945">&#9670;&nbsp;</a></span>pe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Partitioner::pe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return processing element for chare id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Chare id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PE that creates the chare</dd></dl>
<p>This is computed based on a simple contiguous linear distribution of chare ids to PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00954">954</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, and <a class="el" href="_partitioner_8h_source.html#l00289">m_nchare</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00292">addChMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;{</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> &gt; 0, <span class="stringliteral">&quot;Number of chares must be a positive number&quot;</span> );</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keyword">auto</span> p = <span class="keywordtype">id</span> / (<a class="code" href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">m_nchare</a> / CkNumPes());</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">if</span> (p &gt;= CkNumPes()) p = CkNumPes()-1;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( p &lt; CkNumPes(), <span class="stringliteral">&quot;Assigning to nonexistent PE&quot;</span> );</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_aebd33481dcb2404d2b65835784a0ad6b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aebd33481dcb2404d2b65835784a0ad6b">inciter::Partitioner::m_nchare</a></div><div class="ttdeci">int m_nchare</div><div class="ttdoc">Total number of chares across all PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00289">Partitioner.h:289</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a147d5658a48e98fd77a3eb0bdaf941f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147d5658a48e98fd77a3eb0bdaf941f1">&#9670;&nbsp;</a></span>positiveJacobians()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Partitioner::positiveJacobians </td>
          <td>(</td>
          <td class="paramtype">const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td>
          <td class="paramname"><em>chinpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &amp;&#160;</td>
          <td class="paramname"><em>cm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test for positivity of the Jacobian for all cells in multiple meshes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chinpoel</td><td>Connectivities of multiple meshes assigned to their chare IDs </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cm</td><td>Coordinates associated to global node IDs of of all meshes passed in </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if Jacobians of all cells of all meshes are positive </dd></dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00460">460</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_reorder_8_c_source.html#l00164">tk::global2local()</a>, <a class="el" href="_derived_data_8_c_source.html#l00028">tk::npoin()</a>, and <a class="el" href="_reorder_8_c_source.html#l00194">tk::positiveJacobians()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>.</p>
<div class="fragment"><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;{</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; i : chinpoel) {      <span class="comment">// for all meshes passed in</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// generate local ids and connectivity from global connectivity</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">auto</span> el = <a class="code" href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a>( i.second );</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; inpoel = std::get&lt; 0 &gt;( el );   <span class="comment">// local connectivity</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lid = std::get&lt; 2 &gt;( el );      <span class="comment">// global-&gt;local node ids</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keyword">auto</span> np = <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a>( inpoel );</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a> coord;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    coord[0].resize( np );</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    coord[1].resize( np );</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    coord[2].resize( np );</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : cm) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keyword">auto</span> p = lid.find( c.first );</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">if</span> (p != lid.end()) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( p-&gt;second &lt; np, <span class="stringliteral">&quot;Indexing out of coord vector&quot;</span> );</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        coord[0][p-&gt;second] = c.second[0];</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        coord[1][p-&gt;second] = c.second[1];</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        coord[2][p-&gt;second] = c.second[2];</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacetk.html#a6c5589db5d1caeac294a0b1569b65ebd">tk::positiveJacobians</a>( inpoel, coord )) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div><div class="ttc" id="namespacetk_html_a0ee7abd71123782d48e2ec04906fe982"><div class="ttname"><a href="namespacetk.html#a0ee7abd71123782d48e2ec04906fe982">tk::global2local</a></div><div class="ttdeci">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; global2local(const std::vector&lt; std::size_t &gt; &amp;ginpoel)</div><div class="ttdoc">Generate element connectivity of local node IDs from connectivity of global node IDs also returning t...</div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00164">Reorder.C:164</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a2ed8d512b099636a98ba6b35b1118d6f"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a></div><div class="ttdeci">std::array&lt; std::vector&lt; real &gt;, 3 &gt; Coords</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00032">UnsMesh.h:32</a></div></div>
<div class="ttc" id="namespacetk_html_a6c5589db5d1caeac294a0b1569b65ebd"><div class="ttname"><a href="namespacetk.html#a6c5589db5d1caeac294a0b1569b65ebd">tk::positiveJacobians</a></div><div class="ttdeci">bool positiveJacobians(const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::array&lt; std::vector&lt; real &gt;, 3 &gt; &amp;coord)</div><div class="ttdoc">Test positivity of the Jacobian for all cells in a mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00194">Reorder.C:194</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a147d5658a48e98fd77a3eb0bdaf941f1_cgraph.svg" width="646" height="224"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2597580e502900fcc96109e86da060b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2597580e502900fcc96109e86da060b9">&#9670;&nbsp;</a></span>prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::prepare </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Associate new node IDs to old ones and return them to the requestor(s) </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00971">971</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00317">m_linnodes</a>, and <a class="el" href="_partitioner_8h_source.html#l00262">m_reqNodes</a>.</p>
<div class="fragment"><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;{</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="comment">// Signal to the runtime system that we have participated in reordering</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  participated_complete();</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// Find and return new node IDs to sender</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : <a class="code" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a>) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    std::unordered_map&lt; std::size_t,</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      std::tuple&lt; std::size_t, tk::UnsMesh::Coord &gt; &gt; n;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : r.second)</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      n.emplace( p, std::make_tuple( <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>,p),</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                     <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>,p) ) );</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    thisProxy[ r.first ].neworder( n );</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( n );</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  }</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( m_reqNodes ); <span class="comment">// Clear queue of requests just fulfilled</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="comment">// Re-enable SDAG wait for preparing new node requests</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  thisProxy[ CkMyPe() ].wait4prep();</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">// Re-enable trigger signaling that reordering of owned node IDs are</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// complete right away</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  reorderowned_complete();</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00317">Partitioner.h:317</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a1713eab87b3e4e49357e4726f2e5ae9b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">inciter::Partitioner::m_reqNodes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_reqNodes</div><div class="ttdoc">Queue of requested node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00262">Partitioner.h:262</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a2597580e502900fcc96109e86da060b9_cgraph.svg" width="291" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a80f221f759ecd832939d8e7e7ab101d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80f221f759ecd832939d8e7e7ab101d4">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::query </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>bnodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query our global node IDs and edges by other PEs so they know if they are to receive IDs for those from during reordering. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>Querying PE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nodes</td><td>List of global mesh node IDs to query</td></tr>
  </table>
  </dd>
</dl>
<p>Note that every PE calls this function in a broadcast fashion, including our own. However, to compute the correct result, this would only be necessary for PEs whose ID is higher than ours. However, the broadcast (calling everyone) is more efficient. This also results in a simpler logic, because every PE goes through this single call path. The returned mask is simply a boolean array signaling if the node ID is found (owned). </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00566">566</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00335">m_bnodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>, and <a class="el" href="_partitioner_8h_source.html#l00275">m_nquery</a>.</p>
<div class="fragment"><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; cn;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> j : bnodes) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> it = <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.find( j );</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">if</span> (it != end(<a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>)) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; c = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a>, j );</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keyword">auto</span>&amp; chares = cn[j];</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      chares.insert( end(chares), begin(c), end(c) );</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// when we have heard from all PEs, send progress report to host</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() &amp;&amp;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;       ++<a class="code" href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">m_nquery</a> == static_cast&lt;std::size_t&gt;(CkNumPes()) )</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pequery();</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  thisProxy[ p ].mask( CkMyPe(), cn );</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a14f06d050b2bce8637646757de64ea87"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a14f06d050b2bce8637646757de64ea87">inciter::Partitioner::m_nquery</a></div><div class="ttdeci">std::size_t m_nquery</div><div class="ttdoc">Counter for number of queries for global mesh node IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00275">Partitioner.h:275</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_acae3ab90a1e0e88de39ba269ab90637b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">inciter::Partitioner::m_bnodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_bnodechares</div><div class="ttdoc">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00335">Partitioner.h:335</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a80f221f759ecd832939d8e7e7ab101d4_cgraph.svg" width="312" height="84"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a05827515cc8413abf5f7c25b03e01195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05827515cc8413abf5f7c25b03e01195">&#9670;&nbsp;</a></span>recvChMesh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::recvChMesh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledge received mesh after initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00322">322</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, and <a class="el" href="_partitioner_8h_source.html#l00225">m_npe</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (--<a class="code" href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">m_npe</a> == 0) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    contribute( <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1distributed.html">tag::distributed</a> &gt;() );</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() )</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pedistributed();</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa6450dbbf36bf5cb36088bdcec7a4445"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa6450dbbf36bf5cb36088bdcec7a4445">inciter::Partitioner::m_npe</a></div><div class="ttdeci">std::size_t m_npe</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00225">Partitioner.h:225</a></div></div>
<div class="ttc" id="structtag_1_1distributed_html"><div class="ttname"><a href="structtag_1_1distributed.html">tag::distributed</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00172">Tags.h:172</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a05827515cc8413abf5f7c25b03e01195_cgraph.svg" width="312" height="48"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af3a7ddaf60dc0d751b75d799d81dd944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a7ddaf60dc0d751b75d799d81dd944">&#9670;&nbsp;</a></span>recvPeMesh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::recvPeMesh </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledge received mesh chunk and its nodes during initial refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00359">359</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00227">m_ndist</a>, and <a class="el" href="_partitioner_8h_source.html#l00222">m_npeDist</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">m_ndist</a> == <a class="code" href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">m_npeDist</a>) contribute( <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1refdistributed.html">tag::refdistributed</a> &gt;() );</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a014b468e68f031bd2adbc78a7819e531"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a014b468e68f031bd2adbc78a7819e531">inciter::Partitioner::m_npeDist</a></div><div class="ttdeci">std::size_t m_npeDist</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00222">Partitioner.h:222</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9166e2ef7ec475b0863383ea1afb38e7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9166e2ef7ec475b0863383ea1afb38e7">inciter::Partitioner::m_ndist</a></div><div class="ttdeci">std::size_t m_ndist</div><div class="ttdoc">Counter during distribution of mesh during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00227">Partitioner.h:227</a></div></div>
<div class="ttc" id="structtag_1_1refdistributed_html"><div class="ttname"><a href="structtag_1_1refdistributed.html">tag::refdistributed</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00171">Tags.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad28e6cd5e1f58f0042925ce021d4ea9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28e6cd5e1f58f0042925ce021d4ea9d">&#9670;&nbsp;</a></span>recvRefBndEdges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::recvRefBndEdges </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledge received newly added node IDs to edges shared among multiple PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01170">1170</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00233">m_extra</a>, <a class="el" href="_partitioner_8h_source.html#l00232">m_nref</a>, and <a class="el" href="_partitioner_8h_source.html#l00235">m_pe</a>.</p>
<div class="fragment"><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;{</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// When we have heard from all PEs we share at least a single edge with,</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// contribute the number of extra edges that this mesh refinement step has</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="comment">// found that were not refined by this PE but were refined by other PEs this</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// PE shares the edge with. A global maximum will then be computed on the</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// number of extra edges appearing in Transporter::matched() and that is then</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="comment">// used to decide if a new correction step is needed. If this is called for</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">// the first time in a given initial mesh refinement step, i.e., not after a</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">// correction step, m_extra = 1 on all PEs, so a correction step is assumed</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// to be required.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (++<a class="code" href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">m_nref</a> == <a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>.size()) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    contribute( <span class="keyword">sizeof</span>(std::size_t), &amp;<a class="code" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a>, CkReduction::max_int,</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1matched.html">tag::matched</a> &gt;() );</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a433f963dc85816ff5667de8d0ee269e1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">inciter::Partitioner::m_nref</a></div><div class="ttdeci">std::size_t m_nref</div><div class="ttdoc">Counter during distribution of newly added nodes to PE-boundary edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00232">Partitioner.h:232</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77db7e343f48921c4fd9900249d8b2f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">inciter::Partitioner::m_extra</a></div><div class="ttdeci">std::size_t m_extra</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00233">Partitioner.h:233</a></div></div>
<div class="ttc" id="structtag_1_1matched_html"><div class="ttname"><a href="structtag_1_1matched.html">tag::matched</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00085">Tags.h:85</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a132adb59d0c9e34782cc7ef84384875e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">inciter::Partitioner::m_pe</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; m_pe</div><div class="ttdoc">PEs we share at least a single edge with during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00235">Partitioner.h:235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66ce5723b0c2062be7a16ff93fd99001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66ce5723b0c2062be7a16ff93fd99001">&#9670;&nbsp;</a></span>refine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::refine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Optionally refine mesh. </p>
<p>This is a single step in a potentially multiple-entry list of initial adaptive mesh refinement steps. Distribution of the PE-boundary edges has preceded this step, so that boundary edges (shared by multiple PEs) can agree on a refinement that yields a conforming mesh across PE boundaries. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01067">1067</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::CREATE</a>, <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_partitioner_8_c_source.html#l01341">errorRefine()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_macro_8h_source.html#l00019">IGNORE</a>, <a class="el" href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81faa18c4ce216b667f1d25e30d69f0b15649">inciter::ctr::INITIAL_CONDITIONS</a>, <a class="el" href="_partitioner_8h_source.html#l00256">m_bndEdges</a>, <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00254">m_edgenode</a>, <a class="el" href="_partitioner_8h_source.html#l00233">m_extra</a>, <a class="el" href="_partitioner_8h_source.html#l00248">m_gid</a>, <a class="el" href="_partitioner_8h_source.html#l00237">m_initref</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00251">m_lid</a>, <a class="el" href="_partitioner_8h_source.html#l00232">m_nref</a>, <a class="el" href="_partitioner_8h_source.html#l00235">m_pe</a>, <a class="el" href="_derived_data_8_c_source.html#l00028">tk::npoin()</a>, <a class="el" href="_reorder_8_c_source.html#l00194">tk::positiveJacobians()</a>, <a class="el" href="_exception_8h_source.html#l00031">Throw</a>, <a class="el" href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81faa891f35a29c3d51d02ffd42dd6dcc69b2">inciter::ctr::UNIFORM</a>, <a class="el" href="_partitioner_8_c_source.html#l01325">uniformRefine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01391">userRefine()</a>, and <a class="el" href="_exodus_i_i_mesh_writer_8_c_source.html#l00075">tk::ExodusIIMeshWriter::writeMesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01043">addBndEdges()</a>.</p>
<div class="fragment"><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;{</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// Convert node coordinates associated to global node IDs to a flat vector</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> = <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.size();</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>.size() == <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>, <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0].resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> );</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[1].resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> );</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[2].resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> );</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keyword">auto</span> i = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, c.first );</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( i &lt; <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>, <span class="stringliteral">&quot;Indexing out of coordinate map&quot;</span> );</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0][i] = c.second[0];</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[1][i] = c.second[1];</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[2][i] = c.second[2];</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">// Query user input for initial mesh refinement type list</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keyword">auto</span> initref = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1init.html">tag::init</a> &gt;();</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="comment">// Determine which level this is</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keyword">auto</span> level = initref.size() - <a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.size();</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// Output mesh before this initial refinement step</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> refmesh( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> );</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a> mw( <span class="stringliteral">&quot;initref.b.&quot;</span> + std::to_string(level) + <span class="charliteral">&#39;.&#39;</span> +</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                               std::to_string(CkMyPe()),</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                             <a class="code" href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a> );</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  mw.writeMesh( refmesh );</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>,CkMyPe())) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <a class="code" href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a>(e);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( e[0] ) != end( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a> ) &amp;&amp;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( e[1] ) != end( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a> ),</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <span class="stringliteral">&quot;Boundary edge not found before refinement&quot;</span> );</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// Refine mesh based on next initial refinement type</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.empty()) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keyword">auto</span> r = <a class="code" href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">m_initref</a>.back();    <span class="comment">// consume (reversed) list from back</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">if</span> (r == <a class="code" href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81faa891f35a29c3d51d02ffd42dd6dcc69b2">ctr::AMRInitialType::UNIFORM</a>)</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#adf3a1d351ee6ae5b76c95fdd0f543165">uniformRefine</a>();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r == <a class="code" href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81faa18c4ce216b667f1d25e30d69f0b15649">ctr::AMRInitialType::INITIAL_CONDITIONS</a>)</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a7ac3e650bd934bda593f1f11e532b680">errorRefine</a>();</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a>( <span class="stringliteral">&quot;Initial AMR type not implemented&quot;</span> );</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// Additionally refine mesh based on user explicitly tagging edges</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a567bb49b4a25654c6db63a347050488b">userRefine</a>();</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>,CkMyPe())) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a>(e);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( e[0] ) != end( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a> ) &amp;&amp;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find( e[1] ) != end( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a> ),</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="stringliteral">&quot;Boundary edge not found after refinement&quot;</span> );</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// Ensure valid mesh after refinement</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a6c5589db5d1caeac294a0b1569b65ebd">tk::positiveJacobians</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a> ),</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;          <span class="stringliteral">&quot;Refined mesh cell Jacobian non-positive&quot;</span> );</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">// Export added nodes on our mesh chunk boundary to other PEs</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>.empty())</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    contribute( <span class="keyword">sizeof</span>(std::size_t), &amp;<a class="code" href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">m_extra</a>, CkReduction::max_int,</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1matched.html">tag::matched</a> &gt;() );</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">m_nref</a> = 0;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : <a class="code" href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">m_pe</a>) {       <span class="comment">// for all PEs we share at least an edge with</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <span class="comment">// For all boundary edges of PE p, find out if we have added a new</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="comment">// node to it, and if so, export parents-&gt;(newid,coords) to p.</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <a class="code" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> exp;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">m_bndEdges</a>,p)) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keyword">auto</span> i = <a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>.find(e);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="keywordflow">if</span> (i != end(<a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>)) exp[ e ] = i-&gt;second;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      thisProxy[ p ].addRefBndEdges( CkMyPe(), exp );</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    }</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a7ac3e650bd934bda593f1f11e532b680"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a7ac3e650bd934bda593f1f11e532b680">inciter::Partitioner::errorRefine</a></div><div class="ttdeci">void errorRefine()</div><div class="ttdoc">Do error-based mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01341">Partitioner.C:1341</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a765fd4aca23b340e45e463c64ee7c944"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">inciter::Partitioner::m_edgenode</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodeCoord m_edgenode</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00254">Partitioner.h:254</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_adf3a1d351ee6ae5b76c95fdd0f543165"><div class="ttname"><a href="classinciter_1_1_partitioner.html#adf3a1d351ee6ae5b76c95fdd0f543165">inciter::Partitioner::uniformRefine</a></div><div class="ttdeci">void uniformRefine()</div><div class="ttdoc">Do uniform mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01325">Partitioner.C:1325</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html"><div class="ttname"><a href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a></div><div class="ttdoc">3D unstructured mesh class </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00029">UnsMesh.h:29</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aba177cca8c93f41df7565d8392289d1d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aba177cca8c93f41df7565d8392289d1d">inciter::Partitioner::m_initref</a></div><div class="ttdeci">std::vector&lt; ctr::AMRInitialType &gt; m_initref</div><div class="ttdoc">Initial mesh refinement type list (in reverse order) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00237">Partitioner.h:237</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a017d196502387fcfe4f4128b3d5200c4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a017d196502387fcfe4f4128b3d5200c4">inciter::Partitioner::m_bndEdges</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::EdgeSet &gt; m_bndEdges</div><div class="ttdoc">Unique set of boundary edges associated to PEs we share these edges with. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00256">Partitioner.h:256</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a433f963dc85816ff5667de8d0ee269e1"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a433f963dc85816ff5667de8d0ee269e1">inciter::Partitioner::m_nref</a></div><div class="ttdeci">std::size_t m_nref</div><div class="ttdoc">Counter during distribution of newly added nodes to PE-boundary edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00232">Partitioner.h:232</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaf05cd7be846fe7d3ab6370ba35503ef"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">inciter::Partitioner::m_gid</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_gid</div><div class="ttdoc">Alias to global node IDs of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00248">Partitioner.h:248</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a77db7e343f48921c4fd9900249d8b2f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a77db7e343f48921c4fd9900249d8b2f9">inciter::Partitioner::m_extra</a></div><div class="ttdeci">std::size_t m_extra</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00233">Partitioner.h:233</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a567bb49b4a25654c6db63a347050488b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a567bb49b4a25654c6db63a347050488b">inciter::Partitioner::userRefine</a></div><div class="ttdeci">void userRefine()</div><div class="ttdoc">Do mesh refinement based on user explicitly tagging edges. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01391">Partitioner.C:1391</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classtk_1_1_exodus_i_i_mesh_writer_html"><div class="ttname"><a href="classtk_1_1_exodus_i_i_mesh_writer.html">tk::ExodusIIMeshWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="_exodus_i_i_mesh_writer_8h_source.html#l00029">ExodusIIMeshWriter.h:29</a></div></div>
<div class="ttc" id="structtag_1_1matched_html"><div class="ttname"><a href="structtag_1_1matched.html">tag::matched</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00085">Tags.h:85</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ab492311c84666c98ea0363b2991f81faa18c4ce216b667f1d25e30d69f0b15649"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81faa18c4ce216b667f1d25e30d69f0b15649">inciter::ctr::AMRInitialType::INITIAL_CONDITIONS</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ab492311c84666c98ea0363b2991f81faa891f35a29c3d51d02ffd42dd6dcc69b2"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81faa891f35a29c3d51d02ffd42dd6dcc69b2">inciter::ctr::AMRInitialType::UNIFORM</a></div></div>
<div class="ttc" id="structtag_1_1init_html"><div class="ttname"><a href="structtag_1_1init.html">tag::init</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00139">Tags.h:139</a></div></div>
<div class="ttc" id="_macro_8h_html_a494f327b84ea26d04e3ad24251b4bbe0"><div class="ttname"><a href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a></div><div class="ttdeci">#define IGNORE(expr)</div><div class="ttdoc">This macro can be used to suppress compiler warning on unused variable. </div><div class="ttdef"><b>Definition:</b> <a href="_macro_8h_source.html#l00019">Macro.h:19</a></div></div>
<div class="ttc" id="_exception_8h_html_a0412f798470c18f503a2c2f63c970ba8"><div class="ttname"><a href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a></div><div class="ttdeci">#define Throw(...)</div><div class="ttdoc">Throw macro that always throws an exception. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00031">Exception.h:31</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a7ad1f185e755943972c23fb884b06b5d"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a></div><div class="ttdeci">std::unordered_map&lt; Edge, std::tuple&lt; std::size_t, real, real, real &gt;, EdgeHash, EdgeEq &gt; EdgeNodeCoord</div><div class="ttdoc">Map associating the ID and the coordinates of a node to an edge. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00065">UnsMesh.h:65</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a98647bf8dec4144364598a1a293f0bc2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">inciter::Partitioner::m_lid</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp; m_lid</div><div class="ttdoc">Alias to local node IDs associated to the global ones of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00251">Partitioner.h:251</a></div></div>
<div class="ttc" id="namespacetk_html_a6c5589db5d1caeac294a0b1569b65ebd"><div class="ttname"><a href="namespacetk.html#a6c5589db5d1caeac294a0b1569b65ebd">tk::positiveJacobians</a></div><div class="ttdeci">bool positiveJacobians(const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::array&lt; std::vector&lt; real &gt;, 3 &gt; &amp;coord)</div><div class="ttdoc">Test positivity of the Jacobian for all cells in a mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00194">Reorder.C:194</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a132adb59d0c9e34782cc7ef84384875e"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a132adb59d0c9e34782cc7ef84384875e">inciter::Partitioner::m_pe</a></div><div class="ttdeci">std::unordered_set&lt; int &gt; m_pe</div><div class="ttdoc">PEs we share at least a single edge with during initial mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00235">Partitioner.h:235</a></div></div>
<div class="ttc" id="namespacetk_html_aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d"><div class="ttname"><a href="namespacetk.html#aea4fb4c5b5f9f99675ec2f39d25a3482a294ce20cdefa29be3be0735cb62e715d">tk::ExoWriter::CREATE</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ad30c6f520ba46308e32e3ea7ed44d5d0"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">inciter::ctr::amr</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::amr, bool, tag::init, std::vector&lt; AMRInitialType &gt;, tag::refvar, std::vector&lt; std::string &gt;, tag::id, std::vector&lt; std::size_t &gt;, tag::error, AMRErrorType, tag::edge, std::vector&lt; kw::amr_initref::info::expect::type &gt; &gt; amr</div><div class="ttdoc">Adaptive-mesh refinement options. </div><div class="ttdef"><b>Definition:</b> <a href="_control_2_inciter_2_types_8h_source.html#l00051">Types.h:51</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a66ce5723b0c2062be7a16ff93fd99001_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a96d91369a111de7aa4442f27926751cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d91369a111de7aa4442f27926751cc">&#9670;&nbsp;</a></span>reorder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::reorder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reorder global mesh node IDs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00900">900</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_partitioner_8h_source.html#l00321">m_chcoordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00317">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00306">m_ncommunication</a>, <a class="el" href="_partitioner_8h_source.html#l00313">m_nodech</a>, <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>, <a class="el" href="_partitioner_8h_source.html#l00265">m_start</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00224">offset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;{</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">// Activate SDAG waits for having requests arrive from other PEs for some</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">// of our node IDs; and for computing/receiving lower and upper bounds of</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="comment">// global node IDs our PE operates on after reordering</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  thisProxy[ CkMyPe() ].wait4prep();</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  thisProxy[ CkMyPe() ].wait4bounds();</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// In serial signal to the runtime system that we have participated in</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// reordering. This is required here because this is only triggered if</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// communication is required during mesh node reordering. See also</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// particioner.ci.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">if</span> (CkNumPes() == 1) participated_complete();</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">// Send out request for new global node IDs for nodes we do not reorder</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a>)</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    thisProxy[ c.first ].request( CkMyPe(), c.second );</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// Lambda to decide if node ID is being assigned a new ID by us</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keyword">auto</span> ownnode = [ this ]( std::size_t p ) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keyword">using</span> Set = <span class="keyword">typename</span> std::remove_reference&lt;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                  decltype(m_ncommunication) &gt;::type::value_type;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">return</span> !std::any_of( m_ncommunication.cbegin(), m_ncommunication.cend(),</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                         [&amp;](<span class="keyword">const</span> Set&amp; s)</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                         { <span class="keywordflow">return</span> s.second.find(p) != s.second.cend(); } );</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  };</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Reorder our chunk of the mesh node IDs by looping through all of our node</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// IDs. We test if this PE is to assign a new ID to a node ID, and if so, we</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// assign a new ID, i.e., reorder, by constructing a map associating new to</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// old IDs. We also count up the reordered nodes, which also serves as the new</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// node id. Also, we store the coordinates associated to the new node ID for</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// each chare on this PE. Since multiple chares can contribute to a single</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// node, we store such shared node coordinates for all chares that contribute.</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (ownnode(p)) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>[ p ] = <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <span class="keyword">auto</span> coord = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>, p );</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">m_nodech</a>,p))</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">m_chcoordmap</a>[ c ].emplace( <a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>, coord );</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      ++<a class="code" href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">m_start</a>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// Trigger SDAG wait indicating that reordering own node IDs are complete</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  reorderowned_complete();</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// If all our nodes have new IDs assigned, reordering complete on this PE</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>.size() == m_nodeset.size()) <a class="code" href="classinciter_1_1_partitioner.html#aa789d014a17b190534b6a05738bd7033">reordered</a>();</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00317">Partitioner.h:317</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_adaac84a616435db5f54b8286a2774b23"><div class="ttname"><a href="classinciter_1_1_partitioner.html#adaac84a616435db5f54b8286a2774b23">inciter::Partitioner::m_nodech</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_nodech</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00313">Partitioner.h:313</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aa789d014a17b190534b6a05738bd7033"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aa789d014a17b190534b6a05738bd7033">inciter::Partitioner::reordered</a></div><div class="ttdeci">void reordered()</div><div class="ttdoc">Compute final result of reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01761">Partitioner.C:1761</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a11f605a01e11ea28aa04fb3a717fb075"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a11f605a01e11ea28aa04fb3a717fb075">inciter::Partitioner::m_chcoordmap</a></div><div class="ttdeci">std::unordered_map&lt; int, tk::UnsMesh::CoordMap &gt; m_chcoordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk for chares. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00321">Partitioner.h:321</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a803838f68fa952cd41d1d9b6e5941c6a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a803838f68fa952cd41d1d9b6e5941c6a">inciter::Partitioner::m_start</a></div><div class="ttdeci">std::size_t m_start</div><div class="ttdoc">Starting global mesh node ID for node reordering on this PE during mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00265">Partitioner.h:265</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00306">Partitioner.h:306</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a96d91369a111de7aa4442f27926751cc_cgraph.svg" width="100%" height="447"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa789d014a17b190534b6a05738bd7033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa789d014a17b190534b6a05738bd7033">&#9670;&nbsp;</a></span>reordered()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::reordered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute final result of reordering. </p>
<p>At this point the node coordinates on all PEs have been updated to be consistent with the new ordering. We continue by updating other data, such as mesh connectivities of chares. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01761">1761</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8_c_source.html#l01811">bounds()</a>, <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00335">m_bnodechares</a>, <a class="el" href="_partitioner_8h_source.html#l00328">m_chfilenodes</a>, <a class="el" href="_partitioner_8h_source.html#l00319">m_chinpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00215">m_host</a>, <a class="el" href="_partitioner_8h_source.html#l00317">m_linnodes</a>, <a class="el" href="_partitioner_8h_source.html#l00346">m_msum</a>, <a class="el" href="_partitioner_8h_source.html#l00306">m_ncommunication</a>, and <a class="el" href="_partitioner_8h_source.html#l00309">m_nodeset</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00266">neworder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>.</p>
<div class="fragment"><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">m_bnodechares</a> );</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">m_ncommunication</a> );</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="comment">// Construct maps associating old node IDs (as in file) to new node IDs</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// (as in producing contiguous-row-id linear system contributions)</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="comment">// associated to chare IDs (outer key).</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">m_chinpoel</a>) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keyword">auto</span>&amp; nodes = <a class="code" href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">m_chfilenodes</a>[ c.first ];</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : c.second)</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      nodes[ <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>(<a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>,p) ] = p;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  }</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="comment">// Update chare-categorized elem connectivities with the reordered node IDs</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : m_chinpoel)</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : c.second)</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;       p = <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, p );</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="comment">// Update chare-categorized chare-mesh-nodes comm map with the reordered IDs</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code" href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">m_msum</a>)</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; s : c.second) {</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      decltype(s.second) n;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      for (auto p : s.second) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        n.insert( <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">m_linnodes</a>, p ) );</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      s.second = std::move( n );</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    }</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="comment">// Update unique global node IDs chares on our PE will contribute to with</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">// the reordered node IDs</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.clear();</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : m_chinpoel)</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : c.second)</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">m_nodeset</a>.insert( i );</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="comment">// send progress report to host</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="structtag_1_1cmd.html">tag::cmd</a>, <a class="code" href="structtag_1_1feedback.html">tag::feedback</a> &gt;() ) <a class="code" href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">m_host</a>.pereordered();</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// Compute lower and upper bounds of reordered node IDs our PE operates on</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9ee1971863741cc4afb7cae051197599">bounds</a>();</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a8823c8f12b3785866f960abb76c005a4"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8823c8f12b3785866f960abb76c005a4">inciter::Partitioner::m_linnodes</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; m_linnodes</div><div class="ttdoc">Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-v...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00317">Partitioner.h:317</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a0a211fd24b020e1fa49bc36032035d0a"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a0a211fd24b020e1fa49bc36032035d0a">inciter::Partitioner::m_msum</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_msum</div><div class="ttdoc">Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) cha...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00346">Partitioner.h:346</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a91f7cda531ab7d88b9130b19a10987f9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a91f7cda531ab7d88b9130b19a10987f9">inciter::Partitioner::m_chfilenodes</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; m_chfilenodes</div><div class="ttdoc">Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contri...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00328">Partitioner.h:328</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a054bc425f1c654d3aa4afb2fc9dd229c"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a054bc425f1c654d3aa4afb2fc9dd229c">inciter::Partitioner::m_nodeset</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_nodeset</div><div class="ttdoc">Unique global node IDs chares on our PE will contribute to in a linear system. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00309">Partitioner.h:309</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a59274d7dc87ef5bdc5587498133dbee9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a59274d7dc87ef5bdc5587498133dbee9">inciter::Partitioner::m_host</a></div><div class="ttdeci">CProxy_Transporter m_host</div><div class="ttdoc">Host proxy. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00215">Partitioner.h:215</a></div></div>
<div class="ttc" id="structtag_1_1cmd_html"><div class="ttname"><a href="structtag_1_1cmd.html">tag::cmd</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00137">Tags.h:137</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_acae3ab90a1e0e88de39ba269ab90637b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#acae3ab90a1e0e88de39ba269ab90637b">inciter::Partitioner::m_bnodechares</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; m_bnodechares</div><div class="ttdoc">Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00335">Partitioner.h:335</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad47619073f5c32f56f05e20434c296f5"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad47619073f5c32f56f05e20434c296f5">inciter::Partitioner::m_chinpoel</a></div><div class="ttdeci">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_chinpoel</div><div class="ttdoc">Mesh connectivity using global node IDs associated to chares owned. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00319">Partitioner.h:319</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a8a53be8a1baf2fcea27274a757150601"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a8a53be8a1baf2fcea27274a757150601">inciter::Partitioner::m_ncommunication</a></div><div class="ttdeci">std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; m_ncommunication</div><div class="ttdoc">Communication map used for distributed mesh node reordering. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00306">Partitioner.h:306</a></div></div>
<div class="ttc" id="structtag_1_1feedback_html"><div class="ttname"><a href="structtag_1_1feedback.html">tag::feedback</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00031">Tags.h:31</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9ee1971863741cc4afb7cae051197599"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9ee1971863741cc4afb7cae051197599">inciter::Partitioner::bounds</a></div><div class="ttdeci">void bounds()</div><div class="ttdoc">Compute lower and upper bounds of reordered node IDs our PE operates on. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01811">Partitioner.C:1811</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_aa789d014a17b190534b6a05738bd7033_cgraph.svg" width="515" height="196"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9a2332887a13429f03d23f6b967c37a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2332887a13429f03d23f6b967c37a7">&#9670;&nbsp;</a></span>request() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::request </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>nd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request new global node IDs for old node IDs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>PE request coming from and to which we send new IDs to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nd</td><td>Set of old node IDs whose new IDs are requested </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00252">252</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00262">m_reqNodes</a>.</p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// Queue up requesting PE and node IDs</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">m_reqNodes</a>.push_back( { p, nd } );</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Trigger SDAG wait signaling that node IDs have been requested from us</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  nodes_requested_complete();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a1713eab87b3e4e49357e4726f2e5ae9b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a1713eab87b3e4e49357e4726f2e5ae9b">inciter::Partitioner::m_reqNodes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; m_reqNodes</div><div class="ttdoc">Queue of requested node IDs from PEs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00262">Partitioner.h:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5d6dc1f7515fdb881a0420f4a5481be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d6dc1f7515fdb881a0420f4a5481be">&#9670;&nbsp;</a></span>request() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inciter::Partitioner::request </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &amp;&#160;</td>
          <td class="paramname"><em>ed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab20dba0e97e8708187d1bb3afe4b7d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20dba0e97e8708187d1bb3afe4b7d8a">&#9670;&nbsp;</a></span>stdCost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::stdCost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td>
          <td class="paramname"><em>av</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the variance of the communication cost of merging the linear system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">av</td><td>Average of the communication cost</td></tr>
  </table>
  </dd>
</dl>
<p>Computing the standard deviation is done via computing and summing up the variances on each PE and asynchronously reducing the sum to our host. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l00509">509</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00213">m_cb</a>, and <a class="el" href="_partitioner_8h_source.html#l00330">m_cost</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> var = (<a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>-av)*(<a class="code" href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">m_cost</a>-av);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  contribute( <span class="keyword">sizeof</span>(<a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>), &amp;var, CkReduction::sum_double,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;              <a class="code" href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">m_cb</a>.get&lt; <a class="code" href="structtag_1_1stdcost.html">tag::stdcost</a> &gt;() );</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a61829bbd2a87e52c4e32cb62b6303e0b"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a61829bbd2a87e52c4e32cb62b6303e0b">inciter::Partitioner::m_cb</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::refdistributed, CkCallback, tag::matched, CkCallback, tag::refined, CkCallback, tag::distributed, CkCallback, tag::flattened, CkCallback, tag::avecost, CkCallback, tag::stdcost, CkCallback, tag::coord, CkCallback &gt; m_cb</div><div class="ttdoc">Charm++ callbacks associated to compile-time tags. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00213">Partitioner.h:213</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a5859014223f5ecabec8cd04e37ddb823"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a5859014223f5ecabec8cd04e37ddb823">inciter::Partitioner::m_cost</a></div><div class="ttdeci">tk::real m_cost</div><div class="ttdoc">Communication cost of linear system merging for our PE. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00330">Partitioner.h:330</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00016">Types.h:16</a></div></div>
<div class="ttc" id="structtag_1_1stdcost_html"><div class="ttname"><a href="structtag_1_1stdcost.html">tag::stdcost</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00178">Tags.h:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf3a1d351ee6ae5b76c95fdd0f543165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf3a1d351ee6ae5b76c95fdd0f543165">&#9670;&nbsp;</a></span>uniformRefine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::uniformRefine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do uniform mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01325">1325</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="mesh__adapter_8_c_source.html#l00074">AMR::mesh_adapter_t::uniform_refinement()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>
<div class="fragment"><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;{</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">// Instantiate mesh refiner</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> refiner( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> );</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// Do uniform refinement</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  refiner.uniform_refinement();</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// Update mesh coordinates and connectivity</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">updateMesh</a>( refiner );</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a9c73832aa2e5fbec23c43a225bcc3cb2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">inciter::Partitioner::updateMesh</a></div><div class="ttdeci">void updateMesh(AMR::mesh_adapter_t &amp;refiner)</div><div class="ttdoc">Update mesh after refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01511">Partitioner.C:1511</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00022">mesh_adapter.h:22</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_adf3a1d351ee6ae5b76c95fdd0f543165_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a064ad156a50a04a73d1d4cdddedb103d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a064ad156a50a04a73d1d4cdddedb103d">&#9670;&nbsp;</a></span>updateBoundaryMesh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::updateBoundaryMesh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>refiner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update boundary data structures after mesh refinement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">refiner</td><td>Mesh refiner (<a class="el" href="namespace_a_m_r.html">AMR</a>) object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old</td><td>Unique nodes of the old (unrefined) mesh using local ids </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>Unique nodes of the refined mesh using local ids </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01602">1602</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="_container_util_8h_source.html#l00051">tk::cref_find()</a>, <a class="el" href="tet__store_8h_source.html#l00069">AMR::tet_store_t::data()</a>, <a class="el" href="_container_util_8h_source.html#l00194">tk::destroy()</a>, <a class="el" href="_derived_data_8_c_source.html#l00933">tk::genEsuelTet()</a>, <a class="el" href="_derived_data_8_c_source.html#l00041">tk::genEsup()</a>, <a class="el" href="node__connectivity_8h_source.html#l00057">AMR::node_connectivity_t::get()</a>, <a class="el" href="tet__store_8h_source.html#l00677">AMR::tet_store_t::get_child_id()</a>, <a class="el" href="_macro_8h_source.html#l00019">IGNORE</a>, <a class="el" href="_derived_data_8h_source.html#l00033">tk::lpofa</a>, <a class="el" href="_partitioner_8h_source.html#l00348">m_bface</a>, <a class="el" href="_partitioner_8h_source.html#l00248">m_gid</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00251">m_lid</a>, <a class="el" href="_partitioner_8h_source.html#l00350">m_triinpoel</a>, <a class="el" href="mesh__adapter_8h_source.html#l00034">AMR::mesh_adapter_t::node_connectivity</a>, <a class="el" href="_refinement___state_8h_source.html#l00079">AMR::Refinement_State::num_children</a>, <a class="el" href="mesh__adapter_8h_source.html#l00033">AMR::mesh_adapter_t::tet_store</a>, and <a class="el" href="tet__store_8h_source.html#l00041">AMR::tet_store_t::tets</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <a class="code" href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a>(ref);  <span class="comment">// to avoid compiler warning when asserts are optimized away</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keyword">using</span> Face = <a class="code" href="classtk_1_1_uns_mesh.html#ae8262763c870433021affc6bb5a0f804">tk::UnsMesh::Face</a>;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="comment">// Will associate a pair of side set id and adjacent tet id to a boundary</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">// triangle face</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="keyword">using</span> BndFaces = std::unordered_map&lt; Face,</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                                       std::pair&lt; int, std::size_t &gt;,</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                                       <a class="code" href="structtk_1_1_uns_mesh_1_1_face_hasher.html">tk::UnsMesh::FaceHasher</a>,</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                                       <a class="code" href="structtk_1_1_uns_mesh_1_1_face_eq.html">tk::UnsMesh::FaceEq</a> &gt;;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="comment">// Generate data structure that associates the pair of side set id and</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="comment">// adjacent tet id to a boundary triangle face for all boundary faces. After</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// this loop we will have all tets adjacent to boundary faces, where the</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="comment">// &quot;boundary&quot; includes all physical boundaries (where the user may assign</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="comment">// boundary conditions via side sets from the mesh file) as well as</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="comment">// PE-boundaries due to domain decomposition.</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  BndFaces bnd;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keyword">auto</span> oldesuel = <a class="code" href="namespacetk.html#a5b61b3cb6492e71ff9853404440fddcc">tk::genEsuelTet</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>(<a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>,4) );</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;oldesuel.size()/4; ++e) {     <span class="comment">// for tets on this PE</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keyword">auto</span> mark = e*4;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">for</span> (std::size_t f=0; f&lt;4; ++f) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="keywordflow">if</span> (oldesuel[mark+f] == -1) {  <span class="comment">// if a face does not have an adjacent  tet</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        Face t{{ <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[ <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>[ mark+<a class="code" href="namespacetk.html#a30ac7c57927d6134e6563817f5d005a0">tk::lpofa</a>[f][0] ] ],</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                 <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[ <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>[ mark+tk::lpofa[f][1] ] ],</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                 <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[ <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>[ mark+tk::lpofa[f][2] ] ] }};</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="comment">// associate tet id adjacent to boundary face to boundary face, at this</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <span class="comment">// point we fill in -1 for the side set id, since we don&#39;t know it yet</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        bnd[t] = {-1,e};</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="comment">// Assign side set ids to faces on the physical boundary only</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ss : <a class="code" href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">m_bface</a>)  <span class="comment">// for all phsyical boundaries (sidesets)</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> f : ss.second) {    <span class="comment">// for all faces on this physical boundary</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      Face t{{ <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a>[f*3+0], <a class="code" href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">m_triinpoel</a>[f*3+1], m_triinpoel[f*3+2] }};</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="keyword">auto</span> cf = bnd.find( t );</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <span class="keywordflow">if</span> (cf != end(bnd)) cf-&gt;second.first = ss.first;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// Remove PE-boundary faces (to which the above loop did not assign a set id)</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="keyword">auto</span> bndcopy = bnd;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : bndcopy) <span class="keywordflow">if</span> (f.second.first == -1) bnd.erase( f.first );</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <a class="code" href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a>( bndcopy );</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// Now in bnd we have a pair of side set ids of all tet ids that are adjacent</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// to all physical boundary faces that are associated to a side set in the</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="comment">// mesh file and only along faces on the physical boundary and not along faces</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="comment">// on the PE-boundary.</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="comment">// storage for boundary faces associated to side-set IDs of the refined mesh</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  decltype(m_bface) bface;              <span class="comment">// will become m_bface</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="comment">// storage for boundary faces-node connectivity of the refined mesh</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  decltype(m_triinpoel) triinpoel;      <span class="comment">// will become m_triinpoel</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <span class="comment">// face id counter</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  std::size_t facecnt = 0;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// Lambda to associate a boundary face and connectivity to a side set.</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// Parameter &#39;s&#39; is the list of faces (ids) to add new face to. Parameter &#39;f&#39;</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="comment">// is the triangle face connecttivity to add.</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="keyword">auto</span> addBndFace = [ &amp;facecnt, &amp;triinpoel ]</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                    ( std::vector&lt; std::size_t &gt;&amp; s, <span class="keyword">const</span> Face&amp; f )</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    s.push_back( facecnt++ );</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    triinpoel.push_back( f[0] );</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    triinpoel.push_back( f[1] );</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    triinpoel.push_back( f[2] );</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  };</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="comment">// Lambda to find the nodes of the parent face of a child face. Parameter</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <span class="comment">// &#39;face&#39; denotes the node ids of the child face whose parent face we are</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="comment">// looking for. This search may find 3 or 4 parent nodes, depending on whether</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="comment">// the child shares or does not share a face with the parent tet,</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="comment">// respectively.</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="keyword">auto</span> parentFace = [ &amp;old, &amp;refiner ]( <span class="keyword">const</span> Face&amp; face ){</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    std::unordered_set&lt; std::size_t &gt; s;<span class="comment">// will store nodes of parent face</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> n : face) {               <span class="comment">// for all 3 nodes of the face</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="keywordflow">if</span> (old.find(n) != end(old))      <span class="comment">// if child node found in old mesh,</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        s.insert( n );                  <span class="comment">// that node is also in the parent face</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">else</span> {                            <span class="comment">// if child node is a newly added one</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <span class="keyword">auto</span> p = refiner.<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#a5be4453543c8ec6a6c3f8ad03df62876">get</a>( n );  <span class="comment">// find its parent nodes</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        s.insert( begin(p), end(p) );                 <span class="comment">// and store both uniquely</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      }</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="comment">// Ensure all parent nodes are part of the old (unrefined) mesh</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( std::all_of( begin(s), end(s), [ &amp;old ]( std::size_t j ){</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                           <span class="keywordflow">return</span> old.find(j) != end(old); } ),</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="stringliteral">&quot;Old mesh nodes not in old mesh&quot;</span> );</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="comment">// Return unique set of nodes of the parent face of child face</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">return</span> s;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  };</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="comment">// Generate boundary face data structures after refinement step</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : bnd) {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="comment">// construct face of old mesh boundary face using local ids</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    Face oldface{{ <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, f.first[0] ),</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                   <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, f.first[1] ),</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                   <a class="code" href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>, f.first[2] ) }};</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="comment">// will associate to side set id of old (unrefined) mesh boundary face</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keyword">auto</span>&amp; side = bface[ f.second.first ];</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="comment">// query number of children of boundary tet adjacent to boundary face</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keyword">auto</span> nc = refiner.<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a42b0c354d6edd7b772c1844beb1c2f9a">tet_store</a>.<a class="code" href="class_a_m_r_1_1tet__store__t.html#ac7eaca5a0a6042c2c64553ba86afc6b7">data</a>( f.second.second ).<a class="code" href="class_a_m_r_1_1_refinement___state.html#a75696f5620781df9c0a2ffa689129131">num_children</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordflow">if</span> (nc == 0) {      <span class="comment">// if boundary tet is not refined, add its boundary face</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      addBndFace( side, f.first );</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    } <span class="keywordflow">else</span> {            <span class="comment">// if boundary tet is refined</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tets = refiner.<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a42b0c354d6edd7b772c1844beb1c2f9a">tet_store</a>.<a class="code" href="class_a_m_r_1_1tet__store__t.html#a1908d4c25a05f43fbf5902df9649b913">tets</a>;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">for</span> (decltype(nc) i=0; i&lt;nc; ++i ) {      <span class="comment">// for all child tets</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="comment">// get child tet id</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keyword">auto</span> childtet = refiner.<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a42b0c354d6edd7b772c1844beb1c2f9a">tet_store</a>.<a class="code" href="class_a_m_r_1_1tet__store__t.html#a52a7fb919a963dd10e21e56be3d18ff0">get_child_id</a>( f.second.second, i );</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keyword">auto</span> ct = tets.find( childtet );</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( ct != end(tets), <span class="stringliteral">&quot;Child tet not found&quot;</span> );</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <span class="comment">// ensure all nodes of child tet are in refined mesh</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( ref.find(ct-&gt;second[0]) != end(ref) &amp;&amp;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                ref.find(ct-&gt;second[1]) != end(ref) &amp;&amp;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                ref.find(ct-&gt;second[2]) != end(ref) &amp;&amp;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                ref.find(ct-&gt;second[3]) != end(ref),</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                <span class="stringliteral">&quot;Boundary child tet node id not found in refined mesh&quot;</span> );</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <span class="comment">// get nodes of child tet</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keyword">auto</span> A = ct-&gt;second[0];</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <span class="keyword">auto</span> B = ct-&gt;second[1];</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <span class="keyword">auto</span> C = ct-&gt;second[2];</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keyword">auto</span> D = ct-&gt;second[3];</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <span class="comment">// form all 4 faces of child tet</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        std::array&lt;Face, 4&gt; face{{{{A,C,B}}, {{A,B,D}}, {{A,D,C}}, {{B,C,D}}}};</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; rf : face) {   <span class="comment">// for all faces of child tet</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          <span class="comment">// find nodes of the parent face of child face</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;          <span class="keyword">auto</span> parfac = parentFace( rf );</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;          <span class="comment">// if the child shares a face with its parent and all 3 nodes of the</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;          <span class="comment">// parent face of the child&#39;s face are the same, the child face is on</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;          <span class="comment">// the same boundary as the parent face</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;          <span class="keywordflow">if</span> ( parfac.size() == 3 &amp;&amp;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;               parfac.find(oldface[0]) != end(parfac) &amp;&amp;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;               parfac.find(oldface[1]) != end(parfac) &amp;&amp;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;               parfac.find(oldface[2]) != end(parfac) )</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;          {</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            addBndFace( side, {{<a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[rf[0]], <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[rf[1]], <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[rf[2]]}} );</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;          }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  }</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="comment">// Update boundary face data structures</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  m_bface = std::move(bface);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  m_triinpoel = std::move(triinpoel);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;}</div><div class="ttc" id="classtk_1_1_uns_mesh_html_ae8262763c870433021affc6bb5a0f804"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#ae8262763c870433021affc6bb5a0f804">tk::UnsMesh::Face</a></div><div class="ttdeci">std::array&lt; std::size_t, 3 &gt; Face</div><div class="ttdoc">Node ID triplet denoting a tetrahedron face. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00071">UnsMesh.h:71</a></div></div>
<div class="ttc" id="class_a_m_r_1_1node__connectivity__t_html_a5be4453543c8ec6a6c3f8ad03df62876"><div class="ttname"><a href="class_a_m_r_1_1node__connectivity__t.html#a5be4453543c8ec6a6c3f8ad03df62876">AMR::node_connectivity_t::get</a></div><div class="ttdeci">node_pair_t get(size_t id)</div><div class="ttdoc">Getter into node storage. </div><div class="ttdef"><b>Definition:</b> <a href="node__connectivity_8h_source.html#l00057">node_connectivity.h:57</a></div></div>
<div class="ttc" id="class_a_m_r_1_1tet__store__t_html_ac7eaca5a0a6042c2c64553ba86afc6b7"><div class="ttname"><a href="class_a_m_r_1_1tet__store__t.html#ac7eaca5a0a6042c2c64553ba86afc6b7">AMR::tet_store_t::data</a></div><div class="ttdeci">Refinement_State &amp; data(size_t id)</div><div class="ttdef"><b>Definition:</b> <a href="tet__store_8h_source.html#l00069">tet_store.h:69</a></div></div>
<div class="ttc" id="namespacetk_html_a30ac7c57927d6134e6563817f5d005a0"><div class="ttname"><a href="namespacetk.html#a30ac7c57927d6134e6563817f5d005a0">tk::lpofa</a></div><div class="ttdeci">const std::array&lt; std::array&lt; std::size_t, 3 &gt;, 4 &gt; lpofa</div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8h_source.html#l00033">DerivedData.h:33</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac3678a5d05b8c5356840f28568bf3609"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac3678a5d05b8c5356840f28568bf3609">inciter::Partitioner::m_bface</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; m_bface</div><div class="ttdoc">List of boundary faces associated to side-set IDs. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00348">Partitioner.h:348</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaf05cd7be846fe7d3ab6370ba35503ef"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">inciter::Partitioner::m_gid</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_gid</div><div class="ttdoc">Alias to global node IDs of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00248">Partitioner.h:248</a></div></div>
<div class="ttc" id="class_a_m_r_1_1_refinement___state_html_a75696f5620781df9c0a2ffa689129131"><div class="ttname"><a href="class_a_m_r_1_1_refinement___state.html#a75696f5620781df9c0a2ffa689129131">AMR::Refinement_State::num_children</a></div><div class="ttdeci">size_t num_children</div><div class="ttdef"><b>Definition:</b> <a href="_refinement___state_8h_source.html#l00079">Refinement_State.h:79</a></div></div>
<div class="ttc" id="class_a_m_r_1_1tet__store__t_html_a1908d4c25a05f43fbf5902df9649b913"><div class="ttname"><a href="class_a_m_r_1_1tet__store__t.html#a1908d4c25a05f43fbf5902df9649b913">AMR::tet_store_t::tets</a></div><div class="ttdeci">tet_list_t tets</div><div class="ttdef"><b>Definition:</b> <a href="tet__store_8h_source.html#l00041">tet_store.h:41</a></div></div>
<div class="ttc" id="namespacetk_html_a2e002561a68875b091a264eb2a1e5f6c"><div class="ttname"><a href="namespacetk.html#a2e002561a68875b091a264eb2a1e5f6c">tk::cref_find</a></div><div class="ttdeci">auto cref_find(const Container &amp;map, const typename Container::key_type &amp;key) -&gt; const typename Container::mapped_type &amp;</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00051">ContainerUtil.h:51</a></div></div>
<div class="ttc" id="structtk_1_1_uns_mesh_1_1_face_eq_html"><div class="ttname"><a href="structtk_1_1_uns_mesh_1_1_face_eq.html">tk::UnsMesh::FaceEq</a></div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00084">UnsMesh.h:84</a></div></div>
<div class="ttc" id="class_a_m_r_1_1tet__store__t_html_a52a7fb919a963dd10e21e56be3d18ff0"><div class="ttname"><a href="class_a_m_r_1_1tet__store__t.html#a52a7fb919a963dd10e21e56be3d18ff0">AMR::tet_store_t::get_child_id</a></div><div class="ttdeci">size_t get_child_id(size_t parent_id, size_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="tet__store_8h_source.html#l00677">tet_store.h:677</a></div></div>
<div class="ttc" id="_macro_8h_html_a494f327b84ea26d04e3ad24251b4bbe0"><div class="ttname"><a href="_macro_8h.html#a494f327b84ea26d04e3ad24251b4bbe0">IGNORE</a></div><div class="ttdeci">#define IGNORE(expr)</div><div class="ttdoc">This macro can be used to suppress compiler warning on unused variable. </div><div class="ttdef"><b>Definition:</b> <a href="_macro_8h_source.html#l00019">Macro.h:19</a></div></div>
<div class="ttc" id="namespacetk_html_a9140b408dcbd2eaef58f9c3a54fa104a"><div class="ttname"><a href="namespacetk.html#a9140b408dcbd2eaef58f9c3a54fa104a">tk::destroy</a></div><div class="ttdeci">void destroy(Container &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00194">ContainerUtil.h:194</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a98647bf8dec4144364598a1a293f0bc2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">inciter::Partitioner::m_lid</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp; m_lid</div><div class="ttdoc">Alias to local node IDs associated to the global ones of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00251">Partitioner.h:251</a></div></div>
<div class="ttc" id="namespacetk_html_a5b61b3cb6492e71ff9853404440fddcc"><div class="ttname"><a href="namespacetk.html#a5b61b3cb6492e71ff9853404440fddcc">tk::genEsuelTet</a></div><div class="ttdeci">std::vector&lt; int &gt; genEsuelTet(const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, elements surrounding elements as a fixed length data structure as a ...</div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00933">DerivedData.C:933</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac1af520c1436ffde6c975a541bfda8ac"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac1af520c1436ffde6c975a541bfda8ac">inciter::Partitioner::m_triinpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_triinpoel</div><div class="ttdoc">Boundary face-node connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00350">Partitioner.h:350</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00041">DerivedData.C:41</a></div></div>
<div class="ttc" id="structtk_1_1_uns_mesh_1_1_face_hasher_html"><div class="ttname"><a href="structtk_1_1_uns_mesh_1_1_face_hasher.html">tk::UnsMesh::FaceHasher</a></div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00073">UnsMesh.h:73</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_a39da1e19190151486bf54ddf71a00fa1"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">AMR::mesh_adapter_t::node_connectivity</a></div><div class="ttdeci">AMR::node_connectivity_t node_connectivity</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00034">mesh_adapter.h:34</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_a42b0c354d6edd7b772c1844beb1c2f9a"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#a42b0c354d6edd7b772c1844beb1c2f9a">AMR::mesh_adapter_t::tet_store</a></div><div class="ttdeci">AMR::tet_store_t tet_store</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00033">mesh_adapter.h:33</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a064ad156a50a04a73d1d4cdddedb103d_cgraph.svg" width="100%" height="568"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9c73832aa2e5fbec23c43a225bcc3cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c73832aa2e5fbec23c43a225bcc3cb2">&#9670;&nbsp;</a></span>updateMesh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::updateMesh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>refiner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update mesh after refinement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">refiner</td><td>Mesh refiner (<a class="el" href="namespace_a_m_r.html">AMR</a>) object </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01511">1511</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="tet__store_8h_source.html#l00390">AMR::tet_store_t::get_active_inpoel()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00248">m_gid</a>, <a class="el" href="_partitioner_8h_source.html#l00283">m_ginpoel</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, <a class="el" href="mesh__adapter_8h_source.html#l00033">AMR::mesh_adapter_t::tet_store</a>, <a class="el" href="_container_util_8h_source.html#l00038">tk::uniquecopy()</a>, <a class="el" href="_partitioner_8_c_source.html#l01602">updateBoundaryMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01540">updateVolumeMesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01487">correctRefine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01341">errorRefine()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01325">uniformRefine()</a>.</p>
<div class="fragment"><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;{</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// Get refined mesh connectivity</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; refinpoel = refiner.<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a42b0c354d6edd7b772c1844beb1c2f9a">tet_store</a>.<a class="code" href="class_a_m_r_1_1tet__store__t.html#a7830d3dfc073a529263217de9f23ada4">get_active_inpoel</a>();</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( refinpoel.size()%4 == 0, <span class="stringliteral">&quot;Inconsistent refined mesh connectivity&quot;</span> );</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// Generate unique node lists of old and refined mesh using local ids</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  std::unordered_set&lt; std::size_t &gt; old( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>.cbegin(), <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>.cend() );</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  std::unordered_set&lt; std::size_t &gt; ref( refinpoel.cbegin(), refinpoel.cend() );</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#afb0dc623f986276957da5fa1f5e5c549">updateVolumeMesh</a>( refiner, old, ref );</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a064ad156a50a04a73d1d4cdddedb103d">updateBoundaryMesh</a>( refiner, old, ref );</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// Update mesh connectivity with local node IDs</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> = refinpoel;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// Update mesh connectivity with new global node ids</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a> = <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a>(<a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>).size() == <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0].size(),</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;          <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; i : <a class="code" href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">m_ginpoel</a>) i = <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[i];</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a064ad156a50a04a73d1d4cdddedb103d"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a064ad156a50a04a73d1d4cdddedb103d">inciter::Partitioner::updateBoundaryMesh</a></div><div class="ttdeci">void updateBoundaryMesh(AMR::mesh_adapter_t &amp;refiner, const std::unordered_set&lt; std::size_t &gt; &amp;old, const std::unordered_set&lt; std::size_t &gt; &amp;ref)</div><div class="ttdoc">Update boundary data structures after mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01602">Partitioner.C:1602</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaf05cd7be846fe7d3ab6370ba35503ef"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">inciter::Partitioner::m_gid</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_gid</div><div class="ttdoc">Alias to global node IDs of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00248">Partitioner.h:248</a></div></div>
<div class="ttc" id="namespacetk_html_a33be2bf221a519d736333a9f18c8ffdc"><div class="ttname"><a href="namespacetk.html#a33be2bf221a519d736333a9f18c8ffdc">tk::uniquecopy</a></div><div class="ttdeci">Container uniquecopy(const Container &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00038">ContainerUtil.h:38</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_affe5d06e4427f2b077644843b51d44b9"><div class="ttname"><a href="classinciter_1_1_partitioner.html#affe5d06e4427f2b077644843b51d44b9">inciter::Partitioner::m_ginpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_ginpoel</div><div class="ttdoc">Tetrtahedron element connectivity of our chunk of the mesh (global ids) </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00283">Partitioner.h:283</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_afb0dc623f986276957da5fa1f5e5c549"><div class="ttname"><a href="classinciter_1_1_partitioner.html#afb0dc623f986276957da5fa1f5e5c549">inciter::Partitioner::updateVolumeMesh</a></div><div class="ttdeci">void updateVolumeMesh(AMR::mesh_adapter_t &amp;refiner, const std::unordered_set&lt; std::size_t &gt; &amp;old, const std::unordered_set&lt; std::size_t &gt; &amp;ref)</div><div class="ttdoc">Update volume mesh after mesh refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01540">Partitioner.C:1540</a></div></div>
<div class="ttc" id="class_a_m_r_1_1tet__store__t_html_a7830d3dfc073a529263217de9f23ada4"><div class="ttname"><a href="class_a_m_r_1_1tet__store__t.html#a7830d3dfc073a529263217de9f23ada4">AMR::tet_store_t::get_active_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; get_active_inpoel()</div><div class="ttdoc">Function to extract only the active elements from tetinpeol. </div><div class="ttdef"><b>Definition:</b> <a href="tet__store_8h_source.html#l00390">tet_store.h:390</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_a42b0c354d6edd7b772c1844beb1c2f9a"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#a42b0c354d6edd7b772c1844beb1c2f9a">AMR::mesh_adapter_t::tet_store</a></div><div class="ttdeci">AMR::tet_store_t tet_store</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00033">mesh_adapter.h:33</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a9c73832aa2e5fbec23c43a225bcc3cb2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="afb0dc623f986276957da5fa1f5e5c549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb0dc623f986276957da5fa1f5e5c549">&#9670;&nbsp;</a></span>updateVolumeMesh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::updateVolumeMesh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> &amp;&#160;</td>
          <td class="paramname"><em>refiner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update volume mesh after mesh refinement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">refiner</td><td>Mesh refiner (<a class="el" href="namespace_a_m_r.html">AMR</a>) object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">old</td><td>Unique nodes of the old (unrefined) mesh using local ids </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref</td><td>Unique nodes of the refined mesh using local ids </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01540">1540</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, <a class="el" href="node__connectivity_8h_source.html#l00057">AMR::node_connectivity_t::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00285">m_coord</a>, <a class="el" href="_partitioner_8h_source.html#l00287">m_coordmap</a>, <a class="el" href="_partitioner_8h_source.html#l00254">m_edgenode</a>, <a class="el" href="_partitioner_8h_source.html#l00248">m_gid</a>, <a class="el" href="_partitioner_8h_source.html#l00251">m_lid</a>, <a class="el" href="_data_8h_source.html#l00603">tk::max()</a>, and <a class="el" href="mesh__adapter_8h_source.html#l00034">AMR::mesh_adapter_t::node_connectivity</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;{</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <span class="keyword">auto</span>&amp; x = <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[0];</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keyword">auto</span>&amp; y = <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[1];</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keyword">auto</span>&amp; z = <a class="code" href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">m_coord</a>[2];</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// Resize node coordinate storage to accommodate refined mesh nodes</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> = ref.size();</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  x.resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> );</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  y.resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> );</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  z.resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> );</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>.resize( <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>, <a class="code" href="namespacetk.html#ac9a26e30d19b940a12990a866a514cb5">std::numeric_limits&lt; std::size_t &gt;::max</a>() );</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// Generate coordinates and ids to newly added nodes after refinement step</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> r : ref) {               <span class="comment">// for all unique nodes of the refined mesh</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">if</span> (old.find(r) == end(old)) {   <span class="comment">// if node is newly added (in this step)</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="comment">// get (local) parent ids of newly added node</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <span class="keyword">auto</span> p = refiner.<a class="code" href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">node_connectivity</a>.<a class="code" href="class_a_m_r_1_1node__connectivity__t.html#a5be4453543c8ec6a6c3f8ad03df62876">get</a>( r );</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( old.find(p[0]) != end(old) &amp;&amp; old.find(p[1]) != end(old),</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;              <span class="stringliteral">&quot;Parent(s) not in old mesh&quot;</span> );</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( r &gt;= old.size(), <span class="stringliteral">&quot;Attempting to overwrite node with added one&quot;</span> );</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="comment">// generate coordinates for newly added node</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      x[r] = (x[p[0]] + x[p[1]])/2.0;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      y[r] = (y[p[0]] + y[p[1]])/2.0;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      z[r] = (z[p[0]] + z[p[1]])/2.0;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      decltype(p) gp{{ <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[p[0]], <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[p[1]] }}; <span class="comment">// global parent ids</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      <span class="comment">// generate new global ID for newly added node</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keyword">auto</span> g = <a class="code" href="structtk_1_1_uns_mesh_1_1_edge_hash.html">tk::UnsMesh::EdgeHash</a>()( gp );</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="comment">// ensure newly generated node id has not yet been used</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( g &gt;= old.size(), <span class="stringliteral">&quot;Hashed id overwriting old id&quot;</span> );</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.find(g) == end(<a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>),</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;              <span class="stringliteral">&quot;Hash collision: ID already exist&quot;</span> );</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="comment">// assign new global ids to local-&gt;global and to global-&gt;local maps</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">m_gid</a>[r] = g;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>.find(g) == end(<a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>),</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;              <span class="stringliteral">&quot;Overwriting entry global-&gt;local node ID map&quot;</span> );</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">m_lid</a>[g] = r;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <span class="comment">// assign new coordinates to new global node id</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.find(g) == end(<a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>),</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;              <span class="stringliteral">&quot;Overwriting entry coordmap&quot;</span> );</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">m_coordmap</a>.insert( {g, {{x[r], y[r], z[r]}}} );</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <span class="comment">// assign new coordinates and new global node id to global parent id pair</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <a class="code" href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">m_edgenode</a>[ gp ] = std::make_tuple( g, x[r], y[r], z[r] );</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    }</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( m_gid.size() == m_lid.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( std::none_of( begin(m_gid), end(m_gid), [](std::size_t i){</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;            <span class="keywordflow">return</span> i == <a class="code" href="namespacetk.html#ac9a26e30d19b940a12990a866a514cb5">std::numeric_limits&lt; std::size_t &gt;::max</a>(); } ),</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;          <span class="stringliteral">&quot;Not all local-&gt;global node IDs have been assigned&quot;</span> );</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div><div class="ttc" id="class_a_m_r_1_1node__connectivity__t_html_a5be4453543c8ec6a6c3f8ad03df62876"><div class="ttname"><a href="class_a_m_r_1_1node__connectivity__t.html#a5be4453543c8ec6a6c3f8ad03df62876">AMR::node_connectivity_t::get</a></div><div class="ttdeci">node_pair_t get(size_t id)</div><div class="ttdoc">Getter into node storage. </div><div class="ttdef"><b>Definition:</b> <a href="node__connectivity_8h_source.html#l00057">node_connectivity.h:57</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a765fd4aca23b340e45e463c64ee7c944"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a765fd4aca23b340e45e463c64ee7c944">inciter::Partitioner::m_edgenode</a></div><div class="ttdeci">tk::UnsMesh::EdgeNodeCoord m_edgenode</div><div class="ttdoc">Map associating the global IDs and the coordinates of a node added to an edge during initial mesh ref...</div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00254">Partitioner.h:254</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_aaf05cd7be846fe7d3ab6370ba35503ef"><div class="ttname"><a href="classinciter_1_1_partitioner.html#aaf05cd7be846fe7d3ab6370ba35503ef">inciter::Partitioner::m_gid</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_gid</div><div class="ttdoc">Alias to global node IDs of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00248">Partitioner.h:248</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ad21a82b7ef75e411776927bf3fe10cd7"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ad21a82b7ef75e411776927bf3fe10cd7">inciter::Partitioner::m_coordmap</a></div><div class="ttdeci">tk::UnsMesh::CoordMap m_coordmap</div><div class="ttdoc">Coordinates associated to global node IDs of our mesh chunk. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00287">Partitioner.h:287</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a98647bf8dec4144364598a1a293f0bc2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a98647bf8dec4144364598a1a293f0bc2">inciter::Partitioner::m_lid</a></div><div class="ttdeci">std::unordered_map&lt; std::size_t, std::size_t &gt; &amp; m_lid</div><div class="ttdoc">Alias to local node IDs associated to the global ones of owned elements in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00251">Partitioner.h:251</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_ac93b32ac4a8ccd3c08e4ca27a56862f3"><div class="ttname"><a href="classinciter_1_1_partitioner.html#ac93b32ac4a8ccd3c08e4ca27a56862f3">inciter::Partitioner::m_coord</a></div><div class="ttdeci">tk::UnsMesh::Coords m_coord</div><div class="ttdoc">Coordinates of mesh nodes of our chunk of the mesh. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00285">Partitioner.h:285</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="namespacetk_html_ac9a26e30d19b940a12990a866a514cb5"><div class="ttname"><a href="namespacetk.html#ac9a26e30d19b940a12990a866a514cb5">tk::max</a></div><div class="ttdeci">Data&lt; Layout &gt; max(const Data&lt; Layout &gt; &amp;a, const Data&lt; Layout &gt; &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="_data_8h_source.html#l00603">Data.h:603</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html_a39da1e19190151486bf54ddf71a00fa1"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html#a39da1e19190151486bf54ddf71a00fa1">AMR::mesh_adapter_t::node_connectivity</a></div><div class="ttdeci">AMR::node_connectivity_t node_connectivity</div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00034">mesh_adapter.h:34</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="structtk_1_1_uns_mesh_1_1_edge_hash_html"><div class="ttname"><a href="structtk_1_1_uns_mesh_1_1_edge_hash.html">tk::UnsMesh::EdgeHash</a></div><div class="ttdoc">Hash functor for Edge (node end-point order does not matter) </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00039">UnsMesh.h:39</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_afb0dc623f986276957da5fa1f5e5c549_cgraph.svg" width="547" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a567bb49b4a25654c6db63a347050488b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a567bb49b4a25654c6db63a347050488b">&#9670;&nbsp;</a></span>userRefine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Partitioner::userRefine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do mesh refinement based on user explicitly tagging edges. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8_c_source.html#l01391">1391</a> of file <a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a>.</p>

<p class="reference">References <a class="el" href="_d_g_8_c_source.html#l00028">inciter::g_inputdeck</a>, <a class="el" href="_derived_data_8_c_source.html#l00041">tk::genEsup()</a>, <a class="el" href="_derived_data_8_c_source.html#l00124">tk::genPsup()</a>, <a class="el" href="_control_8h_source.html#l00046">tk::Control&lt; Ts &gt;::get()</a>, <a class="el" href="_partitioner_8h_source.html#l00246">m_inpoel</a>, and <a class="el" href="_derived_data_8_c_source.html#l00028">tk::npoin()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>
<div class="fragment"><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="comment">// Instantiate mesh refiner</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a> refiner( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> );</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// Find number of nodes in old mesh</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a> = <a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a> );</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="comment">// Generate edges surrounding points in old mesh</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keyword">auto</span> esup = <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, 4 );</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keyword">auto</span> psup = <a class="code" href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a>( <a class="code" href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">m_inpoel</a>, 4, esup );</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="comment">// Get user-defined node-pairs (edges) to tag for refinement</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; edgenodelist = <a class="code" href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">g_inputdeck</a>.<a class="code" href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">get</a>&lt; <a class="code" href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">tag::amr</a>, <a class="code" href="structtag_1_1edge.html">tag::edge</a> &gt;();</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <a class="code" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> edgeset;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="keywordflow">for</span> (std::size_t i=0; i&lt;edgenodelist.size()/2; ++i)</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    edgeset.insert( {{ {edgenodelist[i*2+0], edgenodelist[i*2+1]} }} );</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// Compute errors in ICs and define refinement criteria for edges</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  std::vector&lt; edge_t &gt; edge;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  std::vector&lt; real_t &gt; crit;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">for</span> (std::size_t p=0; p&lt;<a class="code" href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">npoin</a>; ++p)        <span class="comment">// for all mesh nodes on this PE</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> q : <a class="code" href="classtk_1_1_around.html">tk::Around</a>(psup,p)) {      <span class="comment">// for all nodes surrounding p</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <a class="code" href="classtk_1_1_uns_mesh.html#a622c34bab099c772650f046b848346d7">tk::UnsMesh::Edge</a> e{{p,q}};</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">if</span> (edgeset.find(e) != end(edgeset)) { <span class="comment">// tag edge if on user&#39;s list</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        edge.push_back( <a class="code" href="classedge__t.html">edge_t</a>(e[0],e[1]) );</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        crit.push_back( 1.0 );</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( edge.size() == crit.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// Do error-based refinement</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  refiner.error_refinement( edge, crit );</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// Update mesh coordinates and connectivity</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">updateMesh</a>( refiner );</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;}</div><div class="ttc" id="classinciter_1_1_partitioner_html_a9c73832aa2e5fbec23c43a225bcc3cb2"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9c73832aa2e5fbec23c43a225bcc3cb2">inciter::Partitioner::updateMesh</a></div><div class="ttdeci">void updateMesh(AMR::mesh_adapter_t &amp;refiner)</div><div class="ttdoc">Update mesh after refinement. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8_c_source.html#l01511">Partitioner.C:1511</a></div></div>
<div class="ttc" id="classedge__t_html"><div class="ttname"><a href="classedge__t.html">edge_t</a></div><div class="ttdef"><b>Definition:</b> <a href="edge_8h_source.html#l00008">edge.h:8</a></div></div>
<div class="ttc" id="structtag_1_1edge_html"><div class="ttname"><a href="structtag_1_1edge.html">tag::edge</a></div><div class="ttdef"><b>Definition:</b> <a href="_tags_8h_source.html#l00166">Tags.h:166</a></div></div>
<div class="ttc" id="classinciter_1_1_partitioner_html_a9461a4296751af3df761bef9008dc506"><div class="ttname"><a href="classinciter_1_1_partitioner.html#a9461a4296751af3df761bef9008dc506">inciter::Partitioner::m_inpoel</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; &amp; m_inpoel</div><div class="ttdoc">Alias to element connectivity with local node IDs in m_el. </div><div class="ttdef"><b>Definition:</b> <a href="_partitioner_8h_source.html#l00246">Partitioner.h:246</a></div></div>
<div class="ttc" id="classtk_1_1_around_html"><div class="ttname"><a href="classtk_1_1_around.html">tk::Around</a></div><div class="ttdoc">Helper class simplifying client code for iterating on entries surrounding entries via linked lists de...</div><div class="ttdef"><b>Definition:</b> <a href="_around_8h_source.html#l00027">Around.h:27</a></div></div>
<div class="ttc" id="namespacetk_html_ad2a88a65102c17149b44660db15d445b"><div class="ttname"><a href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genPsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, points surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00124">DerivedData.C:124</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a622c34bab099c772650f046b848346d7"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a622c34bab099c772650f046b848346d7">tk::UnsMesh::Edge</a></div><div class="ttdeci">std::array&lt; std::size_t, 2 &gt; Edge</div><div class="ttdoc">Edge: IDs of two end-points. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00037">UnsMesh.h:37</a></div></div>
<div class="ttc" id="namespacetk_html_abdd71f3e10edf6e1a8d047478abd488c"><div class="ttname"><a href="namespacetk.html#abdd71f3e10edf6e1a8d047478abd488c">tk::npoin</a></div><div class="ttdeci">std::size_t npoin(const std::vector&lt; std::size_t &gt; &amp;inpoel)</div><div class="ttdoc">Compute number of points (nodes) in mesh from connectivity. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00028">DerivedData.C:28</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00041">DerivedData.C:41</a></div></div>
<div class="ttc" id="namespaceinciter_1_1ctr_html_ad30c6f520ba46308e32e3ea7ed44d5d0"><div class="ttname"><a href="namespaceinciter_1_1ctr.html#ad30c6f520ba46308e32e3ea7ed44d5d0">inciter::ctr::amr</a></div><div class="ttdeci">tk::tuple::tagged_tuple&lt; tag::amr, bool, tag::init, std::vector&lt; AMRInitialType &gt;, tag::refvar, std::vector&lt; std::string &gt;, tag::id, std::vector&lt; std::size_t &gt;, tag::error, AMRErrorType, tag::edge, std::vector&lt; kw::amr_initref::info::expect::type &gt; &gt; amr</div><div class="ttdoc">Adaptive-mesh refinement options. </div><div class="ttdef"><b>Definition:</b> <a href="_control_2_inciter_2_types_8h_source.html#l00051">Types.h:51</a></div></div>
<div class="ttc" id="classtk_1_1_control_html_a85c14acef1b9de96946fcf2ab7c08721"><div class="ttname"><a href="classtk_1_1_control.html#a85c14acef1b9de96946fcf2ab7c08721">tk::Control::get</a></div><div class="ttdeci">constexpr const Tuple::template nT&lt; tag &gt; &amp; get() const noexcept</div><div class="ttdoc">Const-ref accessor to single element at 1st level. </div><div class="ttdef"><b>Definition:</b> <a href="_control_8h_source.html#l00046">Control.h:46</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_a9b201ee5ec18aa6deddbca2a680dec2b"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a></div><div class="ttdeci">std::unordered_set&lt; Edge, EdgeHash, EdgeEq &gt; EdgeSet</div><div class="ttdoc">Unique set of edges. </div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00068">UnsMesh.h:68</a></div></div>
<div class="ttc" id="class_a_m_r_1_1mesh__adapter__t_html"><div class="ttname"><a href="class_a_m_r_1_1mesh__adapter__t.html">AMR::mesh_adapter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="mesh__adapter_8h_source.html#l00022">mesh_adapter.h:22</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
<div class="ttc" id="namespaceinciter_html_a090ec6ca70e71bf204aa6ed5295bcaf3"><div class="ttname"><a href="namespaceinciter.html#a090ec6ca70e71bf204aa6ed5295bcaf3">inciter::g_inputdeck</a></div><div class="ttdeci">ctr::InputDeck g_inputdeck</div><div class="ttdef"><b>Definition:</b> <a href="_d_g_8_c_source.html#l00028">DG.C:28</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classinciter_1_1_partitioner_a567bb49b4a25654c6db63a347050488b_cgraph.svg" width="438" height="156"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac3678a5d05b8c5356840f28568bf3609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3678a5d05b8c5356840f28568bf3609">&#9670;&nbsp;</a></span>m_bface</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, std::vector&lt; std::size_t &gt; &gt; inciter::Partitioner::m_bface</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of boundary faces associated to side-set IDs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00348">348</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01602">updateBoundaryMesh()</a>.</p>

</div>
</div>
<a id="a017d196502387fcfe4f4128b3d5200c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a017d196502387fcfe4f4128b3d5200c4">&#9670;&nbsp;</a></span>m_bndEdges</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a9b201ee5ec18aa6deddbca2a680dec2b">tk::UnsMesh::EdgeSet</a> &gt; inciter::Partitioner::m_bndEdges</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique set of boundary edges associated to PEs we share these edges with. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00256">256</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01043">addBndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>

</div>
</div>
<a id="acae3ab90a1e0e88de39ba269ab90637b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae3ab90a1e0e88de39ba269ab90637b">&#9670;&nbsp;</a></span>m_bnodechares</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; inciter::Partitioner::m_bnodechares</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating a list of chare IDs to old (as in file) global mesh node IDs on the chare boundaries. </p>
<p>Note that a single global mesh node ID can be associated to multiple chare IDs as multiple chares can contribute to a single node. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00335">335</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00547">gather()</a>, <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00566">query()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="a61829bbd2a87e52c4e32cb62b6303e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61829bbd2a87e52c4e32cb62b6303e0b">&#9670;&nbsp;</a></span>m_cb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtk_1_1tuple_1_1tagged__tuple.html">tk::tuple::tagged_tuple</a>&lt; <a class="el" href="structtag_1_1refdistributed.html">tag::refdistributed</a>, CkCallback , <a class="el" href="structtag_1_1matched.html">tag::matched</a>, CkCallback , <a class="el" href="structtag_1_1refined.html">tag::refined</a>, CkCallback , <a class="el" href="structtag_1_1distributed.html">tag::distributed</a>, CkCallback , <a class="el" href="structtag_1_1flattened.html">tag::flattened</a>, CkCallback , <a class="el" href="structtag_1_1avecost.html">tag::avecost</a>, CkCallback , <a class="el" href="structtag_1_1stdcost.html">tag::stdcost</a>, CkCallback , <a class="el" href="structtag_1_1coord.html">tag::coord</a>, CkCallback &gt; inciter::Partitioner::m_cb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Charm++ callbacks associated to compile-time tags. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00213">213</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>, <a class="el" href="_partitioner_8_c_source.html#l01309">finishref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00322">recvChMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00359">recvPeMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l01170">recvRefBndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00509">stdCost()</a>.</p>

</div>
</div>
<a id="a11f605a01e11ea28aa04fb3a717fb075"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11f605a01e11ea28aa04fb3a717fb075">&#9670;&nbsp;</a></span>m_chcoordmap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> &gt; inciter::Partitioner::m_chcoordmap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Coordinates associated to global node IDs of our mesh chunk for chares. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00321">321</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00266">neworder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>.</p>

</div>
</div>
<a id="a91f7cda531ab7d88b9130b19a10987f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f7cda531ab7d88b9130b19a10987f9">&#9670;&nbsp;</a></span>m_chfilenodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; inciter::Partitioner::m_chfilenodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maps associating old node IDs to new node IDs (as in producing contiguous-row-id linear system contributions) categorized by chares. </p>
<p>Maps associating old node IDs (as in file) as map-values to new node IDs (as in producing contiguous-row-id linear system contributions) as map-keys, associated to chare IDs (outer keys). </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00328">328</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01811">bounds()</a>, <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="ad47619073f5c32f56f05e20434c296f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad47619073f5c32f56f05e20434c296f5">&#9670;&nbsp;</a></span>m_chinpoel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; inciter::Partitioner::m_chinpoel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mesh connectivity using global node IDs associated to chares owned. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00319">319</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00292">addChMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="ac93b32ac4a8ccd3c08e4ca27a56862f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac93b32ac4a8ccd3c08e4ca27a56862f3">&#9670;&nbsp;</a></span>m_coord</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a2ed8d512b099636a98ba6b35b1118d6f">tk::UnsMesh::Coords</a> inciter::Partitioner::m_coord</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Coordinates of mesh nodes of our chunk of the mesh. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00285">285</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00769">coordmap()</a>, <a class="el" href="_partitioner_8_c_source.html#l01341">errorRefine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01280">nextref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01433">nodeinit()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01540">updateVolumeMesh()</a>.</p>

</div>
</div>
<a id="ad21a82b7ef75e411776927bf3fe10cd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad21a82b7ef75e411776927bf3fe10cd7">&#9670;&nbsp;</a></span>m_coordmap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5">tk::UnsMesh::CoordMap</a> inciter::Partitioner::m_coordmap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Coordinates associated to global node IDs of our mesh chunk. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00287">287</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00292">addChMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00335">addPeMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00971">prepare()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01540">updateVolumeMesh()</a>.</p>

</div>
</div>
<a id="a5859014223f5ecabec8cd04e37ddb823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5859014223f5ecabec8cd04e37ddb823">&#9670;&nbsp;</a></span>m_cost</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> inciter::Partitioner::m_cost</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Communication cost of linear system merging for our PE. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00330">330</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00509">stdCost()</a>.</p>

</div>
</div>
<a id="a765fd4aca23b340e45e463c64ee7c944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a765fd4aca23b340e45e463c64ee7c944">&#9670;&nbsp;</a></span>m_edgenode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> inciter::Partitioner::m_edgenode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating the global IDs and the coordinates of a node added to an edge during initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00254">254</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01540">updateVolumeMesh()</a>.</p>

</div>
</div>
<a id="ae9ac9f7fe233a64ce71b5dd9fec298d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9ac9f7fe233a64ce71b5dd9fec298d0">&#9670;&nbsp;</a></span>m_edgenodePe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, <a class="el" href="classtk_1_1_uns_mesh.html#a7ad1f185e755943972c23fb884b06b5d">tk::UnsMesh::EdgeNodeCoord</a> &gt; inciter::Partitioner::m_edgenodePe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating the global IDs and the coordinates of a node added to an edge during initial mesh refinement associated to a(nother) PE the edge is shared with. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00260">260</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01154">addRefBndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>.</p>

</div>
</div>
<a id="ad88746cb95f9238d7f108f5aff126cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad88746cb95f9238d7f108f5aff126cda">&#9670;&nbsp;</a></span>m_el</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::tuple&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt;, std::unordered_map&lt; std::size_t, std::size_t &gt; &gt; inciter::Partitioner::m_el</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Elements of the mesh chunk we operate on. </p>
<p>The first vector is the element connectivity (local IDs), the second vector is the global node IDs of owned elements, while the third one is a map of global-&gt;local node IDs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00244">244</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01001">bndEdges()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>.</p>

</div>
</div>
<a id="a77db7e343f48921c4fd9900249d8b2f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77db7e343f48921c4fd9900249d8b2f9">&#9670;&nbsp;</a></span>m_extra</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_extra</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00233">233</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01170">recvRefBndEdges()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>

</div>
</div>
<a id="aaf05cd7be846fe7d3ab6370ba35503ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf05cd7be846fe7d3ab6370ba35503ef">&#9670;&nbsp;</a></span>m_gid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt;&amp; inciter::Partitioner::m_gid = std::get&lt;1&gt;( <a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> )</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alias to global node IDs of owned elements in m_el. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00248">248</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01001">bndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01602">updateBoundaryMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01540">updateVolumeMesh()</a>.</p>

</div>
</div>
<a id="affe5d06e4427f2b077644843b51d44b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affe5d06e4427f2b077644843b51d44b9">&#9670;&nbsp;</a></span>m_ginpoel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt; inciter::Partitioner::m_ginpoel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tetrtahedron element connectivity of our chunk of the mesh (global ids) </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00283">283</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00335">addPeMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l01001">bndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>, <a class="el" href="_partitioner_8_c_source.html#l01309">finishref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>.</p>

</div>
</div>
<a id="a59274d7dc87ef5bdc5587498133dbee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59274d7dc87ef5bdc5587498133dbee9">&#9670;&nbsp;</a></span>m_host</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CProxy_Transporter inciter::Partitioner::m_host</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Host proxy. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00215">215</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>, <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00547">gather()</a>, <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>, <a class="el" href="_partitioner_8_c_source.html#l00566">query()</a>, <a class="el" href="_partitioner_8_c_source.html#l00322">recvChMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="aba177cca8c93f41df7565d8392289d1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba177cca8c93f41df7565d8392289d1d">&#9670;&nbsp;</a></span>m_initref</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="namespaceinciter_1_1ctr.html#ab492311c84666c98ea0363b2991f81fa">ctr::AMRInitialType</a> &gt; inciter::Partitioner::m_initref</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initial mesh refinement type list (in reverse order) </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00237">237</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01280">nextref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00045">Partitioner()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>

</div>
</div>
<a id="a9461a4296751af3df761bef9008dc506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9461a4296751af3df761bef9008dc506">&#9670;&nbsp;</a></span>m_inpoel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt;&amp; inciter::Partitioner::m_inpoel = std::get&lt;0&gt;( <a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> )</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alias to element connectivity with local node IDs in m_el. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00246">246</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01001">bndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l01487">correctRefine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01341">errorRefine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01280">nextref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01433">nodeinit()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01325">uniformRefine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01602">updateBoundaryMesh()</a>, <a class="el" href="_partitioner_8_c_source.html#l01511">updateMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01391">userRefine()</a>.</p>

</div>
</div>
<a id="a98647bf8dec4144364598a1a293f0bc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98647bf8dec4144364598a1a293f0bc2">&#9670;&nbsp;</a></span>m_lid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::size_t, std::size_t &gt;&amp; inciter::Partitioner::m_lid = std::get&lt;2&gt;( <a class="el" href="classinciter_1_1_partitioner.html#ad88746cb95f9238d7f108f5aff126cda">m_el</a> )</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Alias to local node IDs associated to the global ones of owned elements in m_el. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00251">251</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01001">bndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l00769">coordmap()</a>, <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>, <a class="el" href="_partitioner_8_c_source.html#l01602">updateBoundaryMesh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01540">updateVolumeMesh()</a>.</p>

</div>
</div>
<a id="a8823c8f12b3785866f960abb76c005a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8823c8f12b3785866f960abb76c005a4">&#9670;&nbsp;</a></span>m_linnodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::size_t, std::size_t &gt; inciter::Partitioner::m_linnodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map associating new node IDs (as in producing contiguous-row-id linear system contributions) as map-values to old node IDs (as in file) as map-keys. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00317">317</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00266">neworder()</a>, <a class="el" href="_partitioner_8_c_source.html#l00971">prepare()</a>, <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="aaea6e9f6686a321f6b3f98c7d9a9cac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea6e9f6686a321f6b3f98c7d9a9cac0">&#9670;&nbsp;</a></span>m_lower</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_lower</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lower bound of node IDs our PE operates on after reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00291">291</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00498">lower()</a>.</p>

</div>
</div>
<a id="a0a211fd24b020e1fa49bc36032035d0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a211fd24b020e1fa49bc36032035d0a">&#9670;&nbsp;</a></span>m_msum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; &gt; inciter::Partitioner::m_msum</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global mesh node IDs associated to chare IDs bordering the mesh chunk held by (and associated to) chare IDs this PE owns. </p>
<p>msum: (M)esh chunks (S)urrounding (M)esh chunks storing mesh nodes. Outer map-key: chare IDs this PE owns whose neighbors are stored, inner map-key: chare IDs of those chares that hold mesh chunks surrounding the outer-key chare's mesh, map-values: global new (reordered, as in producing contiguous-row-id linear system contributions) mesh node IDs along the border of chares (at which the chares will need to communicate) during time stepping. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00346">346</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="aebd33481dcb2404d2b65835784a0ad6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd33481dcb2404d2b65835784a0ad6b">&#9670;&nbsp;</a></span>m_nchare</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inciter::Partitioner::m_nchare</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total number of chares across all PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00289">289</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00178">partchare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00954">pe()</a>.</p>

</div>
</div>
<a id="a0996cf378d056d18ab8c89b77bc5e9a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0996cf378d056d18ab8c89b77bc5e9a1">&#9670;&nbsp;</a></span>m_ncomm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; int, std::unordered_set&lt; std::size_t &gt; &gt; inciter::Partitioner::m_ncomm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Temporary communication map used to receive global mesh node IDs. </p>
<p>This map, on each PE, associates the list of global mesh point indices to fellow PE IDs from which we will receive new node IDs (as in producing contiguous-row-id linear system contributions) during reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00299">299</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>.</p>

</div>
</div>
<a id="a8a53be8a1baf2fcea27274a757150601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a53be8a1baf2fcea27274a757150601">&#9670;&nbsp;</a></span>m_ncommunication</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; int, std::unordered_set&lt;std::size_t&gt; &gt; inciter::Partitioner::m_ncommunication</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Communication map used for distributed mesh node reordering. </p>
<p>This map, on each PE, associates the list of global mesh point indices to fellow PE IDs from which we will receive new node IDs (as in producing contiguous-row-id linear system contributions) during reordering. Only data that will be received from PEs with a lower index are stored. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00306">306</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="a9166e2ef7ec475b0863383ea1afb38e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9166e2ef7ec475b0863383ea1afb38e7">&#9670;&nbsp;</a></span>m_ndist</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_ndist</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter during distribution of mesh during initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00227">227</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00359">recvPeMesh()</a>.</p>

</div>
</div>
<a id="a235100235d9321fe8ad67bed3566263c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a235100235d9321fe8ad67bed3566263c">&#9670;&nbsp;</a></span>m_nedge</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_nedge</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter during distribution of PE-boundary edges during initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00230">230</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01043">addBndEdges()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>.</p>

</div>
</div>
<a id="a3356e3bc9acbadf37c511d7847a31f5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3356e3bc9acbadf37c511d7847a31f5a">&#9670;&nbsp;</a></span>m_nmask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_nmask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter for number of masks of to-be-received global mesh node IDs received. </p>
<p>This counts the to-be-received node ID masks received while gathering the node IDs that need to be received (instead of uniquely assigned) by each PE </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00281">281</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>.</p>

</div>
</div>
<a id="adaac84a616435db5f54b8286a2774b23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaac84a616435db5f54b8286a2774b23">&#9670;&nbsp;</a></span>m_nodech</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; std::size_t, std::vector&lt; int &gt; &gt; inciter::Partitioner::m_nodech</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Chare IDs (value) associated to global mesh node IDs (key)</p>
<p>Multiple chares can contribute to a single node, hence vector for map value. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00313">313</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00266">neworder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>.</p>

</div>
</div>
<a id="a054bc425f1c654d3aa4afb2fc9dd229c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a054bc425f1c654d3aa4afb2fc9dd229c">&#9670;&nbsp;</a></span>m_nodeset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; std::size_t &gt; inciter::Partitioner::m_nodeset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unique global node IDs chares on our PE will contribute to in a linear system. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00309">309</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00524">cost()</a>, <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, <a class="el" href="_partitioner_8_c_source.html#l00368">flatten()</a>, <a class="el" href="_partitioner_8_c_source.html#l00600">mask()</a>, <a class="el" href="_partitioner_8_c_source.html#l00266">neworder()</a>, <a class="el" href="_partitioner_8_c_source.html#l00566">query()</a>, <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01761">reordered()</a>.</p>

</div>
</div>
<a id="a0518feebf27d6038e52a84d3bf83349e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0518feebf27d6038e52a84d3bf83349e">&#9670;&nbsp;</a></span>m_noffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_noffset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter for number of offsets. </p>
<p>This counts the to-be-received node IDs received while computing global mesh node ID offsets for each PE rquired for node reordering later </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00270">270</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00224">offset()</a>.</p>

</div>
</div>
<a id="aa6450dbbf36bf5cb36088bdcec7a4445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6450dbbf36bf5cb36088bdcec7a4445">&#9670;&nbsp;</a></span>m_npe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_npe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of PEs this PE needs to send a mesh chunk after partitioning</p>
<p>This is after initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00225">225</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00829">distributeCh()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00322">recvChMesh()</a>.</p>

</div>
</div>
<a id="a014b468e68f031bd2adbc78a7819e531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a014b468e68f031bd2adbc78a7819e531">&#9670;&nbsp;</a></span>m_npeDist</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_npeDist</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of PEs this PE needs to send a mesh chunk after partitioning</p>
<p>This is during initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00222">222</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00795">distributePe()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00359">recvPeMesh()</a>.</p>

</div>
</div>
<a id="a14f06d050b2bce8637646757de64ea87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14f06d050b2bce8637646757de64ea87">&#9670;&nbsp;</a></span>m_nquery</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_nquery</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter for number of queries for global mesh node IDs. </p>
<p>This counts the number of queries received while gathering the node IDs that need to be received (instead of uniquely assigned) by each PE </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00275">275</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00566">query()</a>.</p>

</div>
</div>
<a id="a433f963dc85816ff5667de8d0ee269e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a433f963dc85816ff5667de8d0ee269e1">&#9670;&nbsp;</a></span>m_nref</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_nref</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter during distribution of newly added nodes to PE-boundary edges. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00232">232</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01170">recvRefBndEdges()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>

</div>
</div>
<a id="a132adb59d0c9e34782cc7ef84384875e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132adb59d0c9e34782cc7ef84384875e">&#9670;&nbsp;</a></span>m_pe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt; int &gt; inciter::Partitioner::m_pe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PEs we share at least a single edge with during initial mesh refinement. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00235">235</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01043">addBndEdges()</a>, <a class="el" href="_partitioner_8_c_source.html#l01191">correctref()</a>, <a class="el" href="_partitioner_8_c_source.html#l00130">partref()</a>, <a class="el" href="_partitioner_8_c_source.html#l01170">recvRefBndEdges()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01067">refine()</a>.</p>

</div>
</div>
<a id="a1713eab87b3e4e49357e4726f2e5ae9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1713eab87b3e4e49357e4726f2e5ae9b">&#9670;&nbsp;</a></span>m_reqNodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; int, std::unordered_set&lt;std::size_t&gt; &gt; &gt; inciter::Partitioner::m_reqNodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue of requested node IDs from PEs. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00262">262</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00971">prepare()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00252">request()</a>.</p>

</div>
</div>
<a id="ae768c5ce71927c4fb5332095a9901a3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae768c5ce71927c4fb5332095a9901a3e">&#9670;&nbsp;</a></span>m_scheme</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinciter_1_1_scheme.html">Scheme</a> inciter::Partitioner::m_scheme</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classinciter_1_1_discretization.html" title="Discretization Charm++ chare array holding common functinoality to all discretization schemes...">Discretization</a> scheme. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00219">219</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01882">createDiscWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>.</p>

</div>
</div>
<a id="a873290f952719d8df09aa888a37ca623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a873290f952719d8df09aa888a37ca623">&#9670;&nbsp;</a></span>m_solver</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tk::CProxy_Solver inciter::Partitioner::m_solver</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Linear system solver proxy. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00217">217</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>.</p>

</div>
</div>
<a id="a803838f68fa952cd41d1d9b6e5941c6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a803838f68fa952cd41d1d9b6e5941c6a">&#9670;&nbsp;</a></span>m_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_start</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starting global mesh node ID for node reordering on this PE during mesh node reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00265">265</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l00224">offset()</a>, and <a class="el" href="_partitioner_8_c_source.html#l00900">reorder()</a>.</p>

</div>
</div>
<a id="ac1af520c1436ffde6c975a541bfda8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1af520c1436ffde6c975a541bfda8ac">&#9670;&nbsp;</a></span>m_triinpoel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt; inciter::Partitioner::m_triinpoel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Boundary face-node connectivity. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00350">350</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01917">createWorkers()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01602">updateBoundaryMesh()</a>.</p>

</div>
</div>
<a id="ad643d4c35b6a56eef0a3a48a588e366d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad643d4c35b6a56eef0a3a48a588e366d">&#9670;&nbsp;</a></span>m_upper</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t inciter::Partitioner::m_upper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upper bound of node IDs our PE operates on after reordering. </p>

<p class="definition">Definition at line <a class="el" href="_partitioner_8h_source.html#l00293">293</a> of file <a class="el" href="_partitioner_8h_source.html">Partitioner.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_partitioner_8_c_source.html#l01811">bounds()</a>, and <a class="el" href="_partitioner_8_c_source.html#l01855">create()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/tmp/TeamCity-12/work/821a9fd6f64749d9/src/Inciter/<a class="el" href="_partitioner_8h_source.html">Partitioner.h</a></li>
<li>/tmp/TeamCity-12/work/821a9fd6f64749d9/src/Inciter/<a class="el" href="_partitioner_8_c_source.html">Partitioner.C</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 18 2018 21:21:12 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
