<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: tk::Tracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetk.html">tk</a></li><li class="navelem"><a class="el" href="classtk_1_1_tracker.html">Tracker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtk_1_1_tracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tk::Tracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a> advances Lagrangian particles in state space.  
 <a href="classtk_1_1_tracker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_tracker_8h_source.html">Tracker.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abbcf7dfefc0f8e7d7ed274b218fe53c9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#abbcf7dfefc0f8e7d7ed274b218fe53c9">Tracker</a> (bool feedback=false, std::size_t npar=0, const std::vector&lt; std::size_t &gt; &amp;inpoel={})</td></tr>
<tr class="separator:abbcf7dfefc0f8e7d7ed274b218fe53c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a999e420acc4782b98af0305b7acbae6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a999e420acc4782b98af0305b7acbae6e">genpar</a> (const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nchare, int chid)</td></tr>
<tr class="memdesc:a999e420acc4782b98af0305b7acbae6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate particles to each of our mesh cells.  <a href="#a999e420acc4782b98af0305b7acbae6e">More...</a><br /></td></tr>
<tr class="separator:a999e420acc4782b98af0305b7acbae6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae573b715e9b64f058bea66838d84f05f"><td class="memTemplParams" colspan="2">template&lt;class HostProxy , class ParticleWriterProxy , class ChareArray &gt; </td></tr>
<tr class="memitem:ae573b715e9b64f058bea66838d84f05f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#ae573b715e9b64f058bea66838d84f05f">writeParticles</a> (HostProxy &amp;hostproxy, const ParticleWriterProxy &amp;pw, ChareArray *const array)</td></tr>
<tr class="separator:ae573b715e9b64f058bea66838d84f05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f709d02ecbd9691ab702ccd1221a6d0"><td class="memTemplParams" colspan="2">template&lt;class ParticleWriterProxy &gt; </td></tr>
<tr class="memitem:a0f709d02ecbd9691ab702ccd1221a6d0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a0f709d02ecbd9691ab702ccd1221a6d0">doWriteParticles</a> (const ParticleWriterProxy &amp;pw, uint64_t it)</td></tr>
<tr class="separator:a0f709d02ecbd9691ab702ccd1221a6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ac4fe159390a0681c2856ad5ae40b8b"><td class="memTemplParams" colspan="2">template&lt;class ChareArray &gt; </td></tr>
<tr class="memitem:a2ac4fe159390a0681c2856ad5ae40b8b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a2ac4fe159390a0681c2856ad5ae40b8b">advanceParticle</a> (ChareArray *const array, std::size_t i, std::size_t e, <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> dt, const std::array&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>, 4 &gt; &amp;Np)</td></tr>
<tr class="separator:a2ac4fe159390a0681c2856ad5ae40b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efd3eb287015e97bce36c2c85086940"><td class="memTemplParams" colspan="2">template&lt;class HostProxy , class ChareArrayProxy , class ChareArray &gt; </td></tr>
<tr class="memitem:a3efd3eb287015e97bce36c2c85086940"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a3efd3eb287015e97bce36c2c85086940">track</a> (HostProxy &amp;hostproxy, const ChareArrayProxy &amp;arrayProxy, const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt;&gt; msum, int chid, ChareArray *const array, uint8_t stage, <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> dt)</td></tr>
<tr class="separator:a3efd3eb287015e97bce36c2c85086940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a394bb78c8bcd80ed0c10df00d4f3035d"><td class="memTemplParams" colspan="2">template&lt;class ChareArrayProxy &gt; </td></tr>
<tr class="memitem:a394bb78c8bcd80ed0c10df00d4f3035d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a394bb78c8bcd80ed0c10df00d4f3035d">findpar</a> (const ChareArrayProxy &amp;arrayProxy, const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, int fromch, const std::vector&lt; std::size_t &gt; &amp;miss, const std::vector&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;ps)</td></tr>
<tr class="separator:a394bb78c8bcd80ed0c10df00d4f3035d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abce3ebc0d95530100e00cf5c545d00f5"><td class="memTemplParams" colspan="2">template&lt;class HostProxy , class ChareArrayProxy , class ChareArray &gt; </td></tr>
<tr class="memitem:abce3ebc0d95530100e00cf5c545d00f5"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#abce3ebc0d95530100e00cf5c545d00f5">foundpar</a> (HostProxy &amp;hostproxy, ChareArrayProxy &amp;arrayProxy, const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt; msum, ChareArray *const array, int chid, const std::vector&lt; std::size_t &gt; &amp;found)</td></tr>
<tr class="separator:abce3ebc0d95530100e00cf5c545d00f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa56ac1fda74b84674f5d76b52bbd8e5b"><td class="memTemplParams" colspan="2">template&lt;class ChareArrayProxy &gt; </td></tr>
<tr class="memitem:aa56ac1fda74b84674f5d76b52bbd8e5b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#aa56ac1fda74b84674f5d76b52bbd8e5b">collectpar</a> (const ChareArrayProxy &amp;arrayProxy, const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, int fromch, const std::vector&lt; std::size_t &gt; &amp;miss, const std::vector&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;ps)</td></tr>
<tr class="separator:aa56ac1fda74b84674f5d76b52bbd8e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4629ce81761ffa3f0802a96cfdb6efd3"><td class="memTemplParams" colspan="2">template&lt;class HostProxy , class ChareArray &gt; </td></tr>
<tr class="memitem:a4629ce81761ffa3f0802a96cfdb6efd3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a4629ce81761ffa3f0802a96cfdb6efd3">collectedpar</a> (HostProxy &amp;hostproxy, ChareArray *const array, const std::vector&lt; std::size_t &gt; &amp;found, std::size_t nchare)</td></tr>
<tr class="separator:a4629ce81761ffa3f0802a96cfdb6efd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a36aabeae60c73059b165d62cd351d83e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a36aabeae60c73059b165d62cd351d83e">addpar</a> (const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::vector&lt; std::size_t &gt; &amp;miss, const std::vector&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;ps)</td></tr>
<tr class="memdesc:a36aabeae60c73059b165d62cd351d83e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to find particles and add those found to the list of ours.  <a href="#a36aabeae60c73059b165d62cd351d83e">More...</a><br /></td></tr>
<tr class="separator:a36aabeae60c73059b165d62cd351d83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae69f0ff9d74d282d162fec18a0f0f508"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#ae69f0ff9d74d282d162fec18a0f0f508">parinel</a> (const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t p, std::size_t e, std::array&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>, 4 &gt; &amp;N)</td></tr>
<tr class="memdesc:ae69f0ff9d74d282d162fec18a0f0f508"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search particle in a single mesh cell.  <a href="#ae69f0ff9d74d282d162fec18a0f0f508">More...</a><br /></td></tr>
<tr class="separator:ae69f0ff9d74d282d162fec18a0f0f508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db0f8990605651ab03a2f997fc7d0e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a7db0f8990605651ab03a2f997fc7d0e4">applyParBC</a> (std::size_t i)</td></tr>
<tr class="memdesc:a7db0f8990605651ab03a2f997fc7d0e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply boundary conditions to particles.  <a href="#a7db0f8990605651ab03a2f997fc7d0e4">More...</a><br /></td></tr>
<tr class="separator:a7db0f8990605651ab03a2f997fc7d0e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d8b7d2cd845457521cab52a3634a576"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a6d8b7d2cd845457521cab52a3634a576">remove</a> (const std::set&lt; std::size_t &gt; &amp;idx)</td></tr>
<tr class="memdesc:a6d8b7d2cd845457521cab52a3634a576"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a set of particles.  <a href="#a6d8b7d2cd845457521cab52a3634a576">More...</a><br /></td></tr>
<tr class="separator:a6d8b7d2cd845457521cab52a3634a576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Calls to host</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These functions signal back to the host via a global reduction originating from each chare we are held by</p>
<p>Singal calls contribute to a reduction on all holding chares to the host, e.g., inciter::CProxy_Transporter, given by the template argument HostProxy. The signal functions are overloads on the specialization, e.g., inciter::CProxy_Transporter, of the <a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a> template. They create Charm++ reduction targets via creating a callback that invokes the typed reduction client, where host is the proxy on which the reduction target method, given by the string followed by "redn_wrapper_", e.g., nparcomplete(), is called upon completion of the reduction.</p>
<p>Note that we do not use Charm++'s CkReductionTarget macro here, but instead explicitly generate the code that that macro would generate. To explain why, here is Charm++'s CkReductionTarget macro's definition, given in ckreduction.h: </p><div class="fragment"><div class="line"><span class="preprocessor">#define CkReductionTarget(me, method) \</span></div><div class="line"><span class="preprocessor">  CkIndex_##me::redn_wrapper_##method(NULL)</span></div></div><!-- fragment --><p> This macro takes arguments 'me' (a class name) and 'method' a member function of class 'me' and generates the call 'CkIndex_&lt;class&gt;::redn_wrapper_&lt;method&gt;(NULL)'. With the overloads the below functions generate, we do the above macro's job for <a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a> specialized by HostProxy, hard-coded here, as well its reduction target. This is required because</p><ul>
<li>Charm++'s CkReductionTarget macro's preprocessing happens earlier than type resolution and the string of the template argument would be substituted instead of the type specialized (which is not what we want here), and</li>
<li>the template argument class, e.g, CProxy_Transporter, is in a namespace different than that of <a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a>. When a new class is used to specialize <a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a>, the compiler will alert that a new overload needs to be defined.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This simplifies client-code, e.g., <a class="el" href="classinciter_1_1_transporter.html" title="Transporter drives the time integration of transport equations. ">inciter::Transporter</a>, which now requires no explicit book-keeping with counters, etc. Also a reduction (instead of a direct call to the host) better utilizes the communication network as computational nodes can send their aggregated contribution to other nodes on a network instead of all chares sending their (smaller) contributions to the same host, implemented using a tree among the chares and PEs. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://charm.cs.illinois.edu/manuals/html/charm++/manual.html,">http://charm.cs.illinois.edu/manuals/html/charm++/manual.html,</a> Sections "Processor-Aware Chare Collections" and "Chare Arrays". </dd></dl>
</div></td></tr>
<tr class="memitem:a5eb1e53ac7ead899eb228f38e1fa6eaa"><td class="memTemplParams" colspan="2">template&lt;class ChareArray &gt; </td></tr>
<tr class="memitem:a5eb1e53ac7ead899eb228f38e1fa6eaa"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a5eb1e53ac7ead899eb228f38e1fa6eaa">signal2host_nparcomplete</a> (const inciter::CProxy_Transporter &amp;host, ChareArray *array)</td></tr>
<tr class="separator:a5eb1e53ac7ead899eb228f38e1fa6eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dfd90ec743e23e63b663926f2925a84"><td class="memTemplParams" colspan="2">template&lt;class ChareArray &gt; </td></tr>
<tr class="memitem:a0dfd90ec743e23e63b663926f2925a84"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">signal2host_parcomcomplete</a> (inciter::CProxy_Transporter &amp;host, ChareArray *array)</td></tr>
<tr class="separator:a0dfd90ec743e23e63b663926f2925a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad985a8413c8ea2f94e2777d503dabcef"><td class="memItemLeft" align="right" valign="top">tk::Particles&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a></td></tr>
<tr class="memdesc:ad985a8413c8ea2f94e2777d503dabcef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Particle properties.  <a href="#ad985a8413c8ea2f94e2777d503dabcef">More...</a><br /></td></tr>
<tr class="separator:ad985a8413c8ea2f94e2777d503dabcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6edff87089032ed16723f3f0d8fc50d9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a></td></tr>
<tr class="memdesc:a6edff87089032ed16723f3f0d8fc50d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Element ID in which a particle has last been found for all particles.  <a href="#a6edff87089032ed16723f3f0d8fc50d9">More...</a><br /></td></tr>
<tr class="separator:a6edff87089032ed16723f3f0d8fc50d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3389b2fbeeb8ac8e824d30f97dbf340"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a></td></tr>
<tr class="memdesc:ac3389b2fbeeb8ac8e824d30f97dbf340"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicies of particles not found here (missing)  <a href="#ac3389b2fbeeb8ac8e824d30f97dbf340">More...</a><br /></td></tr>
<tr class="separator:ac3389b2fbeeb8ac8e824d30f97dbf340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee00aa387cb3472b5e25ad8117ac245"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a></td></tr>
<tr class="memdesc:a2ee00aa387cb3472b5e25ad8117ac245"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicies of particles not found here but found by fellows.  <a href="#a2ee00aa387cb3472b5e25ad8117ac245">More...</a><br /></td></tr>
<tr class="separator:a2ee00aa387cb3472b5e25ad8117ac245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23579c1606f4a3ebb924713a9dbfaa1f"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a></td></tr>
<tr class="memdesc:a23579c1606f4a3ebb924713a9dbfaa1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of chares we received particles from.  <a href="#a23579c1606f4a3ebb924713a9dbfaa1f">More...</a><br /></td></tr>
<tr class="separator:a23579c1606f4a3ebb924713a9dbfaa1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af2d33797985ed91d763ac0e40f9477"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">m_esupel</a></td></tr>
<tr class="memdesc:a2af2d33797985ed91d763ac0e40f9477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elements surrounding points of elements of mesh chunk we operate on.  <a href="#a2af2d33797985ed91d763ac0e40f9477">More...</a><br /></td></tr>
<tr class="separator:a2af2d33797985ed91d763ac0e40f9477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37817243745f6728a3f21ad029614464"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a37817243745f6728a3f21ad029614464">m_feedback</a></td></tr>
<tr class="memdesc:a37817243745f6728a3f21ad029614464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bool that determines whether to send sub-task feedback to host.  <a href="#a37817243745f6728a3f21ad029614464">More...</a><br /></td></tr>
<tr class="separator:a37817243745f6728a3f21ad029614464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e06c5471f859a201908ff2f7a74d682"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#a3e06c5471f859a201908ff2f7a74d682">pup</a> (PUP::er &amp;p)</td></tr>
<tr class="memdesc:a3e06c5471f859a201908ff2f7a74d682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack/Unpack serialize member function.  <a href="#a3e06c5471f859a201908ff2f7a74d682">More...</a><br /></td></tr>
<tr class="separator:a3e06c5471f859a201908ff2f7a74d682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad7a1dab5ae213627e1a0ed6dc5b566"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_tracker.html#aaad7a1dab5ae213627e1a0ed6dc5b566">operator|</a> (PUP::er &amp;p, <a class="el" href="classtk_1_1_tracker.html">Tracker</a> &amp;i)</td></tr>
<tr class="memdesc:aaad7a1dab5ae213627e1a0ed6dc5b566"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack/Unpack serialize operator|.  <a href="#aaad7a1dab5ae213627e1a0ed6dc5b566">More...</a><br /></td></tr>
<tr class="separator:aaad7a1dab5ae213627e1a0ed6dc5b566"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a> advances Lagrangian particles in state space. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00036">36</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abbcf7dfefc0f8e7d7ed274b218fe53c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbcf7dfefc0f8e7d7ed274b218fe53c9">&#9670;&nbsp;</a></span>Tracker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tk::Tracker::Tracker </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>feedback</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>npar</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">npar</td><td>Number of particles per mesh element </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">feedback</td><td>Whether to send sub-task feedback to host </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00044">44</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_derived_data_8_c_source.html#l00026">tk::genEsup()</a>, <a class="el" href="_derived_data_8_c_source.html#l00413">tk::genEsupel()</a>, <a class="el" href="_tracker_8_c_source.html#l00024">genpar()</a>, <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, <a class="el" href="_tracker_8h_source.html#l00341">m_esupel</a>, <a class="el" href="_tracker_8h_source.html#l00343">m_feedback</a>, <a class="el" href="_tracker_8h_source.html#l00338">m_nchpar</a>, <a class="el" href="_tracker_8h_source.html#l00336">m_parelse</a>, <a class="el" href="_tracker_8h_source.html#l00334">m_parmiss</a>, and <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                             {} ) :</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>( npar * inpoel.size()/4, 3 ), <span class="comment">// only the 3 spatial components</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>( <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk() ),</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>(),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>(),</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a>( 0 ),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">m_esupel</a>( <a class="code" href="namespacetk.html#a9d835a7a93970d17a66356b64f3291af">tk::genEsupel</a>( inpoel, 4, <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>(inpoel,4) ) ),</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a37817243745f6728a3f21ad029614464">m_feedback</a>( feedback )</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    {}</div><div class="ttc" id="classtk_1_1_tracker_html_a37817243745f6728a3f21ad029614464"><div class="ttname"><a href="classtk_1_1_tracker.html#a37817243745f6728a3f21ad029614464">tk::Tracker::m_feedback</a></div><div class="ttdeci">bool m_feedback</div><div class="ttdoc">Bool that determines whether to send sub-task feedback to host. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00343">Tracker.h:343</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="namespacetk_html_a9d835a7a93970d17a66356b64f3291af"><div class="ttname"><a href="namespacetk.html#a9d835a7a93970d17a66356b64f3291af">tk::genEsupel</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsupel(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, elements surrounding points of elements. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00413">DerivedData.C:413</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2ee00aa387cb3472b5e25ad8117ac245"><div class="ttname"><a href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">tk::Tracker::m_parelse</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parelse</div><div class="ttdoc">Indicies of particles not found here but found by fellows. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00336">Tracker.h:336</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2af2d33797985ed91d763ac0e40f9477"><div class="ttname"><a href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">tk::Tracker::m_esupel</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; m_esupel</div><div class="ttdoc">Elements surrounding points of elements of mesh chunk we operate on. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00341">Tracker.h:341</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00026">DerivedData.C:26</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ac3389b2fbeeb8ac8e824d30f97dbf340"><div class="ttname"><a href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">tk::Tracker::m_parmiss</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parmiss</div><div class="ttdoc">Indicies of particles not found here (missing) </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00334">Tracker.h:334</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a23579c1606f4a3ebb924713a9dbfaa1f"><div class="ttname"><a href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">tk::Tracker::m_nchpar</a></div><div class="ttdeci">std::size_t m_nchpar</div><div class="ttdoc">Number of chares we received particles from. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00338">Tracker.h:338</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_abbcf7dfefc0f8e7d7ed274b218fe53c9_cgraph.svg" width="616" height="184"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a36aabeae60c73059b165d62cd351d83e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36aabeae60c73059b165d62cd351d83e">&#9670;&nbsp;</a></span>addpar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt; Tracker::addpar </td>
          <td>(</td>
          <td class="paramtype">const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>miss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to find particles and add those found to the list of ours. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">coord</td><td>Mesh node coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">miss</td><td>Indices of particles to find </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ps</td><td>Particle data associated to those particle indices to find </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Particle indices found </dd></dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8_c_source.html#l00071">71</a> of file <a class="el" href="_tracker_8_c_source.html">Tracker.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00049">Assert</a>, <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>, and <a class="el" href="_tracker_8_c_source.html#l00109">parinel()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00277">collectpar()</a>, and <a class="el" href="_tracker_8h_source.html#l00209">findpar()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( ps.size() == miss.size(), <span class="stringliteral">&quot;Size mismatch&quot;</span> );</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  std::vector&lt; std::size_t &gt; found; <span class="comment">// will store indices of particles found</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// try to find particles received</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">for</span> (std::size_t i=0; i&lt;ps.size(); ++i)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">for</span> (std::size_t e=0; e&lt;inpoel.size()/4; ++e) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      std::array&lt; tk::real, 4 &gt; N;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keyword">auto</span> last = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk();</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.push_back( ps[i] );</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classtk_1_1_tracker.html#ae69f0ff9d74d282d162fec18a0f0f508">parinel</a>( coord, inpoel, last, e, N )) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        found.push_back( miss[i] );</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.resize( last+1 );</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[ last ] = e;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        e = inpoel.size()/4;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.rm( { last } );</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> found;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00049">Exception.h:49</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ae69f0ff9d74d282d162fec18a0f0f508"><div class="ttname"><a href="classtk_1_1_tracker.html#ae69f0ff9d74d282d162fec18a0f0f508">tk::Tracker::parinel</a></div><div class="ttdeci">bool parinel(const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t p, std::size_t e, std::array&lt; tk::real, 4 &gt; &amp;N)</div><div class="ttdoc">Search particle in a single mesh cell. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8_c_source.html#l00109">Tracker.C:109</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_a36aabeae60c73059b165d62cd351d83e_cgraph.svg" width="615" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2ac4fe159390a0681c2856ad5ae40b8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ac4fe159390a0681c2856ad5ae40b8b">&#9670;&nbsp;</a></span>advanceParticle()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::advanceParticle </td>
          <td>(</td>
          <td class="paramtype">ChareArray *const&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::array&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>, 4 &gt; &amp;&#160;</td>
          <td class="paramname"><em>Np</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advance particle based on velocity from mesh cell </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i</td><td>Particle index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>Mesh element index where the particle currently resides </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dt</td><td>Time step size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Np</td><td>Four finite-element shapefunctions evaluated (as a result of the particle search) at the particle location in element e </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>F.J. Gonzalez </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00099">99</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8_c_source.html#l00201">applyParBC()</a>, and <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00133">track()</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="comment">// Extract the transport velocity at nodes</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keyword">auto</span> v = array-&gt;velocity( e );</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="comment">// Advance particle coordinates using the interpolated velocity</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,0,0) +=</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        dt*(Np[0]*v[0][0] + Np[1]*v[0][1] + Np[2]*v[0][2] + Np[3]*v[0][3]);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,1,0) +=</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        dt*(Np[0]*v[1][0] + Np[1]*v[1][1] + Np[2]*v[1][2] + Np[3]*v[1][3]);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,2,0) +=</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        dt*(Np[0]*v[2][0] + Np[1]*v[2][1] + Np[2]*v[2][2] + Np[3]*v[2][3]);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="comment">// Apply boundary conditions to particle</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a7db0f8990605651ab03a2f997fc7d0e4">applyParBC</a>( i );</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a7db0f8990605651ab03a2f997fc7d0e4"><div class="ttname"><a href="classtk_1_1_tracker.html#a7db0f8990605651ab03a2f997fc7d0e4">tk::Tracker::applyParBC</a></div><div class="ttdeci">void applyParBC(std::size_t i)</div><div class="ttdoc">Apply boundary conditions to particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8_c_source.html#l00201">Tracker.C:201</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_a2ac4fe159390a0681c2856ad5ae40b8b_cgraph.svg" width="418" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7db0f8990605651ab03a2f997fc7d0e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7db0f8990605651ab03a2f997fc7d0e4">&#9670;&nbsp;</a></span>applyParBC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tracker::applyParBC </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply boundary conditions to particles. </p>
<dl class="section author"><dt>Author</dt><dd>F.J. Gonzalez </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8_c_source.html#l00201">201</a> of file <a class="el" href="_tracker_8_c_source.html">Tracker.C</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00099">advanceParticle()</a>.</p>
<div class="fragment"><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keyword">auto</span>&amp; x = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,0,0);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">auto</span>&amp; y = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,1,0);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keyword">auto</span>&amp; z = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,2,0);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span> (z &gt; 1.0) z = 0.99;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">if</span> (z &lt; 0.0) z = 0.01;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (y &gt; 1.0) y = 0.99;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (y &lt; 0.0) y = 0.01;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (x &gt; 1.0) x = 0.99;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span> (x &lt; 0.0) x = 0.01;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4629ce81761ffa3f0802a96cfdb6efd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4629ce81761ffa3f0802a96cfdb6efd3">&#9670;&nbsp;</a></span>collectedpar()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class HostProxy , class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::collectedpar </td>
          <td>(</td>
          <td class="paramtype">HostProxy &amp;&#160;</td>
          <td class="paramname"><em>hostproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArray *const&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>found</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nchare</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Collect particle indices found elsewhere (by far fellows) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hostproxy</td><td>Charm++ host proxy to which address reductions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">found</td><td>Indices of particles found </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nchare</td><td>Total number of holder array chares </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00297">297</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00049">Assert</a>, <a class="el" href="_tracker_8h_source.html#l00338">m_nchpar</a>, <a class="el" href="_tracker_8h_source.html#l00336">m_parelse</a>, <a class="el" href="_tracker_8h_source.html#l00334">m_parmiss</a>, and <a class="el" href="_tracker_8h_source.html#l00432">signal2host_parcomcomplete()</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="comment">// Collect particle indices found elsewhere (by distant neighbors)</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>.insert( begin(found), end(found) );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (++<a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a> == nchare) {  <span class="comment">// if we have heard from everyone</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keyword">remove</span>( <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a> );  <span class="comment">// delete particles found elsewhere</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a> == <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>, <span class="stringliteral">&quot;Not all particles have been found&quot;</span> );</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">signal2host_parcomcomplete</a>( hostproxy, array );</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_a0dfd90ec743e23e63b663926f2925a84"><div class="ttname"><a href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">tk::Tracker::signal2host_parcomcomplete</a></div><div class="ttdeci">void signal2host_parcomcomplete(inciter::CProxy_Transporter &amp;host, ChareArray *array)</div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00432">Tracker.h:432</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2ee00aa387cb3472b5e25ad8117ac245"><div class="ttname"><a href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">tk::Tracker::m_parelse</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parelse</div><div class="ttdoc">Indicies of particles not found here but found by fellows. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00336">Tracker.h:336</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ac3389b2fbeeb8ac8e824d30f97dbf340"><div class="ttname"><a href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">tk::Tracker::m_parmiss</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parmiss</div><div class="ttdoc">Indicies of particles not found here (missing) </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00334">Tracker.h:334</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a23579c1606f4a3ebb924713a9dbfaa1f"><div class="ttname"><a href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">tk::Tracker::m_nchpar</a></div><div class="ttdeci">std::size_t m_nchpar</div><div class="ttdoc">Number of chares we received particles from. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00338">Tracker.h:338</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00049">Exception.h:49</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_a4629ce81761ffa3f0802a96cfdb6efd3_cgraph.svg" width="400" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa56ac1fda74b84674f5d76b52bbd8e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa56ac1fda74b84674f5d76b52bbd8e5b">&#9670;&nbsp;</a></span>collectpar()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ChareArrayProxy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::collectpar </td>
          <td>(</td>
          <td class="paramtype">const ChareArrayProxy &amp;&#160;</td>
          <td class="paramname"><em>arrayProxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>miss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find particles missing by the requestor and make those found ours </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arrayProxy</td><td>Charm++ array proxy to which address point-to-point communications (this is the proxy that holds us) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">coord</td><td>Mesh node coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fromch</td><td>Chare ID the request originates from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">miss</td><td>Indices of particles to find </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ps</td><td>Particle data associated to those particle indices to find </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00277">277</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8_c_source.html#l00071">addpar()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment">// Try to find particles missing by the requestor and own those found</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keyword">auto</span> found = <a class="code" href="classtk_1_1_tracker.html#a36aabeae60c73059b165d62cd351d83e">addpar</a>( coord, inpoel, miss, ps );</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="comment">// Send the particle indices we found back to the requestor</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      arrayProxy[ fromch ].collectedpar( found );</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_a36aabeae60c73059b165d62cd351d83e"><div class="ttname"><a href="classtk_1_1_tracker.html#a36aabeae60c73059b165d62cd351d83e">tk::Tracker::addpar</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; addpar(const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::vector&lt; std::size_t &gt; &amp;miss, const std::vector&lt; std::vector&lt; tk::real &gt; &gt; &amp;ps)</div><div class="ttdoc">Try to find particles and add those found to the list of ours. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8_c_source.html#l00071">Tracker.C:71</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_aa56ac1fda74b84674f5d76b52bbd8e5b_cgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0f709d02ecbd9691ab702ccd1221a6d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f709d02ecbd9691ab702ccd1221a6d0">&#9670;&nbsp;</a></span>doWriteParticles()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ParticleWriterProxy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::doWriteParticles </td>
          <td>(</td>
          <td class="paramtype">const ParticleWriterProxy &amp;&#160;</td>
          <td class="paramname"><em>pw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>it</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Output particles fields to file </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pw</td><td>Charm++ particle writer proxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">it</td><td>Iteration count </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00084">84</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>.</p>

<p class="reference">Referenced by <a class="el" href="_carrier_8_c_source.html#l00703">inciter::Carrier::doWriteParticles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                                                        {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      pw.ckLocalBranch()-&gt;writeCoords( it, <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.extract(0,0),</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                           <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.extract(1,0),</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                           <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.extract(2,0) );</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a394bb78c8bcd80ed0c10df00d4f3035d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a394bb78c8bcd80ed0c10df00d4f3035d">&#9670;&nbsp;</a></span>findpar()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ChareArrayProxy &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::findpar </td>
          <td>(</td>
          <td class="paramtype">const ChareArrayProxy &amp;&#160;</td>
          <td class="paramname"><em>arrayProxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>miss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find particles missing by the requestor and make those found ours </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">arrayProxy</td><td>Charm++ array proxy to which address point-to-point communications (this is the proxy that holds us) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">coord</td><td>Mesh node coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fromch</td><td>Chare ID the request originates from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">miss</td><td>Indices of particles to find </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ps</td><td>Particle data associated to those particle indices to find </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00209">209</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8_c_source.html#l00071">addpar()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="comment">// Try to find particles missing by the requestor and own those found</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keyword">auto</span> found = <a class="code" href="classtk_1_1_tracker.html#a36aabeae60c73059b165d62cd351d83e">addpar</a>( coord, inpoel, miss, ps );</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="comment">// Send the particle indices we found back to the requestor</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      arrayProxy[ fromch ].foundpar( found );</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_a36aabeae60c73059b165d62cd351d83e"><div class="ttname"><a href="classtk_1_1_tracker.html#a36aabeae60c73059b165d62cd351d83e">tk::Tracker::addpar</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; addpar(const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, const std::vector&lt; std::size_t &gt; &amp;miss, const std::vector&lt; std::vector&lt; tk::real &gt; &gt; &amp;ps)</div><div class="ttdoc">Try to find particles and add those found to the list of ours. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8_c_source.html#l00071">Tracker.C:71</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_a394bb78c8bcd80ed0c10df00d4f3035d_cgraph.svg" width="100%" height="401"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="abce3ebc0d95530100e00cf5c545d00f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abce3ebc0d95530100e00cf5c545d00f5">&#9670;&nbsp;</a></span>foundpar()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class HostProxy , class ChareArrayProxy , class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::foundpar </td>
          <td>(</td>
          <td class="paramtype">HostProxy &amp;&#160;</td>
          <td class="paramname"><em>hostproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArrayProxy &amp;&#160;</td>
          <td class="paramname"><em>arrayProxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt; &gt;&#160;</td>
          <td class="paramname"><em>msum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArray *const&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Receive particle indices found elsewhere (by fellow neighbors) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hostproxy</td><td>Charm++ host proxy to which address reductions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arrayProxy</td><td>Charm++ array proxy to whose all elements te address our desparate broadcast (this is the proxy that holds us) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msum</td><td>Mesh chunks surrounding mesh chunks; we only use the keys of this container to address fellow Charm++ chare array elements via the arrayProxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chid</td><td>Charm++ array index (thisIndex of the holder class) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">found</td><td>Indices of particles found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00235">235</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00338">m_nchpar</a>, <a class="el" href="_tracker_8h_source.html#l00336">m_parelse</a>, <a class="el" href="_tracker_8h_source.html#l00334">m_parmiss</a>, <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>, and <a class="el" href="_tracker_8h_source.html#l00432">signal2host_parcomcomplete()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>.insert( begin(found), end(found) );</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">if</span> (++<a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a> == msum.size()) {    <span class="comment">// if we have heard from all neighbors</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keyword">remove</span>( <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a> );  <span class="comment">// delete particles found elsewhere</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">// find particle that are still have not been found (by close neighbors)</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        std::set&lt; std::size_t &gt; far;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        std::set_difference( begin(<a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>), end(<a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>),</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                             begin(<a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>), end(<a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>), </div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                             std::inserter( far, begin(far) ) );</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a> = far;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">// if there are still missing particles (not found by close neighbors we</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">// share mesh nodes with), we resort to requesting them to be searched by</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">// all holder chares</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>.empty()) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          <a class="code" href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">signal2host_parcomcomplete</a>( hostproxy, array );</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;          std::vector&lt; std::vector&lt; tk::real &gt; &gt; pexp;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>) pexp.push_back( <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>[i] );</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          <a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a> = 0;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;          std::vector&lt; std::size_t &gt; miss( begin(m_parmiss), end(m_parmiss) );</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>.clear();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          arrayProxy.collectpar( chid, miss, pexp ); <span class="comment">// broadcast to everyone</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_a0dfd90ec743e23e63b663926f2925a84"><div class="ttname"><a href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">tk::Tracker::signal2host_parcomcomplete</a></div><div class="ttdeci">void signal2host_parcomcomplete(inciter::CProxy_Transporter &amp;host, ChareArray *array)</div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00432">Tracker.h:432</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2ee00aa387cb3472b5e25ad8117ac245"><div class="ttname"><a href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">tk::Tracker::m_parelse</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parelse</div><div class="ttdoc">Indicies of particles not found here but found by fellows. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00336">Tracker.h:336</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ac3389b2fbeeb8ac8e824d30f97dbf340"><div class="ttname"><a href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">tk::Tracker::m_parmiss</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parmiss</div><div class="ttdoc">Indicies of particles not found here (missing) </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00334">Tracker.h:334</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a23579c1606f4a3ebb924713a9dbfaa1f"><div class="ttname"><a href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">tk::Tracker::m_nchpar</a></div><div class="ttdeci">std::size_t m_nchpar</div><div class="ttdoc">Number of chares we received particles from. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00338">Tracker.h:338</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_abce3ebc0d95530100e00cf5c545d00f5_cgraph.svg" width="379" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a999e420acc4782b98af0305b7acbae6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a999e420acc4782b98af0305b7acbae6e">&#9670;&nbsp;</a></span>genpar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tracker::genpar </td>
          <td>(</td>
          <td class="paramtype">const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nchare</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate particles to each of our mesh cells. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">coord</td><td>Mesh node coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nchare</td><td>Total number of holder array chares </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chid</td><td>Host chare ID (thisIndex) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>F.J. Gonzalez </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8_c_source.html#l00024">24</a> of file <a class="el" href="_tracker_8_c_source.html">Tracker.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00049">Assert</a>, <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>, and <a class="el" href="_data_8h_source.html#l00561">tk::min()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_carrier_8_c_source.html#l00248">inciter::Carrier::setup()</a>, and <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.size() &gt;= <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk(),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;          <span class="stringliteral">&quot;Element-of-particle array not large enough&quot;</span> );</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keyword">auto</span> rng = <a class="code" href="classtk_1_1_random123.html">tk::Random123&lt; r123::Threefry2x64 &gt;</a>( nchare );</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// Create a reference of mesh point coordinates</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; x = coord[0];</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; y = coord[1];</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; z = coord[2];</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// Generate npar number of particles into each mesh cell</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keyword">auto</span> npar = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk() / (inpoel.size()/4);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordflow">for</span> (std::size_t e=0; e&lt;inpoel.size()/4; ++e) {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">for</span> (std::size_t p=0; p&lt;npar; ++p) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      std::array&lt; tk::real, 4 &gt; N;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      rng.uniform( chid, 3, N.data() );</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      N[3] = 1.0 - N[0] - N[1] - N[2];</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[0],1.0-N[0]) &gt; 0.0 &amp;&amp; <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[1],1.0-N[1]) &gt; 0.0 &amp;&amp;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;           <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[2],1.0-N[2]) &gt; 0.0 &amp;&amp; <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[3],1.0-N[3]) &gt; 0.0 ) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> A = inpoel[e*4+0];</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> B = inpoel[e*4+1];</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> C = inpoel[e*4+2];</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> D = inpoel[e*4+3];</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> i = e * npar + p;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,0,0) = x[A]*N[0] + x[B]*N[1] + x[C]*N[2] + x[D]*N[3];</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,1,0) = y[A]*N[0] + y[B]*N[1] + y[C]*N[2] + y[D]*N[3];</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(i,2,0) = z[A]*N[0] + z[B]*N[1] + z[C]*N[2] + z[D]*N[3];</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[i] = e;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      } <span class="keywordflow">else</span> --p; <span class="comment">// retry if particle was not generated into cell</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_random123_html"><div class="ttname"><a href="classtk_1_1_random123.html">tk::Random123</a></div><div class="ttdoc">Random123-based random number generator used polymorphically with tk::RNG. </div><div class="ttdef"><b>Definition:</b> <a href="_random123_8h_source.html#l00031">Random123.h:31</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="namespacetk_html_afd730d099e698f124362ef8c01483e0f"><div class="ttname"><a href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">tk::min</a></div><div class="ttdeci">Data&lt; Layout &gt; min(const Data&lt; Layout &gt; &amp;a, const Data&lt; Layout &gt; &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="_data_8h_source.html#l00561">Data.h:561</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00049">Exception.h:49</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_a999e420acc4782b98af0305b7acbae6e_cgraph.svg" width="428" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ae69f0ff9d74d282d162fec18a0f0f508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae69f0ff9d74d282d162fec18a0f0f508">&#9670;&nbsp;</a></span>parinel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tracker::parinel </td>
          <td>(</td>
          <td class="paramtype">const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::array&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>, 4 &gt; &amp;&#160;</td>
          <td class="paramname"><em>N</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search particle in a single mesh cell. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">coord</td><td>Mesh node coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>Particle index </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">e</td><td>Mesh cell index </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">N</td><td>Shapefunctions evaluated at the particle position </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if particle is in mesh cell </dd></dl>
<dl class="section author"><dt>Author</dt><dd>F.J. Gonzalez </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8_c_source.html#l00109">109</a> of file <a class="el" href="_tracker_8_c_source.html">Tracker.C</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>, and <a class="el" href="_data_8h_source.html#l00561">tk::min()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8_c_source.html#l00071">addpar()</a>, and <a class="el" href="_tracker_8h_source.html#l00133">track()</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Tetrahedron node indices</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> A = inpoel[e*4+0];</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> B = inpoel[e*4+1];</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> C = inpoel[e*4+2]; </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> D = inpoel[e*4+3];</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// Tetrahedron node coordinates</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; x = coord[0];</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; y = coord[1];</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; z = coord[2];</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// Particle coordinates</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; xp = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(p,0,0);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; yp = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(p,1,0);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; zp = <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>(p,2,0);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// Evaluate linear shapefunctions at particle locations using Cramer&#39;s Rule</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">//    | xp |   | x1 x2 x3 x4 |   | N1 |</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">//    | yp | = | y1 y2 y3 y4 | • | N2 |</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">//    | zp |   | z1 z2 z3 z4 |   | N3 |</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">//    | 1  |   | 1  1  1  1  |   | N4 |</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> DetX = (y[B]*z[C] - y[C]*z[B] - y[B]*z[D] + y[D]*z[B] + </div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    y[C]*z[D] - y[D]*z[C])*x[A] + x[B]*y[C]*z[A] - x[B]*y[A]*z[C] +</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    x[C]*y[A]*z[B] - x[C]*y[B]*z[A] + x[B]*y[A]*z[D] - x[B]*y[D]*z[A] -</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    x[D]*y[A]*z[B] + x[D]*y[B]*z[A] - x[C]*y[A]*z[D] + x[C]*y[D]*z[A] +</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    x[D]*y[A]*z[C] - x[D]*y[C]*z[A] - x[B]*y[C]*z[D] + x[B]*y[D]*z[C] +</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    x[C]*y[B]*z[D] - x[C]*y[D]*z[B] - x[D]*y[B]*z[C] + x[D]*y[C]*z[B];</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> DetX1 = (y[D]*z[C] - y[C]*z[D] + y[C]*zp - yp*z[C] -</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    y[D]*zp + yp*z[D])*x[B] + x[C]*y[B]*z[D] - x[C]*y[D]*z[B] - </div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    x[D]*y[B]*z[C] + x[D]*y[C]*z[B] - x[C]*y[B]*zp + x[C]*yp*z[B] +</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    xp*y[B]*z[C] - xp*y[C]*z[B] + x[D]*y[B]*zp - x[D]*yp*z[B] - </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    xp*y[B]*z[D] + xp*y[D]*z[B] + x[C]*y[D]*zp - x[C]*yp*z[D] - </div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    x[D]*y[C]*zp + x[D]*yp*z[C] + xp*y[C]*z[D] - xp*y[D]*z[C];</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> DetX2 = (y[C]*z[D] - y[D]*z[C] - y[C]*zp + yp*z[C] +</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    y[D]*zp - yp*z[D])*x[A] + x[C]*y[D]*z[A] - x[C]*y[A]*z[D] +</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    x[D]*y[A]*z[C] - x[D]*y[C]*z[A] + x[C]*y[A]*zp - x[C]*yp*z[A] -</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    xp*y[A]*z[C] + xp*y[C]*z[A] - x[D]*y[A]*zp + x[D]*yp*z[A] +</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    xp*y[A]*z[D] - xp*y[D]*z[A] - x[C]*y[D]*zp + x[C]*yp*z[D] + </div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    x[D]*y[C]*zp - x[D]*yp*z[C] - xp*y[C]*z[D] + xp*y[D]*z[C];</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> DetX3 = (y[D]*z[B] - y[B]*z[D] + y[B]*zp - yp*z[B] -</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    y[D]*zp + yp*z[D])*x[A] + x[B]*y[A]*z[D] - x[B]*y[D]*z[A] -</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    x[D]*y[A]*z[B] + x[D]*y[B]*z[A] - x[B]*y[A]*zp + x[B]*yp*z[A] +</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    xp*y[A]*z[B] - xp*y[B]*z[A] + x[D]*y[A]*zp - x[D]*yp*z[A] - </div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    xp*y[A]*z[D] + xp*y[D]*z[A] + x[B]*y[D]*zp - x[B]*yp*z[D] - </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    x[D]*y[B]*zp + x[D]*yp*z[B] + xp*y[B]*z[D] - xp*y[D]*z[B];</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> DetX4 = (y[B]*z[C] - y[C]*z[B] - y[B]*zp + yp*z[B] +</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    y[C]*zp - yp*z[C])*x[A] + x[B]*y[C]*z[A] - x[B]*y[A]*z[C] +</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    x[C]*y[A]*z[B] - x[C]*y[B]*z[A] + x[B]*y[A]*zp - x[B]*yp*z[A] -</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    xp*y[A]*z[B] + xp*y[B]*z[A] - x[C]*y[A]*zp + x[C]*yp*z[A] +</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    xp*y[A]*z[C] - xp*y[C]*z[A] - x[B]*y[C]*zp + x[B]*yp*z[C] +</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    x[C]*y[B]*zp - x[C]*yp*z[B] - xp*y[B]*z[C] + xp*y[C]*z[B];</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Shape functions evaluated at particle location</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  N[0] = DetX1/DetX;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  N[1] = DetX2/DetX;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  N[2] = DetX3/DetX;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  N[3] = DetX4/DetX;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="comment">// if min( N^i, 1-N^i ) &gt; 0 for all i, particle is in cell</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[0],1.0-N[0]) &gt; 0 &amp;&amp; <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[1],1.0-N[1]) &gt; 0 &amp;&amp;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;       <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[2],1.0-N[2]) &gt; 0 &amp;&amp; <a class="code" href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">std::min</a>(N[3],1.0-N[3]) &gt; 0 )</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.resize( p+1 );</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[ p ] = e; <span class="comment">// store element of particle</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="namespacetk_html_afd730d099e698f124362ef8c01483e0f"><div class="ttname"><a href="namespacetk.html#afd730d099e698f124362ef8c01483e0f">tk::min</a></div><div class="ttdeci">Data&lt; Layout &gt; min(const Data&lt; Layout &gt; &amp;a, const Data&lt; Layout &gt; &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="_data_8h_source.html#l00561">Data.h:561</a></div></div>
<div class="ttc" id="namespacetk_html_a1a96ada94b7e2911ecca0a360f305575"><div class="ttname"><a href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a></div><div class="ttdeci">double real</div><div class="ttdoc">Real number type used throughout the whole code. </div><div class="ttdef"><b>Definition:</b> <a href="_base_2_types_8h_source.html#l00018">Types.h:18</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_ae69f0ff9d74d282d162fec18a0f0f508_cgraph.svg" width="427" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3e06c5471f859a201908ff2f7a74d682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e06c5471f859a201908ff2f7a74d682">&#9670;&nbsp;</a></span>pup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::pup </td>
          <td>(</td>
          <td class="paramtype">PUP::er &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pack/Unpack serialize member function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p</td><td>Charm++'s PUP::er serializer object reference </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00314">314</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, <a class="el" href="_tracker_8h_source.html#l00338">m_nchpar</a>, <a class="el" href="_tracker_8h_source.html#l00336">m_parelse</a>, <a class="el" href="_tracker_8h_source.html#l00334">m_parmiss</a>, and <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                         {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      p | <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      p | <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      p | <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      p | <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      p | <a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2ee00aa387cb3472b5e25ad8117ac245"><div class="ttname"><a href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">tk::Tracker::m_parelse</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parelse</div><div class="ttdoc">Indicies of particles not found here but found by fellows. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00336">Tracker.h:336</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ac3389b2fbeeb8ac8e824d30f97dbf340"><div class="ttname"><a href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">tk::Tracker::m_parmiss</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parmiss</div><div class="ttdoc">Indicies of particles not found here (missing) </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00334">Tracker.h:334</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a23579c1606f4a3ebb924713a9dbfaa1f"><div class="ttname"><a href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">tk::Tracker::m_nchpar</a></div><div class="ttdeci">std::size_t m_nchpar</div><div class="ttdoc">Number of chares we received particles from. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00338">Tracker.h:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d8b7d2cd845457521cab52a3634a576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d8b7d2cd845457521cab52a3634a576">&#9670;&nbsp;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Tracker::remove </td>
          <td>(</td>
          <td class="paramtype">const std::set&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a set of particles. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>Set of particle indices whose data to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8_c_source.html#l00220">220</a> of file <a class="el" href="_tracker_8_c_source.html">Tracker.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00049">Assert</a>, <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, and <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.rm( idx );</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keyword">auto</span> rem = [ &amp;idx ]( std::size_t i ) -&gt; <span class="keywordtype">bool</span> {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (idx.find(i) != end(idx)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  };</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  std::size_t last = 0;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">for</span>(std::size_t i=0; i&lt;<a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.size(); ++i, ++last) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">while</span>( rem(i) ) ++i;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (i &gt;= <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.size()) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[last] = <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[i];</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.resize( last );</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk() == <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>.size(),</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          <span class="stringliteral">&quot;Number of particles and the number of host elements unequal&quot;</span> );</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00049">Exception.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5eb1e53ac7ead899eb228f38e1fa6eaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5eb1e53ac7ead899eb228f38e1fa6eaa">&#9670;&nbsp;</a></span>signal2host_nparcomplete()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::signal2host_nparcomplete </td>
          <td>(</td>
          <td class="paramtype">const inciter::CProxy_Transporter &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArray *&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tell the host that we are done with sending our number of particles </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Host proxy to contribute to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00420">420</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00069">writeParticles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keyword">using</span> inciter::CkIndex_Transporter;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      array-&gt;contribute(</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        CkCallback( CkIndex_Transporter::redn_wrapper_nparcomplete(NULL),</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    host ) );</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a0dfd90ec743e23e63b663926f2925a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dfd90ec743e23e63b663926f2925a84">&#9670;&nbsp;</a></span>signal2host_parcomcomplete()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::signal2host_parcomcomplete </td>
          <td>(</td>
          <td class="paramtype">inciter::CProxy_Transporter &amp;&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArray *&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tell the host that we are done communicating particles </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Host proxy to contribute to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00432">432</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00297">collectedpar()</a>, <a class="el" href="_tracker_8h_source.html#l00235">foundpar()</a>, and <a class="el" href="_tracker_8h_source.html#l00133">track()</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="comment">// send progress report to host</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classtk_1_1_tracker.html#a37817243745f6728a3f21ad029614464">m_feedback</a>) host.chtrack();</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a> = 0;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>.clear();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">m_parelse</a>.clear();</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keyword">using</span> inciter::CkIndex_Transporter;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      array-&gt;contribute(</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        CkCallback( CkIndex_Transporter::redn_wrapper_parcomcomplete(NULL),</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    host ) );</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_a37817243745f6728a3f21ad029614464"><div class="ttname"><a href="classtk_1_1_tracker.html#a37817243745f6728a3f21ad029614464">tk::Tracker::m_feedback</a></div><div class="ttdeci">bool m_feedback</div><div class="ttdoc">Bool that determines whether to send sub-task feedback to host. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00343">Tracker.h:343</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2ee00aa387cb3472b5e25ad8117ac245"><div class="ttname"><a href="classtk_1_1_tracker.html#a2ee00aa387cb3472b5e25ad8117ac245">tk::Tracker::m_parelse</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parelse</div><div class="ttdoc">Indicies of particles not found here but found by fellows. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00336">Tracker.h:336</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ac3389b2fbeeb8ac8e824d30f97dbf340"><div class="ttname"><a href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">tk::Tracker::m_parmiss</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parmiss</div><div class="ttdoc">Indicies of particles not found here (missing) </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00334">Tracker.h:334</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a23579c1606f4a3ebb924713a9dbfaa1f"><div class="ttname"><a href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">tk::Tracker::m_nchpar</a></div><div class="ttdeci">std::size_t m_nchpar</div><div class="ttdoc">Number of chares we received particles from. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00338">Tracker.h:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3efd3eb287015e97bce36c2c85086940"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efd3eb287015e97bce36c2c85086940">&#9670;&nbsp;</a></span>track()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class HostProxy , class ChareArrayProxy , class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::track </td>
          <td>(</td>
          <td class="paramtype">HostProxy &amp;&#160;</td>
          <td class="paramname"><em>hostproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ChareArrayProxy &amp;&#160;</td>
          <td class="paramname"><em>arrayProxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::array&lt; std::vector&lt; <a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a> &gt;, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::size_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>inpoel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; int, std::vector&lt; std::size_t &gt;&gt;&#160;</td>
          <td class="paramname"><em>msum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArray *const&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>stage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetk.html#a1a96ada94b7e2911ecca0a360f305575">tk::real</a>&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Advance our particles and initiate search for their new mesh cells </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hostproxy</td><td>Charm++ host proxy to which address reductions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arrayProxy</td><td>Charm++ array proxy to which address point-to-point communications (this is the proxy that holds us) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">coord</td><td>Mesh node coordinates </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inpoel</td><td>Mesh element connectivity </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msum</td><td>Mesh chunks surrounding mesh chunks; we only use the keys of this container to address fellow Charm++ chare array elements via the arrayProxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chid</td><td>Charm++ array index (thisIndex of the holder class) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stage</td><td>Time step stage </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dt</td><td>Time step size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>F.J. Gonzalez </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00133">133</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00099">advanceParticle()</a>, <a class="el" href="_tracker_8h_source.html#l00332">m_elp</a>, <a class="el" href="_tracker_8h_source.html#l00341">m_esupel</a>, <a class="el" href="_tracker_8h_source.html#l00338">m_nchpar</a>, <a class="el" href="_tracker_8h_source.html#l00334">m_parmiss</a>, <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>, <a class="el" href="_tracker_8_c_source.html#l00109">parinel()</a>, and <a class="el" href="_tracker_8h_source.html#l00432">signal2host_parcomcomplete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_carrier_8_c_source.html#l01145">inciter::Carrier::apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">// Only advance particles in the final time step stage</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">if</span> (stage &lt; 1) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">signal2host_parcomcomplete</a>( hostproxy, array );</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="comment">// Lambda to attempt to find and advance particle i in element e. Returns</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// true if the particle was found (and advanced), false if was not found.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      std::array&lt; tk::real, 4 &gt; N;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keyword">auto</span> adv = [ <span class="keyword">this</span>, array, &amp;N, &amp;dt, &amp;coord, &amp;inpoel ]</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                ( std::size_t i, std::size_t e ) -&gt; <span class="keywordtype">bool</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classtk_1_1_tracker.html#ae69f0ff9d74d282d162fec18a0f0f508">parinel</a>( coord, inpoel, i, e, N )) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;          <a class="code" href="classtk_1_1_tracker.html#a2ac4fe159390a0681c2856ad5ae40b8b">advanceParticle</a>( array, i, e, dt, N );</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      };</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="comment">// Search cells of our mesh chunk for all particles</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">for</span> (std::size_t i=0; i&lt;<a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk(); ++i) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">// Get element ID where particle i has last been seen</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">bool</span> found = adv( i, <a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[i] );</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">// Next search in the elements surroundings the points of the element</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">// where the particle has last been found</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          <span class="keyword">auto</span> last = <a class="code" href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">m_esupel</a>.second[<a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[i]+1];</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> j=<a class="code" href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">m_esupel</a>.second[<a class="code" href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">m_elp</a>[i]]+1; j&lt;=last; ++j) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            found = adv( i, <a class="code" href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">m_esupel</a>.first[j] );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (found) j = last+1;  <span class="comment">// search for next particle</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// Next search all cells in our chunk of the mesh</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <span class="keywordflow">for</span> (std::size_t e=0; e&lt;inpoel.size()/4; ++e) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            found = adv( i, e );</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">if</span> (found) e = inpoel.size()/4;  <span class="comment">// search for next particle</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;          }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <span class="comment">// If the particle still has not been found, it left our chunk of the</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="comment">// mesh, mark as missing (will initiate communication to find it)</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <span class="keywordflow">if</span> (!found) <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>.insert( i );</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// If we have no missing particles, we are done, if we do, send out</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="comment">// requests to find them to those ChareArray chares which we neighbor</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="comment">// mesh cells with.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>.empty()) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">signal2host_parcomcomplete</a>( hostproxy, array );</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        std::vector&lt; std::vector&lt; tk::real &gt; &gt; pexp;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i : <a class="code" href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">m_parmiss</a>) pexp.push_back( <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>[i] );</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">m_nchpar</a> = 0;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        std::vector&lt; std::size_t &gt; miss( begin(m_parmiss), end(m_parmiss) );</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; n : msum)</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          arrayProxy[ n.first ].findpar( chid, miss, pexp );</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_a0dfd90ec743e23e63b663926f2925a84"><div class="ttname"><a href="classtk_1_1_tracker.html#a0dfd90ec743e23e63b663926f2925a84">tk::Tracker::signal2host_parcomcomplete</a></div><div class="ttdeci">void signal2host_parcomcomplete(inciter::CProxy_Transporter &amp;host, ChareArray *array)</div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00432">Tracker.h:432</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a6edff87089032ed16723f3f0d8fc50d9"><div class="ttname"><a href="classtk_1_1_tracker.html#a6edff87089032ed16723f3f0d8fc50d9">tk::Tracker::m_elp</a></div><div class="ttdeci">std::vector&lt; std::size_t &gt; m_elp</div><div class="ttdoc">Element ID in which a particle has last been found for all particles. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00332">Tracker.h:332</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2ac4fe159390a0681c2856ad5ae40b8b"><div class="ttname"><a href="classtk_1_1_tracker.html#a2ac4fe159390a0681c2856ad5ae40b8b">tk::Tracker::advanceParticle</a></div><div class="ttdeci">void advanceParticle(ChareArray *const array, std::size_t i, std::size_t e, tk::real dt, const std::array&lt; tk::real, 4 &gt; &amp;Np)</div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00099">Tracker.h:99</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a2af2d33797985ed91d763ac0e40f9477"><div class="ttname"><a href="classtk_1_1_tracker.html#a2af2d33797985ed91d763ac0e40f9477">tk::Tracker::m_esupel</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; m_esupel</div><div class="ttdoc">Elements surrounding points of elements of mesh chunk we operate on. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00341">Tracker.h:341</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ac3389b2fbeeb8ac8e824d30f97dbf340"><div class="ttname"><a href="classtk_1_1_tracker.html#ac3389b2fbeeb8ac8e824d30f97dbf340">tk::Tracker::m_parmiss</a></div><div class="ttdeci">std::set&lt; std::size_t &gt; m_parmiss</div><div class="ttdoc">Indicies of particles not found here (missing) </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00334">Tracker.h:334</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a23579c1606f4a3ebb924713a9dbfaa1f"><div class="ttname"><a href="classtk_1_1_tracker.html#a23579c1606f4a3ebb924713a9dbfaa1f">tk::Tracker::m_nchpar</a></div><div class="ttdeci">std::size_t m_nchpar</div><div class="ttdoc">Number of chares we received particles from. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00338">Tracker.h:338</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_ae69f0ff9d74d282d162fec18a0f0f508"><div class="ttname"><a href="classtk_1_1_tracker.html#ae69f0ff9d74d282d162fec18a0f0f508">tk::Tracker::parinel</a></div><div class="ttdeci">bool parinel(const std::array&lt; std::vector&lt; tk::real &gt;, 3 &gt; &amp;coord, const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t p, std::size_t e, std::array&lt; tk::real, 4 &gt; &amp;N)</div><div class="ttdoc">Search particle in a single mesh cell. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8_c_source.html#l00109">Tracker.C:109</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_a3efd3eb287015e97bce36c2c85086940_cgraph.svg" width="100%" height="411"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae573b715e9b64f058bea66838d84f05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae573b715e9b64f058bea66838d84f05f">&#9670;&nbsp;</a></span>writeParticles()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class HostProxy , class ParticleWriterProxy , class ChareArray &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tk::Tracker::writeParticles </td>
          <td>(</td>
          <td class="paramtype">HostProxy &amp;&#160;</td>
          <td class="paramname"><em>hostproxy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ParticleWriterProxy &amp;&#160;</td>
          <td class="paramname"><em>pw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ChareArray *const&#160;</td>
          <td class="paramname"><em>array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Output number of particles we will write to file in this step </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hostproxy</td><td>Charm++ host proxy to which address reductions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pw</td><td>Charm++ particle writer proxy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">array</td><td>Charm++ array object pointer of the holder class </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00069">69</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">References <a class="el" href="_tracker_8h_source.html#l00330">m_particles</a>, and <a class="el" href="_tracker_8h_source.html#l00420">signal2host_nparcomplete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_carrier_8_c_source.html#l00948">inciter::Carrier::out()</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="comment">// Send number of partciles we will contribute to particle writer</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      pw.ckLocalBranch()-&gt;npar( <a class="code" href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">m_particles</a>.nunk() );</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="comment">// Tell the host that we are done with sending our number of particles</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <a class="code" href="classtk_1_1_tracker.html#a5eb1e53ac7ead899eb228f38e1fa6eaa">signal2host_nparcomplete</a>( hostproxy, array );</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div><div class="ttc" id="classtk_1_1_tracker_html_ad985a8413c8ea2f94e2777d503dabcef"><div class="ttname"><a href="classtk_1_1_tracker.html#ad985a8413c8ea2f94e2777d503dabcef">tk::Tracker::m_particles</a></div><div class="ttdeci">tk::Particles m_particles</div><div class="ttdoc">Particle properties. </div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00330">Tracker.h:330</a></div></div>
<div class="ttc" id="classtk_1_1_tracker_html_a5eb1e53ac7ead899eb228f38e1fa6eaa"><div class="ttname"><a href="classtk_1_1_tracker.html#a5eb1e53ac7ead899eb228f38e1fa6eaa">tk::Tracker::signal2host_nparcomplete</a></div><div class="ttdeci">void signal2host_nparcomplete(const inciter::CProxy_Transporter &amp;host, ChareArray *array)</div><div class="ttdef"><b>Definition:</b> <a href="_tracker_8h_source.html#l00420">Tracker.h:420</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_tracker_ae573b715e9b64f058bea66838d84f05f_cgraph.svg" width="406" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="aaad7a1dab5ae213627e1a0ed6dc5b566"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad7a1dab5ae213627e1a0ed6dc5b566">&#9670;&nbsp;</a></span>operator|</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void operator| </td>
          <td>(</td>
          <td class="paramtype">PUP::er &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtk_1_1_tracker.html">Tracker</a> &amp;&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pack/Unpack serialize operator|. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p</td><td>Charm++'s PUP::er serializer object reference </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">i</td><td><a class="el" href="classtk_1_1_tracker.html" title="Tracker advances Lagrangian particles in state space. ">Tracker</a> object reference </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00325">325</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{ i.pup(p); }</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6edff87089032ed16723f3f0d8fc50d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6edff87089032ed16723f3f0d8fc50d9">&#9670;&nbsp;</a></span>m_elp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::size_t &gt; tk::Tracker::m_elp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Element ID in which a particle has last been found for all particles. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00332">332</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8_c_source.html#l00071">addpar()</a>, <a class="el" href="_tracker_8_c_source.html#l00024">genpar()</a>, <a class="el" href="_tracker_8_c_source.html#l00109">parinel()</a>, <a class="el" href="_tracker_8h_source.html#l00314">pup()</a>, <a class="el" href="_tracker_8_c_source.html#l00220">remove()</a>, <a class="el" href="_tracker_8h_source.html#l00133">track()</a>, and <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>

</div>
</div>
<a id="a2af2d33797985ed91d763ac0e40f9477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af2d33797985ed91d763ac0e40f9477">&#9670;&nbsp;</a></span>m_esupel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; tk::Tracker::m_esupel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Elements surrounding points of elements of mesh chunk we operate on. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00341">341</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00133">track()</a>, and <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>

</div>
</div>
<a id="a37817243745f6728a3f21ad029614464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37817243745f6728a3f21ad029614464">&#9670;&nbsp;</a></span>m_feedback</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tk::Tracker::m_feedback</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bool that determines whether to send sub-task feedback to host. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00343">343</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>

</div>
</div>
<a id="a23579c1606f4a3ebb924713a9dbfaa1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23579c1606f4a3ebb924713a9dbfaa1f">&#9670;&nbsp;</a></span>m_nchpar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t tk::Tracker::m_nchpar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of chares we received particles from. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00338">338</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00297">collectedpar()</a>, <a class="el" href="_tracker_8h_source.html#l00235">foundpar()</a>, <a class="el" href="_tracker_8h_source.html#l00314">pup()</a>, <a class="el" href="_tracker_8h_source.html#l00133">track()</a>, and <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>

</div>
</div>
<a id="a2ee00aa387cb3472b5e25ad8117ac245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee00aa387cb3472b5e25ad8117ac245">&#9670;&nbsp;</a></span>m_parelse</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; std::size_t &gt; tk::Tracker::m_parelse</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicies of particles not found here but found by fellows. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00336">336</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00297">collectedpar()</a>, <a class="el" href="_tracker_8h_source.html#l00235">foundpar()</a>, <a class="el" href="_tracker_8h_source.html#l00314">pup()</a>, and <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>

</div>
</div>
<a id="ac3389b2fbeeb8ac8e824d30f97dbf340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3389b2fbeeb8ac8e824d30f97dbf340">&#9670;&nbsp;</a></span>m_parmiss</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; std::size_t &gt; tk::Tracker::m_parmiss</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicies of particles not found here (missing) </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00334">334</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8h_source.html#l00297">collectedpar()</a>, <a class="el" href="_tracker_8h_source.html#l00235">foundpar()</a>, <a class="el" href="_tracker_8h_source.html#l00314">pup()</a>, <a class="el" href="_tracker_8h_source.html#l00133">track()</a>, and <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>.</p>

</div>
</div>
<a id="ad985a8413c8ea2f94e2777d503dabcef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad985a8413c8ea2f94e2777d503dabcef">&#9670;&nbsp;</a></span>m_particles</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tk::Particles tk::Tracker::m_particles</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Particle properties. </p>

<p class="definition">Definition at line <a class="el" href="_tracker_8h_source.html#l00330">330</a> of file <a class="el" href="_tracker_8h_source.html">Tracker.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_tracker_8_c_source.html#l00071">addpar()</a>, <a class="el" href="_tracker_8h_source.html#l00099">advanceParticle()</a>, <a class="el" href="_tracker_8_c_source.html#l00201">applyParBC()</a>, <a class="el" href="_tracker_8h_source.html#l00084">doWriteParticles()</a>, <a class="el" href="_tracker_8h_source.html#l00235">foundpar()</a>, <a class="el" href="_tracker_8_c_source.html#l00024">genpar()</a>, <a class="el" href="_tracker_8_c_source.html#l00109">parinel()</a>, <a class="el" href="_tracker_8h_source.html#l00314">pup()</a>, <a class="el" href="_tracker_8_c_source.html#l00220">remove()</a>, <a class="el" href="_tracker_8h_source.html#l00133">track()</a>, <a class="el" href="_tracker_8h_source.html#l00044">Tracker()</a>, and <a class="el" href="_tracker_8h_source.html#l00069">writeParticles()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/tmp/q/quinoa/src/Particles/<a class="el" href="_tracker_8h_source.html">Tracker.h</a></li>
<li>/tmp/q/quinoa/src/Particles/<a class="el" href="_tracker_8_c_source.html">Tracker.C</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 12 2017 05:37:27 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
