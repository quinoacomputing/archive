<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: /tmp/TeamCity-14/work/821a9fd6f64749d9/src/Control/SystemComponents.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3ff0826a6d651abbf0f532354e1ac7dc.html">Control</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">SystemComponents.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Operations on numbers of scalar components of systems of equations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="for__each_8h_source.html">NoWarning/for_each.h</a>&quot;</code><br />
<code>#include &lt;boost/mpl/remove.hpp&gt;</code><br />
<code>#include &lt;boost/mpl/at.hpp&gt;</code><br />
<code>#include &quot;<a class="el" href="_make__list_8h_source.html">Make_list.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_tagged_tuple_8h_source.html">TaggedTuple.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_stat_ctr_8h_source.html">StatCtr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_keywords_8h_source.html">Keywords.h</a>&quot;</code><br />
</div>
<p><a href="_system_components_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1ctr_1_1ncomponents.html">tk::ctr::ncomponents&lt; Tags &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of components storage.  <a href="classtk_1_1ctr_1_1ncomponents.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1ctr_1_1ncomponents_1_1zero.html">tk::ctr::ncomponents&lt; Tags &gt;::zero</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function object for zeroing all number of components.  <a href="structtk_1_1ctr_1_1ncomponents_1_1zero.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1ctr_1_1ncomponents_1_1addncomp.html">tk::ctr::ncomponents&lt; Tags &gt;::addncomp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function object for computing the total number of components (i.e., the sum of all of the number of components)  <a href="structtk_1_1ctr_1_1ncomponents_1_1addncomp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1ctr_1_1ncomponents_1_1addncomp4tag.html">tk::ctr::ncomponents&lt; Tags &gt;::addncomp4tag&lt; tag &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function object for computing the offset for a given tag (i.e., the sum of the number of components up to a given tag)  <a href="structtk_1_1ctr_1_1ncomponents_1_1addncomp4tag.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacetk"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk.html">tk</a></td></tr>
<tr class="memdesc:namespacetk"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toolkit declarations and definitions for general purpose utilities. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespacetk_1_1ctr"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1ctr.html">tk::ctr</a></td></tr>
<tr class="memdesc:namespacetk_1_1ctr"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toolkit control, general purpose user input to internal data transfer. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6cf6d7d0e1054ff78d756b64677281aa"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1ctr.html#a6cf6d7d0e1054ff78d756b64677281aa">tk::ctr::ncomp_type</a> = kw::ncomp::info::expect::type</td></tr>
<tr class="memdesc:a6cf6d7d0e1054ff78d756b64677281aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inherit type of number of components from keyword 'ncomp'.  <a href="namespacetk_1_1ctr.html#a6cf6d7d0e1054ff78d756b64677281aa">More...</a><br /></td></tr>
<tr class="separator:a6cf6d7d0e1054ff78d756b64677281aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d01fe23a2430b5491d145bc3193a09"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1ctr.html#a39d01fe23a2430b5491d145bc3193a09">tk::ctr::OffsetMap</a> = std::map&lt; char, ncomp_type, CaseInsensitiveCharLess &gt;</td></tr>
<tr class="memdesc:a39d01fe23a2430b5491d145bc3193a09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map associating a dependent variable of a differential equation to its offset in its data array storing its dependent variables.  <a href="namespacetk_1_1ctr.html#a39d01fe23a2430b5491d145bc3193a09">More...</a><br /></td></tr>
<tr class="separator:a39d01fe23a2430b5491d145bc3193a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Operations on numbers of scalar components of systems of equations. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>2012-2015, J. Bakosi, 2016-2017, Los Alamos National Security, LLC.</dd></dl>
<p>Operations on numbers of scalar components of systems of equations, e.g. multiple equation sets of a physical model or a set of (stochastic ordinary or partial differential) equations of different kinds.</p>
<p><em>Problem:</em> We are given a type that is a <a class="el" href="structtk_1_1tuple_1_1tagged__tuple.html">tk::tuple::tagged_tuple</a> that contains an arbitrary number of std::vectors of integers. The number of vectors are fixed at compile-time (accessed via tags) but their (differing) length is only known at run-time (after parsing user input). What we need are functions that operate on this data structure and return, e.g., the total number of components in the whole system or the offset in the whole data structure for a given tag. The functions should thus be able to operate on a list of types, i.e., a double for loop over all tags and associated vectors - one at compile-time and the other one at run-time.</p>
<p><em>Example:</em> An example is to define storage for systems of stochastic differential equations as in <a class="el" href="namespacewalker_1_1ctr.html#a0905c4e3f94686e2e5ff0627a9cc8876" title="Number of components of systems of equations. ">walker::ctr::ncomps</a>. In <a href="walker.html">walker</a> various types of stochastic differential equations are implemented and numerically integrated in time in order to compute and learn about their statistical behavior. Since different types of systems can be parameterized differently, there can be several systems of the same type (the number is user-defined so only known at run-time). For example, it is possible to numerically integrate two systems of Dirichlet equations, see <a class="el" href="_dirichlet_8h.html" title="Dirichlet SDE. ">DiffEq/Dirichlet.h</a>, one with 4, the other one with 5 scalar variables, parameterized differently, and estimate their arbitrary coupled statistics and joint PDFs. This requires that each type of system has a vector of integers storing the number of scalar variables.</p>
<p><em>Solution:</em> Looping through elements of a tuple is done via <a href="http://www.boost.org">Boost</a>'s <a href="http://www.boost.org/doc/libs/release/libs/mpl">MetaProgramming Library (MPL)</a>'s <a href="http://www.boost.org/doc/libs/release/libs/mpl/doc/refmanual/for-each.html">for_each</a>. Such operations on types happen at compile-time, i.e., the code runs inside the compiler and only its result gets compiled into code to be run at run-time. Advantages are abstraction and generic code that is independent of the size and order of the tags in the tuple (and the associated vectors). Though it is not of primary concern for this data structure, this solution also generates efficient code, since part of the algorithm (for computing the offset, the total number of components, etc.) runs inside the compiler. All of this is kept generic, so it does not need to be changed when a new pair of tag and system of equations are added to the underlying tuple. Thus, <em>the main advantage is that changing the order of the vectors in the tuple or adding new ones at arbitrary locations will not require change to client-code.</em></p>
<p><em>An alternative approach:</em> Of course this could have been simply done with a purely run-time vector of vector of integers. However, that would not have allowed a tag-based access to the different systems of equations. (Sure, one can define an enum for equation indexing, but that just adds code to what is already need to be changed if a change happens to the underlying data structure.) As a consequence, a component in a vector of vector would have had to be accessed as something like, ncomps[2][3], which is more error-prone to read than ncomps&lt; tag::dirichlet &gt;( 3 ). Furthermore, that design would have resulted in double-loops at run-time, instead of letting the compiler loop over the types at compile-time and do the run-time loops only for what is only known at run-time. Additionally, and most importantly, <em>any time a new system is introduced (or the order is changed), all client-code would have to be changed.</em></p>
<p>For example client-code, see <a class="el" href="classwalker_1_1_dirichlet.html#ad5fe97422126de0afbd69f569d2215e0" title="Constructor. ">walker::Dirichlet::Dirichlet()</a> in <a class="el" href="_dirichlet_8h.html" title="Dirichlet SDE. ">DiffEq/Dirichlet.h</a>, or <a class="el" href="classwalker_1_1_integrator.html#a42daf9a7c23e21086a8c21a24e5b1013" title="Constructor. ">walker::Integrator::Integrator</a> in <a class="el" href="_integrator_8h.html" title="Integrator advances differential equations. ">Walker/Integrator.h</a>. </p>

<p class="definition">Definition in file <a class="el" href="_system_components_8h_source.html">SystemComponents.h</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 22 2017 07:57:50 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
