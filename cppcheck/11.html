
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href="https://github.com/quinoacomputing/quinoa/commit/337b83b9">Quinoa_v0.1-727-g337b83b9</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [<a href="https://github.com/quinoacomputing/quinoa/commit/337b83b9">Quinoa_v0.1-727-g337b83b9</a>]: /tmp/q/quinoa/src/Inciter/Transporter.h </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> Transporter.h</p>
<a href='11.html#line-67'> noConstructor 67</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">// *****************************************************************************</span>
<a name="line-2"></a><span class="cm">/*!</span>
<a name="line-3"></a><span class="cm">  \file      src/Inciter/Transporter.h</span>
<a name="line-4"></a><span class="cm">  \author    J. Bakosi</span>
<a name="line-5"></a><span class="cm">  \date      Fri 17 Mar 2017 10:02:06 AM MDT</span>
<a name="line-6"></a><span class="cm">  \copyright 2012-2015, Jozsef Bakosi, 2016, Los Alamos National Security, LLC.</span>
<a name="line-7"></a><span class="cm">  \brief     Transporter drives the time integration of transport equations</span>
<a name="line-8"></a><span class="cm">  \details   Transporter drives the time integration of transport equations.</span>
<a name="line-9"></a>
<a name="line-10"></a><span class="cm">    The implementation uses the Charm++ runtime system and is fully</span>
<a name="line-11"></a><span class="cm">    asynchronous, overlapping computation and communication. The algorithm</span>
<a name="line-12"></a><span class="cm">    utilizes the structured dagger (SDAG) Charm++ functionality. The high-level</span>
<a name="line-13"></a><span class="cm">    overview of the algorithm structure and how it interfaces with Charm++ is</span>
<a name="line-14"></a><span class="cm">    discussed in the Charm++ interface file src/Inciter/transporter.ci.</span>
<a name="line-15"></a>
<a name="line-16"></a><span class="cm">    #### Call graph ####</span>
<a name="line-17"></a><span class="cm">    The following is a directed acyclic graph (DAG) that outlines the</span>
<a name="line-18"></a><span class="cm">    asynchronous algorithm implemented in this class The detailed discussion of</span>
<a name="line-19"></a><span class="cm">    the algorithm is given in the Charm++ interface file transporter.ci, which</span>
<a name="line-20"></a><span class="cm">    also repeats the graph below using ASCII graphics. On the DAG orange</span>
<a name="line-21"></a><span class="cm">    fills denote global synchronization points that contain or eventually lead</span>
<a name="line-22"></a><span class="cm">    to global reductions. Dashed lines are potential shortcuts that allow</span>
<a name="line-23"></a><span class="cm">    jumping over some of the task-graph under some circumstances or optional</span>
<a name="line-24"></a><span class="cm">    code paths (taken, e.g., only in DEBUG mode). See the detailed discussion in</span>
<a name="line-25"></a><span class="cm">    transporter.ci.</span>
<a name="line-26"></a><span class="cm">    \dot</span>
<a name="line-27"></a><span class="cm">    digraph &quot;Transporter SDAG&quot; {</span>
<a name="line-28"></a><span class="cm">      rankdir=&quot;LR&quot;;</span>
<a name="line-29"></a><span class="cm">      node [shape=record, fontname=Helvetica, fontsize=10];</span>
<a name="line-30"></a><span class="cm">      Diag [ label=&quot;Diag&quot;</span>
<a name="line-31"></a><span class="cm">              tooltip=&quot;chares contribute diagnostics&quot;</span>
<a name="line-32"></a><span class="cm">              URL=&quot;\ref inciter::Carrier::diagnostics&quot;];</span>
<a name="line-33"></a><span class="cm">      Out [ label=&quot;Out&quot;</span>
<a name="line-34"></a><span class="cm">              tooltip=&quot;particles output to file&quot;</span>
<a name="line-35"></a><span class="cm">              URL=&quot;\ref inciter::Carrier::doWriteParticles&quot;];</span>
<a name="line-36"></a><span class="cm">      Eval [ label=&quot;Eval&quot;</span>
<a name="line-37"></a><span class="cm">              tooltip=&quot;evaluate time at the end of the time step&quot;</span>
<a name="line-38"></a><span class="cm">              URL=&quot;\ref inciter::Transporter::evaluateTime&quot;];</span>
<a name="line-39"></a><span class="cm">      Diag -&gt; Eval [ style=&quot;solid&quot; ];</span>
<a name="line-40"></a><span class="cm">      Out -&gt; Eval [ style=&quot;solid&quot; ];</span>
<a name="line-41"></a><span class="cm">    }</span>
<a name="line-42"></a><span class="cm">    \enddot</span>
<a name="line-43"></a><span class="cm">    \include Inciter/transporter.ci</span>
<a name="line-44"></a><span class="cm">*/</span>
<a name="line-45"></a><span class="c1">// *****************************************************************************</span>
<a name="line-46"></a><span class="cp">#ifndef Transporter_h</span>
<a name="line-47"></a><span class="cp">#define Transporter_h</span>
<a name="line-48"></a>
<a name="line-49"></a><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp"></span>
<a name="line-50"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="line-51"></a><span class="cp">#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="cp"></span>
<a name="line-52"></a><span class="cp">#include</span> <span class="cpf">&lt;unordered_set&gt;</span><span class="cp"></span>
<a name="line-53"></a>
<a name="line-54"></a><span class="cp">#include</span> <span class="cpf">&quot;Timer.h&quot;</span><span class="cp"></span>
<a name="line-55"></a><span class="cp">#include</span> <span class="cpf">&quot;Types.h&quot;</span><span class="cp"></span>
<a name="line-56"></a><span class="cp">#include</span> <span class="cpf">&quot;InciterPrint.h&quot;</span><span class="cp"></span>
<a name="line-57"></a><span class="cp">#include</span> <span class="cpf">&quot;Partitioner.h&quot;</span><span class="cp"></span>
<a name="line-58"></a><span class="cp">#include</span> <span class="cpf">&quot;VectorReducer.h&quot;</span><span class="cp"></span>
<a name="line-59"></a><span class="cp">#include</span> <span class="cpf">&quot;ParticleWriter.h&quot;</span><span class="cp"></span>
<a name="line-60"></a><span class="cp">#include</span> <span class="cpf">&quot;Progress.h&quot;</span><span class="cp"></span>
<a name="line-61"></a>
<a name="line-62"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/carrier.decl.h&quot;</span><span class="cp"></span>
<a name="line-63"></a>
<a name="line-64"></a><span class="n">namespace</span> <span class="n">inciter</span> <span class="p">{</span>
<a name="line-65"></a>
<a name="line-66"></a><span class="c1">//! Transporter drives the time integration of transport equations</span>
<a name="line-67"></a><span class="hll"><span class="n">class</span> <span class="nl">Transporter</span> <span class="p">:</span> <span class="n">public</span> <span class="n">CBase_Transporter</span> <span class="p">{</span><div class='verbose expandable'><span class='error2'>&lt;--- The class 'Transporter' does not have a constructor. <span class='marker'>[+]</span></span><div class='content'>The class &apos;Transporter&apos; does not have a constructor although it has private member variables. Member variables of builtin types are left uninitialized when the class is instantiated. That may cause bugs or undefined behavior.</div></div>
</span><a name="line-68"></a>
<a name="line-69"></a>  <span class="nl">public</span><span class="p">:</span>
<a name="line-70"></a>    <span class="cp">#if defined(__clang__)</span>
<a name="line-71"></a>      <span class="cp">#pragma clang diagnostic push</span>
<a name="line-72"></a>      <span class="cp">#pragma clang diagnostic ignored &quot;-Wunused-parameter&quot;</span>
<a name="line-73"></a>      <span class="cp">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span>
<a name="line-74"></a>    <span class="cp">#elif defined(__GNUC__)</span>
<a name="line-75"></a>      <span class="cp">#pragma GCC diagnostic push</span>
<a name="line-76"></a>      <span class="cp">#pragma GCC diagnostic ignored &quot;-Wunused-parameter&quot;</span>
<a name="line-77"></a>      <span class="cp">#pragma GCC diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span>
<a name="line-78"></a>    <span class="cp">#elif defined(__INTEL_COMPILER)</span>
<a name="line-79"></a>      <span class="cp">#pragma warning( push )</span>
<a name="line-80"></a>      <span class="cp">#pragma warning( disable: 1478 )</span>
<a name="line-81"></a>    <span class="cp">#endif</span>
<a name="line-82"></a>    <span class="c1">// Include Charm++ SDAG code. See http://charm.cs.illinois.edu/manuals/html/</span>
<a name="line-83"></a>    <span class="c1">// charm++/manual.html, Sec. &quot;Structured Control Flow: Structured Dagger&quot;.</span>
<a name="line-84"></a>    <span class="n">Transporter_SDAG_CODE</span>
<a name="line-85"></a>    <span class="cp">#if defined(__clang__)</span>
<a name="line-86"></a>      <span class="cp">#pragma clang diagnostic pop</span>
<a name="line-87"></a>    <span class="cp">#elif defined(__GNUC__)</span>
<a name="line-88"></a>      <span class="cp">#pragma GCC diagnostic pop</span>
<a name="line-89"></a>    <span class="cp">#elif defined(__INTEL_COMPILER)</span>
<a name="line-90"></a>      <span class="cp">#pragma warning( pop )</span>
<a name="line-91"></a>    <span class="cp">#endif</span>
<a name="line-92"></a>
<a name="line-93"></a>    <span class="c1">//! Constructor</span>
<a name="line-94"></a>    <span class="n">explicit</span> <span class="n">Transporter</span><span class="p">();</span>
<a name="line-95"></a>
<a name="line-96"></a>    <span class="c1">//! \brief Reduction target indicating that all Partitioner chare groups</span>
<a name="line-97"></a>    <span class="c1">//!   have finished reading their part of the computational mesh graph and</span>
<a name="line-98"></a>    <span class="c1">//!   we are ready to compute the computational load</span>
<a name="line-99"></a>    <span class="kt">void</span> <span class="nf">load</span><span class="p">(</span> <span class="kt">uint64_t</span> <span class="n">nelem</span> <span class="p">);</span>
<a name="line-100"></a>
<a name="line-101"></a>    <span class="c1">//! \brief Reduction target indicating that all Partitioner chare groups</span>
<a name="line-102"></a>    <span class="c1">//!   have finished setting up the necessary data structures for</span>
<a name="line-103"></a>    <span class="c1">//!   partitioning the computational mesh and we are ready for partitioning</span>
<a name="line-104"></a>    <span class="kt">void</span> <span class="nf">partition</span><span class="p">();</span>
<a name="line-105"></a>
<a name="line-106"></a>    <span class="c1">//! \brief Reduction target indicating that all Partitioner chare groups</span>
<a name="line-107"></a>    <span class="c1">//!   have finished distributing its global mesh node IDs and they are ready</span>
<a name="line-108"></a>    <span class="c1">//!   for preparing (flattening) their owned mesh node IDs for reordering</span>
<a name="line-109"></a>    <span class="kt">void</span> <span class="nf">distributed</span><span class="p">();</span>
<a name="line-110"></a>
<a name="line-111"></a>    <span class="c1">//! \brief Reduction target indicating that all Partitioner chare groups</span>
<a name="line-112"></a>    <span class="c1">//!   have finished flattening its global mesh node IDs and they are ready</span>
<a name="line-113"></a>    <span class="c1">//!   for computing the communication maps required for node ID reordering</span>
<a name="line-114"></a>    <span class="kt">void</span> <span class="nf">flattened</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_partitioner</span><span class="p">.</span><span class="n">gather</span><span class="p">();</span> <span class="p">}</span>
<a name="line-115"></a>
<a name="line-116"></a>    <span class="c1">//! \brief Reduction target estimating the average communication cost of</span>
<a name="line-117"></a>    <span class="c1">//!   merging the linear system</span>
<a name="line-118"></a>    <span class="kt">void</span> <span class="nf">aveCost</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">c</span> <span class="p">);</span>
<a name="line-119"></a>
<a name="line-120"></a>    <span class="c1">//! \brief Reduction target estimating the standard deviation of the</span>
<a name="line-121"></a>    <span class="c1">//!   communication cost of merging the linear system</span>
<a name="line-122"></a>    <span class="kt">void</span> <span class="nf">stdCost</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">c</span> <span class="p">);</span>
<a name="line-123"></a>
<a name="line-124"></a>    <span class="c1">//! Reduction target indicating that all chare groups are ready for workers</span>
<a name="line-125"></a>    <span class="kt">void</span> <span class="nf">setup</span><span class="p">();</span>
<a name="line-126"></a>
<a name="line-127"></a>    <span class="c1">//! Non-reduction target for receiving progress report on reading mesh graph</span>
<a name="line-128"></a>    <span class="kt">void</span> <span class="nf">pegraph</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progGraph</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-129"></a>
<a name="line-130"></a>    <span class="c1">//! Non-reduction target for receiving progress report on partitioning mesh</span>
<a name="line-131"></a>    <span class="kt">void</span> <span class="nf">pepartitioned</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progPart</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-132"></a>    <span class="c1">//! Non-reduction target for receiving progress report on distributing mesh</span>
<a name="line-133"></a>    <span class="kt">void</span> <span class="nf">pedistributed</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progPart</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-134"></a>
<a name="line-135"></a>    <span class="c1">//! Non-reduction target for receiving progress report on flattening mesh</span>
<a name="line-136"></a>    <span class="kt">void</span> <span class="nf">peflattened</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progReorder</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-137"></a>    <span class="c1">//! Non-reduction target for receiving progress report on node ID mask</span>
<a name="line-138"></a>    <span class="kt">void</span> <span class="nf">pemask</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progReorder</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-139"></a>    <span class="c1">//! Non-reduction target for receiving progress report on reordering mesh</span>
<a name="line-140"></a>    <span class="kt">void</span> <span class="nf">pereordered</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progReorder</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-141"></a>    <span class="c1">//! Non-reduction target for receiving progress report on computing bounds</span>
<a name="line-142"></a>    <span class="kt">void</span> <span class="nf">pebounds</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progReorder</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-143"></a>
<a name="line-144"></a>    <span class="c1">//! Non-reduction target for receiving progress report on computing row IDs</span>
<a name="line-145"></a>    <span class="kt">void</span> <span class="nf">perowcomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progSetup</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-146"></a>    <span class="c1">//! Non-reduction target for receiving progress report on matching BCs</span>
<a name="line-147"></a>    <span class="kt">void</span> <span class="nf">chbcmatched</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progSetup</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-148"></a>    <span class="c1">//! Non-reduction target for receiving progress report on computing BCs</span>
<a name="line-149"></a>    <span class="kt">void</span> <span class="nf">pebccomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progSetup</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-150"></a>
<a name="line-151"></a>    <span class="c1">//! Non-reduction target for receiving progress report on the initial guess</span>
<a name="line-152"></a>    <span class="kt">void</span> <span class="nf">pesolcomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progInit</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-153"></a>    <span class="c1">//! Non-reduction target for receiving progress report on outputing ICs</span>
<a name="line-154"></a>    <span class="kt">void</span> <span class="nf">chic</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progInit</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-155"></a>    <span class="c1">//! Non-reduction target for receiving progress report on computing the LHS</span>
<a name="line-156"></a>    <span class="kt">void</span> <span class="nf">chlhs</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progInit</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-157"></a>
<a name="line-158"></a>    <span class="c1">//! Non-reduction target for receiving progress report on computing the RHS</span>
<a name="line-159"></a>    <span class="kt">void</span> <span class="nf">chrhs</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progStep</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-160"></a>    <span class="c1">//! Non-reduction target for receiving progress report on solving the system</span>
<a name="line-161"></a>    <span class="kt">void</span> <span class="nf">pesolve</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progStep</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-162"></a>    <span class="c1">//! Non-reduction target for receiving progress report on limiting</span>
<a name="line-163"></a>    <span class="kt">void</span> <span class="nf">chlim</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progStep</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-164"></a>    <span class="c1">//! Non-reduction target for receiving progress report on tracking particles</span>
<a name="line-165"></a>    <span class="kt">void</span> <span class="nf">chtrack</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_progStep</span><span class="p">.</span><span class="n">inc</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="p">();</span> <span class="p">}</span>
<a name="line-166"></a>
<a name="line-167"></a>    <span class="c1">//! \brief Reduction target indicating that all linear system merger</span>
<a name="line-168"></a>    <span class="c1">//!   branches have done their part of storing and exporting global row ids</span>
<a name="line-169"></a>    <span class="kt">void</span> <span class="nf">rowcomplete</span><span class="p">();</span>
<a name="line-170"></a>
<a name="line-171"></a>    <span class="c1">//! \brief Reduction target indicating that all Carriers have finished</span>
<a name="line-172"></a>    <span class="c1">//!   computing/receiving their part of the nodal volumes</span>
<a name="line-173"></a>    <span class="kt">void</span> <span class="nf">volcomplete</span><span class="p">();</span>
<a name="line-174"></a>
<a name="line-175"></a>    <span class="c1">//! \brief Reduction target yielding a single minimum time step size across</span>
<a name="line-176"></a>    <span class="c1">//!   all workers</span>
<a name="line-177"></a>    <span class="kt">void</span> <span class="nf">dt</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">n</span> <span class="p">);</span>
<a name="line-178"></a>
<a name="line-179"></a>    <span class="c1">//! Reduction target initiating verification of the boundary conditions set</span>
<a name="line-180"></a>    <span class="kt">void</span> <span class="nf">verifybc</span><span class="p">(</span> <span class="n">CkReductionMsg</span><span class="o">*</span> <span class="n">msg</span> <span class="p">);</span>
<a name="line-181"></a>
<a name="line-182"></a>    <span class="c1">//! Reduction target as a 2nd (final) of the verification of BCs</span>
<a name="line-183"></a>    <span class="kt">void</span> <span class="nf">doverifybc</span><span class="p">(</span> <span class="n">CkReductionMsg</span><span class="o">*</span> <span class="n">msg</span> <span class="p">);</span>
<a name="line-184"></a>
<a name="line-185"></a>    <span class="c1">//! \brief Reduction target indicating that all Carrier chares have</span>
<a name="line-186"></a>    <span class="c1">//!   finished their initialization step</span>
<a name="line-187"></a>    <span class="kt">void</span> <span class="nf">initcomplete</span><span class="p">();</span>
<a name="line-188"></a>
<a name="line-189"></a>    <span class="c1">//! Reduction target indicating the particle communication is complete</span>
<a name="line-190"></a>    <span class="kt">void</span> <span class="nf">parcomcomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_carrier</span><span class="p">.</span><span class="n">out</span><span class="p">();</span> <span class="p">}</span>
<a name="line-191"></a>
<a name="line-192"></a>    <span class="c1">//! \brief Reduction target indicating that all workers have sent their</span>
<a name="line-193"></a>    <span class="c1">//!   number of particles to be output</span>
<a name="line-194"></a>    <span class="kt">void</span> <span class="nf">nparcomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_carrier</span><span class="p">.</span><span class="n">doWriteParticles</span><span class="p">();</span> <span class="p">}</span>
<a name="line-195"></a>
<a name="line-196"></a>    <span class="c1">//! \brief Reduction target optionally collecting diagnostics, e.g.,</span>
<a name="line-197"></a>    <span class="c1">//!   residuals, from all Carrier chares</span>
<a name="line-198"></a>    <span class="kt">void</span> <span class="nf">diagnostics</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span><span class="o">*</span> <span class="n">d</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">n</span> <span class="p">);</span>
<a name="line-199"></a>
<a name="line-200"></a>    <span class="c1">//! \brief Reduction target indicating that Carrier chares contribute no</span>
<a name="line-201"></a>    <span class="c1">//!    diagnostics and we ready to output the one-liner report</span>
<a name="line-202"></a>    <span class="kt">void</span> <span class="nf">diagcomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">diag_complete</span><span class="p">();</span> <span class="p">}</span>
<a name="line-203"></a>
<a name="line-204"></a>    <span class="c1">//! \brief Reduction target indicating that all particles writers have</span>
<a name="line-205"></a>    <span class="c1">//!   finished outputing particles to file</span>
<a name="line-206"></a>    <span class="c1">//! \details This function is a Charm++ reduction target that is called when</span>
<a name="line-207"></a>    <span class="c1">//!   all carrier chares have finished communicating particles</span>
<a name="line-208"></a>    <span class="kt">void</span> <span class="nf">outcomplete</span><span class="p">()</span> <span class="p">{</span> <span class="n">out_complete</span><span class="p">();</span> <span class="p">}</span>
<a name="line-209"></a>
<a name="line-210"></a>    <span class="c1">//! \brief Reduction target indicating that the linear system mergers are</span>
<a name="line-211"></a>    <span class="c1">//!   ready for the next time step</span>
<a name="line-212"></a>    <span class="kt">void</span> <span class="nf">computedt</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_carrier</span><span class="p">.</span><span class="n">dt</span><span class="p">();</span> <span class="p">}</span>
<a name="line-213"></a>
<a name="line-214"></a>    <span class="c1">//! Normal finish of time stepping</span>
<a name="line-215"></a>    <span class="kt">void</span> <span class="nf">finish</span><span class="p">();</span>
<a name="line-216"></a>
<a name="line-217"></a>    <span class="c1">//! \brief Reduction target outputing diagnostics</span>
<a name="line-218"></a>    <span class="kt">void</span> <span class="nf">verified</span><span class="p">()</span> <span class="p">{</span> <span class="n">m_print</span><span class="p">.</span><span class="n">diag</span><span class="p">(</span> <span class="s">&quot;AEC verified&quot;</span> <span class="p">);</span> <span class="p">}</span>
<a name="line-219"></a>
<a name="line-220"></a>  <span class="nl">private</span><span class="p">:</span>
<a name="line-221"></a>    <span class="n">using</span> <span class="n">LinSysMergerProxy</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">CProxy_LinSysMerger</span><span class="o">&lt;</span> <span class="n">CProxy_Transporter</span><span class="p">,</span>
<a name="line-222"></a>                                                       <span class="n">CProxy_Carrier</span><span class="p">,</span>
<a name="line-223"></a>                                                       <span class="n">AuxSolverLumpMassDiff</span> <span class="o">&gt;</span><span class="p">;</span>
<a name="line-224"></a>    <span class="n">using</span> <span class="n">CarrierProxy</span> <span class="o">=</span> <span class="n">CProxy_Carrier</span><span class="p">;</span>
<a name="line-225"></a>    <span class="n">using</span> <span class="n">ParticleWriterProxy</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">CProxy_ParticleWriter</span><span class="o">&lt;</span> <span class="n">CProxy_Transporter</span> <span class="o">&gt;</span><span class="p">;</span>
<a name="line-226"></a>    <span class="n">using</span> <span class="n">PartitionerProxy</span> <span class="o">=</span> <span class="n">CProxy_Partitioner</span><span class="o">&lt;</span> <span class="n">CProxy_Transporter</span><span class="p">,</span>
<a name="line-227"></a>                                                 <span class="n">CarrierProxy</span><span class="p">,</span>
<a name="line-228"></a>                                                 <span class="n">LinSysMergerProxy</span><span class="p">,</span>
<a name="line-229"></a>                                                 <span class="n">ParticleWriterProxy</span> <span class="o">&gt;</span><span class="p">;</span>
<a name="line-230"></a>
<a name="line-231"></a>    <span class="n">InciterPrint</span> <span class="n">m_print</span><span class="p">;</span>                <span class="c1">//!&lt; Pretty printer</span>
<a name="line-232"></a>    <span class="kt">int</span> <span class="n">m_nchare</span><span class="p">;</span>                        <span class="c1">//!&lt; Number of carrier chares</span>
<a name="line-233"></a>    <span class="kt">uint64_t</span> <span class="n">m_it</span><span class="p">;</span>                       <span class="c1">//!&lt; Iteration count</span>
<a name="line-234"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">m_t</span><span class="p">;</span>                        <span class="c1">//!&lt; Physical time</span>
<a name="line-235"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">m_dt</span><span class="p">;</span>                       <span class="c1">//!&lt; Physical time step size</span>
<a name="line-236"></a>    <span class="kt">uint8_t</span> <span class="n">m_stage</span><span class="p">;</span>                     <span class="c1">//!&lt; Stage in multi-stage time stepping</span>
<a name="line-237"></a>    <span class="n">LinSysMergerProxy</span> <span class="n">m_linsysmerger</span><span class="p">;</span>    <span class="c1">//!&lt; Linear system merger group proxy</span>
<a name="line-238"></a>    <span class="n">CarrierProxy</span> <span class="n">m_carrier</span><span class="p">;</span>              <span class="c1">//!&lt; Carrier chare array proxy</span>
<a name="line-239"></a>    <span class="n">ParticleWriterProxy</span> <span class="n">m_particlewriter</span><span class="p">;</span><span class="c1">//!&lt; Particle writer group proxy</span>
<a name="line-240"></a>    <span class="n">PartitionerProxy</span> <span class="n">m_partitioner</span><span class="p">;</span>      <span class="c1">//!&lt; Partitioner group proxy</span>
<a name="line-241"></a>    <span class="c1">//! Average communication cost of merging the linear system</span>
<a name="line-242"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">m_avcost</span><span class="p">;</span>
<a name="line-243"></a>    <span class="c1">//! Total number of mesh nodes</span>
<a name="line-244"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_npoin</span><span class="p">;</span>
<a name="line-245"></a>    <span class="c1">//! Timer tags</span>
<a name="line-246"></a>    <span class="k">enum</span> <span class="n">class</span> <span class="n">TimerTag</span> <span class="p">{</span> <span class="n">TIMESTEP</span> <span class="p">};</span>
<a name="line-247"></a>    <span class="c1">//! Timers</span>
<a name="line-248"></a>    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">TimerTag</span><span class="p">,</span> <span class="n">tk</span><span class="o">::</span><span class="n">Timer</span> <span class="o">&gt;</span> <span class="n">m_timer</span><span class="p">;</span>
<a name="line-249"></a>    <span class="c1">//! \brief Aggregate &#39;old&#39; (as in file) node ID list at which LinSysMerger</span>
<a name="line-250"></a>    <span class="c1">//!   sets boundary conditions, see also Partitioner.h</span>
<a name="line-251"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="n">m_linsysbc</span><span class="p">;</span>
<a name="line-252"></a>    <span class="c1">//! Diagnostics</span>
<a name="line-253"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;</span> <span class="n">m_diag</span><span class="p">;</span>
<a name="line-254"></a>    <span class="c1">// Progress object for task &quot;Partitioning and distributing mesh&quot;</span>
<a name="line-255"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Progress</span><span class="o">&lt;</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="n">m_progPart</span><span class="p">;</span>
<a name="line-256"></a>    <span class="c1">// Progress object for task &quot;Creating partitioners and reading mesh graph&quot;</span>
<a name="line-257"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Progress</span><span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="n">m_progGraph</span><span class="p">;</span>
<a name="line-258"></a>    <span class="c1">// Progress object for task &quot;Reordering mesh&quot;</span>
<a name="line-259"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Progress</span><span class="o">&lt;</span> <span class="mi">4</span> <span class="o">&gt;</span> <span class="n">m_progReorder</span><span class="p">;</span>
<a name="line-260"></a>    <span class="c1">// Progress object for task &quot;Computing row IDs, querying BCs, ...&quot;</span>
<a name="line-261"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Progress</span><span class="o">&lt;</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="n">m_progSetup</span><span class="p">;</span>
<a name="line-262"></a>    <span class="c1">// Progress object for task &quot;Setting and output ICs, ...&quot;</span>
<a name="line-263"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Progress</span><span class="o">&lt;</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="n">m_progInit</span><span class="p">;</span>
<a name="line-264"></a>    <span class="c1">// Progress object for sub-tasks of a time step</span>
<a name="line-265"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Progress</span><span class="o">&lt;</span> <span class="mi">4</span> <span class="o">&gt;</span> <span class="n">m_progStep</span><span class="p">;</span>
<a name="line-266"></a>
<a name="line-267"></a>    <span class="c1">//! Print out time integration header</span>
<a name="line-268"></a>    <span class="kt">void</span> <span class="nf">header</span><span class="p">();</span>
<a name="line-269"></a>
<a name="line-270"></a>    <span class="c1">//! Evaluate time step and output one-liner report</span>
<a name="line-271"></a>    <span class="kt">void</span> <span class="nf">evaluateTime</span><span class="p">();</span>
<a name="line-272"></a><span class="p">};</span>
<a name="line-273"></a>
<a name="line-274"></a><span class="p">}</span> <span class="c1">// inciter::</span>
<a name="line-275"></a>
<a name="line-276"></a><span class="cp">#endif </span><span class="c1">// Transporter_h</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.76.1 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.net">http://cppcheck.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
