<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: Git subtree with TPLs and tools</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Git subtree with TPLs and tools </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Quinoa uses git subtree to work with third-party libraries (TPLs) and auxiliary tools. This allows easy update to their new version, records all TPLs' and tools' histories (including branches and tags), easily allows contributing upstream, and makes it easy to quickly try out development features of a TPL or a tool. In addition, only those developers need to learn git subtree who expect to contribute to TPLs or tools upstream.</p>
<p>Note that from the viewpoint of git subtree there is no difference between TPLs and tools, only that TPLs are imported into directory `tpl' while tools are imported into directory <code>tool</code>.</p>
<p>This page explains how to use git subtree to work with TPLs and tools. This setup is only required</p>
<ul>
<li>if you expect to make changes to <a href="https://github.com/quinoacomputing/quinoa/blob/master/tpl/src">TPLs</a> or <a href="https://github.com/quinoacomputing/quinoa/blob/master/tool/src">tools</a> and want to push those changes upstream to the TPL or tool, or</li>
<li>if you want to update a TPL or a tool to a new version.</li>
</ul>
<p>Otherwise you do not need this setup.</p>
<h3>Create remote tracking branches pointing to TPLs and tools used via git subtree</h3>
<p>These remote tracking branches are not strictly required to use git subtree, but make life easier.</p>
<div class="fragment"><div class="line">$ git remote add --tags -f charm http://charm.cs.uiuc.edu/gerrit/charm</div><div class="line">$ git remote add --tags -f pegtl git@github.com:ColinH/PEGTL.git</div><div class="line">$ git remote add --tags -f tut git@github.com:mrzechonek/tut-framework.git</div><div class="line">$ git remote add --tags -f boost git@github.com:quinoacomputing/Boost.git</div><div class="line">$ git remote add --tags -f cartesian_product git@github.com:quinoacomputing/BoostMPLCartesianProduct.git</div><div class="line">$ git remote add --tags -f pstreams git://git.code.sf.net/p/pstreams/code</div><div class="line">$ git remote add --tags -f hdf5 git@github.com:quinoacomputing/HDF5.git</div><div class="line">$ git remote add --tags -f netcdf git@github.com:Unidata/netcdf-c.git</div><div class="line">$ git remote add --tags -f trilinos git@github.com:trilinos/trilinos.git</div><div class="line">$ git remote add --tags -f hypre git@github.com:quinoacomputing/HYPRE.git</div><div class="line">$ git remote add --tags -f rngsse2 git@github.com:quinoacomputing/RNGSSE2.git</div><div class="line">$ git remote add --tags -f testu01 git@github.com:quinoacomputing/TestU01-threadsafe.git</div><div class="line">$ git remote add --tags -f pugixml git@github.com:zeux/pugixml.git</div><div class="line">$ git remote add --tags -f blas git@github.com:quinoacomputing/BLAS.git</div><div class="line">$ git remote add --tags -f lapack git@github.com:quinoacomputing/LAPACK.git</div><div class="line">$ git remote add --tags -f aec https://gitlab.dkrz.de/k202009/libaec.git</div><div class="line">$ git remote add --tags -f ndiff git@github.com:quinoacomputing/ndiff.git</div><div class="line">$ git remote add --tags -f h5part git@github.com:quinoacomputing/H5Part.git</div><div class="line">$ git remote add --tags -f random123 git@github.com:quinoacomputing/Random123.git</div></div><!-- fragment --><h3>Git subtree commands to initially merge in a set of commits (squashed) from the TPLs and tools</h3>
<p>The TPL or tool commit up to which the merge is applied is given by a (remote, i.e., the TPL's or tool's) branch name, tag, or commit id. Note that these commands have already been issued to initially merge in the subtrees. Even if you expect to push updates to TPLs or tools, you do not need to run these commands, as these merges have already been applied. They are only here for documentation of what and how it has been done to set up the subtrees.</p>
<div class="fragment"><div class="line">$ git subtree add --prefix=tpl/src/charm charm v6.6.0 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/pegtl pegtl 1.3.1 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/tut tut 2013-12-18 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/boost boost master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/cartesian_product cartesian_product master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/pstreams pstreams RELEASE_0_8_1 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/hdf5 hdf5 master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/netcdf netcdf v4.3.2 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/trilinos trilinos trilinos-release-11-6-1 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/hypre hypre master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/rngsse2 rngsse2 master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/testu01 testu01 master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/pugixml pugixml v1.7 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/lapack lapack master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/blas blas master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/aec aec v0.3.2 --squash</div><div class="line">$ git subtree add --prefix=tpl/src/h5part h5part master --squash</div><div class="line">$ git subtree add --prefix=tpl/src/random123 random123 master --squash</div><div class="line">$ git subtree add --prefix=tool/src/ndiff ndiff master --squash</div></div><!-- fragment --><h3>Example git command to pull the latest changes to TPL charm</h3>
<p>This is how a TPL is updated to a newer version using git subtree. Here we upgrade Charm++ from v6.6.0 to v6.6.1.</p>
<div class="fragment"><div class="line">git fetch charm</div><div class="line">git subtree pull --prefix=tpl/src/charm charm v6.6.1 --squash</div></div><!-- fragment --><h3>Example git command to push changes to TPL testu01 via git subtree</h3>
<p>If you have committed changes to any of the TPLs in your local clone (located in &lt;quinoa&gt;/tpl/src), then here is an example of how those updates can be pushed upstream.</p>
<p>First, verify the changes you are about to push by examining the diff output:</p>
<div class="fragment"><div class="line">$ git diff testu01/master master:tpl/src/testu01</div></div><!-- fragment --><p>If you are happy with the diff, push the changes to the TPL:</p>
<div class="fragment"><div class="line">$ git subtree push --prefix=tpl/src/testu01 testu01 master</div></div><!-- fragment --><h3>Additional info on using git subtree:</h3>
<ul>
<li><a href="https://hpc.uni.lu/blog/2014/understanding-git-subtree">https://hpc.uni.lu/blog/2014/understanding-git-subtree</a></li>
<li><a href="http://getlevelten.com/blog/tom-mccracken/smarter-drupal-projects-projects-management-git-subtree">http://getlevelten.com/blog/tom-mccracken/smarter-drupal-projects-projects-management-git-subtree</a></li>
<li><a href="https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt">https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt</a></li>
<li><a href="http://blogs.atlassian.com/2013/05/alternatives-to-git-submodule-git-subtree">http://blogs.atlassian.com/2013/05/alternatives-to-git-submodule-git-subtree</a></li>
<li><a href="http://www.codeproject.com/Articles/562949/ManagingplusNestedplusLibrariesplusUsingplustheplu">http://www.codeproject.com/Articles/562949/ManagingplusNestedplusLibrariesplusUsingplustheplu</a></li>
</ul>
<hr/>
 <div><small> <em>Page last updated:</em> Wed 11 Jan 2017 11:59:30 AM MST <em>Copyright 2012-2015, J. Bakosi, 2016-2018, Los Alamos National Security, LLC.</em> </small></div> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 6 2018 15:08:19 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
