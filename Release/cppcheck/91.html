
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href="https://github.com/quinoacomputing/quinoa/commit/30214f4">Quinoa_v0.2-1901-g30214f4</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [<a href="https://github.com/quinoacomputing/quinoa/commit/30214f4">Quinoa_v0.2-1901-g30214f4</a>]: /tmp/TeamCity-12/work/821a9fd6f64749d9/src/UnitTest/tests/Control/TestToggle.C </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> TestToggle.C</p>
<a href='91.html#line-205'> redundantAssignment 205</a><a href='91.html#line-227'> redundantAssignment 227</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">// *****************************************************************************</span>
<a name="line-2"></a><span class="cm">/*!</span>
<a name="line-3"></a><span class="cm">  \file      src/UnitTest/tests/Control/TestToggle.C</span>
<a name="line-4"></a><span class="cm">  \copyright 2012-2015, J. Bakosi, 2016-2018, Los Alamos National Security, LLC.</span>
<a name="line-5"></a><span class="cm">  \brief     Unit tests for Control/Toggle</span>
<a name="line-6"></a><span class="cm">  \details   Unit tests for Control/Toggle</span>
<a name="line-7"></a><span class="cm">*/</span>
<a name="line-8"></a><span class="c1">// *****************************************************************************</span>
<a name="line-9"></a>
<a name="line-10"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/tut.h&quot;</span><span class="cp"></span>
<a name="line-11"></a>
<a name="line-12"></a><span class="cp">#include</span> <span class="cpf">&quot;TUTConfig.h&quot;</span><span class="cp"></span>
<a name="line-13"></a><span class="cp">#include</span> <span class="cpf">&quot;Toggle.h&quot;</span><span class="cp"></span>
<a name="line-14"></a>
<a name="line-15"></a><span class="cp">#ifndef DOXYGEN_GENERATING_OUTPUT</span>
<a name="line-16"></a>
<a name="line-17"></a><span class="k">namespace</span> <span class="n">tut</span> <span class="p">{</span>
<a name="line-18"></a>
<a name="line-19"></a><span class="c1">//! All tests in group inherited from this base</span>
<a name="line-20"></a><span class="k">struct</span> <span class="n">Toggle_common</span> <span class="p">{</span>
<a name="line-21"></a>  <span class="k">enum</span> <span class="k">class</span> <span class="nc">Enum</span> <span class="p">{</span> <span class="n">F1</span><span class="p">,</span> <span class="n">F2</span><span class="p">,</span> <span class="n">F3</span><span class="p">,</span> <span class="n">F4</span> <span class="p">};</span>
<a name="line-22"></a>  <span class="c1">//! Toggle only has a protected constructor, designed to be base class only</span>
<a name="line-23"></a>  <span class="k">struct</span> <span class="nl">toggle</span> <span class="p">:</span> <span class="n">tk</span><span class="o">::</span><span class="n">Toggle</span><span class="o">&lt;</span> <span class="n">Enum</span> <span class="o">&gt;</span> <span class="p">{</span>
<a name="line-24"></a>     <span class="c1">// The child constructor must initialize all state data Toggle holds: a</span>
<a name="line-25"></a>     <span class="c1">// std::string, a std::map&lt; Enum, std::string &gt;, and its inverse, a</span>
<a name="line-26"></a>     <span class="c1">// std::map&lt; std::string, Enum &gt;. The easiest is to use initializer lists</span>
<a name="line-27"></a>     <span class="c1">// and initialize in place. The size of the two maps must be equal.</span>
<a name="line-28"></a>     <span class="n">toggle</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;&amp;</span> <span class="n">g</span><span class="p">,</span>
<a name="line-29"></a>             <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;&amp;&amp;</span> <span class="n">n</span><span class="p">,</span>
<a name="line-30"></a>             <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">Enum</span> <span class="o">&gt;&amp;&amp;</span> <span class="n">v</span> <span class="p">)</span> <span class="o">:</span>
<a name="line-31"></a>      <span class="n">tk</span><span class="o">::</span><span class="n">Toggle</span><span class="o">&lt;</span> <span class="n">Enum</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">g</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">)</span> <span class="p">{}</span>
<a name="line-32"></a>  <span class="p">};</span>
<a name="line-33"></a>  <span class="c1">//! Example toggle</span>
<a name="line-34"></a>  <span class="k">const</span> <span class="n">toggle</span> <span class="n">p</span> <span class="o">=</span> <span class="n">toggle</span><span class="p">(</span> <span class="s">&quot;switch name&quot;</span><span class="p">,</span>
<a name="line-35"></a>                           <span class="c1">//! map Enums to names</span>
<a name="line-36"></a>                           <span class="p">{</span> <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span><span class="p">,</span> <span class="s">&quot;1st option name&quot;</span> <span class="p">},</span>
<a name="line-37"></a>                             <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span><span class="p">,</span> <span class="s">&quot;2nd option name&quot;</span> <span class="p">},</span>
<a name="line-38"></a>                             <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F3</span><span class="p">,</span> <span class="s">&quot;3rd option name&quot;</span> <span class="p">}</span> <span class="p">},</span>
<a name="line-39"></a>                           <span class="c1">//! map Enums to names</span>
<a name="line-40"></a>                           <span class="p">{</span> <span class="p">{</span> <span class="s">&quot;1st option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span> <span class="p">},</span>
<a name="line-41"></a>                             <span class="p">{</span> <span class="s">&quot;2nd option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span> <span class="p">},</span>
<a name="line-42"></a>                             <span class="p">{</span> <span class="s">&quot;3rd option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F3</span> <span class="p">}</span> <span class="p">}</span> <span class="p">);</span>
<a name="line-43"></a><span class="p">};</span>
<a name="line-44"></a>
<a name="line-45"></a><span class="c1">//! Test group shortcuts</span>
<a name="line-46"></a><span class="k">using</span> <span class="n">Toggle_group</span> <span class="o">=</span> <span class="n">test_group</span><span class="o">&lt;</span> <span class="n">Toggle_common</span><span class="p">,</span> <span class="n">MAX_TESTS_IN_GROUP</span> <span class="o">&gt;</span><span class="p">;</span>
<a name="line-47"></a><span class="k">using</span> <span class="n">Toggle_object</span> <span class="o">=</span> <span class="n">Toggle_group</span><span class="o">::</span><span class="n">object</span><span class="p">;</span>
<a name="line-48"></a>
<a name="line-49"></a><span class="c1">//! Define test group</span>
<a name="line-50"></a><span class="k">static</span> <span class="n">Toggle_group</span> <span class="nf">Toggle</span><span class="p">(</span> <span class="s">&quot;Control/Toggle&quot;</span> <span class="p">);</span>
<a name="line-51"></a>
<a name="line-52"></a><span class="c1">//! Test definitions for group</span>
<a name="line-53"></a>
<a name="line-54"></a><span class="c1">//! Test that constructor throws if maps aren&#39;t the same size</span>
<a name="line-55"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-56"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-57"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;ctor throws if maps aren&#39;t the same size&quot;</span> <span class="p">);</span>
<a name="line-58"></a>
<a name="line-59"></a>  <span class="c1">// Quiet std::cerr, to quiet exception message during its ctor</span>
<a name="line-60"></a>  <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">quiet</span><span class="p">;</span>
<a name="line-61"></a>  <span class="n">tk</span><span class="o">::</span><span class="n">cerr_redirect</span> <span class="n">cerr_quiet</span><span class="p">(</span> <span class="n">quiet</span><span class="p">.</span><span class="n">rdbuf</span><span class="p">()</span> <span class="p">);</span>
<a name="line-62"></a>
<a name="line-63"></a>  <span class="k">try</span> <span class="p">{</span>
<a name="line-64"></a>
<a name="line-65"></a>    <span class="n">toggle</span> <span class="n">t</span><span class="p">(</span> <span class="s">&quot;some switch name describing the option&quot;</span><span class="p">,</span>
<a name="line-66"></a>              <span class="c1">//! map Enums to names</span>
<a name="line-67"></a>              <span class="p">{</span> <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span><span class="p">,</span> <span class="s">&quot;1st option name&quot;</span> <span class="p">},</span>
<a name="line-68"></a>                <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span><span class="p">,</span> <span class="s">&quot;2nd option name&quot;</span> <span class="p">},</span>
<a name="line-69"></a>                <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F3</span><span class="p">,</span> <span class="s">&quot;3rd option name&quot;</span> <span class="p">}</span> <span class="p">},</span>
<a name="line-70"></a>              <span class="c1">//! map Enums to names</span>
<a name="line-71"></a>              <span class="p">{</span> <span class="p">{</span> <span class="s">&quot;1st option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span> <span class="p">},</span>
<a name="line-72"></a>                <span class="p">{</span> <span class="s">&quot;2nd option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span> <span class="p">}</span> <span class="p">}</span> <span class="p">);</span>
<a name="line-73"></a>    <span class="cp">#ifndef NDEBUG</span>
<a name="line-74"></a>    <span class="n">fail</span><span class="p">(</span> <span class="s">&quot;should throw exception in DEBUG mode&quot;</span> <span class="p">);</span>
<a name="line-75"></a>    <span class="cp">#endif</span>
<a name="line-76"></a>
<a name="line-77"></a>  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span> <span class="n">e</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-78"></a>    <span class="c1">// exception thrown in DEBUG mode, test ok, Assert skipped in RELEASE mode</span>
<a name="line-79"></a>    <span class="c1">// if any other type of exception is thrown, test fails with except</span>
<a name="line-80"></a>    <span class="n">ensure</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;wrong exception thrown: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">(),</span>
<a name="line-81"></a>            <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="p">).</span><span class="n">find</span><span class="p">(</span> <span class="s">&quot;map sizes differ in Toggle&quot;</span> <span class="p">)</span> <span class="o">!=</span>
<a name="line-82"></a>              <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span> <span class="p">);</span>
<a name="line-83"></a>  <span class="p">}</span>
<a name="line-84"></a><span class="p">}</span>
<a name="line-85"></a>
<a name="line-86"></a><span class="c1">//! Test that member function group() returns the correct groupname</span>
<a name="line-87"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-88"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">2</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-89"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;group() returns groupname&quot;</span> <span class="p">);</span>
<a name="line-90"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;groupname incorrect&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">group</span><span class="p">(),</span> <span class="s">&quot;switch name&quot;</span> <span class="p">);</span>
<a name="line-91"></a><span class="p">}</span>
<a name="line-92"></a>
<a name="line-93"></a><span class="c1">//! Test that member function value() finds value for keyword</span>
<a name="line-94"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-95"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">3</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-96"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;value() finds value for keyword&quot;</span> <span class="p">);</span>
<a name="line-97"></a>  <span class="n">ensure</span><span class="p">(</span> <span class="s">&quot;cannot find keyword&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s">&quot;2nd option keyword&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span> <span class="p">);</span>
<a name="line-98"></a><span class="p">}</span>
<a name="line-99"></a>
<a name="line-100"></a><span class="c1">//! Test that member function value() throws in DEBUG mode if can&#39;t find keyword</span>
<a name="line-101"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-102"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">4</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-103"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;value() throws if can&#39;t find keyword&quot;</span> <span class="p">);</span>
<a name="line-104"></a>
<a name="line-105"></a>  <span class="c1">// Quiet std::cerr, to quiet exception message during its ctor</span>
<a name="line-106"></a>  <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">quiet</span><span class="p">;</span>
<a name="line-107"></a>  <span class="n">tk</span><span class="o">::</span><span class="n">cerr_redirect</span> <span class="n">cerr_quiet</span><span class="p">(</span> <span class="n">quiet</span><span class="p">.</span><span class="n">rdbuf</span><span class="p">()</span> <span class="p">);</span>
<a name="line-108"></a>
<a name="line-109"></a>  <span class="k">try</span> <span class="p">{</span>
<a name="line-110"></a>
<a name="line-111"></a>    <span class="n">p</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="s">&quot;bogus keyword&quot;</span><span class="p">);</span>
<a name="line-112"></a>    <span class="cp">#ifndef NDEBUG</span>
<a name="line-113"></a>    <span class="n">fail</span><span class="p">(</span> <span class="s">&quot;should throw exception in DEBUG mode&quot;</span> <span class="p">);</span>
<a name="line-114"></a>    <span class="cp">#endif</span>
<a name="line-115"></a>
<a name="line-116"></a>  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span> <span class="n">e</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-117"></a>    <span class="c1">// exception thrown in DEBUG mode, test ok, Assert skipped in RELEASE mode</span>
<a name="line-118"></a>    <span class="c1">// if any other type of exception is thrown, test fails with except</span>
<a name="line-119"></a>    <span class="n">ensure</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;wrong exception thrown: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">(),</span>
<a name="line-120"></a>            <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="p">).</span><span class="n">find</span><span class="p">(</span> <span class="s">&quot;Cannot find value for keyword&quot;</span> <span class="p">)</span> <span class="o">!=</span>
<a name="line-121"></a>              <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span> <span class="p">);</span>
<a name="line-122"></a>
<a name="line-123"></a>  <span class="p">}</span>
<a name="line-124"></a><span class="p">}</span>
<a name="line-125"></a>
<a name="line-126"></a><span class="c1">//! Test that member function name() finds name for value</span>
<a name="line-127"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-128"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">5</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-129"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;name() finds name for value&quot;</span> <span class="p">);</span>
<a name="line-130"></a>  <span class="n">ensure</span><span class="p">(</span> <span class="s">&quot;cannot find value&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">(</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span> <span class="p">)</span> <span class="o">==</span> <span class="s">&quot;2nd option name&quot;</span> <span class="p">);</span>
<a name="line-131"></a><span class="p">}</span>
<a name="line-132"></a>
<a name="line-133"></a><span class="c1">//! Test that member function name() throws in DEBUG mode if can&#39;t find value</span>
<a name="line-134"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-135"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">6</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-136"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;name() throws if can&#39;t find value&quot;</span> <span class="p">);</span>
<a name="line-137"></a>
<a name="line-138"></a>  <span class="c1">// Quiet std::cerr, to quiet exception message during its ctor</span>
<a name="line-139"></a>  <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">quiet</span><span class="p">;</span>
<a name="line-140"></a>  <span class="n">tk</span><span class="o">::</span><span class="n">cerr_redirect</span> <span class="n">cerr_quiet</span><span class="p">(</span> <span class="n">quiet</span><span class="p">.</span><span class="n">rdbuf</span><span class="p">()</span> <span class="p">);</span>
<a name="line-141"></a>
<a name="line-142"></a>  <span class="k">try</span> <span class="p">{</span>
<a name="line-143"></a>
<a name="line-144"></a>    <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">(</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F4</span> <span class="p">);</span>
<a name="line-145"></a>    <span class="cp">#ifndef NDEBUG</span>
<a name="line-146"></a>    <span class="n">fail</span><span class="p">(</span> <span class="s">&quot;should throw exception in DEBUG mode&quot;</span> <span class="p">);</span>
<a name="line-147"></a>    <span class="cp">#endif</span>
<a name="line-148"></a>
<a name="line-149"></a>  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">Exception</span><span class="o">&amp;</span> <span class="n">e</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-150"></a>    <span class="c1">// exception thrown in DEBUG mode, test ok, Assert skipped in RELEASE mode</span>
<a name="line-151"></a>    <span class="c1">// if any other type of exception is thrown, test fails with except</span>
<a name="line-152"></a>    <span class="n">ensure</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;wrong exception thrown: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">(),</span>
<a name="line-153"></a>            <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="p">).</span><span class="n">find</span><span class="p">(</span> <span class="s">&quot;Cannot find name for value&quot;</span> <span class="p">)</span> <span class="o">!=</span>
<a name="line-154"></a>              <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span> <span class="p">);</span>
<a name="line-155"></a>
<a name="line-156"></a>  <span class="p">}</span>
<a name="line-157"></a><span class="p">}</span>
<a name="line-158"></a>
<a name="line-159"></a><span class="c1">//! Test that member function exist() finds existing keyword</span>
<a name="line-160"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-161"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">7</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-162"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;exist() finds existing keyword&quot;</span> <span class="p">);</span>
<a name="line-163"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;cannot find existing keyword&quot;</span><span class="p">,</span>
<a name="line-164"></a>                 <span class="n">p</span><span class="p">.</span><span class="n">exist</span><span class="p">(</span> <span class="s">&quot;1st option keyword&quot;</span> <span class="p">),</span> <span class="nb">true</span> <span class="p">);</span>
<a name="line-165"></a><span class="p">}</span>
<a name="line-166"></a>
<a name="line-167"></a><span class="c1">//! Test that member function exists() does not find non-existing keyword</span>
<a name="line-168"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-169"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">8</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-170"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;exist() doesn&#39;t find non-existing keyword&quot;</span> <span class="p">);</span>
<a name="line-171"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;finds non-existing keyword&quot;</span><span class="p">,</span>
<a name="line-172"></a>                 <span class="n">p</span><span class="p">.</span><span class="n">exist</span><span class="p">(</span> <span class="s">&quot;bogus keyword&quot;</span> <span class="p">),</span> <span class="nb">false</span> <span class="p">);</span>
<a name="line-173"></a><span class="p">}</span>
<a name="line-174"></a>
<a name="line-175"></a><span class="c1">//! Test copy constructor</span>
<a name="line-176"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-177"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">9</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-178"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;copy constructor&quot;</span> <span class="p">);</span>
<a name="line-179"></a>
<a name="line-180"></a>  <span class="n">toggle</span> <span class="nf">c</span><span class="p">(</span> <span class="n">p</span> <span class="p">);</span>
<a name="line-181"></a>  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">toggle</span> <span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
<a name="line-182"></a>  <span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">c</span> <span class="p">);</span>
<a name="line-183"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;copy constructor used to push_back a child of Toggle to a &quot;</span>
<a name="line-184"></a>                 <span class="s">&quot;std::vector&quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">exist</span><span class="p">(</span> <span class="s">&quot;2nd option keyword&quot;</span> <span class="p">),</span> <span class="nb">true</span> <span class="p">);</span>
<a name="line-185"></a><span class="p">}</span>
<a name="line-186"></a>
<a name="line-187"></a><span class="c1">//! Test move constructor</span>
<a name="line-188"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-189"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">10</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-190"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;move constructor&quot;</span> <span class="p">);</span>
<a name="line-191"></a>
<a name="line-192"></a>  <span class="n">toggle</span> <span class="nf">c</span><span class="p">(</span> <span class="n">p</span> <span class="p">);</span>
<a name="line-193"></a>  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">toggle</span> <span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>
<a name="line-194"></a>  <span class="n">v</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">);</span>
<a name="line-195"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;move constructor used to emplace_back a child of Toggle to a &quot;</span>
<a name="line-196"></a>                 <span class="s">&quot;std::vector&quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">group</span><span class="p">(),</span> <span class="s">&quot;switch name&quot;</span> <span class="p">);</span>
<a name="line-197"></a><span class="p">}</span>
<a name="line-198"></a>
<a name="line-199"></a><span class="c1">//! Test copy assignment</span>
<a name="line-200"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-201"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">11</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-202"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;copy assignment&quot;</span> <span class="p">);</span>
<a name="line-203"></a>
<a name="line-204"></a>  <span class="c1">// Only map first two fields of enum</span>
<a name="line-205"></a><span class="hll">  <span class="n">toggle</span> <span class="n">c</span> <span class="o">=</span> <span class="n">toggle</span><span class="p">(</span> <span class="s">&quot;second switch name&quot;</span><span class="p">,</span><span class='error2'>&lt;--- Variable 'c' is reassigned a value before the old one has been used.</span>
</span><a name="line-206"></a>                     <span class="c1">//! map Enums to names</span>
<a name="line-207"></a>                     <span class="p">{</span> <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span><span class="p">,</span> <span class="s">&quot;1st option name&quot;</span> <span class="p">},</span>
<a name="line-208"></a>                       <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span><span class="p">,</span> <span class="s">&quot;2nd option name&quot;</span> <span class="p">}</span> <span class="p">},</span>
<a name="line-209"></a>                     <span class="c1">//! map Enums to names</span>
<a name="line-210"></a>                     <span class="p">{</span> <span class="p">{</span> <span class="s">&quot;1st option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span> <span class="p">},</span>
<a name="line-211"></a>                       <span class="p">{</span> <span class="s">&quot;2nd option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span> <span class="p">}</span> <span class="p">}</span> <span class="p">);</span>
<a name="line-212"></a>  <span class="c1">// Copy p to c</span>
<a name="line-213"></a>  <span class="n">c</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<a name="line-214"></a>  <span class="c1">// c now should have a different group name and should have 3 options mapped</span>
<a name="line-215"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;new group name of copy-assigned Toggle&quot;</span><span class="p">,</span>
<a name="line-216"></a>                 <span class="n">c</span><span class="p">.</span><span class="n">group</span><span class="p">(),</span> <span class="s">&quot;switch name&quot;</span> <span class="p">);</span>
<a name="line-217"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;find new key of copy-assigned Toggle&quot;</span><span class="p">,</span>
<a name="line-218"></a>                 <span class="n">c</span><span class="p">.</span><span class="n">exist</span><span class="p">(</span> <span class="s">&quot;3rd option keyword&quot;</span> <span class="p">),</span> <span class="nb">true</span> <span class="p">);</span>
<a name="line-219"></a><span class="p">}</span>
<a name="line-220"></a>
<a name="line-221"></a><span class="c1">//! Test move assignment</span>
<a name="line-222"></a><span class="k">template</span><span class="o">&lt;&gt;</span> <span class="k">template</span><span class="o">&lt;&gt;</span>
<a name="line-223"></a><span class="kt">void</span> <span class="n">Toggle_object</span><span class="o">::</span><span class="n">test</span><span class="o">&lt;</span> <span class="mi">12</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span>
<a name="line-224"></a>  <span class="n">set_test_name</span><span class="p">(</span> <span class="s">&quot;move assignment&quot;</span> <span class="p">);</span>
<a name="line-225"></a>
<a name="line-226"></a>  <span class="c1">// Only map first two fields of enum</span>
<a name="line-227"></a><span class="hll">  <span class="n">toggle</span> <span class="n">c</span> <span class="o">=</span> <span class="n">toggle</span><span class="p">(</span> <span class="s">&quot;second switch name&quot;</span><span class="p">,</span><span class='error2'>&lt;--- Variable 'c' is reassigned a value before the old one has been used.</span>
</span><a name="line-228"></a>                     <span class="c1">//! map Enums to names</span>
<a name="line-229"></a>                     <span class="p">{</span> <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span><span class="p">,</span> <span class="s">&quot;1st option name&quot;</span> <span class="p">},</span>
<a name="line-230"></a>                       <span class="p">{</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span><span class="p">,</span> <span class="s">&quot;2nd option name&quot;</span> <span class="p">}</span> <span class="p">},</span>
<a name="line-231"></a>                     <span class="c1">//! map Enums to names</span>
<a name="line-232"></a>                     <span class="p">{</span> <span class="p">{</span> <span class="s">&quot;1st option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F1</span> <span class="p">},</span>
<a name="line-233"></a>                       <span class="p">{</span> <span class="s">&quot;2nd option keyword&quot;</span><span class="p">,</span> <span class="n">Enum</span><span class="o">::</span><span class="n">F2</span> <span class="p">}</span> <span class="p">}</span> <span class="p">);</span>
<a name="line-234"></a>  <span class="c1">// Move p to c</span>
<a name="line-235"></a>  <span class="n">c</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span> <span class="n">p</span> <span class="p">);</span>
<a name="line-236"></a>  <span class="c1">// c now should have a different group name and should have 3 options mapped</span>
<a name="line-237"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;new group name of move-assigned Toggle&quot;</span><span class="p">,</span>
<a name="line-238"></a>                 <span class="n">c</span><span class="p">.</span><span class="n">group</span><span class="p">(),</span> <span class="s">&quot;switch name&quot;</span> <span class="p">);</span>
<a name="line-239"></a>  <span class="n">ensure_equals</span><span class="p">(</span> <span class="s">&quot;find new key of moved-assigned Toggle&quot;</span><span class="p">,</span>
<a name="line-240"></a>                 <span class="n">c</span><span class="p">.</span><span class="n">exist</span><span class="p">(</span> <span class="s">&quot;3rd option keyword&quot;</span> <span class="p">),</span> <span class="nb">true</span> <span class="p">);</span>
<a name="line-241"></a><span class="p">}</span>
<a name="line-242"></a>
<a name="line-243"></a><span class="p">}</span> <span class="c1">// tut::</span>
<a name="line-244"></a>
<a name="line-245"></a><span class="cp">#endif  </span><span class="c1">// DOXYGEN_GENERATING_OUTPUT</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.86 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.net">http://cppcheck.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
