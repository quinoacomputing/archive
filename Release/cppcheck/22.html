
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href="https://github.com/quinoacomputing/quinoa/commit/9133450">Quinoa_v0.2-1234-g9133450</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [<a href="https://github.com/quinoacomputing/quinoa/commit/9133450">Quinoa_v0.2-1234-g9133450</a>]: /tmp/TeamCity-12/work/821a9fd6f64749d9/src/Inciter/DG.h </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> DG.h</p>
<a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a><a href='22.html#line-70'> uninitMemberVar 70</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">// *****************************************************************************</span>
<a name="line-2"></a><span class="cm">/*!</span>
<a name="line-3"></a><span class="cm">  \file      src/Inciter/DG.h</span>
<a name="line-4"></a><span class="cm">  \copyright 2016-2018, Los Alamos National Security, LLC.</span>
<a name="line-5"></a><span class="cm">  \brief     DG advances a system of PDEs with the discontinuous Galerkin scheme</span>
<a name="line-6"></a><span class="cm">  \details   DG advances a system of partial differential equations (PDEs) using</span>
<a name="line-7"></a><span class="cm">    discontinuous Galerkin (DG) finite element (FE) spatial discretization (on</span>
<a name="line-8"></a><span class="cm">    tetrahedron elements) combined with Runge-Kutta (RK) time stepping.</span>
<a name="line-9"></a>
<a name="line-10"></a><span class="cm">    There are a potentially large number of DG Charm++ chares created by</span>
<a name="line-11"></a><span class="cm">    Transporter. Each DG gets a chunk of the full load (part of the mesh)</span>
<a name="line-12"></a><span class="cm">    and does the same: initializes and advances a number of PDE systems in time.</span>
<a name="line-13"></a>
<a name="line-14"></a><span class="cm">    The implementation uses the Charm++ runtime system and is fully</span>
<a name="line-15"></a><span class="cm">    asynchronous, overlapping computation and communication. The algorithm</span>
<a name="line-16"></a><span class="cm">    utilizes the structured dagger (SDAG) Charm++ functionality. The high-level</span>
<a name="line-17"></a><span class="cm">    overview of the algorithm structure and how it interfaces with Charm++ is</span>
<a name="line-18"></a><span class="cm">    discussed in the Charm++ interface file src/Inciter/dg.ci.</span>
<a name="line-19"></a><span class="cm">*/</span>
<a name="line-20"></a><span class="c1">// *****************************************************************************</span>
<a name="line-21"></a><span class="cp">#ifndef DG_h</span>
<a name="line-22"></a><span class="cp">#define DG_h</span>
<a name="line-23"></a>
<a name="line-24"></a><span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp"></span>
<a name="line-25"></a><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp"></span>
<a name="line-26"></a><span class="cp">#include</span> <span class="cpf">&lt;unordered_set&gt;</span><span class="cp"></span>
<a name="line-27"></a><span class="cp">#include</span> <span class="cpf">&lt;unordered_map&gt;</span><span class="cp"></span>
<a name="line-28"></a>
<a name="line-29"></a><span class="cp">#include</span> <span class="cpf">&quot;DerivedData.h&quot;</span><span class="cp"></span>
<a name="line-30"></a><span class="cp">#include</span> <span class="cpf">&quot;FaceData.h&quot;</span><span class="cp"></span>
<a name="line-31"></a><span class="cp">#include</span> <span class="cpf">&quot;ElemDiagnostics.h&quot;</span><span class="cp"></span>
<a name="line-32"></a>
<a name="line-33"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/dg.decl.h&quot;</span><span class="cp"></span>
<a name="line-34"></a>
<a name="line-35"></a><span class="n">namespace</span> <span class="n">inciter</span> <span class="p">{</span>
<a name="line-36"></a>
<a name="line-37"></a><span class="c1">//! DG Charm++ chare array used to advance PDEs in time with DG+RK</span>
<a name="line-38"></a><span class="n">class</span> <span class="nl">DG</span> <span class="p">:</span> <span class="n">public</span> <span class="n">CBase_DG</span> <span class="p">{</span>
<a name="line-39"></a>
<a name="line-40"></a>  <span class="nl">public</span><span class="p">:</span>
<a name="line-41"></a>    <span class="cp">#if defined(__clang__)</span>
<a name="line-42"></a>      <span class="cp">#pragma clang diagnostic push</span>
<a name="line-43"></a>      <span class="cp">#pragma clang diagnostic ignored &quot;-Wunused-parameter&quot;</span>
<a name="line-44"></a>      <span class="cp">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span>
<a name="line-45"></a>    <span class="cp">#elif defined(STRICT_GNUC)</span>
<a name="line-46"></a>      <span class="cp">#pragma GCC diagnostic push</span>
<a name="line-47"></a>      <span class="cp">#pragma GCC diagnostic ignored &quot;-Wunused-parameter&quot;</span>
<a name="line-48"></a>      <span class="cp">#pragma GCC diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span>
<a name="line-49"></a>    <span class="cp">#elif defined(__INTEL_COMPILER)</span>
<a name="line-50"></a>      <span class="cp">#pragma warning( push )</span>
<a name="line-51"></a>      <span class="cp">#pragma warning( disable: 1478 )</span>
<a name="line-52"></a>    <span class="cp">#endif</span>
<a name="line-53"></a>    <span class="c1">// Include Charm++ SDAG code. See http://charm.cs.illinois.edu/manuals/html/</span>
<a name="line-54"></a>    <span class="c1">// charm++/manual.html, Sec. &quot;Structured Control Flow: Structured Dagger&quot;.</span>
<a name="line-55"></a>    <span class="n">DG_SDAG_CODE</span>
<a name="line-56"></a>    <span class="cp">#if defined(__clang__)</span>
<a name="line-57"></a>      <span class="cp">#pragma clang diagnostic pop</span>
<a name="line-58"></a>    <span class="cp">#elif defined(STRICT_GNUC)</span>
<a name="line-59"></a>      <span class="cp">#pragma GCC diagnostic pop</span>
<a name="line-60"></a>    <span class="cp">#elif defined(__INTEL_COMPILER)</span>
<a name="line-61"></a>      <span class="cp">#pragma warning( pop )</span>
<a name="line-62"></a>    <span class="cp">#endif</span>
<a name="line-63"></a>
<a name="line-64"></a>    <span class="c1">//! Constructor</span>
<a name="line-65"></a>    <span class="n">explicit</span> <span class="n">DG</span><span class="p">(</span> <span class="k">const</span> <span class="n">CProxy_Discretization</span><span class="o">&amp;</span> <span class="n">disc</span><span class="p">,</span>
<a name="line-66"></a>                 <span class="k">const</span> <span class="n">tk</span><span class="o">::</span><span class="n">CProxy_Solver</span><span class="o">&amp;</span> <span class="n">solver</span><span class="p">,</span>
<a name="line-67"></a>                 <span class="k">const</span> <span class="n">FaceData</span><span class="o">&amp;</span> <span class="n">fd</span> <span class="p">);</span>
<a name="line-68"></a>
<a name="line-69"></a>    <span class="c1">//! Migrate constructor</span>
<a name="line-70"></a><span class="hll">    <span class="n">explicit</span> <span class="nf">DG</span><span class="p">(</span> <span class="n">CkMigrateMessage</span><span class="o">*</span> <span class="p">)</span> <span class="p">{}</span><span class='error2'>&lt;--- Member variable 'DG::m_ncomfac' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_nadj' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_nsol' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_itf' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_nfac' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_nunk' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_ghostReq' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_exptNbface' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'DG::m_stage' is not initialized in the constructor.</span>
</span><a name="line-71"></a>
<a name="line-72"></a>    <span class="c1">//! Receive unique set of faces we potentially share with/from another chare</span>
<a name="line-73"></a>    <span class="kt">void</span> <span class="nf">comfac</span><span class="p">(</span> <span class="kt">int</span> <span class="n">fromch</span><span class="p">,</span> <span class="k">const</span> <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">FaceSet</span><span class="o">&amp;</span> <span class="n">infaces</span> <span class="p">);</span>
<a name="line-74"></a>
<a name="line-75"></a>    <span class="c1">//! Receive ghost data on chare boundaries from fellow chare</span>
<a name="line-76"></a>    <span class="kt">void</span> <span class="nf">comGhost</span><span class="p">(</span> <span class="kt">int</span> <span class="n">fromch</span><span class="p">,</span> <span class="k">const</span> <span class="n">GhostData</span><span class="o">&amp;</span> <span class="n">ghost</span> <span class="p">);</span>
<a name="line-77"></a>
<a name="line-78"></a>    <span class="c1">//! Receive requests for ghost data</span>
<a name="line-79"></a>    <span class="kt">void</span> <span class="nf">reqGhost</span><span class="p">();</span>
<a name="line-80"></a>
<a name="line-81"></a>    <span class="c1">//! Send all of our ghost data to fellow chares</span>
<a name="line-82"></a>    <span class="kt">void</span> <span class="nf">sendGhost</span><span class="p">();</span>
<a name="line-83"></a>
<a name="line-84"></a>    <span class="c1">//! Configure Charm++ reduction types for concatenating BC nodelists</span>
<a name="line-85"></a>    <span class="k">static</span> <span class="kt">void</span> <span class="nf">registerReducers</span><span class="p">();</span>
<a name="line-86"></a>
<a name="line-87"></a>    <span class="c1">//! Setup: query boundary conditions, output mesh, etc.</span>
<a name="line-88"></a>    <span class="kt">void</span> <span class="nf">setup</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">v</span> <span class="p">);</span>
<a name="line-89"></a>
<a name="line-90"></a>    <span class="c1">//! Compute time step size</span>
<a name="line-91"></a>    <span class="kt">void</span> <span class="nf">dt</span><span class="p">();</span>
<a name="line-92"></a>
<a name="line-93"></a>    <span class="c1">//! Receive chare-boundary ghost data from neighboring chares</span>
<a name="line-94"></a>    <span class="kt">void</span> <span class="nf">comsol</span><span class="p">(</span> <span class="kt">int</span> <span class="n">fromch</span><span class="p">,</span>
<a name="line-95"></a>                 <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;&amp;</span> <span class="n">tetid</span><span class="p">,</span>
<a name="line-96"></a>                 <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;</span> <span class="o">&gt;&amp;</span> <span class="n">u</span> <span class="p">);</span>
<a name="line-97"></a>
<a name="line-98"></a>    <span class="c1">//! Evaluate whether to continue with next step</span>
<a name="line-99"></a>    <span class="kt">void</span> <span class="nf">eval</span><span class="p">();</span>
<a name="line-100"></a>
<a name="line-101"></a>    <span class="c1">//! Advance equations to next time step</span>
<a name="line-102"></a>    <span class="kt">void</span> <span class="nf">advance</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">newdt</span> <span class="p">);</span>
<a name="line-103"></a>
<a name="line-104"></a>    <span class="cm">/** @name Charm++ pack/unpack serializer member functions */</span>
<a name="line-105"></a>    <span class="c1">///@{</span>
<a name="line-106"></a>    <span class="c1">//! \brief Pack/Unpack serialize member function</span>
<a name="line-107"></a>    <span class="c1">//! \param[in,out] p Charm++&#39;s PUP::er serializer object reference</span>
<a name="line-108"></a>    <span class="kt">void</span> <span class="nf">pup</span><span class="p">(</span> <span class="n">PUP</span><span class="o">::</span><span class="n">er</span> <span class="o">&amp;</span><span class="n">p</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-109"></a>      <span class="n">CBase_DG</span><span class="o">::</span><span class="n">pup</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<a name="line-110"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_solver</span><span class="p">;</span>
<a name="line-111"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_ncomfac</span><span class="p">;</span>
<a name="line-112"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_nadj</span><span class="p">;</span>
<a name="line-113"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_nsol</span><span class="p">;</span>
<a name="line-114"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_itf</span><span class="p">;</span>
<a name="line-115"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_disc</span><span class="p">;</span>
<a name="line-116"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_fd</span><span class="p">;</span>
<a name="line-117"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_u</span><span class="p">;</span>
<a name="line-118"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_un</span><span class="p">;</span>
<a name="line-119"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_vol</span><span class="p">;</span>
<a name="line-120"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_geoFace</span><span class="p">;</span>
<a name="line-121"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_geoElem</span><span class="p">;</span>
<a name="line-122"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_lhs</span><span class="p">;</span>
<a name="line-123"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_rhs</span><span class="p">;</span>
<a name="line-124"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_nfac</span><span class="p">;</span>
<a name="line-125"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_nunk</span><span class="p">;</span>
<a name="line-126"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_msumset</span><span class="p">;</span>
<a name="line-127"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_esuelTet</span><span class="p">;</span>
<a name="line-128"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_ipface</span><span class="p">;</span>
<a name="line-129"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_bndFace</span><span class="p">;</span>
<a name="line-130"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_ghostData</span><span class="p">;</span>
<a name="line-131"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_ghostReq</span><span class="p">;</span>
<a name="line-132"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_exptNbface</span><span class="p">;</span>
<a name="line-133"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_ghost</span><span class="p">;</span>
<a name="line-134"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_exptGhost</span><span class="p">;</span>
<a name="line-135"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_recvGhost</span><span class="p">;</span>
<a name="line-136"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_diag</span><span class="p">;</span>
<a name="line-137"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_stage</span><span class="p">;</span>
<a name="line-138"></a>      <span class="n">p</span> <span class="o">|</span> <span class="n">m_rkcoef</span><span class="p">;</span>
<a name="line-139"></a>    <span class="p">}</span>
<a name="line-140"></a>    <span class="c1">//! \brief Pack/Unpack serialize operator|</span>
<a name="line-141"></a>    <span class="c1">//! \param[in,out] p Charm++&#39;s PUP::er serializer object reference</span>
<a name="line-142"></a>    <span class="c1">//! \param[in,out] i DG object reference</span>
<a name="line-143"></a>    <span class="n">friend</span> <span class="kt">void</span> <span class="n">operator</span><span class="o">|</span><span class="p">(</span> <span class="n">PUP</span><span class="o">::</span><span class="n">er</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">,</span> <span class="n">DG</span><span class="o">&amp;</span> <span class="n">i</span> <span class="p">)</span> <span class="p">{</span> <span class="n">i</span><span class="p">.</span><span class="n">pup</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="p">}</span>
<a name="line-144"></a>    <span class="c1">//@}</span>
<a name="line-145"></a>
<a name="line-146"></a>  <span class="nl">private</span><span class="p">:</span>
<a name="line-147"></a>    <span class="c1">//! Local face &amp; tet IDs associated to 3 global node IDs</span>
<a name="line-148"></a>    <span class="c1">//! \details This map stores tetrahedron cell faces (map key) and their</span>
<a name="line-149"></a>    <span class="c1">//!   associated local face ID and inner local tet id adjacent to the face</span>
<a name="line-150"></a>    <span class="c1">//!   (map value). A face is given by 3 global node IDs.</span>
<a name="line-151"></a>    <span class="n">using</span> <span class="n">FaceMap</span> <span class="o">=</span>
<a name="line-152"></a>      <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">Face</span><span class="p">,</span>  <span class="c1">// 3 global node IDs</span>
<a name="line-153"></a>                          <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">,</span> <span class="mi">2</span> <span class="o">&gt;</span><span class="p">,</span> <span class="c1">// local face &amp; tet ID</span>
<a name="line-154"></a>                          <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">Hash</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span><span class="p">,</span>
<a name="line-155"></a>                          <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">Eq</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">;</span>
<a name="line-156"></a>
<a name="line-157"></a>    <span class="c1">//! Linear system merger and solver proxy, only used to call created()</span>
<a name="line-158"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">CProxy_Solver</span> <span class="n">m_solver</span><span class="p">;</span>
<a name="line-159"></a>    <span class="c1">//! Counter for face adjacency communication map</span>
<a name="line-160"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_ncomfac</span><span class="p">;</span>
<a name="line-161"></a>    <span class="c1">//! Counter signaling that all ghost data have been received</span>
<a name="line-162"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_nadj</span><span class="p">;</span>
<a name="line-163"></a>    <span class="c1">//! Counter signaling that we have received all our solution ghost data</span>
<a name="line-164"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_nsol</span><span class="p">;</span>
<a name="line-165"></a>    <span class="c1">//! Field output iteration count</span>
<a name="line-166"></a>    <span class="kt">uint64_t</span> <span class="n">m_itf</span><span class="p">;</span>
<a name="line-167"></a>    <span class="c1">//! Discretization proxy</span>
<a name="line-168"></a>    <span class="n">CProxy_Discretization</span> <span class="n">m_disc</span><span class="p">;</span>
<a name="line-169"></a>    <span class="c1">//! Face data</span>
<a name="line-170"></a>    <span class="n">FaceData</span> <span class="n">m_fd</span><span class="p">;</span>
<a name="line-171"></a>    <span class="c1">//! Vector of unknown/solution average over each mesh element</span>
<a name="line-172"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Fields</span> <span class="n">m_u</span><span class="p">;</span>
<a name="line-173"></a>    <span class="c1">//! Vector of unknown at previous time-step</span>
<a name="line-174"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Fields</span> <span class="n">m_un</span><span class="p">;</span>
<a name="line-175"></a>    <span class="c1">//! Total mesh volume</span>
<a name="line-176"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">m_vol</span><span class="p">;</span>
<a name="line-177"></a>    <span class="c1">//! Face geometry</span>
<a name="line-178"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Fields</span> <span class="n">m_geoFace</span><span class="p">;</span>
<a name="line-179"></a>    <span class="c1">//! Element geometry</span>
<a name="line-180"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Fields</span> <span class="n">m_geoElem</span><span class="p">;</span>
<a name="line-181"></a>    <span class="c1">//! Left-hand side mass-matrix which is a diagonal matrix</span>
<a name="line-182"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Fields</span> <span class="n">m_lhs</span><span class="p">;</span>
<a name="line-183"></a>    <span class="c1">//! Vector of right-hand side</span>
<a name="line-184"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">Fields</span> <span class="n">m_rhs</span><span class="p">;</span>
<a name="line-185"></a>    <span class="c1">//! Counter for number of faces on this chare (including chare boundaries)</span>
<a name="line-186"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_nfac</span><span class="p">;</span>
<a name="line-187"></a>    <span class="c1">//! Counter for number of unknowns on this chare (including ghosts)</span>
<a name="line-188"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_nunk</span><span class="p">;</span>
<a name="line-189"></a>    <span class="c1">//! \brief Global mesh node IDs bordering the mesh chunk held by fellow</span>
<a name="line-190"></a>    <span class="c1">//!    worker chares associated to their chare IDs</span>
<a name="line-191"></a>    <span class="c1">//! \details msum: mesh chunks surrounding mesh chunks and their neighbor</span>
<a name="line-192"></a>    <span class="c1">//!   points. This is the same data as in Discretization::m_msum, but the</span>
<a name="line-193"></a>    <span class="c1">//!   nodelist is stored as a set.</span>
<a name="line-194"></a>    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">m_msumset</span><span class="p">;</span>
<a name="line-195"></a>    <span class="c1">//! Elements surrounding elements with -1 at boundaries, see genEsuelTet()</span>
<a name="line-196"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">m_esuelTet</span><span class="p">;</span>
<a name="line-197"></a>    <span class="c1">//! Internal + physical boundary faces (inverse of inpofa)</span>
<a name="line-198"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">FaceSet</span> <span class="n">m_ipface</span><span class="p">;</span>
<a name="line-199"></a>    <span class="c1">//! Face * tet IDs associated to global node IDs of the face for each chare</span>
<a name="line-200"></a>    <span class="c1">//! \details This maps stores not only the unique faces associated to</span>
<a name="line-201"></a>    <span class="c1">//!   fellow chares, but also a newly assigned local face ID and adjacent</span>
<a name="line-202"></a>    <span class="c1">//!   local tet ID.</span>
<a name="line-203"></a>    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">FaceMap</span> <span class="o">&gt;</span> <span class="n">m_bndFace</span><span class="p">;</span>
<a name="line-204"></a>    <span class="c1">//! Ghost data associated to chare IDs we communicate with</span>
<a name="line-205"></a>    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">GhostData</span> <span class="o">&gt;</span> <span class="n">m_ghostData</span><span class="p">;</span>
<a name="line-206"></a>    <span class="c1">//! Number of chares requesting ghost data</span>
<a name="line-207"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_ghostReq</span><span class="p">;</span>
<a name="line-208"></a>    <span class="c1">//! Expected number of boundary faces (used only in DEBUG)</span>
<a name="line-209"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_exptNbface</span><span class="p">;</span>
<a name="line-210"></a>    <span class="c1">//! Local element id associated to ghost remote id charewise</span>
<a name="line-211"></a>    <span class="c1">//! \details This map associates the local element id (inner map value) to</span>
<a name="line-212"></a>    <span class="c1">//!    the (remote) element id of the ghost (inner map key) based on the</span>
<a name="line-213"></a>    <span class="c1">//!    chare id (outer map key) this remote element lies in.</span>
<a name="line-214"></a>    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span>
<a name="line-215"></a>      <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">m_ghost</span><span class="p">;</span>
<a name="line-216"></a>    <span class="c1">//! Expected ghost tet ids (used only in DEBUG)</span>
<a name="line-217"></a>    <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="n">m_exptGhost</span><span class="p">;</span>
<a name="line-218"></a>    <span class="c1">//! Received ghost tet ids (used only in DEBUG)</span>
<a name="line-219"></a>    <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="n">m_recvGhost</span><span class="p">;</span>
<a name="line-220"></a>    <span class="c1">//! Diagnostics object</span>
<a name="line-221"></a>    <span class="n">ElemDiagnostics</span> <span class="n">m_diag</span><span class="p">;</span>
<a name="line-222"></a>    <span class="c1">//! Runge-Kutta stage counter</span>
<a name="line-223"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m_stage</span><span class="p">;</span>
<a name="line-224"></a>    <span class="c1">//! Runge-Kutta coefficients</span>
<a name="line-225"></a>    <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span><span class="p">,</span> <span class="mi">3</span> <span class="o">&gt;</span><span class="p">,</span> <span class="mi">2</span> <span class="o">&gt;</span>
<a name="line-226"></a>      <span class="n">m_rkcoef</span><span class="p">{{</span> <span class="p">{{</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="o">/</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span> <span class="p">}},</span> <span class="p">{{</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="o">/</span><span class="mf">3.0</span> <span class="p">}}</span> <span class="p">}};</span>
<a name="line-227"></a>
<a name="line-228"></a>    <span class="c1">//! Access bound Discretization class pointer</span>
<a name="line-229"></a>    <span class="n">Discretization</span><span class="o">*</span> <span class="nf">Disc</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
<a name="line-230"></a>      <span class="n">Assert</span><span class="p">(</span> <span class="n">m_disc</span><span class="p">[</span> <span class="n">thisIndex</span> <span class="p">].</span><span class="n">ckLocal</span><span class="p">()</span> <span class="o">!=</span> <span class="n">nullptr</span><span class="p">,</span> <span class="s">&quot;ckLocal() null&quot;</span> <span class="p">);</span>
<a name="line-231"></a>      <span class="k">return</span> <span class="n">m_disc</span><span class="p">[</span> <span class="n">thisIndex</span> <span class="p">].</span><span class="n">ckLocal</span><span class="p">();</span>
<a name="line-232"></a>    <span class="p">}</span>
<a name="line-233"></a>
<a name="line-234"></a>    <span class="c1">//! Perform leak test on mesh partition</span>
<a name="line-235"></a>    <span class="kt">bool</span> <span class="nf">leakyPartition</span><span class="p">();</span>
<a name="line-236"></a>
<a name="line-237"></a>    <span class="c1">//! Perform leak test on chare-boundary faces</span>
<a name="line-238"></a>    <span class="kt">bool</span> <span class="nf">leakyAdjacency</span><span class="p">();</span>
<a name="line-239"></a>
<a name="line-240"></a>    <span class="c1">//! Find any chare for face (given by 3 global node IDs)</span>
<a name="line-241"></a>    <span class="kt">int</span> <span class="nf">findchare</span><span class="p">(</span> <span class="k">const</span> <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">Face</span><span class="o">&amp;</span> <span class="n">t</span> <span class="p">);</span>
<a name="line-242"></a>
<a name="line-243"></a>    <span class="c1">//! Setup own ghost data on this chare</span>
<a name="line-244"></a>    <span class="kt">void</span> <span class="nf">setupGhost</span><span class="p">();</span>
<a name="line-245"></a>
<a name="line-246"></a>    <span class="c1">//! Convert chare-node adjacency map to hold sets instead of vectors</span>
<a name="line-247"></a>    <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="o">&gt;</span>
<a name="line-248"></a>    <span class="n">msumset</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
<a name="line-249"></a>
<a name="line-250"></a>    <span class="c1">//! Continue after face adjacency communication map completed on this chare</span>
<a name="line-251"></a>    <span class="kt">void</span> <span class="nf">adj</span><span class="p">();</span>
<a name="line-252"></a>
<a name="line-253"></a>    <span class="c1">//! Fill elements surrounding a face along chare boundary</span>
<a name="line-254"></a>    <span class="kt">void</span> <span class="nf">addEsuf</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">,</span> <span class="mi">2</span> <span class="o">&gt;&amp;</span> <span class="n">id</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">ghostid</span> <span class="p">);</span>
<a name="line-255"></a>
<a name="line-256"></a>    <span class="c1">//! Fill face geometry data along chare boundary</span>
<a name="line-257"></a>    <span class="kt">void</span> <span class="nf">addGeoFace</span><span class="p">(</span> <span class="k">const</span> <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">Face</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">,</span>
<a name="line-258"></a>                     <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">,</span> <span class="mi">2</span> <span class="o">&gt;&amp;</span> <span class="n">id</span> <span class="p">);</span>
<a name="line-259"></a>
<a name="line-260"></a>    <span class="c1">//! Compute left hand side</span>
<a name="line-261"></a>    <span class="kt">void</span> <span class="nf">lhs</span><span class="p">();</span>
<a name="line-262"></a>
<a name="line-263"></a>    <span class="c1">//! Compute right hand side and solve system</span>
<a name="line-264"></a>    <span class="kt">void</span> <span class="nf">solve</span><span class="p">();</span>
<a name="line-265"></a>
<a name="line-266"></a>    <span class="c1">//! Output mesh and particle fields to files</span>
<a name="line-267"></a>    <span class="kt">void</span> <span class="nf">out</span><span class="p">();</span>
<a name="line-268"></a>
<a name="line-269"></a>    <span class="c1">//! Output mesh-based fields to file</span>
<a name="line-270"></a>    <span class="kt">void</span> <span class="nf">writeFields</span><span class="p">(</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="n">time</span> <span class="p">);</span>
<a name="line-271"></a><span class="p">};</span>
<a name="line-272"></a>
<a name="line-273"></a><span class="p">}</span> <span class="c1">// inciter::</span>
<a name="line-274"></a>
<a name="line-275"></a><span class="cp">#endif </span><span class="c1">// DG_h</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.83 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.net">http://cppcheck.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
