
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href="https://github.com/quinoacomputing/quinoa/commit/a2d77fc">Quinoa_v0.2-2158-ga2d77fc</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [<a href="https://github.com/quinoacomputing/quinoa/commit/a2d77fc">Quinoa_v0.2-2158-ga2d77fc</a>]: /tmp/TeamCity-12/work/821a9fd6f64749d9/src/DiffEq/DiffEqStack.h </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> DiffEqStack.h</p>
<a href='12.html#line-140'> useStlAlgorithm 140</a><a href='12.html#line-141'> useStlAlgorithm 141</a><a href='12.html#line-147'> useStlAlgorithm 147</a><a href='12.html#line-148'> useStlAlgorithm 148</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">// *****************************************************************************</span>
<a name="line-2"></a><span class="cm">/*!</span>
<a name="line-3"></a><span class="cm">  \file      src/DiffEq/DiffEqStack.h</span>
<a name="line-4"></a><span class="cm">  \copyright 2012-2015, J. Bakosi, 2016-2018, Los Alamos National Security, LLC.</span>
<a name="line-5"></a><span class="cm">  \brief     Stack of differential equations</span>
<a name="line-6"></a><span class="cm">  \details   This file declares class DiffEqStack, which implements various</span>
<a name="line-7"></a><span class="cm">    functionality related to registering and instantiating differential equation</span>
<a name="line-8"></a><span class="cm">    types. Registration and instantiation use a differential equation factory,</span>
<a name="line-9"></a><span class="cm">    which is a std::map (an associative container), associating unique</span>
<a name="line-10"></a><span class="cm">    differential equation keys to their constructor calls. For more details, see</span>
<a name="line-11"></a><span class="cm">    the in-code documentation of the constructor.</span>
<a name="line-12"></a><span class="cm">*/</span>
<a name="line-13"></a><span class="c1">// *****************************************************************************</span>
<a name="line-14"></a><span class="cp">#ifndef DiffEqStack_h</span>
<a name="line-15"></a><span class="cp">#define DiffEqStack_h</span>
<a name="line-16"></a>
<a name="line-17"></a><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp"></span>
<a name="line-18"></a><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp"></span>
<a name="line-19"></a><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<a name="line-20"></a><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<a name="line-21"></a>
<a name="line-22"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/back.h&quot;</span><span class="cp"></span>
<a name="line-23"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/front.h&quot;</span><span class="cp"></span>
<a name="line-24"></a>
<a name="line-25"></a><span class="cp">#include</span> <span class="cpf">&quot;Tags.h&quot;</span><span class="cp"></span>
<a name="line-26"></a><span class="cp">#include</span> <span class="cpf">&quot;Exception.h&quot;</span><span class="cp"></span>
<a name="line-27"></a><span class="cp">#include</span> <span class="cpf">&quot;DiffEq.h&quot;</span><span class="cp"></span>
<a name="line-28"></a><span class="cp">#include</span> <span class="cpf">&quot;DiffEqFactory.h&quot;</span><span class="cp"></span>
<a name="line-29"></a><span class="cp">#include</span> <span class="cpf">&quot;SystemComponents.h&quot;</span><span class="cp"></span>
<a name="line-30"></a><span class="cp">#include</span> <span class="cpf">&quot;Walker/InputDeck/InputDeck.h&quot;</span><span class="cp"></span>
<a name="line-31"></a>
<a name="line-32"></a><span class="n">namespace</span> <span class="n">walker</span> <span class="p">{</span>
<a name="line-33"></a>
<a name="line-34"></a><span class="k">extern</span> <span class="n">ctr</span><span class="o">::</span><span class="n">InputDeck</span> <span class="n">g_inputdeck</span><span class="p">;</span>
<a name="line-35"></a>
<a name="line-36"></a><span class="c1">//! \brief Differential equations stack</span>
<a name="line-37"></a><span class="n">class</span> <span class="n">DiffEqStack</span> <span class="p">{</span>
<a name="line-38"></a>
<a name="line-39"></a>  <span class="nl">private</span><span class="p">:</span>
<a name="line-40"></a>    <span class="n">using</span> <span class="n">ncomp_t</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">ctr</span><span class="o">::</span><span class="n">ncomp_type</span><span class="p">;</span>
<a name="line-41"></a>
<a name="line-42"></a>  <span class="nl">public</span><span class="p">:</span>
<a name="line-43"></a>    <span class="c1">//! Constructor: register differential equations into factory</span>
<a name="line-44"></a>    <span class="n">explicit</span> <span class="n">DiffEqStack</span><span class="p">();</span>
<a name="line-45"></a>
<a name="line-46"></a>    <span class="c1">//! Instantiate selected DiffEqs</span>
<a name="line-47"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">DiffEq</span> <span class="o">&gt;</span> <span class="n">selected</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
<a name="line-48"></a>
<a name="line-49"></a>    <span class="c1">//! \brief Instantiate tables from which extra statistics data to be output</span>
<a name="line-50"></a>    <span class="c1">//!    sampled for all selected differential equations</span>
<a name="line-51"></a>    <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">Table</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">tables</span><span class="p">()</span>
<a name="line-52"></a>    <span class="k">const</span><span class="p">;</span>
<a name="line-53"></a>
<a name="line-54"></a>    <span class="c1">//! \brief Constant accessor to differential equation factory</span>
<a name="line-55"></a>    <span class="c1">//! \return Constant reference to the internal differential equation factory</span>
<a name="line-56"></a>    <span class="k">const</span> <span class="n">DiffEqFactory</span><span class="o">&amp;</span> <span class="n">factory</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_factory</span><span class="p">;</span> <span class="p">}</span>
<a name="line-57"></a>
<a name="line-58"></a>    <span class="c1">//! Return info on selected differential equations</span>
<a name="line-59"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">info</span><span class="p">()</span>
<a name="line-60"></a>    <span class="k">const</span><span class="p">;</span>
<a name="line-61"></a>
<a name="line-62"></a>    <span class="c1">//! \brief Return number of unique equation types registered</span>
<a name="line-63"></a>    <span class="c1">//! \return The number of unique equation types registered in the factory</span>
<a name="line-64"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">ntypes</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m_eqTypes</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="p">}</span>
<a name="line-65"></a>
<a name="line-66"></a>  <span class="nl">private</span><span class="p">:</span>
<a name="line-67"></a>    <span class="c1">//! \brief Instantiate a differential equation object</span>
<a name="line-68"></a>    <span class="c1">//! \see walker::DiffEq</span>
<a name="line-69"></a>    <span class="c1">//! \details Since multiple systems of equations can be configured</span>
<a name="line-70"></a>    <span class="c1">//!   with the same type, the map (cnt) is used to assign a counter to each</span>
<a name="line-71"></a>    <span class="c1">//!   type. The template argument, EqTag, is used to find the given system</span>
<a name="line-72"></a>    <span class="c1">//!   of differential equations in the input deck, the hierarchical data</span>
<a name="line-73"></a>    <span class="c1">//!   filled during control file parsing, containing user input.</span>
<a name="line-74"></a>    <span class="c1">//! \param[in] eq The unique differential equation system key whose object</span>
<a name="line-75"></a>    <span class="c1">//!   to instantiate.</span>
<a name="line-76"></a>    <span class="c1">//! \param[in,out] cnt Counter, a std::map, that counts all instantiated</span>
<a name="line-77"></a>    <span class="c1">//!   differential equations systems by type.</span>
<a name="line-78"></a>    <span class="n">template</span><span class="o">&lt;</span> <span class="n">class</span> <span class="n">EqTag</span> <span class="o">&gt;</span>
<a name="line-79"></a>    <span class="n">DiffEq</span> <span class="n">createDiffEq</span><span class="p">(</span> <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEqType</span> <span class="n">eq</span><span class="p">,</span>
<a name="line-80"></a>                         <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEqType</span><span class="p">,</span> <span class="n">ncomp_t</span> <span class="o">&gt;&amp;</span> <span class="n">cnt</span> <span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
<a name="line-81"></a>      <span class="k">auto</span> <span class="n">c</span> <span class="o">=</span> <span class="o">++</span><span class="n">cnt</span><span class="p">[</span> <span class="n">eq</span> <span class="p">];</span>   <span class="c1">// count eqs</span>
<a name="line-82"></a>      <span class="o">--</span><span class="n">c</span><span class="p">;</span>                    <span class="c1">// used to index vectors starting with 0</span>
<a name="line-83"></a>      <span class="k">if</span> <span class="p">(</span> <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">component</span><span class="p">,</span> <span class="n">EqTag</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-84"></a>        <span class="c1">// create key and search for it</span>
<a name="line-85"></a>        <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEqKey</span> <span class="n">key</span><span class="p">{</span> <span class="n">eq</span><span class="p">,</span>
<a name="line-86"></a>          <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span> <span class="n">EqTag</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">initpolicy</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">],</span>
<a name="line-87"></a>          <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span> <span class="n">EqTag</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">coeffpolicy</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">]</span> <span class="p">};</span>
<a name="line-88"></a>        <span class="k">const</span> <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">m_factory</span><span class="p">.</span><span class="n">find</span><span class="p">(</span> <span class="n">key</span> <span class="p">);</span>
<a name="line-89"></a>        <span class="n">Assert</span><span class="p">(</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">end</span><span class="p">(</span> <span class="n">m_factory</span> <span class="p">),</span>
<a name="line-90"></a>                <span class="s">&quot;Can&#39;t find eq &#39;&quot;</span> <span class="o">+</span> <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEq</span><span class="p">().</span><span class="n">name</span><span class="p">(</span> <span class="n">eq</span> <span class="p">)</span> <span class="o">+</span>
<a name="line-91"></a>                <span class="s">&quot;&#39; in DiffEq factory with initialization policy &#39;&quot;</span> <span class="o">+</span>
<a name="line-92"></a>                <span class="n">ctr</span><span class="o">::</span><span class="n">InitPolicy</span><span class="p">().</span><span class="n">name</span><span class="p">(</span>
<a name="line-93"></a>                  <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span> <span class="n">EqTag</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">initpolicy</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">]</span> <span class="p">)</span> <span class="o">+</span>
<a name="line-94"></a>                <span class="s">&quot;&#39; and coefficient policy &#39;&quot;</span> <span class="o">+</span>
<a name="line-95"></a>                <span class="n">ctr</span><span class="o">::</span><span class="n">CoeffPolicy</span><span class="p">().</span><span class="n">name</span><span class="p">(</span>
<a name="line-96"></a>                  <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span> <span class="n">EqTag</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">coeffpolicy</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">]</span> <span class="p">)</span>
<a name="line-97"></a>                <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span> <span class="p">);</span>
<a name="line-98"></a>        <span class="c1">// instantiate and return diff eq object</span>
<a name="line-99"></a>        <span class="k">return</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="p">(</span> <span class="n">c</span> <span class="p">);</span>
<a name="line-100"></a>      <span class="p">}</span> <span class="k">else</span> <span class="n">Throw</span> <span class="p">(</span> <span class="s">&quot;Can&#39;t create DiffEq with zero independent variables&quot;</span> <span class="p">);</span>
<a name="line-101"></a>    <span class="p">}</span>
<a name="line-102"></a>
<a name="line-103"></a>    <span class="c1">//! \brief Instantiate tables from a differential equation</span>
<a name="line-104"></a>    <span class="c1">//! \details This function is used to instantiate a vector of tk::Tables and</span>
<a name="line-105"></a>    <span class="c1">//!   their associated names for a system of differential equation selected</span>
<a name="line-106"></a>    <span class="c1">//!   by the user. Since multiple systems of equations can be configured</span>
<a name="line-107"></a>    <span class="c1">//!   with the same type, the map (cnt) is used to assign a counter to each</span>
<a name="line-108"></a>    <span class="c1">//!   type. We then find out if the coefficients policy, configured to the</span>
<a name="line-109"></a>    <span class="c1">//!   equation system, uses tables. If so, we return all the tables and</span>
<a name="line-110"></a>    <span class="c1">//!   their names associated to the different components in the system. The</span>
<a name="line-111"></a>    <span class="c1">//!   template argument, EqTag, is used to find the given differential</span>
<a name="line-112"></a>    <span class="c1">//!   equation system in the input deck, the hierarchical data filled</span>
<a name="line-113"></a>    <span class="c1">//!   during control file parsing, containing user input.</span>
<a name="line-114"></a>    <span class="c1">//! \param[in] eq The unique differential equation system key whose tables</span>
<a name="line-115"></a>    <span class="c1">//!   object to instantiate (if the configured coefficients policy uses</span>
<a name="line-116"></a>    <span class="c1">//!   tables).</span>
<a name="line-117"></a>    <span class="c1">//! \param[in,out] cnt Counter, a std::map, that counts all instantiated</span>
<a name="line-118"></a>    <span class="c1">//!   vector of tables associated to a differential equations systems by</span>
<a name="line-119"></a>    <span class="c1">//!   type.</span>
<a name="line-120"></a>    <span class="n">template</span><span class="o">&lt;</span> <span class="n">class</span> <span class="n">EqTag</span> <span class="o">&gt;</span>
<a name="line-121"></a>    <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">Table</span> <span class="o">&gt;</span> <span class="o">&gt;</span>
<a name="line-122"></a>    <span class="n">createTables</span><span class="p">(</span> <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEqType</span> <span class="n">eq</span><span class="p">,</span>
<a name="line-123"></a>                  <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEqType</span><span class="p">,</span> <span class="n">ncomp_t</span> <span class="o">&gt;&amp;</span> <span class="n">cnt</span> <span class="p">)</span> <span class="k">const</span>
<a name="line-124"></a>    <span class="p">{</span>
<a name="line-125"></a>      <span class="k">auto</span> <span class="n">c</span> <span class="o">=</span> <span class="o">++</span><span class="n">cnt</span><span class="p">[</span> <span class="n">eq</span> <span class="p">];</span>   <span class="c1">// count eqs</span>
<a name="line-126"></a>      <span class="o">--</span><span class="n">c</span><span class="p">;</span>                    <span class="c1">// used to index vectors starting with 0</span>
<a name="line-127"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">Table</span> <span class="o">&gt;</span> <span class="n">tab</span><span class="p">;</span>
<a name="line-128"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">nam</span><span class="p">;</span>
<a name="line-129"></a>      <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">ncompeq</span> <span class="o">=</span> <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">component</span><span class="p">,</span> <span class="n">EqTag</span> <span class="o">&gt;</span><span class="p">();</span>
<a name="line-130"></a>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ncompeq</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
<a name="line-131"></a>        <span class="k">if</span> <span class="p">(</span> <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">component</span><span class="p">,</span> <span class="n">EqTag</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-132"></a>          <span class="c1">// find out if coefficients policy uses tables and return them if so</span>
<a name="line-133"></a>          <span class="k">if</span> <span class="p">(</span><span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span> <span class="n">EqTag</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">coeffpolicy</span> <span class="o">&gt;</span><span class="p">()[</span><span class="n">c</span><span class="p">]</span> <span class="o">==</span>
<a name="line-134"></a>                <span class="n">ctr</span><span class="o">::</span><span class="n">CoeffPolicyType</span><span class="o">::</span><span class="n">HYDROTIMESCALE</span><span class="p">)</span>
<a name="line-135"></a>          <span class="p">{</span>
<a name="line-136"></a>            <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">hts</span> <span class="o">=</span> <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span>
<a name="line-137"></a>                                               <span class="n">EqTag</span><span class="p">,</span>
<a name="line-138"></a>                                               <span class="n">tag</span><span class="o">::</span><span class="n">hydrotimescales</span> <span class="o">&gt;</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<a name="line-139"></a>            <span class="n">ctr</span><span class="o">::</span><span class="n">HydroTimeScales</span> <span class="n">ot</span><span class="p">;</span>
<a name="line-140"></a><span class="hll">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">t</span> <span class="p">:</span> <span class="n">hts</span><span class="p">)</span> <span class="n">tab</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">ot</span><span class="p">.</span><span class="n">table</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">);</span><span class='error2'>&lt;--- Consider using std::transform algorithm instead of a raw loop.</span>
</span><a name="line-141"></a><span class="hll">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">t</span> <span class="p">:</span> <span class="n">hts</span><span class="p">)</span> <span class="n">nam</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">ot</span><span class="p">.</span><span class="n">name</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">);</span><span class='error2'>&lt;--- Consider using std::transform algorithm instead of a raw loop.</span>
</span><a name="line-142"></a>  
<a name="line-143"></a>            <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">hp</span> <span class="o">=</span> <span class="n">g_inputdeck</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">param</span><span class="p">,</span>
<a name="line-144"></a>                                              <span class="n">EqTag</span><span class="p">,</span>
<a name="line-145"></a>                                              <span class="n">tag</span><span class="o">::</span><span class="n">hydroproductions</span> <span class="o">&gt;</span><span class="p">().</span><span class="n">at</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<a name="line-146"></a>            <span class="n">ctr</span><span class="o">::</span><span class="n">HydroProductions</span> <span class="n">op</span><span class="p">;</span>
<a name="line-147"></a><span class="hll">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">t</span> <span class="p">:</span> <span class="n">hp</span><span class="p">)</span> <span class="n">tab</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">op</span><span class="p">.</span><span class="n">table</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">);</span><span class='error2'>&lt;--- Consider using std::transform algorithm instead of a raw loop.</span>
</span><a name="line-148"></a><span class="hll">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">t</span> <span class="p">:</span> <span class="n">hp</span><span class="p">)</span> <span class="n">nam</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">op</span><span class="p">.</span><span class="n">name</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="p">);</span><span class='error2'>&lt;--- Consider using std::transform algorithm instead of a raw loop.</span>
</span><a name="line-149"></a>  
<a name="line-150"></a>          <span class="p">}</span>
<a name="line-151"></a>        <span class="p">}</span> <span class="k">else</span> <span class="n">Throw</span> <span class="p">(</span> <span class="s">&quot;DiffEq with zero independent variables&quot;</span> <span class="p">);</span>
<a name="line-152"></a>      <span class="p">}</span>
<a name="line-153"></a>      <span class="k">return</span> <span class="p">{</span> <span class="n">nam</span><span class="p">,</span> <span class="n">tab</span> <span class="p">};</span>
<a name="line-154"></a>    <span class="p">}</span>
<a name="line-155"></a>
<a name="line-156"></a>    <span class="n">DiffEqFactory</span> <span class="n">m_factory</span><span class="p">;</span>                 <span class="c1">//!&lt; Differential equations factory</span>
<a name="line-157"></a>    <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span> <span class="n">ctr</span><span class="o">::</span><span class="n">DiffEqType</span> <span class="o">&gt;</span> <span class="n">m_eqTypes</span><span class="p">;</span>   <span class="c1">//!&lt; Count number of equation types</span>
<a name="line-158"></a><span class="p">};</span>
<a name="line-159"></a>
<a name="line-160"></a><span class="p">}</span> <span class="c1">// walker::</span>
<a name="line-161"></a>
<a name="line-162"></a><span class="cp">#endif </span><span class="c1">// DiffEqStack_h</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.86 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.net">http://cppcheck.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
