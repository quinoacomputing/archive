
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href="https://github.com/quinoacomputing/quinoa/commit/f66134c">Quinoa_v0.2-794-gf66134c</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script language="javascript">
      function getStyle(el,styleProp) {
        if (el.currentStyle)
          var y = el.currentStyle[styleProp];
        else if (window.getComputedStyle)
          var y = document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp);
        return y;
      }
      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;
        if (el.style.display == "block") {
          el.style.display = "none";
          mark.innerHTML = "[+]";
        } else {
          el.style.display = "block";
          mark.innerHTML = "[-]";
        }
      }
      function init_expandables() {
        var elts = document.getElementsByClassName("expandable");
        for (var i = 0; i < elts.length; i++) {
          var el = elts[i];
          var clickable = el.getElementsByTagName("span")[0];
          var marker = clickable.getElementsByClassName("marker")[0];
          var content = el.getElementsByClassName("content")[0];
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.onclick = toggle;
        }
      }
      function set_class_display(c, st) {
        var elements = document.querySelectorAll('.' + c),
            len = elements.length;
        for (i = 0; i < len; i++) {
            elements[i].style.display = st;
        }
      }
      function toggle_class_visibility(id) {
        var box = document.getElementById(id);
        set_class_display(id, box.checked ? '' : 'none');
      }
    </script>
  </head>
  <body onload="init_expandables()">
      <div id="header">
        <h1>Cppcheck report - [<a href="https://github.com/quinoacomputing/quinoa/commit/f66134c">Quinoa_v0.2-794-gf66134c</a>]: /tmp/TeamCity-14/work/821a9fd6f64749d9/src/Inciter/AMR/node_store.h </h1>
      </div>
      <div id="menu" dir="rtl">
       <p id="filename"><a href="index.html">Defects:</a> node_store.h</p>
<a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a><a href='14.html#line-30'> uninitMemberVar 30</a>
      </div>
      <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="cp">#ifndef AMR_node_store_h</span>
<a name="line-2"></a><span class="cp">#define AMR_node_store_h</span>
<a name="line-3"></a>
<a name="line-4"></a><span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>
<a name="line-5"></a>
<a name="line-6"></a><span class="cp">#include</span> <span class="cpf">&quot;Base/Exception.h&quot;</span><span class="cp"></span>
<a name="line-7"></a><span class="cp">#include</span> <span class="cpf">&quot;AMR_types.h&quot;</span><span class="cp"></span>
<a name="line-8"></a><span class="cp">#include</span> <span class="cpf">&quot;tet_store.h&quot;</span><span class="cp"></span>
<a name="line-9"></a>
<a name="line-10"></a><span class="c1">// TODO: make this have a base class to support multiple generator schemes</span>
<a name="line-11"></a><span class="c1">// using the policy design pattern</span>
<a name="line-12"></a><span class="n">namespace</span> <span class="n">AMR</span> <span class="p">{</span>
<a name="line-13"></a>
<a name="line-14"></a>    <span class="n">class</span> <span class="n">node_store_t</span>
<a name="line-15"></a>    <span class="p">{</span>
<a name="line-16"></a>
<a name="line-17"></a>        <span class="nl">private</span><span class="p">:</span>
<a name="line-18"></a>            <span class="n">coord_type</span><span class="o">*</span> <span class="n">m_x</span><span class="p">;</span>
<a name="line-19"></a>            <span class="n">coord_type</span><span class="o">*</span> <span class="n">m_y</span><span class="p">;</span>
<a name="line-20"></a>            <span class="n">coord_type</span><span class="o">*</span> <span class="n">m_z</span><span class="p">;</span>
<a name="line-21"></a>
<a name="line-22"></a>            <span class="c1">// We really don&#39;t want people to pass this by value..</span>
<a name="line-23"></a>            <span class="c1">// (Because we store refs in here, which are consts..)</span>
<a name="line-24"></a>            <span class="c1">// NonCopyable &amp; operator=(const NonCopyable&amp;) = delete;</span>
<a name="line-25"></a>            <span class="n">node_store_t</span><span class="p">(</span><span class="k">const</span> <span class="n">node_store_t</span><span class="o">&amp;</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="n">delete</span><span class="p">;</span>
<a name="line-26"></a>            <span class="n">node_store_t</span><span class="o">&amp;</span> <span class="n">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">node_store_t</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="n">delete</span><span class="p">;</span>
<a name="line-27"></a>
<a name="line-28"></a>        <span class="nl">public</span><span class="p">:</span>
<a name="line-29"></a>            <span class="c1">// TODO: This needs to set the member variables</span>
<a name="line-30"></a><span class="hll">            <span class="n">node_store_t</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span> <span class="c1">// default cons</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_x' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_y' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_z' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_graphsize' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_x' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_y' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_z' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_graphsize' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_x' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_y' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_z' is not initialized in the constructor.</span><span class='error2'>&lt;--- Member variable 'node_store_t::m_graphsize' is not initialized in the constructor.</span>
</span><a name="line-31"></a>
<a name="line-32"></a>            <span class="kt">size_t</span><span class="o">*</span> <span class="n">m_graphsize</span><span class="p">;</span>
<a name="line-33"></a>
<a name="line-34"></a>            <span class="kt">void</span> <span class="nf">set_x</span><span class="p">(</span><span class="n">coord_type</span><span class="o">*</span> <span class="n">x_in</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_x</span> <span class="o">=</span> <span class="n">x_in</span><span class="p">;</span> <span class="p">}</span>
<a name="line-35"></a>            <span class="kt">void</span> <span class="nf">set_y</span><span class="p">(</span><span class="n">coord_type</span><span class="o">*</span> <span class="n">y_in</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_y</span> <span class="o">=</span> <span class="n">y_in</span><span class="p">;</span> <span class="p">}</span>
<a name="line-36"></a>            <span class="kt">void</span> <span class="nf">set_z</span><span class="p">(</span><span class="n">coord_type</span><span class="o">*</span> <span class="n">z_in</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_z</span> <span class="o">=</span> <span class="n">z_in</span><span class="p">;</span> <span class="p">}</span>
<a name="line-37"></a>
<a name="line-38"></a>            <span class="cm">/**</span>
<a name="line-39"></a><span class="cm">             * @brief Function to add x coordinate data</span>
<a name="line-40"></a><span class="cm">             *</span>
<a name="line-41"></a><span class="cm">             * @param xc Data to add</span>
<a name="line-42"></a><span class="cm">             */</span>
<a name="line-43"></a>            <span class="kt">void</span> <span class="nf">add_x</span><span class="p">(</span><span class="n">real_t</span> <span class="n">xc</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_x</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">xc</span><span class="p">);</span> <span class="p">}</span>
<a name="line-44"></a>
<a name="line-45"></a>            <span class="cm">/**</span>
<a name="line-46"></a><span class="cm">             * @brief Function to add y coordinate data</span>
<a name="line-47"></a><span class="cm">             *</span>
<a name="line-48"></a><span class="cm">             * @param yc Data to add</span>
<a name="line-49"></a><span class="cm">             */</span>
<a name="line-50"></a>            <span class="kt">void</span> <span class="nf">add_y</span><span class="p">(</span><span class="n">real_t</span> <span class="n">yc</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_y</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">yc</span><span class="p">);</span> <span class="p">}</span>
<a name="line-51"></a>
<a name="line-52"></a>            <span class="cm">/**</span>
<a name="line-53"></a><span class="cm">             * @brief Function to add z coordinate data</span>
<a name="line-54"></a><span class="cm">             *</span>
<a name="line-55"></a><span class="cm">             * @param zc data to add</span>
<a name="line-56"></a><span class="cm">             */</span>
<a name="line-57"></a>            <span class="kt">void</span> <span class="nf">add_z</span><span class="p">(</span><span class="n">real_t</span> <span class="n">zc</span><span class="p">)</span> <span class="p">{</span> <span class="n">m_z</span><span class="o">-&gt;</span><span class="n">push_back</span><span class="p">(</span><span class="n">zc</span><span class="p">);</span> <span class="p">}</span>
<a name="line-58"></a>            <span class="n">real_t</span> <span class="nf">x</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">id</span><span class="p">)</span>
<a name="line-59"></a>            <span class="p">{</span>
<a name="line-60"></a>                <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">m_x</span><span class="p">)[</span><span class="n">id</span><span class="p">];</span>
<a name="line-61"></a>            <span class="p">}</span>
<a name="line-62"></a>            <span class="n">real_t</span> <span class="nf">y</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">id</span><span class="p">)</span>
<a name="line-63"></a>            <span class="p">{</span>
<a name="line-64"></a>                <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">m_y</span><span class="p">)[</span><span class="n">id</span><span class="p">];</span>
<a name="line-65"></a>            <span class="p">}</span>
<a name="line-66"></a>            <span class="n">real_t</span> <span class="nf">z</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">id</span><span class="p">)</span>
<a name="line-67"></a>            <span class="p">{</span>
<a name="line-68"></a>                <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">m_z</span><span class="p">)[</span><span class="n">id</span><span class="p">];</span>
<a name="line-69"></a>            <span class="p">}</span>
<a name="line-70"></a>
<a name="line-71"></a>            <span class="kt">size_t</span> <span class="nf">size</span><span class="p">()</span>
<a name="line-72"></a>            <span class="p">{</span>
<a name="line-73"></a>                <span class="k">return</span> <span class="n">m_x</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span>
<a name="line-74"></a>            <span class="p">}</span>
<a name="line-75"></a>
<a name="line-76"></a>            <span class="c1">// TODO: Document this</span>
<a name="line-77"></a>            <span class="kt">void</span> <span class="nf">print</span><span class="p">()</span>
<a name="line-78"></a>            <span class="p">{</span>
<a name="line-79"></a>                <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a name="line-80"></a>                <span class="p">{</span>
<a name="line-81"></a>                    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Node &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; has coords :&quot;</span> <span class="o">&lt;&lt;</span>
<a name="line-82"></a>                        <span class="n">x</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span>
<a name="line-83"></a>                        <span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span>
<a name="line-84"></a>                        <span class="n">z</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span>
<a name="line-85"></a>                        <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<a name="line-86"></a>               <span class="p">}</span>
<a name="line-87"></a>            <span class="p">}</span>
<a name="line-88"></a>
<a name="line-89"></a>
<a name="line-90"></a>            <span class="cm">/**</span>
<a name="line-91"></a><span class="cm">             * @brief Function to add a new node</span>
<a name="line-92"></a><span class="cm">             *</span>
<a name="line-93"></a><span class="cm">             * @param xc x val of node</span>
<a name="line-94"></a><span class="cm">             * @param yc y val of node</span>
<a name="line-95"></a><span class="cm">             * @param zc z val of node</span>
<a name="line-96"></a><span class="cm">             *</span>
<a name="line-97"></a><span class="cm">             * @return id of node added</span>
<a name="line-98"></a><span class="cm">             */</span>
<a name="line-99"></a>            <span class="kt">size_t</span> <span class="nf">add</span><span class="p">(</span><span class="n">real_t</span> <span class="n">xc</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">yc</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">zc</span><span class="p">)</span> <span class="p">{</span>
<a name="line-100"></a>
<a name="line-101"></a>                <span class="c1">// Need to: Add to {xc,yc,zc} Add any connectivity?</span>
<a name="line-102"></a>
<a name="line-103"></a>                <span class="c1">// Check if the node already exists</span>
<a name="line-104"></a>                <span class="kt">int</span> <span class="n">already_exists</span> <span class="o">=</span> <span class="n">check_node_exists</span><span class="p">(</span><span class="n">xc</span><span class="p">,</span><span class="n">yc</span><span class="p">,</span><span class="n">zc</span><span class="p">);</span>
<a name="line-105"></a>
<a name="line-106"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">already_exists</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<a name="line-107"></a>                    <span class="kt">size_t</span> <span class="n">return_node_id</span> <span class="o">=</span> <span class="n">add_coordinates</span><span class="p">(</span><span class="n">xc</span><span class="p">,</span><span class="n">yc</span><span class="p">,</span><span class="n">zc</span><span class="p">);</span>
<a name="line-108"></a>                    <span class="p">(</span><span class="o">*</span><span class="n">m_graphsize</span><span class="p">)</span><span class="o">++</span><span class="p">;</span> <span class="c1">// TODO: how best to deal with this?</span>
<a name="line-109"></a>                    <span class="k">return</span> <span class="n">return_node_id</span><span class="p">;</span>
<a name="line-110"></a>                <span class="p">}</span>
<a name="line-111"></a>                <span class="k">else</span> <span class="p">{</span>
<a name="line-112"></a>                    <span class="k">return</span> <span class="n">static_cast</span><span class="o">&lt;</span><span class="kt">size_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">already_exists</span><span class="p">);</span>
<a name="line-113"></a>                <span class="p">}</span>
<a name="line-114"></a>
<a name="line-115"></a>            <span class="p">}</span>
<a name="line-116"></a>
<a name="line-117"></a>            <span class="cm">/**</span>
<a name="line-118"></a><span class="cm">             * @brief Function to add a new node</span>
<a name="line-119"></a><span class="cm">             *</span>
<a name="line-120"></a><span class="cm">             * @param coord_tuple The coordinate data to add for the node</span>
<a name="line-121"></a><span class="cm">             *</span>
<a name="line-122"></a><span class="cm">             * @return Id of node added</span>
<a name="line-123"></a><span class="cm">             */</span>
<a name="line-124"></a>            <span class="kt">size_t</span> <span class="nf">add</span><span class="p">(</span><span class="n">coordinate_t</span> <span class="n">coord_tuple</span><span class="p">)</span>
<a name="line-125"></a>            <span class="p">{</span>
<a name="line-126"></a>                <span class="k">return</span> <span class="n">add</span><span class="p">(</span> <span class="n">coord_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coord_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coord_tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
<a name="line-127"></a>            <span class="p">}</span>
<a name="line-128"></a>
<a name="line-129"></a>            <span class="cm">/**</span>
<a name="line-130"></a><span class="cm">             * @brief Function to add a new point/coordinates</span>
<a name="line-131"></a><span class="cm">             *</span>
<a name="line-132"></a><span class="cm">             * @param xc x val</span>
<a name="line-133"></a><span class="cm">             * @param yc y val</span>
<a name="line-134"></a><span class="cm">             * @param zc z val</span>
<a name="line-135"></a><span class="cm">             *</span>
<a name="line-136"></a><span class="cm">             * @return id of coordinate added</span>
<a name="line-137"></a><span class="cm">             */</span>
<a name="line-138"></a>            <span class="kt">size_t</span> <span class="nf">add_coordinates</span><span class="p">(</span><span class="n">real_t</span> <span class="n">xc</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">yc</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">zc</span><span class="p">)</span> <span class="p">{</span>
<a name="line-139"></a>                <span class="n">add_x</span><span class="p">(</span><span class="n">xc</span><span class="p">);</span>
<a name="line-140"></a>                <span class="n">add_y</span><span class="p">(</span><span class="n">yc</span><span class="p">);</span>
<a name="line-141"></a>                <span class="n">add_z</span><span class="p">(</span><span class="n">zc</span><span class="p">);</span>
<a name="line-142"></a>                <span class="k">return</span> <span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// -1 because of the 0 index</span>
<a name="line-143"></a>            <span class="p">}</span>
<a name="line-144"></a>
<a name="line-145"></a>            <span class="cm">/**</span>
<a name="line-146"></a><span class="cm">             * @brief Function to add a new node</span>
<a name="line-147"></a><span class="cm">             *</span>
<a name="line-148"></a><span class="cm">             * @param xc x val of node</span>
<a name="line-149"></a><span class="cm">             * @param yc y val of node</span>
<a name="line-150"></a><span class="cm">             * @param zc z val of node</span>
<a name="line-151"></a><span class="cm">             *</span>
<a name="line-152"></a><span class="cm">             * @return id of node added</span>
<a name="line-153"></a><span class="cm">             */</span>
<a name="line-154"></a>            <span class="kt">size_t</span> <span class="nf">add_node</span><span class="p">(</span><span class="n">real_t</span> <span class="n">xc</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">yc</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">zc</span><span class="p">)</span> <span class="p">{</span>
<a name="line-155"></a>
<a name="line-156"></a>                <span class="c1">// Need to: Add to {xc,y,z} Add any connectivity?</span>
<a name="line-157"></a>
<a name="line-158"></a>                <span class="c1">// Check if the node already exists</span>
<a name="line-159"></a>                <span class="kt">int</span> <span class="n">already_exists</span> <span class="o">=</span> <span class="n">check_node_exists</span><span class="p">(</span><span class="n">xc</span><span class="p">,</span><span class="n">yc</span><span class="p">,</span><span class="n">zc</span><span class="p">);</span>
<a name="line-160"></a>
<a name="line-161"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">already_exists</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<a name="line-162"></a>                    <span class="kt">size_t</span> <span class="n">return_node_id</span> <span class="o">=</span> <span class="n">add_coordinates</span><span class="p">(</span><span class="n">xc</span><span class="p">,</span><span class="n">yc</span><span class="p">,</span><span class="n">zc</span><span class="p">);</span>
<a name="line-163"></a>                    <span class="p">(</span><span class="o">*</span><span class="n">m_graphsize</span><span class="p">)</span><span class="o">++</span><span class="p">;</span> <span class="c1">// TODO: how to deal with this?</span>
<a name="line-164"></a>                    <span class="k">return</span> <span class="n">return_node_id</span><span class="p">;</span>
<a name="line-165"></a>                <span class="p">}</span>
<a name="line-166"></a>                <span class="k">else</span> <span class="p">{</span>
<a name="line-167"></a>                    <span class="k">return</span> <span class="n">static_cast</span><span class="o">&lt;</span><span class="kt">size_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">already_exists</span><span class="p">);</span>
<a name="line-168"></a>                <span class="p">}</span>
<a name="line-169"></a>
<a name="line-170"></a>            <span class="p">}</span>
<a name="line-171"></a>
<a name="line-172"></a>            <span class="c1">// TODO: Remove all calls to this as it&#39;s fairly expensive...</span>
<a name="line-173"></a>            <span class="c1">// TODO: Find a more cost effective way to implement this</span>
<a name="line-174"></a>                <span class="c1">// Most likely change data structure for a faster search</span>
<a name="line-175"></a>                <span class="c1">// This is also going to be a potential problem in async parallel</span>
<a name="line-176"></a>            <span class="cm">/**</span>
<a name="line-177"></a><span class="cm">             * @brief Helper function to check if a node already exists at</span>
<a name="line-178"></a><span class="cm">             * coords {x,y,z} to avoid it being duplicated</span>
<a name="line-179"></a><span class="cm">             *</span>
<a name="line-180"></a><span class="cm">             * @param x_in X coord to check</span>
<a name="line-181"></a><span class="cm">             * @param y_in Y coord to check</span>
<a name="line-182"></a><span class="cm">             * @param z_in Z coord to check</span>
<a name="line-183"></a><span class="cm">             *</span>
<a name="line-184"></a><span class="cm">             * @return The id of the node if it exists, -1 if it doesn&#39;t.</span>
<a name="line-185"></a><span class="cm">             */</span>
<a name="line-186"></a>            <span class="kt">int</span> <span class="nf">check_node_exists</span><span class="p">(</span><span class="n">real_t</span> <span class="n">x_in</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">y_in</span><span class="p">,</span> <span class="n">real_t</span> <span class="n">z_in</span><span class="p">)</span>
<a name="line-187"></a>            <span class="p">{</span>
<a name="line-188"></a>                <span class="k">const</span> <span class="n">real_t</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-7</span><span class="p">;</span>
<a name="line-189"></a>                <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a name="line-190"></a>                <span class="p">{</span>
<a name="line-191"></a>                    <span class="k">if</span> <span class="p">(</span>
<a name="line-192"></a>                        <span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span> <span class="n">x</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">-</span> <span class="n">x_in</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="o">&amp;&amp;</span>
<a name="line-193"></a>                        <span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span> <span class="n">y</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">-</span> <span class="n">y_in</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="o">&amp;&amp;</span>
<a name="line-194"></a>                        <span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span> <span class="n">z</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">-</span> <span class="n">z_in</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span>
<a name="line-195"></a>                    <span class="p">)</span>
<a name="line-196"></a>                    <span class="p">{</span>
<a name="line-197"></a>                        <span class="k">return</span> <span class="n">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<a name="line-198"></a>                    <span class="p">}</span>
<a name="line-199"></a>                <span class="p">}</span>
<a name="line-200"></a>
<a name="line-201"></a>                <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a name="line-202"></a>            <span class="p">}</span>
<a name="line-203"></a>
<a name="line-204"></a>            <span class="cm">/**</span>
<a name="line-205"></a><span class="cm">             * @brief function to find the mid point between two points (nodes)</span>
<a name="line-206"></a><span class="cm">             * based on ids</span>
<a name="line-207"></a><span class="cm">             *</span>
<a name="line-208"></a><span class="cm">             * @param id1 id of the first node/point</span>
<a name="line-209"></a><span class="cm">             * @param id2 id of the second node/point</span>
<a name="line-210"></a><span class="cm">             *</span>
<a name="line-211"></a><span class="cm">             * @return The mid point</span>
<a name="line-212"></a><span class="cm">             */</span>
<a name="line-213"></a>            <span class="n">coordinate_t</span> <span class="nf">find_mid_point</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">id1</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">id2</span><span class="p">)</span>
<a name="line-214"></a>            <span class="p">{</span>
<a name="line-215"></a>                <span class="n">coordinate_t</span> <span class="n">edge_node_A</span> <span class="o">=</span> <span class="n">id_to_coordinate</span><span class="p">(</span><span class="n">id1</span><span class="p">);</span>
<a name="line-216"></a>                <span class="n">coordinate_t</span> <span class="n">edge_node_B</span> <span class="o">=</span> <span class="n">id_to_coordinate</span><span class="p">(</span><span class="n">id2</span><span class="p">);</span>
<a name="line-217"></a>                <span class="k">return</span> <span class="n">AMR</span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">find_mid_point</span><span class="p">(</span><span class="n">edge_node_A</span><span class="p">,</span> <span class="n">edge_node_B</span><span class="p">);</span>
<a name="line-218"></a>            <span class="p">}</span>
<a name="line-219"></a>
<a name="line-220"></a>            <span class="cm">/**</span>
<a name="line-221"></a><span class="cm">             * @brief Function to gather the {x,y,z} coordinates of a node from</span>
<a name="line-222"></a><span class="cm">             * index id</span>
<a name="line-223"></a><span class="cm">             *</span>
<a name="line-224"></a><span class="cm">             * @param id Id of node to gather (direct index into m_x[])</span>
<a name="line-225"></a><span class="cm">             *</span>
<a name="line-226"></a><span class="cm">             * @return List (array) of coordinate data</span>
<a name="line-227"></a><span class="cm">             */</span>
<a name="line-228"></a>            <span class="n">coordinate_t</span> <span class="nf">id_to_coordinate</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">id</span><span class="p">)</span>
<a name="line-229"></a>            <span class="p">{</span>
<a name="line-230"></a>                <span class="n">Assert</span><span class="p">(</span> <span class="n">id</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">(),</span> <span class="s">&quot;Invalid ID&quot;</span><span class="p">);</span>
<a name="line-231"></a>
<a name="line-232"></a>                <span class="c1">// Note: extra braces are to appease Clangs warning generator.</span>
<a name="line-233"></a>                <span class="c1">//   (It&#39;s probably ok to remove them....)</span>
<a name="line-234"></a>                <span class="n">coordinate_t</span> <span class="n">c</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="n">x</span><span class="p">(</span><span class="n">id</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">id</span><span class="p">),</span> <span class="n">z</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="p">}</span> <span class="p">};</span>
<a name="line-235"></a>                <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
<a name="line-236"></a>            <span class="p">}</span>
<a name="line-237"></a>
<a name="line-238"></a>    <span class="p">};</span> <span class="c1">// end class</span>
<a name="line-239"></a><span class="p">}</span>
<a name="line-240"></a>
<a name="line-241"></a><span class="cp">#endif  </span><span class="c1">// guard</span>
</pre></div>
</td></tr></table>
      </div>
      <div id="footer">
        <p>
         Cppcheck 1.80 - a tool for static C/C++ code analysis</br>
         </br>
         Internet: <a href="http://cppcheck.net">http://cppcheck.net</a></br>
         IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a></br>
        <p>
      </div>
  </body>
</html>
