<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quinoa: tk::FileParser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetk.html">tk</a></li><li class="navelem"><a class="el" href="classtk_1_1_file_parser.html">FileParser</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classtk_1_1_file_parser-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tk::FileParser Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classtk_1_1_file_parser.html" title="FileParser. ">FileParser</a>.  
 <a href="classtk_1_1_file_parser.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_file_parser_8h_source.html">FileParser.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tk::FileParser:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classtk_1_1_file_parser__inherit__graph.svg" width="342" height="196"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:addebeed755b176aafd09092b1478f7f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_file_parser.html#addebeed755b176aafd09092b1478f7f0">FileParser</a> (const std::string &amp;filename)</td></tr>
<tr class="memdesc:addebeed755b176aafd09092b1478f7f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#addebeed755b176aafd09092b1478f7f0">More...</a><br /></td></tr>
<tr class="separator:addebeed755b176aafd09092b1478f7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b1a7152e4f9999b54c978660096c593"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_file_parser.html#a8b1a7152e4f9999b54c978660096c593">diagnostics</a> (const <a class="el" href="classtk_1_1_print.html">tk::Print</a> &amp;print, const std::vector&lt; std::string &gt; &amp;errors)</td></tr>
<tr class="memdesc:a8b1a7152e4f9999b54c978660096c593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Echo errors accumulated during parsing.  <a href="#a8b1a7152e4f9999b54c978660096c593">More...</a><br /></td></tr>
<tr class="separator:a8b1a7152e4f9999b54c978660096c593"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a32848942138341c5ab07869dc38ff032"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1_file_parser.html#a32848942138341c5ab07869dc38ff032">m_filename</a></td></tr>
<tr class="memdesc:a32848942138341c5ab07869dc38ff032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of file to parse.  <a href="#a32848942138341c5ab07869dc38ff032">More...</a><br /></td></tr>
<tr class="separator:a32848942138341c5ab07869dc38ff032"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classtk_1_1_file_parser.html" title="FileParser. ">FileParser</a>. </p>

<p class="definition">Definition at line <a class="el" href="_file_parser_8h_source.html#l00023">23</a> of file <a class="el" href="_file_parser_8h_source.html">FileParser.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="addebeed755b176aafd09092b1478f7f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addebeed755b176aafd09092b1478f7f0">&#9670;&nbsp;</a></span>FileParser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FileParser::FileParser </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>File to be parsed by the parser</td></tr>
  </table>
  </dd>
</dl>
<p>This constructor does basic tests in an attempt to determine if the file to be parsed exists and is in good shape and does associated error handling. This file stream is local, only used for error checking, and thus is not part of the object state here since the parser, inheriting from <a class="el" href="classtk_1_1_file_parser.html" title="FileParser. ">FileParser</a>, e.g., <a class="el" href="classwalker_1_1_input_deck_parser.html" title="InputDeckParser : FileParser. ">walker::InputDeckParser</a>, parses by completely outsourcing the parsing (to PEGTL), so there is no need to store the file stream handle here. </p>

<p class="definition">Definition at line <a class="el" href="_file_parser_8_c_source.html#l00022">22</a> of file <a class="el" href="_file_parser_8_c_source.html">FileParser.C</a>.</p>

<p class="reference">References <a class="el" href="_exception_8h_source.html#l00045">Assert</a>, and <a class="el" href="_exception_8h_source.html#l00054">ErrChk</a>.</p>
<div class="fragment"><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                                                  : <a class="code" href="classtk_1_1_file_parser.html#a32848942138341c5ab07869dc38ff032">m_filename</a>( filename )</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//  Constructor</span><span class="comment"></span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//! \param[in] filename File to be parsed by the parser</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//! \details This constructor does basic tests in an attempt to determine if the</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//!   file to be parsed exists and is in good shape and does associated error</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//!   handling. This file stream is local, only used for error checking, and</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//!   thus is not part of the object state here since the parser, inheriting</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//!   from FileParser, e.g., walker::InputDeckParser, parses by completely</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//!   outsourcing the parsing (to PEGTL), so there is no need to store the file</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//!   stream handle here.</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span><span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// Make sure there is a filename</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a>( !filename.empty(), <span class="stringliteral">&quot;No filename specified&quot;</span> );</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">// Local file stream handle</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  std::ifstream q;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// Check if file exists, throw exception if it does not</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  q.open( filename, std::ifstream::in );</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a>( q.good(), <span class="stringliteral">&quot;Failed to open file: &quot;</span> + filename );</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// Attempt to read a character, throw if it fails</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// It is curious that on some systems opening a directory instead of a file</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// with the above ifstream::open() call does not set the failbit. Thus we get</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// here fine, so we try to read a character from it. If it is a directory or</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// an empty file the read will fail, so we throw. Read more at: http://</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// stackoverflow.com/questions/9591036/</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// ifstream-open-doesnt-set-error-bits-when-argument-is-a-directory.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  q.get();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a>( q.good(), <span class="stringliteral">&quot;Failed to read from file: &quot;</span> + filename );</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// Close it</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  q.close();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a>( !q.fail(), <span class="stringliteral">&quot;Failed to close file: &quot;</span> + filename );</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div><div class="ttc" id="classtk_1_1_file_parser_html_a32848942138341c5ab07869dc38ff032"><div class="ttname"><a href="classtk_1_1_file_parser.html#a32848942138341c5ab07869dc38ff032">tk::FileParser::m_filename</a></div><div class="ttdeci">const std::string m_filename</div><div class="ttdoc">Name of file to parse. </div><div class="ttdef"><b>Definition:</b> <a href="_file_parser_8h_source.html#l00033">FileParser.h:33</a></div></div>
<div class="ttc" id="_exception_8h_html_ac75cd6578896829d2bfbccf5de71de4f"><div class="ttname"><a href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a></div><div class="ttdeci">#define ErrChk(expr,...)</div><div class="ttdoc">ErrChk macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00054">Exception.h:54</a></div></div>
<div class="ttc" id="_exception_8h_html_a6e509ba096551a0924ec024afadba810"><div class="ttname"><a href="_exception_8h.html#a6e509ba096551a0924ec024afadba810">Assert</a></div><div class="ttdeci">#define Assert(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00045">Exception.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8b1a7152e4f9999b54c978660096c593"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b1a7152e4f9999b54c978660096c593">&#9670;&nbsp;</a></span>diagnostics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FileParser::diagnostics </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_print.html">tk::Print</a> &amp;&#160;</td>
          <td class="paramname"><em>print</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>messages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Echo errors accumulated during parsing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">print</td><td>Pretty printer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">messages</td><td>Vector of strings of errors and warnings </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; number of digits of line num</p>
<p>&lt; original line parsed</p>
<p>&lt; underline</p>
<p>&lt; error or warning messages </p>

<p class="definition">Definition at line <a class="el" href="_file_parser_8_c_source.html#l00061">61</a> of file <a class="el" href="_file_parser_8_c_source.html">FileParser.C</a>.</p>

<p class="reference">References <a class="el" href="_file_parser_8h_source.html#l00033">m_filename</a>, and <a class="el" href="_exception_8h_source.html#l00031">Throw</a>.</p>

<p class="reference">Referenced by <a class="el" href="_test_file_parser_8h_source.html#l00030">tut::FileParser_common::parser::diagnostics()</a>, <a class="el" href="_walker_2_input_deck_2_parser_8_c_source.html#l00034">walker::InputDeckParser::InputDeckParser()</a>, <a class="el" href="_inciter_2_input_deck_2_parser_8_c_source.html#l00033">inciter::InputDeckParser::InputDeckParser()</a>, and <a class="el" href="_r_n_g_test_2_input_deck_2_parser_8_c_source.html#l00033">rngtest::InputDeckParser::InputDeckParser()</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// Bundle storing multiple messages for a single errouneous line</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keyword">struct </span>ErroneousLine {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    std::size_t dlnum;                       <span class="comment">//!&lt; number of digits of line num</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span>    std::string parsed;                      <span class="comment">//!&lt; original line parsed</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span>    std::string underline;                   <span class="comment">//!&lt; underline</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span>    std::vector&lt; std::string &gt; msg;          <span class="comment">//!&lt; error or warning messages</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span>    ErroneousLine() : dlnum(0), parsed(), underline(), msg() {}</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  };</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="namespacetut.html#aa3d137634e947af278a47517d75b6167">Reader</a> id( <a class="code" href="classtk_1_1_file_parser.html#a32848942138341c5ab07869dc38ff032">m_filename</a> );        <span class="comment">// file reader for extracting erroneous lines</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">bool</span> err = <span class="keyword">false</span>;               <span class="comment">// signaling whether there were any errors</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  std::map&lt; std::size_t, ErroneousLine &gt; lines; <span class="comment">// erroneous lines, key: lineno</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// Underline errors and warnings</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; e : messages) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// decide if error or warning</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">char</span> underchar = <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (e.find( <span class="stringliteral">&quot;Error&quot;</span> ) != std::string::npos) { err = <span class="keyword">true</span>; underchar = <span class="charliteral">&#39;^&#39;</span>; }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e.find( <span class="stringliteral">&quot;Warning&quot;</span> ) != std::string::npos) underchar = <span class="charliteral">&#39;~&#39;</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (underchar == <span class="charliteral">&#39;^&#39;</span> || underchar == <span class="charliteral">&#39;~&#39;</span>) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keyword">auto</span> sloc = e.find( <span class="stringliteral">&quot;at &quot;</span> );</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">if</span> (sloc != std::string::npos) {  <span class="comment">// if we have location info</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">// skip &quot;at &quot;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        sloc += 3;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="comment">// find a comma starting from after &quot;at &quot;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keyword">auto</span> eloc = e.find_first_of( <span class="charliteral">&#39;,&#39;</span>, sloc );</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">// extract line number of error from error message</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keyword">const</span> std::size_t lnum = std::stoul( e.substr( sloc, eloc-sloc ) );</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">// store number of digits in line number</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> dlnum = eloc - sloc;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">// find a dot starting from after &quot;at &quot;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        eloc = e.find_first_of( <span class="charliteral">&#39;.&#39;</span>, sloc );</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="comment">// skip line number</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        sloc = e.find_first_of( <span class="charliteral">&#39;,&#39;</span>, sloc ) + 1;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">// extract column number of error from error message</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">const</span> decltype(sloc) cnum = std::stoul( e.substr( sloc, eloc-sloc ) )-1;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="comment">// store erroneous line information in map</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keyword">auto</span>&amp; l = lines[ lnum ];</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// store number of digits in line number</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        l.dlnum = dlnum;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// get erroneous line from file and store</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        l.parsed = <span class="keywordtype">id</span>.line( lnum );</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">// store message</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        l.msg.push_back( e );</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// start constructing underline (from scratch if first error on line)</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (l.underline.empty()) l.underline = std::string(l.parsed.size(),<span class="charliteral">&#39; &#39;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="comment">// find beginning of erroneous argument, this can be found in either e</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment">// (the full error message which may contain the erroneous substring</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment">// between single quotes and can also contain white space), or in</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="comment">// l.parsed (the erroneouss line from the file), if we find a</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="comment">// singly-quoted substring in e, we find the location of that substring</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// in l.parsed, if we don&#39;t find a singly-quoted substring in e,</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">// we reverse-search l.parsed until a white space, in which case the</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">// error that will be underlined will be a single word</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        sloc = e.find( <span class="charliteral">&#39;\&#39;&#39;</span> );</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span> (sloc == std::string::npos) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;          sloc = l.parsed.rfind( <span class="charliteral">&#39; &#39;</span>, cnum-1 );</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <span class="keyword">auto</span> sloc2 = e.find( <span class="charliteral">&#39;\&#39;&#39;</span>, sloc+1 );</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;          sloc = l.parsed.find( e.substr( sloc+1, sloc2-sloc-1 ) ) - 1;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment">// special-handle the beginning of the line with no space in front of it</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (sloc == std::string::npos) sloc = 0; <span class="keywordflow">else</span> ++sloc;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">// underline error and warning differently</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> i=sloc; i&lt;cnum; ++i) l.underline[i] = underchar;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// Output errors and warnings underlined to quiet stream and message</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; l : lines) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; e = l.second;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    print % <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    print % <span class="stringliteral">&quot;&gt;&gt;&gt; Line &quot;</span> % l.first % <span class="stringliteral">&quot;: &#39;&quot;</span> % e.parsed % <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    print % <span class="stringliteral">&quot;&gt;&gt;&gt;&quot;</span> % std::string( e.dlnum+9, <span class="charliteral">&#39; &#39;</span> ) % e.underline % <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; m : e.msg) print % <span class="stringliteral">&quot;&gt;&gt;&gt; &quot;</span> % m % <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    print % <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// Exit if there were any errors</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (err) <a class="code" href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a>( <span class="stringliteral">&quot;Error(s) occurred while parsing file &quot;</span> + <a class="code" href="classtk_1_1_file_parser.html#a32848942138341c5ab07869dc38ff032">m_filename</a> );</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="ttc" id="classtk_1_1_file_parser_html_a32848942138341c5ab07869dc38ff032"><div class="ttname"><a href="classtk_1_1_file_parser.html#a32848942138341c5ab07869dc38ff032">tk::FileParser::m_filename</a></div><div class="ttdeci">const std::string m_filename</div><div class="ttdoc">Name of file to parse. </div><div class="ttdef"><b>Definition:</b> <a href="_file_parser_8h_source.html#l00033">FileParser.h:33</a></div></div>
<div class="ttc" id="_exception_8h_html_a0412f798470c18f503a2c2f63c970ba8"><div class="ttname"><a href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a></div><div class="ttdeci">#define Throw(...)</div><div class="ttdoc">Throw macro that always throws an exception. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00031">Exception.h:31</a></div></div>
<div class="ttc" id="namespacetut_html_aa3d137634e947af278a47517d75b6167"><div class="ttname"><a href="namespacetut.html#aa3d137634e947af278a47517d75b6167">tut::Reader</a></div><div class="ttdeci">static Reader_group Reader(&quot;Base/Reader&quot;)</div><div class="ttdoc">Define test group. </div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a32848942138341c5ab07869dc38ff032"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32848942138341c5ab07869dc38ff032">&#9670;&nbsp;</a></span>m_filename</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string tk::FileParser::m_filename</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Name of file to parse. </p>

<p class="definition">Definition at line <a class="el" href="_file_parser_8h_source.html#l00033">33</a> of file <a class="el" href="_file_parser_8h_source.html">FileParser.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_file_parser_8_c_source.html#l00061">diagnostics()</a>, <a class="el" href="_walker_2_input_deck_2_parser_8_c_source.html#l00034">walker::InputDeckParser::InputDeckParser()</a>, <a class="el" href="_inciter_2_input_deck_2_parser_8_c_source.html#l00033">inciter::InputDeckParser::InputDeckParser()</a>, and <a class="el" href="_r_n_g_test_2_input_deck_2_parser_8_c_source.html#l00033">rngtest::InputDeckParser::InputDeckParser()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/tmp/TeamCity-14/work/821a9fd6f64749d9/src/Control/<a class="el" href="_file_parser_8h_source.html">FileParser.h</a></li>
<li>/tmp/TeamCity-14/work/821a9fd6f64749d9/src/Control/<a class="el" href="_file_parser_8_c_source.html">FileParser.C</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 20 2017 12:06:13 for Quinoa by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
