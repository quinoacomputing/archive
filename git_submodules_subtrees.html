<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Third-party libraries and external tools using git submodules and subtrees | Quinoa docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="quinoa.m-dark-noindent+doxygen.compiled.css" />
  <link rel="icon" href="quinoa_sum.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Quinoa <span class="m-thin">docs</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="5">
            <li>
              <a href="https://github.com/quinoacomputing/quinoa">GitHub</a>
              <ol>
                <li><a href="papers.html">Papers</a></li>
                <li><a href="coverage.html">Coverage</a></li>
                <li><a href="https://hub.docker.com/r/quinoacomputing/quinoa">Docker</a></li>
                <li><a href="https://travis-ci.org/quinoacomputing/quinoa/builds">Travis</a></li>
                <li><a href="https://dev.azure.com/quinoacomputing/Quinoa">Azure</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Third-party libraries and external tools using git submodules and subtrees
        </h1>
<p>Quinoa uses git <em>submodules</em> as well as git <em>subtrees</em> to pull in third-party libraries (TPLs) and auxiliary tools. This allows easy update to a TPL&#x27;s (or tool&#x27;s) new or custom version, record all TPLs&#x27; and tools&#x27; histories (including branches and tags), and also allows contributing fixes upstream, all within git. There are some differences between git&#x27;s submodule and subtree functionality each with its own pros and cons. This page explains how to use git submodules and subtrees in Quinoa.</p><section id="tpl_vs_tool"><h2><a href="#tpl_vs_tool">TPLs and external tools</a></h2><p>An important distinction between TPLs and tools is that TPLs are libraries whose source we directly use, e.g., via include files and/or (static and dynamic) linking, while from a tool we do not include source code nor link its object files, only build it and use it as a separate (external) executable. To learn more about TPLs and tools, check out the page on <a href="licenses.html" class="m-dox">Third-party libraries, compilers, and tools</a>.</p></section><section id="git_subtree"><h2><a href="#git_subtree">Git subtree for sharing cmake code</a></h2><p>Currently there is a single git subtree in quinoa and is used to reuse/share cmake code between two repositories</p><ul><li><a href="https://github.com/quinoacomputing/quinoa">https:/<wbr />/<wbr />github.com/<wbr />quinoacomputing/<wbr />quinoa</a> under directory <a href="https://github.com/quinoacomputing/quinoa/tree/master/cmake">cmake/<wbr /></a>, and</li><li><a href="https://github.com/quinoacomputing/quinoa-tpl">https:/<wbr />/<wbr />github.com/<wbr />quinoacomputing/<wbr />quinoa-tpl</a> under directory <a href="https://github.com/quinoacomputing/quinoa-tpl/tree/master/cmake">cmake/<wbr /></a>, and</li></ul><p>Both of the above git repositories are setup to pull in the cmake code from the <a href="https://github.com/quinoacomputing/cmake-modules">https:/<wbr />/<wbr />github.com/<wbr />quinoacomputing/<wbr />cmake-modules</a> repository, in quinoa as a subtree, in the TPL repository as a submodule.</p><section id="git_subtree_pull"><h3><a href="#git_subtree_pull">Pull changes from the cmake repository</a></h3><p>To pull in the latest updates from the cmake repository (from its branch <em>master</em>) into the quinoa repository, do</p><pre class="m-code">git fetch cmake
git subtree pull --prefix<span class="o">=</span>cmake cmake master --squash</pre></section><section id="git_subtree_push"><h3><a href="#git_subtree_push">Push changes to the cmake repository</a></h3><p>If you have committed changes in the quinoa repository under the cmake subtree directory <code>cmake</code>, here is how you push the changes upstream to the cmake git repository.</p><ul><li>Verify the changes you are about to push by examining the diff output:</li></ul><pre class="m-code">git diff cmake/master master:cmake</pre><ul><li>If you are happy with the diff, push the changes upstream (to the <em>master</em> branch of the cmake repository):</li></ul><pre class="m-code">git subtree push --prefix<span class="o">=</span>cmake cmake master</pre></section><section id="subtree_info"><h3><a href="#subtree_info">Useful links on git subtree</a></h3><ul><li><a href="https://hpc.uni.lu/blog/2014/understanding-git-subtree">https:/<wbr />/<wbr />hpc.uni.lu/<wbr />blog/<wbr />2014/<wbr />understanding-git-subtree</a></li><li><a href="http://getlevelten.com/blog/tom-mccracken/smarter-drupal-projects-projects-management-git-subtree">http:/<wbr />/<wbr />getlevelten.com/<wbr />blog/<wbr />tom-mccracken/<wbr />smarter-drupal-projects-projects-management-git-subtree</a></li><li><a href="https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt">https:/<wbr />/<wbr />github.com/<wbr />git/<wbr />git/<wbr />blob/<wbr />master/<wbr />contrib/<wbr />subtree/<wbr />git-subtree.txt</a></li><li><a href="http://blogs.atlassian.com/2013/05/alternatives-to-git-submodule-git-subtree">http:/<wbr />/<wbr />blogs.atlassian.com/<wbr />2013/<wbr />05/<wbr />alternatives-to-git-submodule-git-subtree</a></li><li><a href="http://www.codeproject.com/Articles/562949/ManagingplusNestedplusLibrariesplusUsingplustheplu">http:/<wbr />/<wbr />www.codeproject.com/<wbr />Articles/<wbr />562949/<wbr />ManagingplusNestedplusLibrariesplusUsingplustheplu</a></li></ul></section></section><section id="git_submodule"><h2><a href="#git_submodule">Git submodule for incorporating TPLs</a></h2><p>To ease and automate building the <a href="licenses.html" class="m-dox">third-party libraries</a> that are not always available on a system, we maintain a <a href="https://github.com/quinoacomputing/quinoa-tpl">git repository</a> that consists of a list of git submodules pointing to the libraries. Check the <a href="index.html#mainpage_build" class="m-dox">Build section of the main page</a> for a list of libraries that <em>may</em> be installed by your operating system&#x27;s package manager, which then can accelerate and ease installing the TPLs.</p><p>When you do a clone of quinoa</p><pre class="m-code">git clone --recurse-submodules https://github.com/quinoacomputing/quinoa.git</pre><p>all submodules are cloned and initialized. This is probably the simplest way to clone the code with all dependencies, however it is not necessarily the quickest to work with, since git operations will take longer when submodules are present and most developers will only need the submodules once (to build and install the TPLs).</p><p>Another way of cloning (and working with) quinoa is to <em>not</em> clone the submodules, but work with the git repositories for quinoa, cmake, and the TPLs separately. Since the cmake code and the TPLs are much less frequently updated compared to the code in quinoa, the TPLs can be cloned, built, and forgotten about. This approach, however, will require the specification of the <code>-DTPL_DIR=&lt;path-to-installed-tpls&gt;</code> command line argument to quinoa&#x27;s cmake command. This way, the quinoa repository, which still has the cmake directory as a git subtree, is kept minimal, and thus git operations, e.g., switching branches, stashing, are quicker. This can be especially useful on large HPC machines where the large parallel file systems are shared among many users who may be doing heavy I/O. Another option is to <em>deinitialize</em> the submodules once not needed if they were recursively cloned and initialized.</p></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <input type="search" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" />
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript. Enable it or <a href="https://google.com/search?q=site:quinoacomputing.org+">use an external search engine</a>.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            Search for symbols, directories, files, pages or modules. You can omit any
            prefix from the symbol or file path; adding a <code>:</code> or <code>/</code>
            suffix lists all members of given symbol or directory. Navigate through the
            list using <span class="m-label m-dim">&darr;</span> and
            <span class="m-label m-dim">&uarr;</span>, press
            <span class="m-label m-dim">Enter</span> to go.
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.<br />Maybe try a full-text <a href="#" id="search-external" data-search-engine="https://google.com/search?q=site:quinoacomputing.org+{query}">search with external engine</a>?</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Quinoa docs, part of the <a href="http://quinoacomputing.org/">Quinoa project</a>. Copyright © J. Bakosi 2012&ndash;2015, <a href="http://www.lansllc.com/">Los Alamos National Security, LLC,</a> 2016&ndash;2018.<br />Generated on Sunday, Feb 17, 2019 based on <a href="https://github.com/quinoacomputing/quinoa/commit/98034f9">98034f9</a> by <a href="http://doxygen.org/">Doxygen</a> and <a href="http://mcss.mosra.cz/">m.css</a>. Contact us via <a href="https://github.com/quinoacomputing/quinoa/">GitHub</a>, <a href="mailto:quinoa@lanl.gov">Email</a> or <a href="https://gitter.im/quinoacomputing/quinoa">Gitter</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>